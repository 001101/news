var app=angular.module("News",["ngRoute","ngSanitize","ngAnimate"]);app.config(["$routeProvider","$provide","$httpProvider",function(e,n,r){"use strict";var i={FEED:0,FOLDER:1,STARRED:2,SUBSCRIPTIONS:3,SHARED:4,EXPLORE:5};n.constant("REFRESH_RATE",60),n.constant("ITEM_BATCH_SIZE",40),n.constant("ITEM_AUTO_PAGE_SIZE",20),n.constant("BASE_URL",OC.generateUrl("/apps/news")),n.constant("FEED_TYPE",i),n.constant("MARK_READ_TIMEOUT",.5),n.constant("SCROLL_TIMEOUT",.1),n.factory("CSRFInterceptor",["$q","BASE_URL","$window",function(e,t,n){return{request:function(r){var i=n.location.href.split(n.location.pathname)[0];return 0!==r.url.indexOf(t)&&0!==r.url.indexOf(i)||(r.headers.requesttoken=oc_requesttoken),r||e.when(r)}}}]);var o={0:t("news","Request failed, network connection unavailable!"),401:t("news","Request unauthorized. Are you logged in?"),403:t("news","Request forbidden. Are you an admin?"),412:t("news","Token expired or app not enabled! Reload the page!"),500:t("news","Internal server error! Please check your data/owncloud.log file for additional information!"),503:t("news","Request failed, ownCloud is in currently in maintenance mode!")};n.factory("ConnectionErrorInterceptor",["$q","$timeout",function(e,t){var n;return{responseError:function(r){return r.status in o&&(n&&t.cancel(n),OC.Notification.hide(),OC.Notification.showHtml(o[r.status]),n=t(function(){OC.Notification.hide()},5e3)),e.reject(r)}}}]),r.interceptors.push("CSRFInterceptor"),r.interceptors.push("ConnectionErrorInterceptor");var s=function(e){return{data:["$http","$route","$q","$location","BASE_URL","ITEM_BATCH_SIZE","FEED_TYPE","SettingsResource","FeedResource",function(t,n,r,i,o,s,a,u,d){var c=u.get("showAll"),l=u.get("oldestFirst"),f=i.search().search||"",h=r.defer();if(null===c||null===l)h.resolve({});else{var p={type:e,limit:s,showAll:c,oldestFirst:l,search:f};if(void 0!==n.current&&void 0!==n.current.params&&void 0!==n.current.params.id&&(p.id=n.current.params.id),e===a.FEED){var g=d.getById(p.id);void 0===g||2===g.ordering?p.oldestFirst=!1:1===g.ordering&&(p.oldestFirst=!0)}t({url:o+"/items",method:"GET",params:p}).success(function(e){h.resolve(e)})}return h.promise}]}},a=function(){return{sites:["$http","$q","BASE_URL","$location","Publisher","SettingsResource",function(e,t,n,r,i,o){var s=t.defer(),a=r.search().lang;return a||(a=o.get("language")),e.get(n+"/settings").then(function(t){i.publishAll(t);var n=o.get("exploreUrl").replace(/\/+$/,""),r=n+"/feeds."+a+".json",s=n+"/feeds.en.json";return e.get(r)["catch"](function(){return e.get(s)})}).then(function(e){s.resolve(e.data)})["catch"](function(){s.reject()}),s.promise}]}};e.when("/items",{controller:"ContentController as Content",templateUrl:"content.html",resolve:s(i.SUBSCRIPTIONS),type:i.SUBSCRIPTIONS}).when("/items/starred",{controller:"ContentController as Content",templateUrl:"content.html",resolve:s(i.STARRED),type:i.STARRED}).when("/items/feeds/:id",{controller:"ContentController as Content",templateUrl:"content.html",resolve:s(i.FEED),type:i.FEED}).when("/items/folders/:id",{controller:"ContentController as Content",templateUrl:"content.html",resolve:s(i.FOLDER),type:i.FOLDER}).when("/explore",{controller:"ExploreController as Explore",templateUrl:"explore.html",resolve:a(),type:i.EXPLORE}).when("/shortcuts",{templateUrl:"shortcuts.html",type:-1})}]),app.run(["$rootScope","$location","$http","$q","$interval","$route","Loading","ItemResource","FeedResource","FolderResource","SettingsResource","Publisher","BASE_URL","FEED_TYPE","REFRESH_RATE",function(e,t,n,r,i,o,s,a,u,d,c,l,f,h,p){"use strict";s.setLoading("global",!0),l.subscribe(a).toChannels(["items","newestItemId","starred"]),l.subscribe(d).toChannels(["folders"]),l.subscribe(u).toChannels(["feeds"]),l.subscribe(c).toChannels(["settings"]);var g=r.defer();n.get(f+"/settings").success(function(e){l.publishAll(e),g.resolve()});var v=r.defer(),m=t.path();n.get(f+"/feeds/active").success(function(e){var n;switch(e.activeFeed.type){case h.FEED:n="/items/feeds/"+e.activeFeed.id;break;case h.FOLDER:n="/items/folders/"+e.activeFeed.id;break;case h.STARRED:n="/items/starred";break;case h.EXPLORE:n="/explore";break;default:n="/items"}/^\/items(\/(starred|explore|feeds\/\d+|folders\/\d+))?\/?$/.test(m)||t.path(n),v.resolve()});var y,E=r.defer();n.get(f+"/feeds").success(function(e){y=e,E.resolve()});var C,F=r.defer();n.get(f+"/folders").success(function(e){C=e,F.resolve()}),r.all([E.promise,F.promise]).then(function(){l.publishAll(y),l.publishAll(C),0===y.feeds.length&&0===C.folders.length&&t.path("/explore")}),r.all([g.promise,v.promise,E.promise,F.promise]).then(function(){o.reload(),s.setLoading("global",!1)}),i(function(){n.get(f+"/feeds").success(function(e){l.publishAll(e)}),n.get(f+"/folders").success(function(e){l.publishAll(e)})},1e3*p),e.$on("$routeChangeStart",function(){s.setLoading("content",!0)}),e.$on("$routeChangeSuccess",function(){s.setLoading("content",!1)}),e.$on("$routeChangeError",function(){t.path("/items")})}]),app.controller("AppController",["Loading","FeedResource","FolderResource",function(e,t,n){"use strict";this.loading=e,this.isFirstRun=function(){return 0===t.size()&&0===n.size()},this.play=function(e){this.playingItem=e}}]),app.controller("ContentController",["Publisher","FeedResource","ItemResource","SettingsResource","data","$route","$routeParams","$location","FEED_TYPE","ITEM_AUTO_PAGE_SIZE","Loading",function(e,t,n,r,i,o,s,a,u,d,c){"use strict";n.clear(),e.publishAll(i),this.isAutoPagingEnabled=!0,n.size()>=d?this.isNothingMoreToAutoPage=!1:this.isNothingMoreToAutoPage=!0,this.getItems=function(){return n.getAll()},this.toggleStar=function(e){n.toggleStar(e)},this.toggleItem=function(e){this.isCompactView()&&(e.show=!e.show)},this.isShowAll=function(){return r.get("showAll")},this.markRead=function(e){var r=n.get(e);r.keepUnread||r.unread!==!0||(n.markItemRead(e),t.markItemOfFeedRead(r.feedId))},this.getFeed=function(e){return t.getById(e)},this.toggleKeepUnread=function(e){var r=n.get(e);r.unread||(t.markItemOfFeedUnread(r.feedId),n.markItemRead(e,!1)),r.keepUnread=!r.keepUnread};var l=this,f=function(){var e=r.get("oldestFirst");if(l.isFeed()){var n=t.getById(s.id);n&&1===n.ordering?e=!0:n&&2===n.ordering&&(e=!1)}return e};this.orderBy=function(){return f()?"id":"-id"},this.isCompactView=function(){return r.get("compact")},this.isCompactExpand=function(){return r.get("compactExpand")},this.autoPagingEnabled=function(){return this.isAutoPagingEnabled},this.markReadEnabled=function(){return!r.get("preventReadOnScroll")},this.scrollRead=function(e){var r=[],i=[];e.forEach(function(e){var t=n.get(e);t.keepUnread||(r.push(e),i.push(t.feedId))}),r.length>0&&(t.markItemsOfFeedsRead(i),n.markItemsRead(r))},this.isFeed=function(){return o.current.$$route.type===u.FEED},this.autoPage=function(){if(!this.isNothingMoreToAutoPage){if(!this.isAutoPagingEnabled)return void(this.autoPageAgain=!0);this.isAutoPagingEnabled=!1,this.autoPageAgain=!1;var t=o.current.$$route.type,i=s.id,u=f(),l=r.get("showAll"),h=this,p=a.search().search;c.setLoading("autopaging",!0),n.autoPage(t,i,u,l,p).success(function(t){e.publishAll(t),t.items.length>=d?h.isAutoPagingEnabled=!0:h.isNothingMoreToAutoPage=!0,h.isAutoPagingEnabled&&h.autoPageAgain&&h.autoPage()}).error(function(){h.isAutoPagingEnabled=!0})["finally"](function(){c.setLoading("autopaging",!1)})}},this.getRelativeDate=function(e){if(void 0!==e&&""!==e){var t=r.get("language"),n=moment.unix(e).locale(t).fromNow()+"";return n}return""},this.refresh=function(){o.reload()},this.getMediaType=function(e){return e&&0===e.indexOf("audio")?"audio":e&&0===e.indexOf("video")?"video":void 0}}]),app.controller("ExploreController",["sites","$rootScope","FeedResource","SettingsResource","$location",function(e,t,n,r,i){"use strict";this.sites=e,this.feeds=Object.keys(e).map(function(t){return[t,e[t]]}).reduce(function(e,t){var n=t[0],r=t[1];return r.forEach(function(e){e.category=n}),e.concat(r)},[]),this.feedExists=function(e){return void 0!==n.getByLocation(e)},this.subscribeTo=function(e){t.$broadcast("addFeed",e)},this.isCategoryShown=function(e){return e.filter(function(e){return void 0===n.getByLocation(e.feed)}).length>0},this.getSupportedLanguageCodes=function(){return r.getSupportedLanguageCodes()},this.getCurrentLanguageCode=function(){var e=i.search().lang;return e||(e=r.get("language")),e},this.showLanguage=function(e){i.url("/explore/?lang="+e)},this.selectedLanguageCode=this.getCurrentLanguageCode()}]),app.controller("NavigationController",["$route","FEED_TYPE","FeedResource","FolderResource","ItemResource","SettingsResource","Publisher","$rootScope","$location","$q",function(e,t,n,r,i,o,s,a,u,d){"use strict";this.feedError="",this.showNewFolder=!1,this.renamingFolder=!1,this.addingFeed=!1,this.addingFolder=!1,this.folderError="",this.renameError="",this.feed={};var c=function(){return parseInt(e.current.params.id,10)};this.getLanguageCode=function(){return o.get("language")},this.getFeeds=function(){return n.getAll()},this.getFolders=function(){return r.getAll()},this.markFolderRead=function(e){n.markFolderRead(e),n.getByFolderId(e).forEach(function(e){i.markFeedRead(e.id)})},this.markFeedRead=function(e){i.markFeedRead(e),n.markFeedRead(e)},this.markRead=function(){i.markRead(),n.markRead()},this.isShowAll=function(){return o.get("showAll")},this.getFeedsOfFolder=function(e){return n.getByFolderId(e)},this.getUnreadCount=function(){return n.getUnreadCount()},this.isUnread=function(){return this.getUnreadCount()>0},this.getFeedUnreadCount=function(e){var t=n.getById(e);return void 0!==t?t.unreadCount:0},this.isFeedUnread=function(e){return this.getFeedUnreadCount(e)>0},this.getFolderUnreadCount=function(e){return n.getFolderUnreadCount(e)},this.isFolderUnread=function(e){return this.getFolderUnreadCount(e)>0},this.getStarredCount=function(){return i.getStarredCount()},this.isStarredUnread=function(){return this.getStarredCount()>0},this.toggleFolder=function(e){r.toggleOpen(e)},this.hasFeeds=function(e){return void 0!==n.getFolderUnreadCount(e)},this.subFeedActive=function(r){var i=e.current.$$route.type;if(i===t.FEED){var o=n.getById(c());if(void 0!==o&&o.folderId===r)return!0}return!1},this.isSubscriptionsActive=function(){return e.current&&e.current.$$route.type===t.SUBSCRIPTIONS},this.isStarredActive=function(){return e.current&&e.current.$$route.type===t.STARRED},this.isExploreActive=function(){return e.current&&e.current.$$route.type===t.EXPLORE},this.isFolderActive=function(n){return e.current&&e.current.$$route.type===t.FOLDER&&c()===n},this.isFeedActive=function(n){return e.current&&e.current.$$route.type===t.FEED&&c()===n},this.folderNameExists=function(e){return e=e||"",void 0!==r.get(e.trim())},this.feedUrlExists=function(e){return e=e||"",e=e.trim(),void 0!==n.get(e)||void 0!==n.get("http://"+e)},this.createFeed=function(e){var t=this;this.showNewFolder=!1,this.addingFeed=!0;var i=e.newFolder,o=e.existingFolder||{id:0};void 0===i||""===i?(o.getsFeed=!0,n.create(e.url,o.id,void 0).then(function(e){s.publishAll(e),u.path("/items/feeds/"+e.feeds[0].id+"/")})["finally"](function(){o.getsFeed=void 0,e.url="",t.addingFeed=!1})):r.create(i).then(function(n){s.publishAll(n),e.existingFolder=r.get(n.folders[0].name),e.newFolder=void 0,t.createFeed(e)})},this.createFolder=function(e){var t=this;this.addingFolder=!0,r.create(e.name).then(function(e){s.publishAll(e)})["finally"](function(){t.addingFolder=!1,e.name=""})},this.moveFeed=function(t,r){var i=!1,o=n.getById(t);o.folderId!==r&&((this.isFolderActive(o.folderId)||this.isFolderActive(r))&&(i=!0),n.move(t,r),i&&e.reload())},this.renameFeed=function(e){n.patch(e.id,{title:e.title}),e.editing=!1},this.renameFolder=function(e,t){e.renameError="",this.renamingFolder=!0;var n=this;e.name===t?(e.renameError="",e.editing=!1,this.renamingFolder=!1):r.rename(e.name,t).then(function(){e.renameError="",e.editing=!1},function(t){e.renameError=t})["finally"](function(){n.renamingFolder=!1})},this.reversiblyDeleteFeed=function(t){n.reversiblyDelete(t.id)["finally"](function(){e.reload()})},this.undoDeleteFeed=function(t){n.undoDelete(t.id)["finally"](function(){e.reload()})},this.deleteFeed=function(e){n["delete"](e.url)},this.reversiblyDeleteFolder=function(t){d.all(n.reversiblyDeleteFolder(t.id),r.reversiblyDelete(t.name))["finally"](function(){e.reload()})},this.undoDeleteFolder=function(t){d.all(n.undoDeleteFolder(t.id),r.undoDelete(t.name))["finally"](function(){e.reload()})},this.deleteFolder=function(e){n.deleteFolder(e.id),r["delete"](e.name)},this.setOrdering=function(t,r){n.patch(t.id,{ordering:r}),e.reload()},this.togglePinned=function(e){var t=n.getById(e);return t?n.patch(e,{pinned:!t.pinned}):void 0},this.setUpdateMode=function(e,t){return n.patch(e,{updateMode:t})},this.toggleFullText=function(t){a.$broadcast("$routeChangeStart"),n.toggleFullText(t.id)["finally"](function(){a.$broadcast("$routeChangeSuccess"),e.reload()})},this.search=function(e){""===e?u.search("search",null):u.search("search",e)};var l=this;a.$on("moveFeedToFolder",function(e,t){l.moveFeed(t.feedId,t.folderId)});var f=function(){var i;e.current&&(i=e.current.$$route.type);var o=0;if(i===t.FOLDER)o=c();else if(i===t.FEED){var s=n.getById(c());s&&(o=s.folderId)}var a;0!==o&&(a=r.getById(o)),l.feed.existingFolder=a};a.$on("$routeChangeSuccess",function(){f()})}]),app.controller("SettingsController",["$route","$q","SettingsResource","ItemResource","OPMLParser","OPMLImporter","Publisher",function(e,t,n,r,i,o,s){"use strict";this.isOPMLImporting=!1,this.isArticlesImporting=!1,this.opmlImportError=!1,this.articleImportError=!1;var a=function(t,r){n.set(t,r),["showAll","oldestFirst","compact"].indexOf(t)>=0&&e.reload()};this.toggleSetting=function(e){a(e,!this.getSetting(e))},this.getSetting=function(e){return n.get(e)},this.importOPML=function(e){this.opmlImportError=!1,this.articleImportError=!1;try{this.isOPMLImporting=!1;var t=i.parse(e),n=this,r=5;o.importFolders(t).then(function(e){return o.importFeedQueue(e,r)})["finally"](function(){n.isOPMLImporting=!1})}catch(s){console.error(s),this.isOPMLImporting=!1,this.opmlImportError=!0}},this.importArticles=function(e){this.opmlImportError=!1,this.articleImportError=!1;try{this.isArticlesImporting=!0;var t=JSON.parse(e),n=this;r.importArticles(t).success(function(e){s.publishAll(e)})["finally"](function(){n.isArticlesImporting=!1})}catch(i){console.error(i),this.articleImportError=!0,this.isArticlesImporting=!1}}}]),app.filter("trustUrl",["$sce",function(e){"use strict";return function(t){return e.trustAsResourceUrl(t)}}]),app.filter("unreadCountFormatter",function(){"use strict";return function(e){return e>999?"999+":e}}),app.factory("FeedResource",["Resource","$http","BASE_URL","$q",function(e,t,n,r){"use strict";var i=function(t,n,r){e.call(this,t,n,"url"),this.ids={},this.locations={},this.unreadCount=0,this.folderUnreadCount={},this.folderIds={},this.$q=r};return i.prototype=Object.create(e.prototype),i.prototype.receive=function(t){e.prototype.receive.call(this,t),this.updateUnreadCache(),this.updateFolderCache()},i.prototype.clear=function(){e.prototype.clear.call(this),this.unreadCount=0,this.folderUnreadCount={},this.folderIds={},this.ids={},this.locations={}},i.prototype.updateUnreadCache=function(){this.unreadCount=0,this.folderUnreadCount={};var e=this;this.values.forEach(function(t){t.unreadCount&&(e.unreadCount+=t.unreadCount),void 0!==t.folderId&&(e.folderUnreadCount[t.folderId]=e.folderUnreadCount[t.folderId]||0,e.folderUnreadCount[t.folderId]+=t.unreadCount)})},i.prototype.updateFolderCache=function(){this.folderIds={};var e=this;this.values.forEach(function(t){e.folderIds[t.folderId]=e.folderIds[t.folderId]||[],e.folderIds[t.folderId].push(t)})},i.prototype.add=function(t){e.prototype.add.call(this,t),void 0!==t.id&&(this.ids[t.id]=this.hashMap[t.url]),void 0!==t.location&&(this.locations[t.location]=this.hashMap[t.url])},i.prototype.markRead=function(){this.values.forEach(function(e){e.unreadCount=0}),this.updateUnreadCache()},i.prototype.markFeedRead=function(e){this.ids[e].unreadCount=0,this.updateUnreadCache()},i.prototype.markFolderRead=function(e){this.values.forEach(function(t){t.folderId===e&&(t.unreadCount=0)}),this.updateUnreadCache()},i.prototype.markItemOfFeedRead=function(e){this.ids[e].unreadCount-=1,this.updateUnreadCache()},i.prototype.markItemsOfFeedsRead=function(e){var t=this;e.forEach(function(e){t.ids[e].unreadCount-=1}),this.updateUnreadCache()},i.prototype.markItemOfFeedUnread=function(e){this.ids[e].unreadCount+=1,this.updateUnreadCache()},i.prototype.getUnreadCount=function(){return this.unreadCount},i.prototype.getFolderUnreadCount=function(e){return this.folderUnreadCount[e]},i.prototype.getByFolderId=function(e){return this.folderIds[e]||[]},i.prototype.getById=function(e){return this.ids[e]},i.prototype.getByLocation=function(e){return this.locations[e]},i.prototype.move=function(e,t){var n=this.getById(e);return n.folderId=t,this.updateFolderCache(),this.updateUnreadCache(),this.patch(e,{folderId:t})},i.prototype.create=function(e,t,n){e=e.trim(),e.startsWith("http")||(e="https://"+e),void 0!==n&&(n=n.trim());var r={url:e,folderId:t||0,title:n||e,unreadCount:0};this.add(r),this.updateFolderCache();var i=this.$q.defer();return this.http({method:"POST",url:this.BASE_URL+"/feeds",data:{url:e,parentFolderId:t||0,title:n}}).success(function(e){i.resolve(e)}).error(function(e){r.faviconLink="",r.error=e.message,i.reject()}),i.promise},i.prototype.reversiblyDelete=function(e,t,n){var r=this.getById(e);return r&&n!==!0&&(r.deleted=!0),t!==!1&&this.updateUnreadCache(),this.http["delete"](this.BASE_URL+"/feeds/"+e)},i.prototype.reversiblyDeleteFolder=function(e){var t=this,n=[];this.getByFolderId(e).forEach(function(e){n.push(t.reversiblyDelete(e.id,!1,!0))}),this.updateUnreadCache();var r=this.$q.all(n);return r.promise},i.prototype["delete"]=function(t,n){var r=this.get(t);return void 0!==r&&r.id&&delete this.ids[r.id],void 0!==r&&r.location&&delete this.locations[r.location],e.prototype["delete"].call(this,t),n!==!1&&(this.updateUnreadCache(),this.updateFolderCache()),r},i.prototype.deleteFolder=function(e){var t=this;this.getByFolderId(e).forEach(function(e){t["delete"](e.url,!1)}),this.updateUnreadCache(),this.updateFolderCache()},i.prototype.undoDelete=function(e,t){var n=this.getById(e);return n&&(n.deleted=!1),t!==!1&&this.updateUnreadCache(),this.http.post(this.BASE_URL+"/feeds/"+e+"/restore")},i.prototype.undoDeleteFolder=function(e){var t=this,n=[];this.getByFolderId(e).forEach(function(e){n.push(t.undoDelete(e.id,!1))}),this.updateUnreadCache();var r=this.$q.all(n);return r.promise},i.prototype.setOrdering=function(e,t){var n=this.getById(e);if(n){n.ordering=t;var r=this.BASE_URL+"/feeds/"+e;return this.http.patch(r,{ordering:t})}},i.prototype.setPinned=function(e,t){var n=this.getById(e);if(n){n.pinned=t;var r=this.BASE_URL+"/feeds/"+e;return this.http.patch(r,{pinned:t})}},i.prototype.patch=function(e,t){var n=this.getById(e);if(n){Object.keys(t).forEach(function(e){n[e]=t[e]});var r=this.BASE_URL+"/feeds/"+e;return this.http.patch(r,t)}},i.prototype.toggleFullText=function(e){var t=this.getById(e);return this.patch(e,{fullTextEnabled:!t.fullTextEnabled})},new i(t,n,r)}]),app.factory("FolderResource",["Resource","$http","BASE_URL","$q",function(e,t,n,r){"use strict";var i=function(t,n,r){e.call(this,t,n,"name"),this.deleted=null,this.$q=r,this.ids={}};return i.prototype=Object.create(e.prototype),i.prototype.add=function(t){e.prototype.add.call(this,t),void 0!==t.id&&(this.ids[t.id]=this.hashMap[t.name])},i.prototype.clear=function(){e.prototype.clear.call(this),this.ids={}},i.prototype["delete"]=function(t){var n=this.get(t);return void 0!==n&&n.id&&delete this.ids[n.id],e.prototype["delete"].call(this,t),n},i.prototype.toggleOpen=function(e){var t=this.get(e);return t.opened=!t.opened,this.http({url:this.BASE_URL+"/folders/"+t.id+"/open",method:"POST",data:{folderId:t.id,open:t.opened}})},i.prototype.rename=function(e,t){var n=this.get(e),r=this.$q.defer(),i=this;return this.http({url:this.BASE_URL+"/folders/"+n.id+"/rename",method:"POST",data:{folderName:t}}).success(function(){n.name=t,delete i.hashMap[e],i.hashMap[t]=n,r.resolve()}).error(function(e){r.reject(e.message)}),r.promise},i.prototype.getById=function(e){return this.ids[e]},i.prototype.create=function(e){e=e.trim();var t={name:e};this.add(t);var n=this.$q.defer();return this.http({url:this.BASE_URL+"/folders",method:"POST",data:{folderName:e}}).success(function(e){n.resolve(e)}).error(function(e){t.error=e.message}),n.promise},i.prototype.reversiblyDelete=function(e){var t=this.get(e),n=t.id;return t.deleted=!0,this.http["delete"](this.BASE_URL+"/folders/"+n)},i.prototype.undoDelete=function(e){var t=this.get(e),n=t.id;return t.deleted=!1,this.http.post(this.BASE_URL+"/folders/"+n+"/restore")},new i(t,n,r)}]),app.factory("ItemResource",["Resource","$http","BASE_URL","ITEM_BATCH_SIZE",function(e,t,n,r){"use strict";var i=function(t,n,r){e.call(this,t,n),this.batchSize=r,this.clear()};return i.prototype=Object.create(e.prototype),i.prototype.clear=function(){this.starredCount=0,this.lowestId=0,this.highestId=0,e.prototype.clear.call(this)},i.prototype.receive=function(t,n){switch(n){case"newestItemId":this.newestItemId=t;break;case"starred":this.starredCount=t;break;default:var r=this;t.forEach(function(e){0===r.lowestId&&(r.lowestId=e.id),0===r.highestId&&(r.highestId=e.id),e.id>r.highestId&&(r.highestId=e.id),e.id<r.lowestId&&(r.lowestId=e.id)}),e.prototype.receive.call(this,t,n)}},i.prototype.getNewestItemId=function(){return this.newestItemId},i.prototype.getStarredCount=function(){return this.starredCount},i.prototype.star=function(e,t){void 0===t&&(t=!0);var n=this.get(e),r=this.BASE_URL+"/items/"+n.feedId+"/"+n.guidHash+"/star";return n.starred=t,t?this.starredCount+=1:this.starredCount-=1,this.http({url:r,method:"POST",data:{isStarred:t}})},i.prototype.toggleStar=function(e){this.get(e).starred?this.star(e,!1):this.star(e,!0)},i.prototype.markItemRead=function(e,t){return void 0===t&&(t=!0),this.get(e).unread=!t,this.http({url:this.BASE_URL+"/items/"+e+"/read",method:"POST",data:{isRead:t}})},i.prototype.markItemsRead=function(e){var t=this;return e.forEach(function(e){t.get(e).unread=!1}),this.http({url:this.BASE_URL+"/items/read/multiple",method:"POST",data:{itemIds:e}})},i.prototype.markFeedRead=function(e,t){void 0===t&&(t=!0);var n=this.values.filter(function(t){return t.feedId===e});return n.forEach(function(e){e.unread=!t}),this.http.post(this.BASE_URL+"/feeds/"+e+"/read",{highestItemId:this.getNewestItemId()})},i.prototype.markRead=function(){return this.values.forEach(function(e){e.unread=!1}),this.http({url:this.BASE_URL+"/items/read",method:"POST",data:{highestItemId:this.getNewestItemId()}})},i.prototype.autoPage=function(e,t,n,r,i){var o;return o=n?this.highestId:this.lowestId,this.http({url:this.BASE_URL+"/items",method:"GET",params:{type:e,id:t,offset:o,limit:this.batchSize,oldestFirst:n,showAll:r,search:i}})},i.prototype.importArticles=function(e){return this.http({url:this.BASE_URL+"/feeds/import/articles",method:"POST",data:{json:e}})},new i(t,n,r)}]),app.service("Loading",function(){"use strict";this.loading={global:!1,content:!1,autopaging:!1},this.setLoading=function(e,t){this.loading[e]=t},this.isLoading=function(e){return this.loading[e]}}),app.service("OPMLImporter",["FeedResource","FolderResource","Publisher","$q",function(e,t,n,r){"use strict";var i=function(o){var s=r.defer();if(o.length>0){var a=o.pop(),u=a.url,d=a.title,c=0,l=a.folderName;if(void 0!==l&&void 0!==t.get(l)){var f=t.get(l);f.opened=!0,c=f.id,f.getsFeed=!0,f.getsFeedCounter=f.getsFeedCounter||0,f.getsFeedCounter+=1}void 0!==u&&void 0===e.get(u)&&e.create(u,c,d).then(function(e){n.publishAll(e)})["finally"](function(){0!==c&&(f.getsFeedCounter-=1,0===f.getsFeedCounter&&(f.getsFeed=!1)),i(o)})}else s.resolve();return s.promise};this.importFolders=function(e){var i=[],o=[];e.folders.forEach(function(e){if(void 0!==e.name){if(void 0===t.get(e.name)){var r=t.create(e.name).then(function(e){n.publishAll(e)});o.push(r)}e.feeds.forEach(function(t){t.folderName=e.name,i.push(t)})}}),i=i.concat(e.feeds);var s=r.defer();return r.all(o)["finally"](function(){s.resolve(i)}),s.promise},this.importFeedQueue=function(e,t){for(var n=r.defer(),o=[],s=0;t>s;s+=1)o.push(i(e));return r.all(o).then(function(){n.resolve()}),n.promise}}]),app.service("OPMLParser",function(){"use strict";var e=function(e){var t=e.attr("xmlUrl")||e.attr("htmlUrl"),n=e.attr("title")||e.attr("text")||t;return void 0===t?{type:"folder",name:n,feeds:[]}:{type:"feed",name:n,url:t}},t=function(n,r,i){for(var o=0;o<n.length;o+=1){var s=$(n[o]),a=e(s);"feed"===a.type?r.feeds.push(a):i?(t(s.children("outline"),a,!1),r.folders.push(a)):t(s.children("outline"),r,!1)}return r};this.parse=function(e){e=$.parseXML(e);var n=$(e).find("body > outline"),r={feeds:[],folders:[]};return t(n,r,!0)}}),app.service("Publisher",function(){"use strict";this.channels={},this.subscribe=function(e){var t=this;return{toChannels:function(n){n.forEach(function(n){t.channels[n]=t.channels[n]||[],t.channels[n].push(e)})}}},this.publishAll=function(e){var t=this;Object.keys(e).forEach(function(n){var r=t.channels[n];void 0!==r&&r.forEach(function(t){t.receive(e[n],n)})})}}),app.factory("Resource",function(){"use strict";var e=function(e,t,n){this.id=n||"id",this.values=[],this.hashMap={},this.http=e,this.BASE_URL=t};return e.prototype.receive=function(e){var t=this;e.forEach(function(e){t.add(e)})},e.prototype.add=function(e){var t=this.hashMap[e[this.id]];void 0===t?(this.values.push(e),this.hashMap[e[this.id]]=e):Object.keys(e).forEach(function(n){t[n]=e[n]})},e.prototype.size=function(){return this.values.length},e.prototype.get=function(e){return this.hashMap[e]},e.prototype["delete"]=function(e){var t=this,n=this.values.findIndex(function(n){return n[t.id]===e});void 0!==n&&this.values.splice(n,1),void 0!==this.hashMap[e]&&delete this.hashMap[e]},e.prototype.clear=function(){for(this.hashMap={};this.values.length>0;)this.values.pop()},e.prototype.getAll=function(){return this.values},e}),app.service("SettingsResource",["$http","BASE_URL",function(e,t){"use strict";this.settings={language:"en",showAll:null,compact:!1,oldestFirst:null,preventReadOnScroll:!1,compactExpand:!1,exploreUrl:""},this.defaultLanguageCode="en",this.supportedLanguageCodes=["ar-ma","ar","bg","ca","cs","cv","da","de","el","en","en-ca","en-gb","eo","es","et","eu","fi","fr-ca","fr","gl","he","hi","hu","id","is","it","ja","ka","ko","lv","ms-my","nb","ne","nl","pl","pt-br","pt","ro","ru","sk","sl","sv","th","tr","tzm-la","tzm","uk","zh-cn","zh-tw"],this.getSupportedLanguageCodes=function(){return this.supportedLanguageCodes},this.receive=function(e){var t=this;Object.keys(e).forEach(function(n){var r=e[n];"language"===n&&(r=t.processLanguageCode(r)),t.settings[n]=r})},this.get=function(e){return this.settings[e]},this.set=function(n,r){return this.settings[n]=r,e({url:t+"/settings",method:"PUT",data:{language:this.settings.language,showAll:this.settings.showAll,compact:this.settings.compact,oldestFirst:this.settings.oldestFirst,compactExpand:this.settings.compactExpand,preventReadOnScroll:this.settings.preventReadOnScroll}})},this.processLanguageCode=function(e){return e=e.replace("_","-").toLowerCase(),this.supportedLanguageCodes.indexOf(e)<0&&(e=e.split("-")[0]),this.supportedLanguageCodes.indexOf(e)<0&&(e=this.defaultLanguageCode),e}}]),function(e,t,n,r,i,o){"use strict";var s=e.location,a=e.localStorage,u=function(e,t,r){var i=n.isContentHandlerRegistered,o=function(e,t){return i?"new"!==i(e,t):a.getItem("registeredHandler")===t};n.registerContentHandler&&!o(e,t)&&(n.registerContentHandler(e,t,r),i||a.setItem("registeredHandler",t))},d=s.protocol+"//"+s.host+s.pathname,c=d+"?subscribe_to=%s",l="application/vnd.mozilla.maybe.feed",f="ownCloud News @ "+d;u(l,c,f),i(t).ready(function(){var e=r("?subscribe_to");if(e&&"undefined"!==e){i("#new-feed").show();var t=i('input[ng-model="Navigation.feed.url"]');t.val(e),t.trigger("input"),setTimeout(function(){t.focus()},1e3)}})}(window,document,navigator,url,$),function(e,t){"use strict";e.addEventListener("beforeunload",function(){var e=t.querySelector("#app-content");e.scrollTo(0,0)})}(window,document),function(e,t,n){"use strict";var r=function(e){return!(e.is("input")||e.is("select")||e.is("textarea")||e.is("checkbox"))},i=function(e){return!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)},o=function(e){var t=".active > .app-navigation-entry-menu .mark-read button",n=e.find(t);n.length>0&&n.trigger("click")},s=function(e,t){var n=e.offset().top-t.offset().top,r=n+e.height(),i=t.height();return n>=0&&i>r},a=function(e,t,n){0===e.length||!n&&s(e,t)||t.scrollTop(e.offset().top-t.offset().top+t.scrollTop())},u=function(e){var t=e.find(".active");a(t,e.children("ul"),!0)},d=function(e){e.find(".active > a:visible").trigger("click")},c=function(e,t){if(0===t.scrollTop()){var n=t.find(".pull-to-refresh");n.hasClass("show-pull-to-refresh")?n.hasClass("done")&&d(e):n.addClass("show-pull-to-refresh")}},l=function(e,t){e.children("a:visible").trigger("click"),a(e,t.children("ul"))},f=function(e){var t=e.find(".active"),r=e.find(".explore-feed,.subscriptions-feed:visible,.starred-feed:visible,.feed:visible");if(t.hasClass("folder"))for(;t.length>0;){var i=t.find(".feed:visible");if(i.length>0)return void l(n(i[0]),e);t=t.next(".folder")}else for(var o=0;o<r.length-1;o+=1){var s=r[o];if(s===t[0]){var a=r[o+1];l(n(a),e);break}}},h=function(e){return e.parent().parent(".folder")},p=function(e,t){var r,i=e.find(".folder:visible");r=t?i.length-1:0,i.length>0&&l(n(i[r]),e)},g=function(e){var t=e.find(".active");if(t.hasClass("folder"))l(t.prevAll(".folder:visible").first(),e);else if(t.hasClass("feed")){var n=h(t);n.length>0?l(n,e):p(e,!0)}else p(e,!0)},v=function(e){var t=e.find(".active");if(t.hasClass("folder"))l(t.nextAll(".folder:visible").first(),e);else if(t.hasClass("feed")){var n=h(t);n.length>0?l(n.nextAll(".folder:visible").first(),e):p(e)}else p(e)},m=function(e){var t=e.find(".active"),r=e.find(".explore-feed,.subscriptions-feed:visible,.starred-feed:visible,.feed:visible");if(t.hasClass("folder")){for(var i=t.prev(".folder");i.length>0;){var o=i.find(".feed:visible");if(o.length>0)return void l(n(o[o.length-1]),e);i=i.prev(".folder")}var s=t.siblings(".feed");if(s.length>0)return void l(n(s[s.length-1]),e);var a=n(".starred-feed:visible");return void(a.length>0&&l(a,e))}for(var u=r.length-1;u>0;u-=1){var d=r[u];if(d===t[0]){var c=r[u-1];l(n(c),e);break}}},y=function(e,t){var r=e.find(".item");r.each(function(e,r){return r=n(r),r.height()+r.position().top>30?(t(r),!1):void 0})},E=function(e){y(e,function(e){e.find(".toggle-keep-unread").trigger("click")})},C=function(e){y(e,function(e){e.find(".star").trigger("click")})},F=function(e){y(e,function(e){e.find(".utils").trigger("click")})},I=function(t){y(t,function(t){t.trigger("click"),e.open(t.find(".external:visible").attr("href"),"_blank")})},w=function(e,t,n){e.scrollTop(t.offset().top-e.offset().top+e.scrollTop()),n&&y(e,function(e){e.hasClass("open")||e.find(".utils").trigger("click")})},R=function(e,t){var r=e.find(".item"),i=!1;r.each(function(r,o){return o=n(o),0===o.position().top&&t&&!o.hasClass("open")||o.position().top>10?(w(e,o,t),i=!0,!1):void 0}),i||e.scrollTop(e.prop("scrollHeight"))},b=function(e,t,r){var i=t.find(".item"),o=!1;i.each(function(i,s){if(s=n(s),s.position().top+10>=0){var a=s.prev();return a.length>0?w(t,a,r):(c(e,t),t.scrollTop(0)),o=!0,!1}}),!o&&i.length>0&&w(t,i.last())};n(t).keyup(function(e){var t=e.keyCode,s=n("#app-content"),a=n("#app-navigation"),l=n("#articles.compact").length>0,h="true"===n("#articles").attr("news-compact-expand"),p=l&&h;r(n(":focus"))&&i(e)?[74,78,39].indexOf(t)>=0?(e.preventDefault(),R(s,p)):[75,80,37].indexOf(t)>=0?(e.preventDefault(),
b(a,s,p)):[85].indexOf(t)>=0?(e.preventDefault(),E(s)):[69].indexOf(t)>=0?(e.preventDefault(),F(s)):[73,83,76].indexOf(t)>=0?(e.preventDefault(),C(s)):[72].indexOf(t)>=0?(e.preventDefault(),C(s),R(s)):[79].indexOf(t)>=0?(e.preventDefault(),I(s)):[82].indexOf(t)>=0?(e.preventDefault(),d(a)):[70].indexOf(t)>=0?(e.preventDefault(),f(a)):[68].indexOf(t)>=0?(e.preventDefault(),m(a)):[67].indexOf(t)>=0?(e.preventDefault(),g(a)):[65].indexOf(t)>=0?(e.preventDefault(),u(a)):[86].indexOf(t)>=0?(e.preventDefault(),v(a)):[81].indexOf(t)>=0?(e.preventDefault(),n("#searchbox").focus()):[33].indexOf(t)>=0&&c(a,s):r(n(":focus"))&&e.shiftKey&&[65].indexOf(t)>=0&&(e.preventDefault(),o(a))})}(window,document,$),window.News=window.News||{},function(e,t,n,r,i){"use strict";var o=[];r.addArticleAction=function(e){o.push(e)},r.getArticleActionPlugins=function(){return o}}(window,document,jQuery,window.News),app.run(["$document","$rootScope",function(e,t){"use strict";e.click(function(e){t.$broadcast("documentClicked",e)})}]),app.directive("appNavigationEntryUtils",function(){"use strict";return{restrict:"C",link:function(e,t){var n=t.siblings(".app-navigation-entry-menu"),r=$(t).find(".app-navigation-entry-utils-menu-button button");r.click(function(){n.toggleClass("open")}),e.$on("documentClicked",function(e,t){t.target!==r[0]&&n.removeClass("open")})}}}),app.directive("newsAddFeed",["$rootScope","$timeout",function(e,t){"use strict";return{restrict:"A",link:function(n,r){e.$on("addFeed",function(e,i){t(function(){r.is(":animated")?(r.stop(!0,!0),r.show()):r.is(":visible")||r.slideDown(),r.find('[ng-model="Navigation.feed.url"]').focus()}),n.Navigation.feed.url=i})}}}]),app.directive("newsArticleActions",function(){"use strict";return{restrict:"A",scope:{newsArticleActions:"=",noPlugins:"="},link:function(e,t){for(var n=News.getArticleActionPlugins(),r=0;r<n.length;r+=1)n[r](t,e.newsArticleActions);e.noPlugins=0===n.length}}}),app.directive("newsAutoFocus",["$timeout",function(e){"use strict";return function(t,n,r){var i=n;r.newsAutoFocus&&(i=$(r.newsAutoFocus)),e(function(){i.focus()},0)}}]),app.directive("newsBindHtmlUnsafe",function(){"use strict";return function(e,t,n){e.$watch(n.newsBindHtmlUnsafe,function(){t.html(e.$eval(n.newsBindHtmlUnsafe))})}}),app.directive("newsDraggable",function(){"use strict";return function(e,t,n){var r=e.$eval(n.newsDraggable);angular.isDefined(r)?t.draggable(r):t.draggable(),n.$observe("newsDraggableDisable",function(e){"true"===e?t.draggable("disable"):t.draggable("enable")})}}),app.directive("newsDroppable",["$rootScope",function(e){"use strict";return function(t,n,r){var i={accept:".feed",hoverClass:"drag-and-drop",greedy:!0,drop:function(i,o){$(".drag-and-drop").removeClass("drag-and-drop");var s={folderId:parseInt(n.data("id"),10),feedId:parseInt($(o.draggable).data("id"),10)};e.$broadcast("moveFeedToFolder",s),t.$apply(r.droppable)}};n.droppable(i)}}]),app.directive("newsFinishedTransition",function(){"use strict";return function(e,t,n){t.on("transitionend",function(){t.addClass(n.newsFinishedTransition)})}}),app.directive("newsFocus",["$timeout","$interpolate",function(e,t){"use strict";return function(n,r,i){r.click(function(){var r=$(t(i.newsFocus)(n));e(function(){r.focus()},500)})}}]),app.directive("newsInstantNotification",function(){"use strict";return{restrict:"E",link:function(e,t){t.hide();var n=t.html();OC.Notification.showHtml(n)}}}),app.directive("newsPlayOne",["$rootScope",function(e){"use strict";return{restrict:"A",link:function(t,n){n.on("play",function(){e.$broadcast("playing",n)}),e.$on("playing",function(e,t){t[0]!==n[0]&&n[0].pause()})}}}]),app.directive("newsPullToRefresh",["$rootScope",function(e){"use strict";var t=!1;return{restrict:"A",scope:{newsPullToRefresh:"="},link:function(n,r){e.$on("$routeChangeStart",function(){t=!1,n.newsPullToRefresh=!1}),r.on("scroll",function(){0===r.scrollTop()&&t&&(n.newsPullToRefresh=!0),t=!0})}}}]),app.directive("newsReadFile",function(){"use strict";return function(e,t,n){t.change(function(){var r=t[0].files[0],i=new FileReader;i.onload=function(t){e.$fileContent=t.target.result,e.$apply(n.newsReadFile)},i.readAsText(r)})}}),app.directive("newsRefreshMasonry",["$timeout",function(e){"use strict";var t=function(t){e(function(){e(function(){t.parent().masonry({itemSelector:".grid-item",gutter:25,columnWidth:300})},100)})};return function(e,n){e.$last&&t(n)}}]),app.directive("newsScroll",["$timeout","ITEM_AUTO_PAGE_SIZE","MARK_READ_TIMEOUT","SCROLL_TIMEOUT",function(e,t,n,r){"use strict";var i,o=function(e,t,n){for(var r=0,i=t.find(".item"),o=i.length-1;o>=0;o-=1){var s=$(i[o]);if(r>=e)break;if(s.position().top<0){n.$apply(n.newsScrollAutoPage);break}r+=1}},s=function(e,t,n){if(e){var r=[],i=t.find(".item:not(.read)");i.each(function(e,t){var n=$(t);return n.position().top<=-10?void r.push(parseInt(n.data("id"),10)):!1}),n.itemIds=r,n.$apply(n.newsScrollMarkRead)}};return{restrict:"A",scope:{newsScroll:"@",newsScrollAutoPage:"&",newsScrollMarkRead:"&",newsScrollEnabledMarkRead:"="},link:function(a,u){var d=!0,c=u;a.newsScroll&&(c=$(a.newsScroll));var l=function(){d&&(d=!1,e(function(){d=!0},1e3*r),o(t,u,a),i&&e.cancel(i),i=e(function(){s(a.newsScrollEnabledMarkRead,u,a),i=void 0},1e3*n))};c.on("scroll",l),a.$on("$destroy",function(){c.off("scroll",l)})}}}]),app.directive("newsSearch",["$document","$location",function(e,t){"use strict";return{restrict:"E",scope:{onSearch:"="},link:function(e){var n=$("#searchbox");n.val(t.search().search);var r=function(){var t=n.val();e.$apply(function(){e.onSearch(t)})};n.on("search keyup",function(e){"search"!==e.type&&13!==e.keyCode||r()}),e.$watch(function(){return t.search()},function(e){e&&e.search?n.val(e.search):n.val("")})}}}]),app.directive("newsStickyMenu",function(){"use strict";return function(e,t,n){var r=40;$(n.newsStickyMenu).scroll(function(){var e=$(this).scrollTop();e>r?(t.addClass("fixed"),t.css("top",e)):t.removeClass("fixed")})}}),app.directive("newsStopPropagation",function(){"use strict";return{restrict:"A",link:function(e,t){t.bind("click",function(e){e.stopPropagation()})}}}),app.directive("newsTimeout",["$timeout","$rootScope",function(e,t){"use strict";return{restrict:"A",scope:{newsTimeout:"&"},link:function(n,r){var i=!1,o=7,s=e(n.newsTimeout,1e3*o);n.$on("$destroy",function(){i=!0,e.cancel(s)}),t.$on("$locationChangeStart",function(){e.cancel(s),i||(i=!0,r.remove(),n.newsTimeout())})}}}]),app.directive("newsTitleUnreadCount",["$window",function(e){"use strict";var t=e.document.title,n=t.split("-"),r=n[0]||"News",i=n[1]||"ownCloud";return{restrict:"E",scope:{unreadCount:"@"},link:function(t,n,o){o.$observe("unreadCount",function(t){"0"!==t?e.document.title=r+"("+t+") - "+i:e.document.title=r+" - "+i})}}}]),app.directive("newsToggleShow",function(){"use strict";return{restrict:"A",scope:{newsToggleShow:"@"},link:function(e,t){t.click(function(){var t=$(e.newsToggleShow);t.toggle()})}}}),app.directive("newsTriggerClick",function(){"use strict";return function(e,t,n){t.click(function(){$(n.newsTriggerClick).trigger("click")})}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFwcC5qcyIsIkNvbmZpZy5qcyIsIlJ1bi5qcyIsIkFwcENvbnRyb2xsZXIuanMiLCJDb250ZW50Q29udHJvbGxlci5qcyIsIkV4cGxvcmVDb250cm9sbGVyLmpzIiwiTmF2aWdhdGlvbkNvbnRyb2xsZXIuanMiLCJTZXR0aW5nc0NvbnRyb2xsZXIuanMiLCJUcnVzdFVybC5qcyIsIlVucmVhZENvdW50Rm9ybWF0dGVyLmpzIiwiRmVlZFJlc291cmNlLmpzIiwiRm9sZGVyUmVzb3VyY2UuanMiLCJJdGVtUmVzb3VyY2UuanMiLCJMb2FkaW5nLmpzIiwiT1BNTEltcG9ydGVyLmpzIiwiT1BNTFBhcnNlci5qcyIsIlB1Ymxpc2hlci5qcyIsIlJlc291cmNlLmpzIiwiU2V0dGluZ3NSZXNvdXJjZS5qcyIsIkV4dGVyblN1YnNjcmlwdGlvbi5qcyIsIkZpeGVzLmpzIiwiS2V5Ym9hcmRTaG9ydGN1dHMuanMiLCJBcnRpY2xlQWN0aW9uUGx1Z2luLmpzIiwiQXBwTmF2aWdhdGlvbkVudHJ5VXRpbHMuanMiLCJOZXdzQWRkRmVlZC5qcyIsIk5ld3NBcnRpY2xlQWN0aW9ucy5qcyIsIk5ld3NBdXRvRm9jdXMuanMiLCJOZXdzQmluZFVuc2FmZUh0bWwuanMiLCJOZXdzRHJhZ2dhYmxlLmpzIiwiTmV3c0Ryb3BwYWJsZS5qcyIsIk5ld3NGaW5pc2hlZFRyYW5zaXRpb24uanMiLCJOZXdzRm9jdXMuanMiLCJOZXdzSW5zdGFudE5vdGlmaWNhdGlvbi5qcyIsIk5ld3NQbGF5T25lLmpzIiwiTmV3c1B1bGxUb1JlZnJlc2guanMiLCJOZXdzUmVhZEZpbGUuanMiLCJOZXdzUmVmcmVzaE1hc29ucnkuanMiLCJOZXdzU2Nyb2xsLmpzIiwiTmV3c1NlYXJjaC5qcyIsIk5ld3NTdGlja3lNZW51LmpzIiwiTmV3c1N0b3BQcm9wYWdhdGlvbi5qcyIsIk5ld3NUaW1lb3V0LmpzIiwiTmV3c1RpdGxlVW5yZWFkQ291bnQuanMiLCJOZXdzVG9nZ2xlU2hvdy5qcyIsIk5ld3NUcmlnZ2VyQ2xpY2suanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJHByb3ZpZGUiLCIkaHR0cFByb3ZpZGVyIiwiZmVlZFR5cGUiLCJGRUVEIiwiRk9MREVSIiwiU1RBUlJFRCIsIlNVQlNDUklQVElPTlMiLCJTSEFSRUQiLCJFWFBMT1JFIiwiY29uc3RhbnQiLCJPQyIsImdlbmVyYXRlVXJsIiwiZmFjdG9yeSIsIiRxIiwiQkFTRV9VUkwiLCIkd2luZG93IiwicmVxdWVzdCIsImRvbWFpbiIsImxvY2F0aW9uIiwiaHJlZiIsInNwbGl0IiwicGF0aG5hbWUiLCJ1cmwiLCJpbmRleE9mIiwiaGVhZGVycyIsInJlcXVlc3R0b2tlbiIsIm9jX3JlcXVlc3R0b2tlbiIsIndoZW4iLCJlcnJvck1lc3NhZ2VzIiwwLCJ0Iiw0MDEsNDAzLDQxMiw1MDAsNTAzLCIkdGltZW91dCIsInRpbWVyIiwicmVzcG9uc2VFcnJvciIsInJlc3BvbnNlIiwic3RhdHVzIiwiY2FuY2VsIiwiTm90aWZpY2F0aW9uIiwiaGlkZSIsInNob3dIdG1sIiwicmVqZWN0IiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsImdldEl0ZW1SZXNvbHZlIiwidHlwZSIsImRhdGEiLCIkaHR0cCIsIiRyb3V0ZSIsIiRsb2NhdGlvbiIsIklURU1fQkFUQ0hfU0laRSIsIkZFRURfVFlQRSIsIlNldHRpbmdzUmVzb3VyY2UiLCJGZWVkUmVzb3VyY2UiLCJzaG93QWxsIiwiZ2V0Iiwib2xkZXN0Rmlyc3QiLCJzZWFyY2giLCJkZWZlcnJlZCIsImRlZmVyIiwicmVzb2x2ZSIsInBhcmFtZXRlcnMiLCJsaW1pdCIsInVuZGVmaW5lZCIsImN1cnJlbnQiLCJwYXJhbXMiLCJpZCIsImZlZWQiLCJnZXRCeUlkIiwib3JkZXJpbmciLCJtZXRob2QiLCJzdWNjZXNzIiwicHJvbWlzZSIsImdldEV4cGxvcmVSZXNvbHZlIiwic2l0ZXMiLCJQdWJsaXNoZXIiLCJsYW5ndWFnZSIsImxhbmciLCJ0aGVuIiwicHVibGlzaEFsbCIsInJlcGxhY2UiLCJleHBsb3JlVXJsIiwiZGVmYXVsdEV4cGxvcmVVcmwiLCJjb250cm9sbGVyIiwidGVtcGxhdGVVcmwiLCJydW4iLCIkcm9vdFNjb3BlIiwiJGludGVydmFsIiwiTG9hZGluZyIsIkl0ZW1SZXNvdXJjZSIsIkZvbGRlclJlc291cmNlIiwiUkVGUkVTSF9SQVRFIiwic2V0TG9hZGluZyIsInN1YnNjcmliZSIsInRvQ2hhbm5lbHMiLCJzZXR0aW5nc0RlZmVycmVkIiwiYWN0aXZlRmVlZERlZmVycmVkIiwicGF0aCIsImFjdGl2ZUZlZWQiLCJ0ZXN0IiwiZmVlZHMiLCJmZWVkRGVmZXJyZWQiLCJmb2xkZXJzIiwiZm9sZGVyRGVmZXJyZWQiLCJhbGwiLCJsZW5ndGgiLCJyZWxvYWQiLCIkb24iLCJ0aGlzIiwibG9hZGluZyIsImlzRmlyc3RSdW4iLCJzaXplIiwicGxheSIsIml0ZW0iLCJwbGF5aW5nSXRlbSIsIiRyb3V0ZVBhcmFtcyIsIklURU1fQVVUT19QQUdFX1NJWkUiLCJjbGVhciIsImlzQXV0b1BhZ2luZ0VuYWJsZWQiLCJpc05vdGhpbmdNb3JlVG9BdXRvUGFnZSIsImdldEl0ZW1zIiwiZ2V0QWxsIiwidG9nZ2xlU3RhciIsIml0ZW1JZCIsInRvZ2dsZUl0ZW0iLCJpc0NvbXBhY3RWaWV3Iiwic2hvdyIsImlzU2hvd0FsbCIsIm1hcmtSZWFkIiwia2VlcFVucmVhZCIsInVucmVhZCIsIm1hcmtJdGVtUmVhZCIsIm1hcmtJdGVtT2ZGZWVkUmVhZCIsImZlZWRJZCIsImdldEZlZWQiLCJ0b2dnbGVLZWVwVW5yZWFkIiwibWFya0l0ZW1PZkZlZWRVbnJlYWQiLCJzZWxmIiwiZ2V0T3JkZXJpbmciLCJpc0ZlZWQiLCJvcmRlckJ5IiwiaXNDb21wYWN0RXhwYW5kIiwiYXV0b1BhZ2luZ0VuYWJsZWQiLCJtYXJrUmVhZEVuYWJsZWQiLCJzY3JvbGxSZWFkIiwiaXRlbUlkcyIsImlkcyIsImZlZWRJZHMiLCJmb3JFYWNoIiwibWFya0l0ZW1zT2ZGZWVkc1JlYWQiLCJtYXJrSXRlbXNSZWFkIiwiJCRyb3V0ZSIsImF1dG9QYWdlIiwiYXV0b1BhZ2VBZ2FpbiIsIml0ZW1zIiwiZXJyb3IiLCJnZXRSZWxhdGl2ZURhdGUiLCJ0aW1lc3RhbXAiLCJsYW5ndWFnZUNvZGUiLCJkYXRlIiwibW9tZW50IiwidW5peCIsImxvY2FsZSIsImZyb21Ob3ciLCJyZWZyZXNoIiwiZ2V0TWVkaWFUeXBlIiwiT2JqZWN0Iiwia2V5cyIsIm1hcCIsImtleSIsInJlZHVjZSIsInhzIiwieCIsImNhdGVnb3J5IiwiZmVlZExpc3QiLCJjb25jYXQiLCJmZWVkRXhpc3RzIiwiZ2V0QnlMb2NhdGlvbiIsInN1YnNjcmliZVRvIiwiJGJyb2FkY2FzdCIsImlzQ2F0ZWdvcnlTaG93biIsImZpbHRlciIsImVsZW1lbnQiLCJnZXRTdXBwb3J0ZWRMYW5ndWFnZUNvZGVzIiwiZ2V0Q3VycmVudExhbmd1YWdlQ29kZSIsInNob3dMYW5ndWFnZSIsInNlbGVjdGVkTGFuZ3VhZ2VDb2RlIiwiZmVlZEVycm9yIiwic2hvd05ld0ZvbGRlciIsInJlbmFtaW5nRm9sZGVyIiwiYWRkaW5nRmVlZCIsImFkZGluZ0ZvbGRlciIsImZvbGRlckVycm9yIiwicmVuYW1lRXJyb3IiLCJnZXRSb3V0ZUlkIiwicGFyc2VJbnQiLCJnZXRMYW5ndWFnZUNvZGUiLCJnZXRGZWVkcyIsImdldEZvbGRlcnMiLCJtYXJrRm9sZGVyUmVhZCIsImZvbGRlcklkIiwiZ2V0QnlGb2xkZXJJZCIsIm1hcmtGZWVkUmVhZCIsImdldEZlZWRzT2ZGb2xkZXIiLCJnZXRVbnJlYWRDb3VudCIsImlzVW5yZWFkIiwiZ2V0RmVlZFVucmVhZENvdW50IiwidW5yZWFkQ291bnQiLCJpc0ZlZWRVbnJlYWQiLCJnZXRGb2xkZXJVbnJlYWRDb3VudCIsImlzRm9sZGVyVW5yZWFkIiwiZ2V0U3RhcnJlZENvdW50IiwiaXNTdGFycmVkVW5yZWFkIiwidG9nZ2xlRm9sZGVyIiwiZm9sZGVyTmFtZSIsInRvZ2dsZU9wZW4iLCJoYXNGZWVkcyIsInN1YkZlZWRBY3RpdmUiLCJpc1N1YnNjcmlwdGlvbnNBY3RpdmUiLCJpc1N0YXJyZWRBY3RpdmUiLCJpc0V4cGxvcmVBY3RpdmUiLCJpc0ZvbGRlckFjdGl2ZSIsImlzRmVlZEFjdGl2ZSIsImZvbGRlck5hbWVFeGlzdHMiLCJ0cmltIiwiZmVlZFVybEV4aXN0cyIsImNyZWF0ZUZlZWQiLCJuZXdGb2xkZXIiLCJleGlzdGluZ0ZvbGRlciIsImdldHNGZWVkIiwiY3JlYXRlIiwibmFtZSIsImNyZWF0ZUZvbGRlciIsImZvbGRlciIsIm1vdmVGZWVkIiwibW92ZSIsInJlbmFtZUZlZWQiLCJwYXRjaCIsInRpdGxlIiwiZWRpdGluZyIsInJlbmFtZUZvbGRlciIsInJlbmFtZSIsIm1lc3NhZ2UiLCJyZXZlcnNpYmx5RGVsZXRlRmVlZCIsInJldmVyc2libHlEZWxldGUiLCJ1bmRvRGVsZXRlRmVlZCIsInVuZG9EZWxldGUiLCJkZWxldGVGZWVkIiwicmV2ZXJzaWJseURlbGV0ZUZvbGRlciIsInVuZG9EZWxldGVGb2xkZXIiLCJkZWxldGVGb2xkZXIiLCJzZXRPcmRlcmluZyIsInRvZ2dsZVBpbm5lZCIsInBpbm5lZCIsInNldFVwZGF0ZU1vZGUiLCJ1cGRhdGVNb2RlIiwidG9nZ2xlRnVsbFRleHQiLCJ2YWx1ZSIsInNjb3BlIiwic2V0U2VsZWN0ZWRGb2xkZXJGb3JSb3V0ZSIsIk9QTUxQYXJzZXIiLCJPUE1MSW1wb3J0ZXIiLCJpc09QTUxJbXBvcnRpbmciLCJpc0FydGljbGVzSW1wb3J0aW5nIiwib3BtbEltcG9ydEVycm9yIiwiYXJ0aWNsZUltcG9ydEVycm9yIiwic2V0IiwidG9nZ2xlU2V0dGluZyIsImdldFNldHRpbmciLCJpbXBvcnRPUE1MIiwiY29udGVudCIsInBhcnNlZENvbnRlbnQiLCJwYXJzZSIsImpvYlNpemUiLCJpbXBvcnRGb2xkZXJzIiwiZmVlZFF1ZXVlIiwiaW1wb3J0RmVlZFF1ZXVlIiwiY29uc29sZSIsImltcG9ydEFydGljbGVzIiwiYXJ0aWNsZXMiLCJKU09OIiwiJHNjZSIsInRydXN0QXNSZXNvdXJjZVVybCIsIlJlc291cmNlIiwiY2FsbCIsImxvY2F0aW9ucyIsImZvbGRlclVucmVhZENvdW50IiwiZm9sZGVySWRzIiwicHJvdG90eXBlIiwicmVjZWl2ZSIsInVwZGF0ZVVucmVhZENhY2hlIiwidXBkYXRlRm9sZGVyQ2FjaGUiLCJ2YWx1ZXMiLCJhZGQiLCJoYXNoTWFwIiwic3RhcnRzV2l0aCIsImh0dHAiLCJwYXJlbnRGb2xkZXJJZCIsImZhdmljb25MaW5rIiwidXBkYXRlQ2FjaGUiLCJpc0ZvbGRlciIsImRlbGV0ZWQiLCJwcm9taXNlcyIsInBvc3QiLCJzZXRQaW5uZWQiLCJpc1Bpbm5lZCIsImRpZmYiLCJmdWxsVGV4dEVuYWJsZWQiLCJvcGVuZWQiLCJvcGVuIiwidG9Gb2xkZXJOYW1lIiwiYmF0Y2hTaXplIiwic3RhcnJlZENvdW50IiwibG93ZXN0SWQiLCJoaWdoZXN0SWQiLCJjaGFubmVsIiwibmV3ZXN0SXRlbUlkIiwiZ2V0TmV3ZXN0SXRlbUlkIiwic3RhciIsImlzU3RhcnJlZCIsIml0IiwiZ3VpZEhhc2giLCJzdGFycmVkIiwiaXNSZWFkIiwicmVhZCIsImhpZ2hlc3RJdGVtSWQiLCJvZmZzZXQiLCJqc29uIiwic2VydmljZSIsImdsb2JhbCIsImF1dG9wYWdpbmciLCJhcmVhIiwiaXNMb2FkaW5nIiwic3RhcnRGZWVkSm9iIiwicXVldWUiLCJwb3AiLCJnZXRzRmVlZENvdW50ZXIiLCJmb2xkZXJQcm9taXNlcyIsImpvYlByb21pc2VzIiwiaSIsInBhcnNlT3V0bGluZSIsIm91dGxpbmUiLCJhdHRyIiwicmVjdXJzaXZlbHlQYXJzZSIsImxldmVsIiwicm9vdCIsImZpcnN0TGV2ZWwiLCIkIiwiZW50cnkiLCJjaGlsZHJlbiIsInhtbCIsInBhcnNlWE1MIiwiZmluZCIsImNoYW5uZWxzIiwib2JqIiwibGlzdGVuZXJzIiwibGlzdGVuZXIiLCJvYmpzIiwiZXhpc3RpbmciLCJkZWxldGVBdEluZGV4IiwiZmluZEluZGV4Iiwic3BsaWNlIiwic2V0dGluZ3MiLCJjb21wYWN0IiwicHJldmVudFJlYWRPblNjcm9sbCIsImNvbXBhY3RFeHBhbmQiLCJkZWZhdWx0TGFuZ3VhZ2VDb2RlIiwic3VwcG9ydGVkTGFuZ3VhZ2VDb2RlcyIsInByb2Nlc3NMYW5ndWFnZUNvZGUiLCJ0b0xvd2VyQ2FzZSIsIndpbmRvdyIsImRvY3VtZW50IiwibmF2aWdhdG9yIiwic3RvcmFnZSIsImxvY2FsU3RvcmFnZSIsInJlZ2lzdGVySGFuZGxlciIsIm1pbWUiLCJyZWdpc3RlcmVkIiwiaXNDb250ZW50SGFuZGxlclJlZ2lzdGVyZWQiLCJpc1JlZ2lzdGVyZWQiLCJnZXRJdGVtIiwicmVnaXN0ZXJDb250ZW50SGFuZGxlciIsInNldEl0ZW0iLCJjbGVhblVybCIsInByb3RvY29sIiwiaG9zdCIsInN1YnNjcmliZVVybCIsIm1pbWVUeXBlIiwicmVhZHkiLCJzdWJzY3JpcHRpb24iLCJpbnB1dCIsInZhbCIsInRyaWdnZXIiLCJzZXRUaW1lb3V0IiwiZm9jdXMiLCJhZGRFdmVudExpc3RlbmVyIiwicXVlcnlTZWxlY3RvciIsInNjcm9sbFRvIiwibm9JbnB1dEZvY3VzZWQiLCJpcyIsIm5vTW9kaWZpZXJLZXkiLCJldmVudCIsInNoaWZ0S2V5IiwiYWx0S2V5IiwiY3RybEtleSIsIm1ldGFLZXkiLCJtYXJrQWxsUmVhZCIsIm5hdmlnYXRpb25BcmVhIiwic2VsZWN0b3IiLCJidXR0b24iLCJpc0luU2Nyb2xsVmlldyIsImVsZW0iLCJzY3JvbGxBcmVhIiwiZWxlbVRvcCIsInRvcCIsImVsZW1Cb3R0b20iLCJoZWlnaHQiLCJhcmVhQm90dG9tIiwic2Nyb2xsVG9OYXZpZ2F0aW9uRWxlbWVudCIsInRvVG9wIiwic2Nyb2xsVG9wIiwic2Nyb2xsVG9BY3RpdmVOYXZpZ2F0aW9uRW50cnkiLCJyZWxvYWRGZWVkIiwidHJ5UmVsb2FkIiwicHVsbFRvUmVmcmVzaCIsImhhc0NsYXNzIiwiYWRkQ2xhc3MiLCJhY3RpdmF0ZU5hdmlnYXRpb25FbnRyeSIsIm5leHRGZWVkIiwiZWxlbWVudHMiLCJzdWJmZWVkcyIsIm5leHQiLCJnZXRQYXJlbnRGb2xkZXIiLCJwYXJlbnQiLCJzZWxlY3RGaXJzdE9yTGFzdEZvbGRlciIsImlzTGFzdCIsImluZGV4IiwicHJldmlvdXNGb2xkZXIiLCJwcmV2QWxsIiwiZmlyc3QiLCJwYXJlbnRGb2xkZXIiLCJuZXh0Rm9sZGVyIiwibmV4dEFsbCIsInByZXZpb3VzRmVlZCIsInByZXYiLCJzaWJsaW5ncyIsInByZXZpb3VzIiwib25BY3RpdmVJdGVtIiwiY2FsbGJhY2siLCJlYWNoIiwicG9zaXRpb24iLCJ0b2dnbGVVbnJlYWQiLCJleHBhbmRJdGVtIiwib3BlbkxpbmsiLCJzY3JvbGxUb0l0ZW0iLCJleHBhbmRJdGVtSW5Db21wYWN0Iiwic2Nyb2xsVG9OZXh0SXRlbSIsImp1bXBlZCIsInByb3AiLCJzY3JvbGxUb1ByZXZpb3VzSXRlbSIsImxhc3QiLCJrZXl1cCIsImtleUNvZGUiLCJpc0V4cGFuZEl0ZW0iLCJwcmV2ZW50RGVmYXVsdCIsIk5ld3MiLCJleHBvcnRzIiwiYXJ0aWNsZUFjdGlvblBsdWdpbnMiLCJhZGRBcnRpY2xlQWN0aW9uIiwiYWN0aW9uIiwiZ2V0QXJ0aWNsZUFjdGlvblBsdWdpbnMiLCJqUXVlcnkiLCIkZG9jdW1lbnQiLCJjbGljayIsImRpcmVjdGl2ZSIsInJlc3RyaWN0IiwibGluayIsImVsbSIsIm1lbnUiLCJ0b2dnbGVDbGFzcyIsInRhcmdldCIsInJlbW92ZUNsYXNzIiwiXyIsInN0b3AiLCJzbGlkZURvd24iLCJOYXZpZ2F0aW9uIiwibmV3c0FydGljbGVBY3Rpb25zIiwibm9QbHVnaW5zIiwicGx1Z2lucyIsImF0dHJzIiwidG9Gb2N1cyIsIm5ld3NBdXRvRm9jdXMiLCIkd2F0Y2giLCJuZXdzQmluZEh0bWxVbnNhZmUiLCJodG1sIiwiJGV2YWwiLCJvcHRpb25zIiwibmV3c0RyYWdnYWJsZSIsImlzRGVmaW5lZCIsImRyYWdnYWJsZSIsIiRvYnNlcnZlIiwiZGV0YWlscyIsImFjY2VwdCIsImhvdmVyQ2xhc3MiLCJncmVlZHkiLCJkcm9wIiwidWkiLCIkYXBwbHkiLCJkcm9wcGFibGUiLCJvbiIsIm5ld3NGaW5pc2hlZFRyYW5zaXRpb24iLCIkaW50ZXJwb2xhdGUiLCJ0b1JlYWRkIiwibmV3c0ZvY3VzIiwibm90aWZpY2F0aW9uIiwiYXJncyIsInBhdXNlIiwic2Nyb2xsZWQiLCJuZXdzUHVsbFRvUmVmcmVzaCIsImNoYW5nZSIsImZpbGUiLCJmaWxlcyIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJvbmxvYWQiLCIkZmlsZUNvbnRlbnQiLCJyZXN1bHQiLCJuZXdzUmVhZEZpbGUiLCJyZWFkQXNUZXh0IiwibWFzb25yeSIsIml0ZW1TZWxlY3RvciIsImd1dHRlciIsImNvbHVtbldpZHRoIiwiJGxhc3QiLCJNQVJLX1JFQURfVElNRU9VVCIsIlNDUk9MTF9USU1FT1VUIiwiY291bnRlciIsIm5ld3NTY3JvbGxBdXRvUGFnZSIsImVuYWJsZWQiLCJhcnRpY2xlIiwibmV3c1Njcm9sbE1hcmtSZWFkIiwibmV3c1Njcm9sbCIsIm5ld3NTY3JvbGxFbmFibGVkTWFya1JlYWQiLCJhbGxvd1Njcm9sbCIsInNjcm9sbEhhbmRsZXIiLCJvZmYiLCJvblNlYXJjaCIsImJveCIsImRvU2VhcmNoIiwibmV3c1N0aWNreU1lbnUiLCJzY3JvbGwiLCJzY3JvbGxIZWlnaHQiLCJjc3MiLCJiaW5kIiwic3RvcFByb3BhZ2F0aW9uIiwibmV3c1RpbWVvdXQiLCJkZXN0cm95ZWQiLCJzZWNvbmRzIiwicmVtb3ZlIiwiYmFzZVRpdGxlIiwidGl0bGVzIiwiYXBwTmFtZSIsIm93bkNsb3VkTmFtZSIsIm5ld3NUb2dnbGVTaG93IiwidG9nZ2xlIiwibmV3c1RyaWdnZXJDbGljayJdLCJtYXBwaW5ncyI6IkFBV0EsR0FBQUEsS0FBQUMsUUFBQUMsT0FBQSxRQUFBLFVBQUEsYUFBQSxhQ0ZBRixLQUFBRyxRQUFBLGlCQUFBLFdBQUEsZ0JBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FDQSxZQUVBLElBQUFDLElBQ0FDLEtBQUEsRUFDQUMsT0FBQSxF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WyIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5cbi8qIGpzaGludCB1bnVzZWQ6IGZhbHNlICovXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ05ld3MnLCBbJ25nUm91dGUnLCAnbmdTYW5pdGl6ZScsICduZ0FuaW1hdGUnXSk7XG4iLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuY29uZmlnKFtcIiRyb3V0ZVByb3ZpZGVyXCIsIFwiJHByb3ZpZGVcIiwgXCIkaHR0cFByb3ZpZGVyXCIsIGZ1bmN0aW9uICgkcm91dGVQcm92aWRlciwgJHByb3ZpZGUsICRodHRwUHJvdmlkZXIpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgZmVlZFR5cGUgPSB7XG4gICAgICAgIEZFRUQ6IDAsXG4gICAgICAgIEZPTERFUjogMSxcbiAgICAgICAgU1RBUlJFRDogMixcbiAgICAgICAgU1VCU0NSSVBUSU9OUzogMyxcbiAgICAgICAgU0hBUkVEOiA0LFxuICAgICAgICBFWFBMT1JFOiA1XG4gICAgfTtcblxuICAgIC8vIGNvbnN0YW50c1xuICAgICRwcm92aWRlLmNvbnN0YW50KCdSRUZSRVNIX1JBVEUnLCA2MCk7ICAvLyBzZWNvbmRzXG4gICAgJHByb3ZpZGUuY29uc3RhbnQoJ0lURU1fQkFUQ0hfU0laRScsIDQwKTsgIC8vIGhvdyBtYW55IGl0ZW1zIHNob3VsZCBiZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmZXRjaGVkIGluaXRpYWxseVxuICAgICRwcm92aWRlLmNvbnN0YW50KCdJVEVNX0FVVE9fUEFHRV9TSVpFJywgMjApO1xuICAgICRwcm92aWRlLmNvbnN0YW50KCdCQVNFX1VSTCcsIE9DLmdlbmVyYXRlVXJsKCcvYXBwcy9uZXdzJykpO1xuICAgICRwcm92aWRlLmNvbnN0YW50KCdGRUVEX1RZUEUnLCBmZWVkVHlwZSk7XG4gICAgJHByb3ZpZGUuY29uc3RhbnQoJ01BUktfUkVBRF9USU1FT1VUJywgMC41KTtcbiAgICAkcHJvdmlkZS5jb25zdGFudCgnU0NST0xMX1RJTUVPVVQnLCAwLjEpO1xuXG4gICAgLy8gbWFrZSBzdXJlIHRoYXQgdGhlIENTUkYgaGVhZGVyIGlzIG9ubHkgc2VudCB0byB0aGUgb3duQ2xvdWQgZG9tYWluXG4gICAgJHByb3ZpZGUuZmFjdG9yeSgnQ1NSRkludGVyY2VwdG9yJywgW1wiJHFcIiwgXCJCQVNFX1VSTFwiLCBcIiR3aW5kb3dcIiwgZnVuY3Rpb24gKCRxLCBCQVNFX1VSTCwgJHdpbmRvdykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVxdWVzdDogZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICAgICAgICAgIHZhciBkb21haW4gPVxuICAgICAgICAgICAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSlbMF07XG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZy51cmwuaW5kZXhPZihCQVNFX1VSTCkgPT09IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLnVybC5pbmRleE9mKGRvbWFpbikgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLypqc2hpbnQgY2FtZWxjYXNlOiBmYWxzZSAqL1xuICAgICAgICAgICAgICAgICAgICBjb25maWcuaGVhZGVycy5yZXF1ZXN0dG9rZW4gPSBvY19yZXF1ZXN0dG9rZW47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpZyB8fCAkcS53aGVuKGNvbmZpZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfV0pO1xuICAgIHZhciBlcnJvck1lc3NhZ2VzID0ge1xuICAgICAgICAwOiB0KCduZXdzJywgJ1JlcXVlc3QgZmFpbGVkLCBuZXR3b3JrIGNvbm5lY3Rpb24gdW5hdmFpbGFibGUhJyksXG4gICAgICAgIDQwMTogdCgnbmV3cycsICdSZXF1ZXN0IHVuYXV0aG9yaXplZC4gQXJlIHlvdSBsb2dnZWQgaW4/JyksXG4gICAgICAgIDQwMzogdCgnbmV3cycsICdSZXF1ZXN0IGZvcmJpZGRlbi4gQXJlIHlvdSBhbiBhZG1pbj8nKSxcbiAgICAgICAgNDEyOiB0KCduZXdzJywgJ1Rva2VuIGV4cGlyZWQgb3IgYXBwIG5vdCBlbmFibGVkISBSZWxvYWQgdGhlIHBhZ2UhJyksXG4gICAgICAgIDUwMDogdCgnbmV3cycsICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3IhIFBsZWFzZSBjaGVjayB5b3VyICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAnZGF0YS9vd25jbG91ZC5sb2cgZmlsZSBmb3IgYWRkaXRpb25hbCAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgJ2luZm9ybWF0aW9uIScpLFxuICAgICAgICA1MDM6IHQoJ25ld3MnLCAnUmVxdWVzdCBmYWlsZWQsIG93bkNsb3VkIGlzIGluIGN1cnJlbnRseSAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgJ2luIG1haW50ZW5hbmNlIG1vZGUhJyksXG4gICAgfTtcbiAgICAkcHJvdmlkZS5mYWN0b3J5KCdDb25uZWN0aW9uRXJyb3JJbnRlcmNlcHRvcicsIFtcIiRxXCIsIFwiJHRpbWVvdXRcIiwgZnVuY3Rpb24gKCRxLCAkdGltZW91dCkge1xuICAgICAgICB2YXIgdGltZXI7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXNwb25zZUVycm9yOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAvLyBzdGF0dXMgMCBpcyBhIG5ldHdvcmsgZXJyb3JcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzIGluIGVycm9yTWVzc2FnZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dC5jYW5jZWwodGltZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIE9DLk5vdGlmaWNhdGlvbi5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIE9DLk5vdGlmaWNhdGlvbi5zaG93SHRtbChlcnJvck1lc3NhZ2VzW3Jlc3BvbnNlLnN0YXR1c10pO1xuICAgICAgICAgICAgICAgICAgICB0aW1lciA9ICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIE9DLk5vdGlmaWNhdGlvbi5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDUwMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XSk7XG4gICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgnQ1NSRkludGVyY2VwdG9yJyk7XG4gICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgnQ29ubmVjdGlvbkVycm9ySW50ZXJjZXB0b3InKTtcblxuICAgIC8vIHJvdXRpbmdcbiAgICB2YXIgZ2V0SXRlbVJlc29sdmUgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLy8gcmVxdWVzdCB0byBpdGVtcyBhbHNvIHJldHVybnMgZmVlZHNcbiAgICAgICAgICAgIGRhdGE6IC8qIEBuZ0luamVjdCAqLyBbXCIkaHR0cFwiLCBcIiRyb3V0ZVwiLCBcIiRxXCIsIFwiJGxvY2F0aW9uXCIsIFwiQkFTRV9VUkxcIiwgXCJJVEVNX0JBVENIX1NJWkVcIiwgXCJGRUVEX1RZUEVcIiwgXCJTZXR0aW5nc1Jlc291cmNlXCIsIFwiRmVlZFJlc291cmNlXCIsIGZ1bmN0aW9uIChcbiAgICAgICAgICAgICRodHRwLCAkcm91dGUsICRxLCAkbG9jYXRpb24sIEJBU0VfVVJMLCBJVEVNX0JBVENIX1NJWkUsIEZFRURfVFlQRSxcbiAgICAgICAgICAgIFNldHRpbmdzUmVzb3VyY2UsIEZlZWRSZXNvdXJjZSkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHNob3dBbGwgPSBTZXR0aW5nc1Jlc291cmNlLmdldCgnc2hvd0FsbCcpO1xuICAgICAgICAgICAgICAgIHZhciBvbGRlc3RGaXJzdCA9IFNldHRpbmdzUmVzb3VyY2UuZ2V0KCdvbGRlc3RGaXJzdCcpO1xuICAgICAgICAgICAgICAgIHZhciBzZWFyY2ggPSAkbG9jYXRpb24uc2VhcmNoKCkuc2VhcmNoIHx8ICcnO1xuXG4gICAgICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICAgICAgICAgIC8vIGlmIHRob3NlIHR3byB2YWx1ZXMgYXJlIG51bGwgaXQgbWVhbnMgd2UgZGlkIG5vdCByZWNlaXZlXG4gICAgICAgICAgICAgICAgLy8gdGhlIHNldHRpbmdzIHJlcXVlc3QgZnJvbSB0aGUgc2VydmVyIHNvIGRvbnQgcXVlcnkgdGhlIHNlcnZlclxuICAgICAgICAgICAgICAgIGlmIChzaG93QWxsID09PSBudWxsIHx8IG9sZGVzdEZpcnN0ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoe30pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbWV0ZXJzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0OiBJVEVNX0JBVENIX1NJWkUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93QWxsOiBzaG93QWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgb2xkZXN0Rmlyc3Q6IG9sZGVzdEZpcnN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoOiBzZWFyY2hcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoJHJvdXRlLmN1cnJlbnQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvdXRlLmN1cnJlbnQucGFyYW1zICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb3V0ZS5jdXJyZW50LnBhcmFtcy5pZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLmlkID0gJHJvdXRlLmN1cnJlbnQucGFyYW1zLmlkO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgYSBjdXN0b20gb3JkZXJpbmcgaXMgc2V0XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSBGRUVEX1RZUEUuRkVFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZlZWQgPSBGZWVkUmVzb3VyY2UuZ2V0QnlJZChwYXJhbWV0ZXJzLmlkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb24gaW50aWFsIGxvYWQsIHRoZSBmZWVkIG9yZGVyaW5nIGlzIHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZlZWQgPT09IHVuZGVmaW5lZCB8fCBmZWVkLm9yZGVyaW5nID09PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5vbGRlc3RGaXJzdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmZWVkLm9yZGVyaW5nID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5vbGRlc3RGaXJzdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAkaHR0cCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICBCQVNFX1VSTCArICcvaXRlbXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczogcGFyYW1ldGVyc1xuICAgICAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgICAgIH1dXG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIHZhciBnZXRFeHBsb3JlUmVzb2x2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNpdGVzOiAvKiBAbmdJbmplY3QgKi8gW1wiJGh0dHBcIiwgXCIkcVwiLCBcIkJBU0VfVVJMXCIsIFwiJGxvY2F0aW9uXCIsIFwiUHVibGlzaGVyXCIsIFwiU2V0dGluZ3NSZXNvdXJjZVwiLCBmdW5jdGlvbiAoXG4gICAgICAgICAgICAkaHR0cCwgJHEsIEJBU0VfVVJMLCAkbG9jYXRpb24sIFB1Ymxpc2hlciwgU2V0dGluZ3NSZXNvdXJjZSkge1xuICAgICAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgICAgICAgICAvLyBhbHdheXMgdXNlIHRoZSBjb2RlIGZyb20gdGhlIHVybFxuICAgICAgICAgICAgICAgIHZhciBsYW5ndWFnZSA9ICRsb2NhdGlvbi5zZWFyY2goKS5sYW5nO1xuICAgICAgICAgICAgICAgIGlmICghbGFuZ3VhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2UgPSBTZXR0aW5nc1Jlc291cmNlLmdldCgnbGFuZ3VhZ2UnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoQkFTRV9VUkwgKyAnL3NldHRpbmdzJykudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBQdWJsaXNoZXIucHVibGlzaEFsbChkYXRhKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBnZXQgdXJsIGFuZCBzdHJpcCB0cmFpbGluZyBzbGFzaGVzXG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBTZXR0aW5nc1Jlc291cmNlLmdldCgnZXhwbG9yZVVybCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFwvKyQvLCAnJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGV4cGxvcmVVcmwgPSB1cmwgKyAnL2ZlZWRzLicgKyBsYW5ndWFnZSArICcuanNvbic7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0RXhwbG9yZVVybCA9IHVybCArICcvZmVlZHMuZW4uanNvbic7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkaHR0cFxuICAgICAgICAgICAgICAgICAgICAgICAgLmdldChleHBsb3JlVXJsKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KGRlZmF1bHRFeHBsb3JlVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEuZGF0YSk7XG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICAgICAgfV1cbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgJHJvdXRlUHJvdmlkZXJcbiAgICAgICAgLndoZW4oJy9pdGVtcycsIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdDb250ZW50Q29udHJvbGxlciBhcyBDb250ZW50JyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29udGVudC5odG1sJyxcbiAgICAgICAgICAgIHJlc29sdmU6IGdldEl0ZW1SZXNvbHZlKGZlZWRUeXBlLlNVQlNDUklQVElPTlMpLFxuICAgICAgICAgICAgdHlwZTogZmVlZFR5cGUuU1VCU0NSSVBUSU9OU1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL2l0ZW1zL3N0YXJyZWQnLCB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQ29udGVudENvbnRyb2xsZXIgYXMgQ29udGVudCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbnRlbnQuaHRtbCcsXG4gICAgICAgICAgICByZXNvbHZlOiBnZXRJdGVtUmVzb2x2ZShmZWVkVHlwZS5TVEFSUkVEKSxcbiAgICAgICAgICAgIHR5cGU6IGZlZWRUeXBlLlNUQVJSRURcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9pdGVtcy9mZWVkcy86aWQnLCB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQ29udGVudENvbnRyb2xsZXIgYXMgQ29udGVudCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbnRlbnQuaHRtbCcsXG4gICAgICAgICAgICByZXNvbHZlOiBnZXRJdGVtUmVzb2x2ZShmZWVkVHlwZS5GRUVEKSxcbiAgICAgICAgICAgIHR5cGU6IGZlZWRUeXBlLkZFRURcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9pdGVtcy9mb2xkZXJzLzppZCcsIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdDb250ZW50Q29udHJvbGxlciBhcyBDb250ZW50JyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29udGVudC5odG1sJyxcbiAgICAgICAgICAgIHJlc29sdmU6IGdldEl0ZW1SZXNvbHZlKGZlZWRUeXBlLkZPTERFUiksXG4gICAgICAgICAgICB0eXBlOiBmZWVkVHlwZS5GT0xERVJcbiAgICAgICAgfSkud2hlbignL2V4cGxvcmUnLCB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnRXhwbG9yZUNvbnRyb2xsZXIgYXMgRXhwbG9yZScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2V4cGxvcmUuaHRtbCcsXG4gICAgICAgICAgICByZXNvbHZlOiBnZXRFeHBsb3JlUmVzb2x2ZSgpLFxuICAgICAgICAgICAgdHlwZTogZmVlZFR5cGUuRVhQTE9SRVxuICAgICAgICB9KS53aGVuKCcvc2hvcnRjdXRzJywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzaG9ydGN1dHMuaHRtbCcsXG4gICAgICAgICAgICB0eXBlOiAtMVxuICAgICAgICB9KTtcblxufV0pO1xuIiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLnJ1bihbXCIkcm9vdFNjb3BlXCIsIFwiJGxvY2F0aW9uXCIsIFwiJGh0dHBcIiwgXCIkcVwiLCBcIiRpbnRlcnZhbFwiLCBcIiRyb3V0ZVwiLCBcIkxvYWRpbmdcIiwgXCJJdGVtUmVzb3VyY2VcIiwgXCJGZWVkUmVzb3VyY2VcIiwgXCJGb2xkZXJSZXNvdXJjZVwiLCBcIlNldHRpbmdzUmVzb3VyY2VcIiwgXCJQdWJsaXNoZXJcIiwgXCJCQVNFX1VSTFwiLCBcIkZFRURfVFlQRVwiLCBcIlJFRlJFU0hfUkFURVwiLCBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJGxvY2F0aW9uLCAkaHR0cCwgJHEsICRpbnRlcnZhbCwgJHJvdXRlLCBMb2FkaW5nLFxuICAgICAgICAgSXRlbVJlc291cmNlLCBGZWVkUmVzb3VyY2UsIEZvbGRlclJlc291cmNlLCBTZXR0aW5nc1Jlc291cmNlLFxuICAgICAgICAgIFB1Ymxpc2hlciwgQkFTRV9VUkwsIEZFRURfVFlQRSwgUkVGUkVTSF9SQVRFKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8gc2hvdyBMb2FkaW5nIHNjcmVlblxuICAgIExvYWRpbmcuc2V0TG9hZGluZygnZ2xvYmFsJywgdHJ1ZSk7XG5cbiAgICAvLyBsaXN0ZW4gdG8ga2V5cyBpbiByZXR1cm5lZCBxdWVyaWVzIHRvIGF1dG9tYXRpY2FsbHkgZGlzdHJpYnV0ZSB0aGVcbiAgICAvLyBpbmNvbWluZyB2YWx1ZXMgdG8gbW9kZWxzXG4gICAgUHVibGlzaGVyLnN1YnNjcmliZShJdGVtUmVzb3VyY2UpLnRvQ2hhbm5lbHMoWydpdGVtcycsICduZXdlc3RJdGVtSWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3RhcnJlZCddKTtcbiAgICBQdWJsaXNoZXIuc3Vic2NyaWJlKEZvbGRlclJlc291cmNlKS50b0NoYW5uZWxzKFsnZm9sZGVycyddKTtcbiAgICBQdWJsaXNoZXIuc3Vic2NyaWJlKEZlZWRSZXNvdXJjZSkudG9DaGFubmVscyhbJ2ZlZWRzJ10pO1xuICAgIFB1Ymxpc2hlci5zdWJzY3JpYmUoU2V0dGluZ3NSZXNvdXJjZSkudG9DaGFubmVscyhbJ3NldHRpbmdzJ10pO1xuXG4gICAgLy8gbG9hZCBmZWVkcywgc2V0dGluZ3MgYW5kIGxhc3QgcmVhZCBmZWVkXG4gICAgdmFyIHNldHRpbmdzRGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICRodHRwLmdldChCQVNFX1VSTCArICcvc2V0dGluZ3MnKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIFB1Ymxpc2hlci5wdWJsaXNoQWxsKGRhdGEpO1xuICAgICAgICBzZXR0aW5nc0RlZmVycmVkLnJlc29sdmUoKTtcbiAgICB9KTtcblxuICAgIHZhciBhY3RpdmVGZWVkRGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgIHZhciBwYXRoID0gJGxvY2F0aW9uLnBhdGgoKTtcbiAgICAkaHR0cC5nZXQoQkFTRV9VUkwgKyAnL2ZlZWRzL2FjdGl2ZScpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgdmFyIHVybDtcblxuICAgICAgICBzd2l0Y2ggKGRhdGEuYWN0aXZlRmVlZC50eXBlKSB7XG5cbiAgICAgICAgY2FzZSBGRUVEX1RZUEUuRkVFRDpcbiAgICAgICAgICAgIHVybCA9ICcvaXRlbXMvZmVlZHMvJyArIGRhdGEuYWN0aXZlRmVlZC5pZDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgRkVFRF9UWVBFLkZPTERFUjpcbiAgICAgICAgICAgIHVybCA9ICcvaXRlbXMvZm9sZGVycy8nICsgZGF0YS5hY3RpdmVGZWVkLmlkO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBGRUVEX1RZUEUuU1RBUlJFRDpcbiAgICAgICAgICAgIHVybCA9ICcvaXRlbXMvc3RhcnJlZCc7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIEZFRURfVFlQRS5FWFBMT1JFOlxuICAgICAgICAgICAgdXJsID0gJy9leHBsb3JlJztcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB1cmwgPSAnL2l0ZW1zJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG9ubHkgcmVkaXJlY3QgaWYgdXJsIGlzIGVtcHR5IG9yIGZhdWx0eVxuICAgICAgICBpZiAoIS9eXFwvaXRlbXMoXFwvKHN0YXJyZWR8ZXhwbG9yZXxmZWVkc1xcL1xcZCt8Zm9sZGVyc1xcL1xcZCspKT9cXC8/JC9cbiAgICAgICAgICAgIC50ZXN0KHBhdGgpKSB7XG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCh1cmwpO1xuICAgICAgICB9XG5cbiAgICAgICAgYWN0aXZlRmVlZERlZmVycmVkLnJlc29sdmUoKTtcbiAgICB9KTtcblxuICAgIHZhciBmZWVkRGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgIHZhciBmZWVkcztcbiAgICAkaHR0cC5nZXQoQkFTRV9VUkwgKyAnL2ZlZWRzJykuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBmZWVkcyA9IGRhdGE7XG4gICAgICAgIGZlZWREZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgfSk7XG5cbiAgICB2YXIgZm9sZGVyRGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgIHZhciBmb2xkZXJzO1xuICAgICRodHRwLmdldChCQVNFX1VSTCArICcvZm9sZGVycycpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgZm9sZGVycyA9IGRhdGE7XG4gICAgICAgIGZvbGRlckRlZmVycmVkLnJlc29sdmUoKTtcbiAgICB9KTtcblxuICAgICRxLmFsbChbXG4gICAgICAgIGZlZWREZWZlcnJlZC5wcm9taXNlLFxuICAgICAgICBmb2xkZXJEZWZlcnJlZC5wcm9taXNlXG4gICAgXSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIGZpcnN0IHB1Ymxpc2ggZmVlZHMgdG8gY29ycmVjdGx5IHVwZGF0ZSB0aGUgZm9sZGVyIHJlc291cmNlIHVucmVhZFxuICAgICAgICAvLyBjYWNoZVxuICAgICAgICBQdWJsaXNoZXIucHVibGlzaEFsbChmZWVkcyk7XG4gICAgICAgIFB1Ymxpc2hlci5wdWJsaXNoQWxsKGZvbGRlcnMpO1xuICAgICAgICBpZiAoZmVlZHMuZmVlZHMubGVuZ3RoID09PSAwICYmIGZvbGRlcnMuZm9sZGVycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvZXhwbG9yZScpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBkaXNhYmxlIGxvYWRpbmcgaWYgYWxsIGluaXRpYWwgcmVxdWVzdHMgZmluaXNoZWRcbiAgICAkcS5hbGwoXG4gICAgICAgIFtcbiAgICAgICAgICAgIHNldHRpbmdzRGVmZXJyZWQucHJvbWlzZSxcbiAgICAgICAgICAgIGFjdGl2ZUZlZWREZWZlcnJlZC5wcm9taXNlLFxuICAgICAgICAgICAgZmVlZERlZmVycmVkLnByb21pc2UsXG4gICAgICAgICAgICBmb2xkZXJEZWZlcnJlZC5wcm9taXNlXG4gICAgICAgIF1cbiAgICApXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRyb3V0ZS5yZWxvYWQoKTtcbiAgICAgICAgICAgIExvYWRpbmcuc2V0TG9hZGluZygnZ2xvYmFsJywgZmFsc2UpO1xuICAgICAgICB9KTtcblxuICAgIC8vIHJlZnJlc2ggZmVlZHMgYW5kIGZvbGRlcnNcbiAgICAkaW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAkaHR0cC5nZXQoQkFTRV9VUkwgKyAnL2ZlZWRzJykuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgUHVibGlzaGVyLnB1Ymxpc2hBbGwoZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgICAkaHR0cC5nZXQoQkFTRV9VUkwgKyAnL2ZvbGRlcnMnKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBQdWJsaXNoZXIucHVibGlzaEFsbChkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfSwgUkVGUkVTSF9SQVRFICogMTAwMCk7XG5cblxuICAgICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgTG9hZGluZy5zZXRMb2FkaW5nKCdjb250ZW50JywgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgTG9hZGluZy5zZXRMb2FkaW5nKCdjb250ZW50JywgZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgLy8gaW4gY2FzZSBvZiB3cm9uZyBpZCBldGMgc2hvdyBhbGwgaXRlbXNcbiAgICAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlRXJyb3InLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvaXRlbXMnKTtcbiAgICB9KTtcblxufV0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5jb250cm9sbGVyKCdBcHBDb250cm9sbGVyJyxcbltcIkxvYWRpbmdcIiwgXCJGZWVkUmVzb3VyY2VcIiwgXCJGb2xkZXJSZXNvdXJjZVwiLCBmdW5jdGlvbiAoTG9hZGluZywgRmVlZFJlc291cmNlLCBGb2xkZXJSZXNvdXJjZSkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHRoaXMubG9hZGluZyA9IExvYWRpbmc7XG5cbiAgICB0aGlzLmlzRmlyc3RSdW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBGZWVkUmVzb3VyY2Uuc2l6ZSgpID09PSAwICYmIEZvbGRlclJlc291cmNlLnNpemUoKSA9PT0gMDtcbiAgICB9O1xuXG4gICAgdGhpcy5wbGF5ID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgdGhpcy5wbGF5aW5nSXRlbSA9IGl0ZW07XG4gICAgfTtcbn1dKTtcbiIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5jb250cm9sbGVyKCdDb250ZW50Q29udHJvbGxlcicsXG5bXCJQdWJsaXNoZXJcIiwgXCJGZWVkUmVzb3VyY2VcIiwgXCJJdGVtUmVzb3VyY2VcIiwgXCJTZXR0aW5nc1Jlc291cmNlXCIsIFwiZGF0YVwiLCBcIiRyb3V0ZVwiLCBcIiRyb3V0ZVBhcmFtc1wiLCBcIiRsb2NhdGlvblwiLCBcIkZFRURfVFlQRVwiLCBcIklURU1fQVVUT19QQUdFX1NJWkVcIiwgXCJMb2FkaW5nXCIsIGZ1bmN0aW9uIChQdWJsaXNoZXIsIEZlZWRSZXNvdXJjZSwgSXRlbVJlc291cmNlLCBTZXR0aW5nc1Jlc291cmNlLCBkYXRhLFxuICAgICRyb3V0ZSwgJHJvdXRlUGFyYW1zLCAkbG9jYXRpb24sIEZFRURfVFlQRSwgSVRFTV9BVVRPX1BBR0VfU0laRSwgTG9hZGluZykge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIEl0ZW1SZXNvdXJjZS5jbGVhcigpO1xuXG4gICAgLy8gZGlzdHJpYnV0ZSBkYXRhIHRvIG1vZGVscyBiYXNlZCBvbiBrZXlcbiAgICBQdWJsaXNoZXIucHVibGlzaEFsbChkYXRhKTtcblxuXG4gICAgdGhpcy5pc0F1dG9QYWdpbmdFbmFibGVkID0gdHJ1ZTtcblxuICAgIC8vIHRoZSBpbnRlcmZhY2Ugc2hvdWxkIHNob3cgYSBoaW50IGlmIHRoZXJlIGFyZSBub3QgZW5vdWdoIGl0ZW1zIHNlbnQgc29cbiAgICAvLyBpdCdzIGFzc3VtZWQgdGhhdCB0aGVyZXMgbm90aGluZyB0byBhdXRwYWdlXG4gICAgaWYgKEl0ZW1SZXNvdXJjZS5zaXplKCkgPj0gSVRFTV9BVVRPX1BBR0VfU0laRSkge1xuICAgICAgICB0aGlzLmlzTm90aGluZ01vcmVUb0F1dG9QYWdlID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5pc05vdGhpbmdNb3JlVG9BdXRvUGFnZSA9IHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5nZXRJdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIEl0ZW1SZXNvdXJjZS5nZXRBbGwoKTtcbiAgICB9O1xuXG4gICAgdGhpcy50b2dnbGVTdGFyID0gZnVuY3Rpb24gKGl0ZW1JZCkge1xuICAgICAgICBJdGVtUmVzb3VyY2UudG9nZ2xlU3RhcihpdGVtSWQpO1xuICAgIH07XG5cbiAgICB0aGlzLnRvZ2dsZUl0ZW0gPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAvLyBUT0RPOiB1bml0dGVzdFxuICAgICAgICBpZiAodGhpcy5pc0NvbXBhY3RWaWV3KCkpIHtcbiAgICAgICAgICAgIGl0ZW0uc2hvdyA9ICFpdGVtLnNob3c7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5pc1Nob3dBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBTZXR0aW5nc1Jlc291cmNlLmdldCgnc2hvd0FsbCcpO1xuICAgIH07XG5cbiAgICB0aGlzLm1hcmtSZWFkID0gZnVuY3Rpb24gKGl0ZW1JZCkge1xuICAgICAgICB2YXIgaXRlbSA9IEl0ZW1SZXNvdXJjZS5nZXQoaXRlbUlkKTtcblxuICAgICAgICBpZiAoIWl0ZW0ua2VlcFVucmVhZCAmJiBpdGVtLnVucmVhZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgSXRlbVJlc291cmNlLm1hcmtJdGVtUmVhZChpdGVtSWQpO1xuICAgICAgICAgICAgRmVlZFJlc291cmNlLm1hcmtJdGVtT2ZGZWVkUmVhZChpdGVtLmZlZWRJZCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5nZXRGZWVkID0gZnVuY3Rpb24gKGZlZWRJZCkge1xuICAgICAgICByZXR1cm4gRmVlZFJlc291cmNlLmdldEJ5SWQoZmVlZElkKTtcbiAgICB9O1xuXG4gICAgdGhpcy50b2dnbGVLZWVwVW5yZWFkID0gZnVuY3Rpb24gKGl0ZW1JZCkge1xuICAgICAgICB2YXIgaXRlbSA9IEl0ZW1SZXNvdXJjZS5nZXQoaXRlbUlkKTtcbiAgICAgICAgaWYgKCFpdGVtLnVucmVhZCkge1xuICAgICAgICAgICAgRmVlZFJlc291cmNlLm1hcmtJdGVtT2ZGZWVkVW5yZWFkKGl0ZW0uZmVlZElkKTtcbiAgICAgICAgICAgIEl0ZW1SZXNvdXJjZS5tYXJrSXRlbVJlYWQoaXRlbUlkLCBmYWxzZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpdGVtLmtlZXBVbnJlYWQgPSAhaXRlbS5rZWVwVW5yZWFkO1xuICAgIH07XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGdldE9yZGVyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgb3JkZXJpbmcgPSBTZXR0aW5nc1Jlc291cmNlLmdldCgnb2xkZXN0Rmlyc3QnKTtcblxuICAgICAgICBpZiAoc2VsZi5pc0ZlZWQoKSkge1xuICAgICAgICAgICAgdmFyIGZlZWQgPSBGZWVkUmVzb3VyY2UuZ2V0QnlJZCgkcm91dGVQYXJhbXMuaWQpO1xuICAgICAgICAgICAgaWYgKGZlZWQgJiYgZmVlZC5vcmRlcmluZyA9PT0gMSkge1xuICAgICAgICAgICAgICAgIG9yZGVyaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmVlZCAmJiBmZWVkLm9yZGVyaW5nID09PSAyKSB7XG4gICAgICAgICAgICAgICAgb3JkZXJpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBvcmRlcmluZztcbiAgICB9O1xuXG4gICAgdGhpcy5vcmRlckJ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoZ2V0T3JkZXJpbmcoKSkge1xuICAgICAgICAgICAgcmV0dXJuICdpZCc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gJy1pZCc7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5pc0NvbXBhY3RWaWV3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gU2V0dGluZ3NSZXNvdXJjZS5nZXQoJ2NvbXBhY3QnKTtcbiAgICB9O1xuXG4gICAgdGhpcy5pc0NvbXBhY3RFeHBhbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBTZXR0aW5nc1Jlc291cmNlLmdldCgnY29tcGFjdEV4cGFuZCcpO1xuICAgIH07XG5cbiAgICB0aGlzLmF1dG9QYWdpbmdFbmFibGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0F1dG9QYWdpbmdFbmFibGVkO1xuICAgIH07XG5cbiAgICB0aGlzLm1hcmtSZWFkRW5hYmxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICFTZXR0aW5nc1Jlc291cmNlLmdldCgncHJldmVudFJlYWRPblNjcm9sbCcpO1xuICAgIH07XG5cbiAgICB0aGlzLnNjcm9sbFJlYWQgPSBmdW5jdGlvbiAoaXRlbUlkcykge1xuICAgICAgICB2YXIgaWRzID0gW107XG4gICAgICAgIHZhciBmZWVkSWRzID0gW107XG5cbiAgICAgICAgaXRlbUlkcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtSWQpIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gSXRlbVJlc291cmNlLmdldChpdGVtSWQpO1xuICAgICAgICAgICAgaWYgKCFpdGVtLmtlZXBVbnJlYWQpIHtcbiAgICAgICAgICAgICAgICBpZHMucHVzaChpdGVtSWQpO1xuICAgICAgICAgICAgICAgIGZlZWRJZHMucHVzaChpdGVtLmZlZWRJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChpZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgRmVlZFJlc291cmNlLm1hcmtJdGVtc09mRmVlZHNSZWFkKGZlZWRJZHMpO1xuICAgICAgICAgICAgSXRlbVJlc291cmNlLm1hcmtJdGVtc1JlYWQoaWRzKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmlzRmVlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICRyb3V0ZS5jdXJyZW50LiQkcm91dGUudHlwZSA9PT0gRkVFRF9UWVBFLkZFRUQ7XG4gICAgfTtcblxuICAgIHRoaXMuYXV0b1BhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzTm90aGluZ01vcmVUb0F1dG9QYWdlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpbiBjYXNlIGEgc3Vic2VxdWVudCBhdXRvcGFnZSByZXF1ZXN0IGNvbWVzIGluIHdhaXQgdW50aWxcbiAgICAgICAgLy8gdGhlIGN1cnJlbnQgb25lIGZpbmlzaGVkIGFuZCBleGVjdXRlIGEgcmVxdWVzdCBpbW1lZGlhdGVseSBhZnRlcndhcmRzXG4gICAgICAgIGlmICghdGhpcy5pc0F1dG9QYWdpbmdFbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLmF1dG9QYWdlQWdhaW4gPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pc0F1dG9QYWdpbmdFbmFibGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYXV0b1BhZ2VBZ2FpbiA9IGZhbHNlO1xuXG4gICAgICAgIHZhciB0eXBlID0gJHJvdXRlLmN1cnJlbnQuJCRyb3V0ZS50eXBlO1xuICAgICAgICB2YXIgaWQgPSAkcm91dGVQYXJhbXMuaWQ7XG4gICAgICAgIHZhciBvbGRlc3RGaXJzdCA9IGdldE9yZGVyaW5nKCk7XG4gICAgICAgIHZhciBzaG93QWxsID0gU2V0dGluZ3NSZXNvdXJjZS5nZXQoJ3Nob3dBbGwnKTtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgc2VhcmNoID0gJGxvY2F0aW9uLnNlYXJjaCgpLnNlYXJjaDtcblxuICAgICAgICBMb2FkaW5nLnNldExvYWRpbmcoJ2F1dG9wYWdpbmcnLCB0cnVlKTtcblxuICAgICAgICBJdGVtUmVzb3VyY2UuYXV0b1BhZ2UodHlwZSwgaWQsIG9sZGVzdEZpcnN0LCBzaG93QWxsLCBzZWFyY2gpXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBQdWJsaXNoZXIucHVibGlzaEFsbChkYXRhKTtcblxuICAgICAgICAgICAgaWYgKGRhdGEuaXRlbXMubGVuZ3RoID49IElURU1fQVVUT19QQUdFX1NJWkUpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmlzQXV0b1BhZ2luZ0VuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxmLmlzTm90aGluZ01vcmVUb0F1dG9QYWdlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNlbGYuaXNBdXRvUGFnaW5nRW5hYmxlZCAmJiBzZWxmLmF1dG9QYWdlQWdhaW4pIHtcbiAgICAgICAgICAgICAgICBzZWxmLmF1dG9QYWdlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYuaXNBdXRvUGFnaW5nRW5hYmxlZCA9IHRydWU7XG4gICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgTG9hZGluZy5zZXRMb2FkaW5nKCdhdXRvcGFnaW5nJywgZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRSZWxhdGl2ZURhdGUgPSBmdW5jdGlvbiAodGltZXN0YW1wKSB7XG4gICAgICAgIGlmICh0aW1lc3RhbXAgIT09IHVuZGVmaW5lZCAmJiB0aW1lc3RhbXAgIT09ICcnKSB7XG4gICAgICAgICAgICB2YXIgbGFuZ3VhZ2VDb2RlID0gU2V0dGluZ3NSZXNvdXJjZS5nZXQoJ2xhbmd1YWdlJyk7XG4gICAgICAgICAgICB2YXIgZGF0ZSA9XG4gICAgICAgICAgICAgICAgbW9tZW50LnVuaXgodGltZXN0YW1wKS5sb2NhbGUobGFuZ3VhZ2VDb2RlKS5mcm9tTm93KCkgKyAnJztcbiAgICAgICAgICAgIHJldHVybiBkYXRlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHJvdXRlLnJlbG9hZCgpO1xuICAgIH07XG5cbiAgICB0aGlzLmdldE1lZGlhVHlwZSA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgIGlmICh0eXBlICYmIHR5cGUuaW5kZXhPZignYXVkaW8nKSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuICdhdWRpbyc7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSAmJiB0eXBlLmluZGV4T2YoJ3ZpZGVvJykgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiAndmlkZW8nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH07XG5cbn1dKTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuY29udHJvbGxlcignRXhwbG9yZUNvbnRyb2xsZXInLFxuW1wic2l0ZXNcIiwgXCIkcm9vdFNjb3BlXCIsIFwiRmVlZFJlc291cmNlXCIsIFwiU2V0dGluZ3NSZXNvdXJjZVwiLCBcIiRsb2NhdGlvblwiLCBmdW5jdGlvbiAoc2l0ZXMsICRyb290U2NvcGUsIEZlZWRSZXNvdXJjZSwgU2V0dGluZ3NSZXNvdXJjZSwgJGxvY2F0aW9uKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR0aGlzLnNpdGVzID0gc2l0ZXM7XG5cdC8vIGpvaW4gYWxsIHNpdGVzXG5cdHRoaXMuZmVlZHMgPSBPYmplY3Qua2V5cyhzaXRlcykubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRyZXR1cm4gW2tleSwgc2l0ZXNba2V5XV07XG5cdH0pLnJlZHVjZShmdW5jdGlvbiAoeHMsIHgpIHtcblx0XHR2YXIgY2F0ZWdvcnkgPSB4WzBdO1xuXHRcdHZhciBmZWVkTGlzdCA9IHhbMV07XG5cdFx0ZmVlZExpc3QuZm9yRWFjaChmdW5jdGlvbiAoZmVlZCkge1xuXHRcdFx0ZmVlZC5jYXRlZ29yeSA9IGNhdGVnb3J5O1xuXHRcdH0pO1xuXHRcdHJldHVybiB4cy5jb25jYXQoZmVlZExpc3QpO1xuXHR9LCBbXSk7XG5cblx0dGhpcy5mZWVkRXhpc3RzID0gZnVuY3Rpb24gKGxvY2F0aW9uKSB7XG5cdFx0cmV0dXJuIEZlZWRSZXNvdXJjZS5nZXRCeUxvY2F0aW9uKGxvY2F0aW9uKSAhPT0gdW5kZWZpbmVkO1xuXHR9O1xuXG5cdHRoaXMuc3Vic2NyaWJlVG8gPSBmdW5jdGlvbiAobG9jYXRpb24pIHtcblx0XHQkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ2FkZEZlZWQnLCBsb2NhdGlvbik7XG5cdH07XG5cblx0dGhpcy5pc0NhdGVnb3J5U2hvd24gPSBmdW5jdGlvbiAoZGF0YSkge1xuXHRcdHJldHVybiBkYXRhLmZpbHRlcihmdW5jdGlvbiAoZWxlbWVudCkge1xuXHRcdFx0XHRyZXR1cm4gRmVlZFJlc291cmNlLmdldEJ5TG9jYXRpb24oZWxlbWVudC5mZWVkKSA9PT0gdW5kZWZpbmVkO1xuXHRcdFx0fSkubGVuZ3RoID4gMDtcblx0fTtcblxuXHR0aGlzLmdldFN1cHBvcnRlZExhbmd1YWdlQ29kZXMgPSBmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuIFNldHRpbmdzUmVzb3VyY2UuZ2V0U3VwcG9ydGVkTGFuZ3VhZ2VDb2RlcygpO1xuXHR9O1xuXG5cdHRoaXMuZ2V0Q3VycmVudExhbmd1YWdlQ29kZSA9IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgbGFuZ3VhZ2UgPSAkbG9jYXRpb24uc2VhcmNoKCkubGFuZztcblx0XHRpZiAoIWxhbmd1YWdlKSB7XG5cdFx0XHRsYW5ndWFnZSA9IFNldHRpbmdzUmVzb3VyY2UuZ2V0KCdsYW5ndWFnZScpO1xuXHRcdH1cblx0XHRyZXR1cm4gbGFuZ3VhZ2U7XG5cdH07XG5cblx0dGhpcy5zaG93TGFuZ3VhZ2UgPSBmdW5jdGlvbiAobGFuZ3VhZ2VDb2RlKSB7XG5cdFx0JGxvY2F0aW9uLnVybCgnL2V4cGxvcmUvP2xhbmc9JyArIGxhbmd1YWdlQ29kZSk7XG5cdH07XG5cblx0dGhpcy5zZWxlY3RlZExhbmd1YWdlQ29kZSA9IHRoaXMuZ2V0Q3VycmVudExhbmd1YWdlQ29kZSgpO1xufV0pO1xuIiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmNvbnRyb2xsZXIoJ05hdmlnYXRpb25Db250cm9sbGVyJyxcbltcIiRyb3V0ZVwiLCBcIkZFRURfVFlQRVwiLCBcIkZlZWRSZXNvdXJjZVwiLCBcIkZvbGRlclJlc291cmNlXCIsIFwiSXRlbVJlc291cmNlXCIsIFwiU2V0dGluZ3NSZXNvdXJjZVwiLCBcIlB1Ymxpc2hlclwiLCBcIiRyb290U2NvcGVcIiwgXCIkbG9jYXRpb25cIiwgXCIkcVwiLCBmdW5jdGlvbiAoJHJvdXRlLCBGRUVEX1RZUEUsIEZlZWRSZXNvdXJjZSwgRm9sZGVyUmVzb3VyY2UsIEl0ZW1SZXNvdXJjZSxcbiAgICBTZXR0aW5nc1Jlc291cmNlLCBQdWJsaXNoZXIsICRyb290U2NvcGUsICRsb2NhdGlvbiwgJHEpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB0aGlzLmZlZWRFcnJvciA9ICcnO1xuICAgIHRoaXMuc2hvd05ld0ZvbGRlciA9IGZhbHNlO1xuICAgIHRoaXMucmVuYW1pbmdGb2xkZXIgPSBmYWxzZTtcbiAgICB0aGlzLmFkZGluZ0ZlZWQgPSBmYWxzZTtcbiAgICB0aGlzLmFkZGluZ0ZvbGRlciA9IGZhbHNlO1xuICAgIHRoaXMuZm9sZGVyRXJyb3IgPSAnJztcbiAgICB0aGlzLnJlbmFtZUVycm9yID0gJyc7XG4gICAgdGhpcy5mZWVkID0ge307XG5cbiAgICB2YXIgZ2V0Um91dGVJZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KCRyb3V0ZS5jdXJyZW50LnBhcmFtcy5pZCwgMTApO1xuICAgIH07XG5cbiAgICB0aGlzLmdldExhbmd1YWdlQ29kZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFNldHRpbmdzUmVzb3VyY2UuZ2V0KCdsYW5ndWFnZScpO1xuICAgIH07XG5cbiAgICB0aGlzLmdldEZlZWRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gRmVlZFJlc291cmNlLmdldEFsbCgpO1xuICAgIH07XG5cbiAgICB0aGlzLmdldEZvbGRlcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBGb2xkZXJSZXNvdXJjZS5nZXRBbGwoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5tYXJrRm9sZGVyUmVhZCA9IGZ1bmN0aW9uIChmb2xkZXJJZCkge1xuICAgICAgICBGZWVkUmVzb3VyY2UubWFya0ZvbGRlclJlYWQoZm9sZGVySWQpO1xuXG4gICAgICAgIEZlZWRSZXNvdXJjZS5nZXRCeUZvbGRlcklkKGZvbGRlcklkKS5mb3JFYWNoKGZ1bmN0aW9uIChmZWVkKSB7XG4gICAgICAgICAgICBJdGVtUmVzb3VyY2UubWFya0ZlZWRSZWFkKGZlZWQuaWQpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdGhpcy5tYXJrRmVlZFJlYWQgPSBmdW5jdGlvbiAoZmVlZElkKSB7XG4gICAgICAgIEl0ZW1SZXNvdXJjZS5tYXJrRmVlZFJlYWQoZmVlZElkKTtcbiAgICAgICAgRmVlZFJlc291cmNlLm1hcmtGZWVkUmVhZChmZWVkSWQpO1xuICAgIH07XG5cbiAgICB0aGlzLm1hcmtSZWFkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBJdGVtUmVzb3VyY2UubWFya1JlYWQoKTtcbiAgICAgICAgRmVlZFJlc291cmNlLm1hcmtSZWFkKCk7XG4gICAgfTtcblxuICAgIHRoaXMuaXNTaG93QWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gU2V0dGluZ3NSZXNvdXJjZS5nZXQoJ3Nob3dBbGwnKTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRGZWVkc09mRm9sZGVyID0gZnVuY3Rpb24gKGZvbGRlcklkKSB7XG4gICAgICAgIHJldHVybiBGZWVkUmVzb3VyY2UuZ2V0QnlGb2xkZXJJZChmb2xkZXJJZCk7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0VW5yZWFkQ291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBGZWVkUmVzb3VyY2UuZ2V0VW5yZWFkQ291bnQoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5pc1VucmVhZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VW5yZWFkQ291bnQoKSA+IDA7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0RmVlZFVucmVhZENvdW50ID0gZnVuY3Rpb24gKGZlZWRJZCkge1xuICAgICAgICB2YXIgZmVlZCA9IEZlZWRSZXNvdXJjZS5nZXRCeUlkKGZlZWRJZCk7XG4gICAgICAgIGlmIChmZWVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmZWVkLnVucmVhZENvdW50O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5pc0ZlZWRVbnJlYWQgPSBmdW5jdGlvbiAoZmVlZElkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEZlZWRVbnJlYWRDb3VudChmZWVkSWQpID4gMDtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRGb2xkZXJVbnJlYWRDb3VudD0gZnVuY3Rpb24gKGZvbGRlcklkKSB7XG4gICAgICAgIHJldHVybiBGZWVkUmVzb3VyY2UuZ2V0Rm9sZGVyVW5yZWFkQ291bnQoZm9sZGVySWQpO1xuICAgIH07XG5cbiAgICB0aGlzLmlzRm9sZGVyVW5yZWFkID0gZnVuY3Rpb24gKGZvbGRlcklkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEZvbGRlclVucmVhZENvdW50KGZvbGRlcklkKSA+IDA7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0U3RhcnJlZENvdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gSXRlbVJlc291cmNlLmdldFN0YXJyZWRDb3VudCgpO1xuICAgIH07XG5cbiAgICB0aGlzLmlzU3RhcnJlZFVucmVhZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3RhcnJlZENvdW50KCkgPiAwO1xuICAgIH07XG5cbiAgICB0aGlzLnRvZ2dsZUZvbGRlciA9IGZ1bmN0aW9uIChmb2xkZXJOYW1lKSB7XG4gICAgICAgIEZvbGRlclJlc291cmNlLnRvZ2dsZU9wZW4oZm9sZGVyTmFtZSk7XG4gICAgfTtcblxuICAgIHRoaXMuaGFzRmVlZHMgPSBmdW5jdGlvbiAoZm9sZGVySWQpIHtcbiAgICAgICAgcmV0dXJuIEZlZWRSZXNvdXJjZS5nZXRGb2xkZXJVbnJlYWRDb3VudChmb2xkZXJJZCkgIT09IHVuZGVmaW5lZDtcbiAgICB9O1xuXG4gICAgdGhpcy5zdWJGZWVkQWN0aXZlID0gZnVuY3Rpb24gKGZvbGRlcklkKSB7XG4gICAgICAgIHZhciB0eXBlID0gJHJvdXRlLmN1cnJlbnQuJCRyb3V0ZS50eXBlO1xuXG4gICAgICAgIGlmICh0eXBlID09PSBGRUVEX1RZUEUuRkVFRCkge1xuICAgICAgICAgICAgdmFyIGZlZWQgPSBGZWVkUmVzb3VyY2UuZ2V0QnlJZChnZXRSb3V0ZUlkKCkpO1xuXG4gICAgICAgICAgICBpZiAoZmVlZCAhPT0gdW5kZWZpbmVkICYmIGZlZWQuZm9sZGVySWQgPT09IGZvbGRlcklkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIHRoaXMuaXNTdWJzY3JpcHRpb25zQWN0aXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJHJvdXRlLmN1cnJlbnQgJiZcbiAgICAgICAgICAgICRyb3V0ZS5jdXJyZW50LiQkcm91dGUudHlwZSA9PT0gRkVFRF9UWVBFLlNVQlNDUklQVElPTlM7XG4gICAgfTtcblxuICAgIHRoaXMuaXNTdGFycmVkQWN0aXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJHJvdXRlLmN1cnJlbnQgJiZcbiAgICAgICAgICAgICRyb3V0ZS5jdXJyZW50LiQkcm91dGUudHlwZSA9PT0gRkVFRF9UWVBFLlNUQVJSRUQ7XG4gICAgfTtcblxuICAgIHRoaXMuaXNFeHBsb3JlQWN0aXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJHJvdXRlLmN1cnJlbnQgJiZcbiAgICAgICAgICAgICRyb3V0ZS5jdXJyZW50LiQkcm91dGUudHlwZSA9PT0gRkVFRF9UWVBFLkVYUExPUkU7XG4gICAgfTtcblxuICAgIHRoaXMuaXNGb2xkZXJBY3RpdmUgPSBmdW5jdGlvbiAoZm9sZGVySWQpIHtcbiAgICAgICAgcmV0dXJuICRyb3V0ZS5jdXJyZW50ICYmXG4gICAgICAgICAgICAkcm91dGUuY3VycmVudC4kJHJvdXRlLnR5cGUgPT09IEZFRURfVFlQRS5GT0xERVIgJiZcbiAgICAgICAgICAgIGdldFJvdXRlSWQoKSA9PT0gZm9sZGVySWQ7XG4gICAgfTtcblxuICAgIHRoaXMuaXNGZWVkQWN0aXZlID0gZnVuY3Rpb24gKGZlZWRJZCkge1xuICAgICAgICByZXR1cm4gJHJvdXRlLmN1cnJlbnQgJiZcbiAgICAgICAgICAgICRyb3V0ZS5jdXJyZW50LiQkcm91dGUudHlwZSA9PT0gRkVFRF9UWVBFLkZFRUQgJiZcbiAgICAgICAgICAgIGdldFJvdXRlSWQoKSA9PT0gZmVlZElkO1xuICAgIH07XG5cbiAgICB0aGlzLmZvbGRlck5hbWVFeGlzdHMgPSBmdW5jdGlvbiAoZm9sZGVyTmFtZSkge1xuICAgICAgICBmb2xkZXJOYW1lID0gZm9sZGVyTmFtZSB8fCAnJztcbiAgICAgICAgcmV0dXJuIEZvbGRlclJlc291cmNlLmdldChmb2xkZXJOYW1lLnRyaW0oKSkgIT09IHVuZGVmaW5lZDtcbiAgICB9O1xuXG4gICAgdGhpcy5mZWVkVXJsRXhpc3RzID0gZnVuY3Rpb24gKHVybCkge1xuICAgICAgICB1cmwgPSB1cmwgfHwgJyc7XG4gICAgICAgIHVybCA9IHVybC50cmltKCk7XG4gICAgICAgIHJldHVybiBGZWVkUmVzb3VyY2UuZ2V0KHVybCkgIT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgRmVlZFJlc291cmNlLmdldCgnaHR0cDovLycgKyB1cmwpICE9PSB1bmRlZmluZWQ7XG4gICAgfTtcblxuICAgIHRoaXMuY3JlYXRlRmVlZCA9IGZ1bmN0aW9uIChmZWVkKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdGhpcy5zaG93TmV3Rm9sZGVyID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYWRkaW5nRmVlZCA9IHRydWU7XG5cbiAgICAgICAgdmFyIG5ld0ZvbGRlciA9IGZlZWQubmV3Rm9sZGVyO1xuICAgICAgICB2YXIgZXhpc3RpbmdGb2xkZXIgPSBmZWVkLmV4aXN0aW5nRm9sZGVyIHx8IHtpZDogMH07XG5cbiAgICAgICAgLy8gd2UgZG9udCBuZWVkIHRvIGNyZWF0ZSBhIG5ldyBmb2xkZXJcbiAgICAgICAgaWYgKG5ld0ZvbGRlciA9PT0gdW5kZWZpbmVkIHx8IG5ld0ZvbGRlciA9PT0gJycpIHtcbiAgICAgICAgICAgIC8vIHRoaXMgaXMgc2V0IHRvIGRpc3BsYXkgdGhlIGZlZWQgaW4gYW55IGZvbGRlciwgZXZlbiBpZiB0aGUgZm9sZGVyXG4gICAgICAgICAgICAvLyBpcyBjbG9zZWQgb3IgaGFzIG5vIHVucmVhZCBhcnRpY2xlc1xuICAgICAgICAgICAgZXhpc3RpbmdGb2xkZXIuZ2V0c0ZlZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICBGZWVkUmVzb3VyY2UuY3JlYXRlKGZlZWQudXJsLCBleGlzdGluZ0ZvbGRlci5pZCwgdW5kZWZpbmVkKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcblxuICAgICAgICAgICAgICAgIFB1Ymxpc2hlci5wdWJsaXNoQWxsKGRhdGEpO1xuXG4gICAgICAgICAgICAgICAgLy8gc2V0IGZvbGRlciBhcyBkZWZhdWx0XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9pdGVtcy9mZWVkcy8nICsgZGF0YS5mZWVkc1swXS5pZCArICcvJyk7XG5cbiAgICAgICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGV4aXN0aW5nRm9sZGVyLmdldHNGZWVkID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGZlZWQudXJsID0gJyc7XG4gICAgICAgICAgICAgICAgc2VsZi5hZGRpbmdGZWVkID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gY3JlYXRlIGZvbGRlciBmaXJzdCBhbmQgdGhlbiB0aGUgZmVlZFxuICAgICAgICAgICAgRm9sZGVyUmVzb3VyY2UuY3JlYXRlKG5ld0ZvbGRlcikudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuXG4gICAgICAgICAgICAgICAgUHVibGlzaGVyLnB1Ymxpc2hBbGwoZGF0YSk7XG5cbiAgICAgICAgICAgICAgICAvLyBzZXQgdGhlIGNyZWF0ZWQgZm9sZGVyIG9uIHNjb3BlIHNvIGl0cyBwcmVzZWxlY3RlZCBmb3IgdGhlXG4gICAgICAgICAgICAgICAgLy8gbmV4dCBhZGRpdGlvblxuICAgICAgICAgICAgICAgIGZlZWQuZXhpc3RpbmdGb2xkZXIgPSBGb2xkZXJSZXNvdXJjZS5nZXQoZGF0YS5mb2xkZXJzWzBdLm5hbWUpO1xuICAgICAgICAgICAgICAgIGZlZWQubmV3Rm9sZGVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHNlbGYuY3JlYXRlRmVlZChmZWVkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuY3JlYXRlRm9sZGVyID0gZnVuY3Rpb24gKGZvbGRlcikge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMuYWRkaW5nRm9sZGVyID0gdHJ1ZTtcbiAgICAgICAgRm9sZGVyUmVzb3VyY2UuY3JlYXRlKGZvbGRlci5uYW1lKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBQdWJsaXNoZXIucHVibGlzaEFsbChkYXRhKTtcbiAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLmFkZGluZ0ZvbGRlciA9IGZhbHNlO1xuICAgICAgICAgICAgZm9sZGVyLm5hbWUgPSAnJztcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRoaXMubW92ZUZlZWQgPSBmdW5jdGlvbiAoZmVlZElkLCBmb2xkZXJJZCkge1xuICAgICAgICB2YXIgcmVsb2FkID0gZmFsc2U7XG4gICAgICAgIHZhciBmZWVkID0gRmVlZFJlc291cmNlLmdldEJ5SWQoZmVlZElkKTtcblxuICAgICAgICBpZiAoZmVlZC5mb2xkZXJJZCA9PT0gZm9sZGVySWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmlzRm9sZGVyQWN0aXZlKGZlZWQuZm9sZGVySWQpIHx8XG4gICAgICAgICAgICB0aGlzLmlzRm9sZGVyQWN0aXZlKGZvbGRlcklkKSkge1xuICAgICAgICAgICAgcmVsb2FkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIEZlZWRSZXNvdXJjZS5tb3ZlKGZlZWRJZCwgZm9sZGVySWQpO1xuXG4gICAgICAgIGlmIChyZWxvYWQpIHtcbiAgICAgICAgICAgICRyb3V0ZS5yZWxvYWQoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnJlbmFtZUZlZWQgPSBmdW5jdGlvbiAoZmVlZCkge1xuICAgICAgICBGZWVkUmVzb3VyY2UucGF0Y2goZmVlZC5pZCwge3RpdGxlOiBmZWVkLnRpdGxlfSk7XG4gICAgICAgIGZlZWQuZWRpdGluZyA9IGZhbHNlO1xuICAgIH07XG5cbiAgICB0aGlzLnJlbmFtZUZvbGRlciA9IGZ1bmN0aW9uIChmb2xkZXIsIG5hbWUpIHtcbiAgICAgICAgZm9sZGVyLnJlbmFtZUVycm9yID0gJyc7XG4gICAgICAgIHRoaXMucmVuYW1pbmdGb2xkZXIgPSB0cnVlO1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgaWYgKGZvbGRlci5uYW1lID09PSBuYW1lKSB7XG4gICAgICAgICAgICBmb2xkZXIucmVuYW1lRXJyb3IgPSAnJztcbiAgICAgICAgICAgIGZvbGRlci5lZGl0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnJlbmFtaW5nRm9sZGVyID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBGb2xkZXJSZXNvdXJjZS5yZW5hbWUoZm9sZGVyLm5hbWUsIG5hbWUpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGZvbGRlci5yZW5hbWVFcnJvciA9ICcnO1xuICAgICAgICAgICAgICAgIGZvbGRlci5lZGl0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIGZvbGRlci5yZW5hbWVFcnJvciA9IG1lc3NhZ2U7XG4gICAgICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzZWxmLnJlbmFtaW5nRm9sZGVyID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnJldmVyc2libHlEZWxldGVGZWVkID0gZnVuY3Rpb24gKGZlZWQpIHtcbiAgICAgICAgRmVlZFJlc291cmNlLnJldmVyc2libHlEZWxldGUoZmVlZC5pZCkuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkcm91dGUucmVsb2FkKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0aGlzLnVuZG9EZWxldGVGZWVkID0gZnVuY3Rpb24gKGZlZWQpIHtcbiAgICAgICAgRmVlZFJlc291cmNlLnVuZG9EZWxldGUoZmVlZC5pZCkuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkcm91dGUucmVsb2FkKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0aGlzLmRlbGV0ZUZlZWQgPSBmdW5jdGlvbiAoZmVlZCkge1xuICAgICAgICBGZWVkUmVzb3VyY2UuZGVsZXRlKGZlZWQudXJsKTtcbiAgICB9O1xuXG5cbiAgICB0aGlzLnJldmVyc2libHlEZWxldGVGb2xkZXIgPSBmdW5jdGlvbiAoZm9sZGVyKSB7XG4gICAgICAgICRxLmFsbChcbiAgICAgICAgICAgIEZlZWRSZXNvdXJjZS5yZXZlcnNpYmx5RGVsZXRlRm9sZGVyKGZvbGRlci5pZCksXG4gICAgICAgICAgICBGb2xkZXJSZXNvdXJjZS5yZXZlcnNpYmx5RGVsZXRlKGZvbGRlci5uYW1lKVxuICAgICAgICApLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHJvdXRlLnJlbG9hZCgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdGhpcy51bmRvRGVsZXRlRm9sZGVyID0gZnVuY3Rpb24gKGZvbGRlcikge1xuICAgICAgICAkcS5hbGwoXG4gICAgICAgICAgICBGZWVkUmVzb3VyY2UudW5kb0RlbGV0ZUZvbGRlcihmb2xkZXIuaWQpLFxuICAgICAgICAgICAgRm9sZGVyUmVzb3VyY2UudW5kb0RlbGV0ZShmb2xkZXIubmFtZSlcbiAgICAgICAgKS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRyb3V0ZS5yZWxvYWQoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRoaXMuZGVsZXRlRm9sZGVyID0gZnVuY3Rpb24gKGZvbGRlcikge1xuICAgICAgICBGZWVkUmVzb3VyY2UuZGVsZXRlRm9sZGVyKGZvbGRlci5pZCk7XG4gICAgICAgIEZvbGRlclJlc291cmNlLmRlbGV0ZShmb2xkZXIubmFtZSk7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0T3JkZXJpbmcgPSBmdW5jdGlvbiAoZmVlZCwgb3JkZXJpbmcpIHtcbiAgICAgICAgRmVlZFJlc291cmNlLnBhdGNoKGZlZWQuaWQsIHtvcmRlcmluZzogb3JkZXJpbmd9KTtcbiAgICAgICAgJHJvdXRlLnJlbG9hZCgpO1xuICAgIH07XG5cbiAgICB0aGlzLnRvZ2dsZVBpbm5lZCA9IGZ1bmN0aW9uIChmZWVkSWQpIHtcbiAgICAgICAgdmFyIGZlZWQgPSBGZWVkUmVzb3VyY2UuZ2V0QnlJZChmZWVkSWQpO1xuICAgICAgICBpZiAoZmVlZCkge1xuICAgICAgICAgICAgcmV0dXJuIEZlZWRSZXNvdXJjZS5wYXRjaChmZWVkSWQsIHtwaW5uZWQ6ICFmZWVkLnBpbm5lZH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuc2V0VXBkYXRlTW9kZSA9IGZ1bmN0aW9uIChmZWVkSWQsIHVwZGF0ZU1vZGUpIHtcbiAgICAgICAgcmV0dXJuIEZlZWRSZXNvdXJjZS5wYXRjaChmZWVkSWQsIHt1cGRhdGVNb2RlOiB1cGRhdGVNb2RlfSk7XG4gICAgfTtcblxuICAgIHRoaXMudG9nZ2xlRnVsbFRleHQgPSBmdW5jdGlvbiAoZmVlZCkge1xuICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJyRyb3V0ZUNoYW5nZVN0YXJ0Jyk7XG4gICAgICAgIEZlZWRSZXNvdXJjZS50b2dnbGVGdWxsVGV4dChmZWVkLmlkKS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnJHJvdXRlQ2hhbmdlU3VjY2VzcycpO1xuICAgICAgICAgICAgJHJvdXRlLnJlbG9hZCgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdGhpcy5zZWFyY2ggPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSAnJykge1xuICAgICAgICAgICAgJGxvY2F0aW9uLnNlYXJjaCgnc2VhcmNoJywgbnVsbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkbG9jYXRpb24uc2VhcmNoKCdzZWFyY2gnLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgJHJvb3RTY29wZS4kb24oJ21vdmVGZWVkVG9Gb2xkZXInLCBmdW5jdGlvbiAoc2NvcGUsIGRhdGEpIHtcbiAgICAgICAgc2VsZi5tb3ZlRmVlZChkYXRhLmZlZWRJZCwgZGF0YS5mb2xkZXJJZCk7XG4gICAgfSk7XG5cbiAgICAvLyBiYXNlZCBvbiB0aGUgcm91dGUgd2Ugd2FudCB0byBwcmVzZWxlY3QgYSBmb2xkZXIgaW4gdGhlIGFkZCBuZXcgZmVlZFxuICAgIC8vIGRyb3AgZG93blxuICAgIHZhciBzZXRTZWxlY3RlZEZvbGRlckZvclJvdXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdHlwZTtcbiAgICAgICAgaWYgKCRyb3V0ZS5jdXJyZW50KSB7XG4gICAgICAgICAgICB0eXBlID0gJHJvdXRlLmN1cnJlbnQuJCRyb3V0ZS50eXBlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGZvbGRlcklkID0gMDtcblxuICAgICAgICBpZiAodHlwZSA9PT0gRkVFRF9UWVBFLkZPTERFUikge1xuICAgICAgICAgICAgZm9sZGVySWQgPSBnZXRSb3V0ZUlkKCk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gRkVFRF9UWVBFLkZFRUQpIHtcbiAgICAgICAgICAgIHZhciBmZWVkID0gRmVlZFJlc291cmNlLmdldEJ5SWQoZ2V0Um91dGVJZCgpKTtcblxuICAgICAgICAgICAgaWYgKGZlZWQpIHtcbiAgICAgICAgICAgICAgICBmb2xkZXJJZCA9IGZlZWQuZm9sZGVySWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZm9sZGVyO1xuICAgICAgICBpZiAoZm9sZGVySWQgIT09IDApIHtcbiAgICAgICAgICAgIGZvbGRlciA9IEZvbGRlclJlc291cmNlLmdldEJ5SWQoZm9sZGVySWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5mZWVkLmV4aXN0aW5nRm9sZGVyID0gZm9sZGVyO1xuICAgIH07XG5cbiAgICAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2V0U2VsZWN0ZWRGb2xkZXJGb3JSb3V0ZSgpO1xuICAgIH0pO1xuXG59XSk7XG4iLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuY29udHJvbGxlcignU2V0dGluZ3NDb250cm9sbGVyJyxcbltcIiRyb3V0ZVwiLCBcIiRxXCIsIFwiU2V0dGluZ3NSZXNvdXJjZVwiLCBcIkl0ZW1SZXNvdXJjZVwiLCBcIk9QTUxQYXJzZXJcIiwgXCJPUE1MSW1wb3J0ZXJcIiwgXCJQdWJsaXNoZXJcIiwgZnVuY3Rpb24gKCRyb3V0ZSwgJHEsIFNldHRpbmdzUmVzb3VyY2UsIEl0ZW1SZXNvdXJjZSwgT1BNTFBhcnNlcixcbiAgICAgICAgICBPUE1MSW1wb3J0ZXIsIFB1Ymxpc2hlcikge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHRoaXMuaXNPUE1MSW1wb3J0aW5nID0gZmFsc2U7XG4gICAgdGhpcy5pc0FydGljbGVzSW1wb3J0aW5nID0gZmFsc2U7XG4gICAgdGhpcy5vcG1sSW1wb3J0RXJyb3IgPSBmYWxzZTtcbiAgICB0aGlzLmFydGljbGVJbXBvcnRFcnJvciA9IGZhbHNlO1xuXG4gICAgdmFyIHNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgIFNldHRpbmdzUmVzb3VyY2Uuc2V0KGtleSwgdmFsdWUpO1xuXG4gICAgICAgIGlmIChbJ3Nob3dBbGwnLCAnb2xkZXN0Rmlyc3QnLCAnY29tcGFjdCddLmluZGV4T2Yoa2V5KSA+PSAwKSB7XG4gICAgICAgICAgICAkcm91dGUucmVsb2FkKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy50b2dnbGVTZXR0aW5nID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBzZXQoa2V5LCAhdGhpcy5nZXRTZXR0aW5nKGtleSkpO1xuICAgIH07XG5cbiAgICB0aGlzLmdldFNldHRpbmcgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiBTZXR0aW5nc1Jlc291cmNlLmdldChrZXkpO1xuICAgIH07XG5cbiAgICB0aGlzLmltcG9ydE9QTUwgPSBmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgICB0aGlzLm9wbWxJbXBvcnRFcnJvciA9IGZhbHNlO1xuICAgICAgICB0aGlzLmFydGljbGVJbXBvcnRFcnJvciA9IGZhbHNlO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmlzT1BNTEltcG9ydGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIHBhcnNlZENvbnRlbnQgPSBPUE1MUGFyc2VyLnBhcnNlKGNvbnRlbnQpO1xuXG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgam9iU2l6ZSA9IDU7XG5cbiAgICAgICAgICAgIE9QTUxJbXBvcnRlci5pbXBvcnRGb2xkZXJzKHBhcnNlZENvbnRlbnQpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZmVlZFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE9QTUxJbXBvcnRlci5pbXBvcnRGZWVkUXVldWUoZmVlZFF1ZXVlLCBqb2JTaXplKTtcbiAgICAgICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNlbGYuaXNPUE1MSW1wb3J0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICB0aGlzLmlzT1BNTEltcG9ydGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5vcG1sSW1wb3J0RXJyb3IgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuaW1wb3J0QXJ0aWNsZXMgPSBmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgICB0aGlzLm9wbWxJbXBvcnRFcnJvciA9IGZhbHNlO1xuICAgICAgICB0aGlzLmFydGljbGVJbXBvcnRFcnJvciA9IGZhbHNlO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmlzQXJ0aWNsZXNJbXBvcnRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIGFydGljbGVzID0gSlNPTi5wYXJzZShjb250ZW50KTtcblxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgSXRlbVJlc291cmNlLmltcG9ydEFydGljbGVzKGFydGljbGVzKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgUHVibGlzaGVyLnB1Ymxpc2hBbGwoZGF0YSk7XG4gICAgICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmlzQXJ0aWNsZXNJbXBvcnRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHRoaXMuYXJ0aWNsZUltcG9ydEVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaXNBcnRpY2xlc0ltcG9ydGluZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxufV0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5maWx0ZXIoJ3RydXN0VXJsJywgW1wiJHNjZVwiLCBmdW5jdGlvbiAoJHNjZSkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHJldHVybiBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgIHJldHVybiAkc2NlLnRydXN0QXNSZXNvdXJjZVVybCh1cmwpO1xuICAgIH07XG59XSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmZpbHRlcigndW5yZWFkQ291bnRGb3JtYXR0ZXInLCBmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh1bnJlYWRDb3VudCkge1xuICAgICAgICBpZiAodW5yZWFkQ291bnQgPiA5OTkpIHtcbiAgICAgICAgICAgIHJldHVybiAnOTk5Kyc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVucmVhZENvdW50O1xuICAgIH07XG59KTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuZmFjdG9yeSgnRmVlZFJlc291cmNlJywgW1wiUmVzb3VyY2VcIiwgXCIkaHR0cFwiLCBcIkJBU0VfVVJMXCIsIFwiJHFcIiwgZnVuY3Rpb24gKFJlc291cmNlLCAkaHR0cCwgQkFTRV9VUkwsICRxKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIEZlZWRSZXNvdXJjZSA9IGZ1bmN0aW9uICgkaHR0cCwgQkFTRV9VUkwsICRxKSB7XG4gICAgICAgIFJlc291cmNlLmNhbGwodGhpcywgJGh0dHAsIEJBU0VfVVJMLCAndXJsJyk7XG4gICAgICAgIHRoaXMuaWRzID0ge307XG4gICAgICAgIHRoaXMubG9jYXRpb25zID0ge307XG4gICAgICAgIHRoaXMudW5yZWFkQ291bnQgPSAwO1xuICAgICAgICB0aGlzLmZvbGRlclVucmVhZENvdW50ID0ge307XG4gICAgICAgIHRoaXMuZm9sZGVySWRzID0ge307XG4gICAgICAgIHRoaXMuJHEgPSAkcTtcbiAgICB9O1xuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUmVzb3VyY2UucHJvdG90eXBlKTtcblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUucmVjZWl2ZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIFJlc291cmNlLnByb3RvdHlwZS5yZWNlaXZlLmNhbGwodGhpcywgZGF0YSk7XG4gICAgICAgIHRoaXMudXBkYXRlVW5yZWFkQ2FjaGUoKTtcbiAgICAgICAgdGhpcy51cGRhdGVGb2xkZXJDYWNoZSgpO1xuICAgIH07XG5cbiAgICBGZWVkUmVzb3VyY2UucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBSZXNvdXJjZS5wcm90b3R5cGUuY2xlYXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy51bnJlYWRDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuZm9sZGVyVW5yZWFkQ291bnQgPSB7fTtcbiAgICAgICAgdGhpcy5mb2xkZXJJZHMgPSB7fTtcbiAgICAgICAgdGhpcy5pZHMgPSB7fTtcbiAgICAgICAgdGhpcy5sb2NhdGlvbnMgPSB7fTtcbiAgICB9O1xuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS51cGRhdGVVbnJlYWRDYWNoZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy51bnJlYWRDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuZm9sZGVyVW5yZWFkQ291bnQgPSB7fTtcblxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMudmFsdWVzLmZvckVhY2goZnVuY3Rpb24gKGZlZWQpIHtcbiAgICAgICAgICAgIGlmIChmZWVkLnVucmVhZENvdW50KSB7XG4gICAgICAgICAgICAgICAgc2VsZi51bnJlYWRDb3VudCArPSBmZWVkLnVucmVhZENvdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZlZWQuZm9sZGVySWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHNlbGYuZm9sZGVyVW5yZWFkQ291bnRbZmVlZC5mb2xkZXJJZF0gPVxuICAgICAgICAgICAgICAgICAgICBzZWxmLmZvbGRlclVucmVhZENvdW50W2ZlZWQuZm9sZGVySWRdIHx8IDA7XG4gICAgICAgICAgICAgICAgc2VsZi5mb2xkZXJVbnJlYWRDb3VudFtmZWVkLmZvbGRlcklkXSArPSBmZWVkLnVucmVhZENvdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG5cbiAgICBGZWVkUmVzb3VyY2UucHJvdG90eXBlLnVwZGF0ZUZvbGRlckNhY2hlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmZvbGRlcklkcyA9IHt9O1xuXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdGhpcy52YWx1ZXMuZm9yRWFjaChmdW5jdGlvbiAoZmVlZCkge1xuICAgICAgICAgICAgc2VsZi5mb2xkZXJJZHNbZmVlZC5mb2xkZXJJZF0gPVxuICAgICAgICAgICAgICAgIHNlbGYuZm9sZGVySWRzW2ZlZWQuZm9sZGVySWRdIHx8IFtdO1xuICAgICAgICAgICAgc2VsZi5mb2xkZXJJZHNbZmVlZC5mb2xkZXJJZF0ucHVzaChmZWVkKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgUmVzb3VyY2UucHJvdG90eXBlLmFkZC5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICAgICAgaWYgKHZhbHVlLmlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaWRzW3ZhbHVlLmlkXSA9IHRoaXMuaGFzaE1hcFt2YWx1ZS51cmxdO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZS5sb2NhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmxvY2F0aW9uc1t2YWx1ZS5sb2NhdGlvbl0gPSB0aGlzLmhhc2hNYXBbdmFsdWUudXJsXTtcbiAgICAgICAgfVxuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUubWFya1JlYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudmFsdWVzLmZvckVhY2goZnVuY3Rpb24gKGZlZWQpIHtcbiAgICAgICAgICAgIGZlZWQudW5yZWFkQ291bnQgPSAwO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnVwZGF0ZVVucmVhZENhY2hlKCk7XG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS5tYXJrRmVlZFJlYWQgPSBmdW5jdGlvbiAoZmVlZElkKSB7XG4gICAgICAgIHRoaXMuaWRzW2ZlZWRJZF0udW5yZWFkQ291bnQgPSAwO1xuICAgICAgICB0aGlzLnVwZGF0ZVVucmVhZENhY2hlKCk7XG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS5tYXJrRm9sZGVyUmVhZCA9IGZ1bmN0aW9uIChmb2xkZXJJZCkge1xuICAgICAgICB0aGlzLnZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uIChmZWVkKSB7XG4gICAgICAgICAgICBpZiAoZmVlZC5mb2xkZXJJZCA9PT0gZm9sZGVySWQpIHtcbiAgICAgICAgICAgICAgICBmZWVkLnVucmVhZENvdW50ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy51cGRhdGVVbnJlYWRDYWNoZSgpO1xuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUubWFya0l0ZW1PZkZlZWRSZWFkID0gZnVuY3Rpb24gKGZlZWRJZCkge1xuICAgICAgICB0aGlzLmlkc1tmZWVkSWRdLnVucmVhZENvdW50IC09IDE7XG4gICAgICAgIHRoaXMudXBkYXRlVW5yZWFkQ2FjaGUoKTtcbiAgICB9O1xuXG5cbiAgICBGZWVkUmVzb3VyY2UucHJvdG90eXBlLm1hcmtJdGVtc09mRmVlZHNSZWFkID0gZnVuY3Rpb24gKGZlZWRJZHMpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBmZWVkSWRzLmZvckVhY2goZnVuY3Rpb24gKGZlZWRJZCkge1xuICAgICAgICAgICAgc2VsZi5pZHNbZmVlZElkXS51bnJlYWRDb3VudCAtPSAxO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnVwZGF0ZVVucmVhZENhY2hlKCk7XG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS5tYXJrSXRlbU9mRmVlZFVucmVhZCA9IGZ1bmN0aW9uIChmZWVkSWQpIHtcbiAgICAgICAgdGhpcy5pZHNbZmVlZElkXS51bnJlYWRDb3VudCArPSAxO1xuICAgICAgICB0aGlzLnVwZGF0ZVVucmVhZENhY2hlKCk7XG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS5nZXRVbnJlYWRDb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5yZWFkQ291bnQ7XG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS5nZXRGb2xkZXJVbnJlYWRDb3VudCA9IGZ1bmN0aW9uIChmb2xkZXJJZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mb2xkZXJVbnJlYWRDb3VudFtmb2xkZXJJZF07XG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS5nZXRCeUZvbGRlcklkID0gZnVuY3Rpb24gKGZvbGRlcklkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZvbGRlcklkc1tmb2xkZXJJZF0gfHwgW107XG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS5nZXRCeUlkID0gZnVuY3Rpb24gKGZlZWRJZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pZHNbZmVlZElkXTtcbiAgICB9O1xuXG5cbiAgICBGZWVkUmVzb3VyY2UucHJvdG90eXBlLmdldEJ5TG9jYXRpb24gPSBmdW5jdGlvbiAobG9jYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYXRpb25zW2xvY2F0aW9uXTtcbiAgICB9O1xuXG5cbiAgICBGZWVkUmVzb3VyY2UucHJvdG90eXBlLm1vdmUgPSBmdW5jdGlvbiAoZmVlZElkLCBmb2xkZXJJZCkge1xuICAgICAgICB2YXIgZmVlZCA9IHRoaXMuZ2V0QnlJZChmZWVkSWQpO1xuICAgICAgICBmZWVkLmZvbGRlcklkID0gZm9sZGVySWQ7XG5cbiAgICAgICAgdGhpcy51cGRhdGVGb2xkZXJDYWNoZSgpO1xuICAgICAgICB0aGlzLnVwZGF0ZVVucmVhZENhY2hlKCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucGF0Y2goZmVlZElkLCB7Zm9sZGVySWQ6IGZvbGRlcklkfSk7XG5cbiAgICB9O1xuXG5cbiAgICBGZWVkUmVzb3VyY2UucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uICh1cmwsIGZvbGRlcklkLCB0aXRsZSkge1xuICAgICAgICB1cmwgPSB1cmwudHJpbSgpO1xuICAgICAgICBpZiAoIXVybC5zdGFydHNXaXRoKCdodHRwJykpIHtcbiAgICAgICAgICAgIHVybCA9ICdodHRwczovLycgKyB1cmw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGl0bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGl0bGUgPSB0aXRsZS50cmltKCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZmVlZCA9IHtcbiAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgZm9sZGVySWQ6IGZvbGRlcklkIHx8IDAsXG4gICAgICAgICAgICB0aXRsZTogdGl0bGUgfHwgdXJsLFxuICAgICAgICAgICAgdW5yZWFkQ291bnQ6IDBcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmFkZChmZWVkKTtcbiAgICAgICAgdGhpcy51cGRhdGVGb2xkZXJDYWNoZSgpO1xuXG4gICAgICAgIHZhciBkZWZlcnJlZCA9IHRoaXMuJHEuZGVmZXIoKTtcblxuICAgICAgICB0aGlzLmh0dHAoe1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICB1cmw6IHRoaXMuQkFTRV9VUkwgKyAnL2ZlZWRzJyxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgICAgICBwYXJlbnRGb2xkZXJJZDogZm9sZGVySWQgfHwgMCxcbiAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIGZlZWQuZmF2aWNvbkxpbmsgPSAnJztcbiAgICAgICAgICAgIGZlZWQuZXJyb3IgPSBkYXRhLm1lc3NhZ2U7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS5yZXZlcnNpYmx5RGVsZXRlID0gZnVuY3Rpb24gKGlkLCB1cGRhdGVDYWNoZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNGb2xkZXIpIHtcbiAgICAgICAgdmFyIGZlZWQgPSB0aGlzLmdldEJ5SWQoaWQpO1xuXG4gICAgICAgIC8vIGlmIGEgZm9sZGVyIGlzIGRlbGV0ZWQgaXQgZG9lcyBub3QgaGF2ZSB0byB0cmlnZ2VyIHRoZSBkZWxldGVcbiAgICAgICAgLy8gYXR0cmlidXRlIGZvciB0aGUgZmVlZCBiZWNhdXNlIHRoZSBmZWVkIGlzIG5vdCBkZWxldGVkLCBpdHMganVzdCBub3RcbiAgICAgICAgLy8gZGlzcGxheWVkLiBPdGhlcndpc2UgdGhpcyBjYXVzZXMgdGhlIGZlZWQgdG8gYWxzbyBiZSBkZWxldGVkIGFnYWluXG4gICAgICAgIC8vIGJlY2F1c2UgdGhlIGZvbGRlciBkZXN0cm95cyB0aGUgZmVlZCdzIHNjb3BlXG4gICAgICAgIGlmIChmZWVkICYmIGlzRm9sZGVyICE9PSB0cnVlKSB7XG4gICAgICAgICAgICBmZWVkLmRlbGV0ZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHVwZGF0ZUNhY2hlICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVVbnJlYWRDYWNoZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5kZWxldGUodGhpcy5CQVNFX1VSTCArICcvZmVlZHMvJyArIGlkKTtcbiAgICB9O1xuXG5cbiAgICBGZWVkUmVzb3VyY2UucHJvdG90eXBlLnJldmVyc2libHlEZWxldGVGb2xkZXIgPSBmdW5jdGlvbiAoZm9sZGVySWQpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcbiAgICAgICAgdGhpcy5nZXRCeUZvbGRlcklkKGZvbGRlcklkKS5mb3JFYWNoKGZ1bmN0aW9uIChmZWVkKSB7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHNlbGYucmV2ZXJzaWJseURlbGV0ZShmZWVkLmlkLCBmYWxzZSwgdHJ1ZSkpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnVwZGF0ZVVucmVhZENhY2hlKCk7XG5cbiAgICAgICAgdmFyIGRlZmVycmVkID0gdGhpcy4kcS5hbGwocHJvbWlzZXMpO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9O1xuXG5cbiAgICBGZWVkUmVzb3VyY2UucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uICh1cmwsIHVwZGF0ZUNhY2hlKSB7XG4gICAgICAgIHZhciBmZWVkID0gdGhpcy5nZXQodXJsKTtcbiAgICAgICAgaWYgKGZlZWQgIT09IHVuZGVmaW5lZCAmJiBmZWVkLmlkKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5pZHNbZmVlZC5pZF07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmVlZCAhPT0gdW5kZWZpbmVkICYmIGZlZWQubG9jYXRpb24pIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxvY2F0aW9uc1tmZWVkLmxvY2F0aW9uXTtcbiAgICAgICAgfVxuXG4gICAgICAgIFJlc291cmNlLnByb3RvdHlwZS5kZWxldGUuY2FsbCh0aGlzLCB1cmwpO1xuXG4gICAgICAgIGlmICh1cGRhdGVDYWNoZSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVW5yZWFkQ2FjaGUoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRm9sZGVyQ2FjaGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmZWVkO1xuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUuZGVsZXRlRm9sZGVyID0gZnVuY3Rpb24gKGZvbGRlcklkKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdGhpcy5nZXRCeUZvbGRlcklkKGZvbGRlcklkKS5mb3JFYWNoKGZ1bmN0aW9uIChmZWVkKSB7XG4gICAgICAgICAgICBzZWxmLmRlbGV0ZShmZWVkLnVybCwgZmFsc2UpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnVwZGF0ZVVucmVhZENhY2hlKCk7XG4gICAgICAgIHRoaXMudXBkYXRlRm9sZGVyQ2FjaGUoKTtcbiAgICB9O1xuXG5cbiAgICBGZWVkUmVzb3VyY2UucHJvdG90eXBlLnVuZG9EZWxldGUgPSBmdW5jdGlvbiAoaWQsIHVwZGF0ZUNhY2hlKSB7XG4gICAgICAgIHZhciBmZWVkID0gdGhpcy5nZXRCeUlkKGlkKTtcblxuICAgICAgICBpZiAoZmVlZCkge1xuICAgICAgICAgICAgZmVlZC5kZWxldGVkID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXBkYXRlQ2FjaGUgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVVucmVhZENhY2hlKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodGhpcy5CQVNFX1VSTCArICcvZmVlZHMvJyArIGlkICsgJy9yZXN0b3JlJyk7XG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS51bmRvRGVsZXRlRm9sZGVyID0gZnVuY3Rpb24gKGZvbGRlcklkKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIHByb21pc2VzID0gW107XG5cbiAgICAgICAgdGhpcy5nZXRCeUZvbGRlcklkKGZvbGRlcklkKS5mb3JFYWNoKGZ1bmN0aW9uIChmZWVkKSB7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHNlbGYudW5kb0RlbGV0ZShmZWVkLmlkLCBmYWxzZSkpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnVwZGF0ZVVucmVhZENhY2hlKCk7XG5cbiAgICAgICAgdmFyIGRlZmVycmVkID0gdGhpcy4kcS5hbGwocHJvbWlzZXMpO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9O1xuXG5cbiAgICBGZWVkUmVzb3VyY2UucHJvdG90eXBlLnNldE9yZGVyaW5nID0gZnVuY3Rpb24gKGZlZWRJZCwgb3JkZXJpbmcpIHtcbiAgICAgICAgdmFyIGZlZWQgPSB0aGlzLmdldEJ5SWQoZmVlZElkKTtcblxuICAgICAgICBpZiAoZmVlZCkge1xuICAgICAgICAgICAgZmVlZC5vcmRlcmluZyA9IG9yZGVyaW5nO1xuICAgICAgICAgICAgdmFyIHVybCA9IHRoaXMuQkFTRV9VUkwgKyAnL2ZlZWRzLycgKyBmZWVkSWQ7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBhdGNoKHVybCwge1xuICAgICAgICAgICAgICAgIG9yZGVyaW5nOiBvcmRlcmluZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cbiAgICBGZWVkUmVzb3VyY2UucHJvdG90eXBlLnNldFBpbm5lZCA9IGZ1bmN0aW9uIChmZWVkSWQsIGlzUGlubmVkKSB7XG4gICAgICAgIHZhciBmZWVkID0gdGhpcy5nZXRCeUlkKGZlZWRJZCk7XG5cbiAgICAgICAgaWYgKGZlZWQpIHtcbiAgICAgICAgICAgIGZlZWQucGlubmVkID0gaXNQaW5uZWQ7XG4gICAgICAgICAgICB2YXIgdXJsID0gdGhpcy5CQVNFX1VSTCArICcvZmVlZHMvJyArIGZlZWRJZDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHAucGF0Y2godXJsLCB7XG4gICAgICAgICAgICAgICAgcGlubmVkOiBpc1Bpbm5lZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cbiAgICBGZWVkUmVzb3VyY2UucHJvdG90eXBlLnBhdGNoID0gZnVuY3Rpb24gKGZlZWRJZCwgZGlmZikge1xuICAgICAgICB2YXIgZmVlZCA9IHRoaXMuZ2V0QnlJZChmZWVkSWQpO1xuXG4gICAgICAgIGlmIChmZWVkKSB7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhkaWZmKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgICAgIGZlZWRba2V5XSA9IGRpZmZba2V5XTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIHVybCA9IHRoaXMuQkFTRV9VUkwgKyAnL2ZlZWRzLycgKyBmZWVkSWQ7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBhdGNoKHVybCwgZGlmZik7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cbiAgICBGZWVkUmVzb3VyY2UucHJvdG90eXBlLnRvZ2dsZUZ1bGxUZXh0ID0gZnVuY3Rpb24gKGZlZWRJZCkge1xuICAgICAgICB2YXIgZmVlZCA9IHRoaXMuZ2V0QnlJZChmZWVkSWQpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnBhdGNoKGZlZWRJZCwge2Z1bGxUZXh0RW5hYmxlZDogIWZlZWQuZnVsbFRleHRFbmFibGVkfSk7XG4gICAgfTtcblxuXG4gICAgcmV0dXJuIG5ldyBGZWVkUmVzb3VyY2UoJGh0dHAsIEJBU0VfVVJMLCAkcSk7XG59XSk7XG4iLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuZmFjdG9yeSgnRm9sZGVyUmVzb3VyY2UnLCBbXCJSZXNvdXJjZVwiLCBcIiRodHRwXCIsIFwiQkFTRV9VUkxcIiwgXCIkcVwiLCBmdW5jdGlvbiAoUmVzb3VyY2UsICRodHRwLCBCQVNFX1VSTCwgJHEpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgRm9sZGVyUmVzb3VyY2UgPSBmdW5jdGlvbiAoJGh0dHAsIEJBU0VfVVJMLCAkcSkge1xuICAgICAgICBSZXNvdXJjZS5jYWxsKHRoaXMsICRodHRwLCBCQVNFX1VSTCwgJ25hbWUnKTtcbiAgICAgICAgdGhpcy5kZWxldGVkID0gbnVsbDtcbiAgICAgICAgdGhpcy4kcSA9ICRxO1xuICAgICAgICB0aGlzLmlkcyA9IHt9O1xuICAgIH07XG5cbiAgICBGb2xkZXJSZXNvdXJjZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFJlc291cmNlLnByb3RvdHlwZSk7XG5cblxuICAgIEZvbGRlclJlc291cmNlLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgUmVzb3VyY2UucHJvdG90eXBlLmFkZC5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICAgICAgaWYgKHZhbHVlLmlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaWRzW3ZhbHVlLmlkXSA9IHRoaXMuaGFzaE1hcFt2YWx1ZS5uYW1lXTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBGb2xkZXJSZXNvdXJjZS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIFJlc291cmNlLnByb3RvdHlwZS5jbGVhci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLmlkcyA9IHt9O1xuICAgIH07XG5cbiAgICBGb2xkZXJSZXNvdXJjZS5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgdmFyIGZvbGRlciA9IHRoaXMuZ2V0KG5hbWUpO1xuICAgICAgICBpZiAoZm9sZGVyICE9PSB1bmRlZmluZWQgJiYgZm9sZGVyLmlkKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5pZHNbZm9sZGVyLmlkXTtcbiAgICAgICAgfVxuXG4gICAgICAgIFJlc291cmNlLnByb3RvdHlwZS5kZWxldGUuY2FsbCh0aGlzLCBuYW1lKTtcblxuICAgICAgICByZXR1cm4gZm9sZGVyO1xuICAgIH07XG5cbiAgICBGb2xkZXJSZXNvdXJjZS5wcm90b3R5cGUudG9nZ2xlT3BlbiA9IGZ1bmN0aW9uIChmb2xkZXJOYW1lKSB7XG4gICAgICAgIHZhciBmb2xkZXIgPSB0aGlzLmdldChmb2xkZXJOYW1lKTtcbiAgICAgICAgZm9sZGVyLm9wZW5lZCA9ICFmb2xkZXIub3BlbmVkO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAoe1xuICAgICAgICAgICAgdXJsOiB0aGlzLkJBU0VfVVJMICsgJy9mb2xkZXJzLycgKyBmb2xkZXIuaWQgKyAnL29wZW4nLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgZm9sZGVySWQ6IGZvbGRlci5pZCxcbiAgICAgICAgICAgICAgICBvcGVuOiBmb2xkZXIub3BlbmVkXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cblxuICAgIEZvbGRlclJlc291cmNlLnByb3RvdHlwZS5yZW5hbWUgPSBmdW5jdGlvbiAoZm9sZGVyTmFtZSwgdG9Gb2xkZXJOYW1lKSB7XG4gICAgICAgIHZhciBmb2xkZXIgPSB0aGlzLmdldChmb2xkZXJOYW1lKTtcbiAgICAgICAgdmFyIGRlZmVycmVkID0gdGhpcy4kcS5kZWZlcigpO1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5odHRwKHtcbiAgICAgICAgICAgIHVybDogdGhpcy5CQVNFX1VSTCArICcvZm9sZGVycy8nICsgZm9sZGVyLmlkICsgJy9yZW5hbWUnLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgZm9sZGVyTmFtZTogdG9Gb2xkZXJOYW1lXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZm9sZGVyLm5hbWUgPSB0b0ZvbGRlck5hbWU7XG4gICAgICAgICAgICBkZWxldGUgc2VsZi5oYXNoTWFwW2ZvbGRlck5hbWVdO1xuICAgICAgICAgICAgc2VsZi5oYXNoTWFwW3RvRm9sZGVyTmFtZV0gPSBmb2xkZXI7XG5cbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChkYXRhLm1lc3NhZ2UpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9O1xuXG4gICAgRm9sZGVyUmVzb3VyY2UucHJvdG90eXBlLmdldEJ5SWQgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWRzW2lkXTtcbiAgICB9O1xuXG4gICAgRm9sZGVyUmVzb3VyY2UucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChmb2xkZXJOYW1lKSB7XG4gICAgICAgIGZvbGRlck5hbWUgPSBmb2xkZXJOYW1lLnRyaW0oKTtcbiAgICAgICAgdmFyIGZvbGRlciA9IHtcbiAgICAgICAgICAgIG5hbWU6IGZvbGRlck5hbWVcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmFkZChmb2xkZXIpO1xuXG4gICAgICAgIHZhciBkZWZlcnJlZCA9IHRoaXMuJHEuZGVmZXIoKTtcblxuICAgICAgICB0aGlzLmh0dHAoe1xuICAgICAgICAgICAgdXJsOiB0aGlzLkJBU0VfVVJMICsgJy9mb2xkZXJzJyxcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGZvbGRlck5hbWU6IGZvbGRlck5hbWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIGZvbGRlci5lcnJvciA9IGRhdGEubWVzc2FnZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfTtcblxuXG4gICAgRm9sZGVyUmVzb3VyY2UucHJvdG90eXBlLnJldmVyc2libHlEZWxldGUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB2YXIgZm9sZGVyID0gdGhpcy5nZXQobmFtZSk7XG4gICAgICAgIHZhciBpZCA9IGZvbGRlci5pZDtcbiAgICAgICAgZm9sZGVyLmRlbGV0ZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwLmRlbGV0ZSh0aGlzLkJBU0VfVVJMICsgJy9mb2xkZXJzLycgKyBpZCk7XG4gICAgfTtcblxuXG4gICAgRm9sZGVyUmVzb3VyY2UucHJvdG90eXBlLnVuZG9EZWxldGUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB2YXIgZm9sZGVyID0gdGhpcy5nZXQobmFtZSk7XG4gICAgICAgIHZhciBpZCA9IGZvbGRlci5pZDtcbiAgICAgICAgZm9sZGVyLmRlbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KHRoaXMuQkFTRV9VUkwgKyAnL2ZvbGRlcnMvJyArIGlkICsgJy9yZXN0b3JlJyk7XG4gICAgfTtcblxuXG4gICAgcmV0dXJuIG5ldyBGb2xkZXJSZXNvdXJjZSgkaHR0cCwgQkFTRV9VUkwsICRxKTtcbn1dKTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuZmFjdG9yeSgnSXRlbVJlc291cmNlJywgW1wiUmVzb3VyY2VcIiwgXCIkaHR0cFwiLCBcIkJBU0VfVVJMXCIsIFwiSVRFTV9CQVRDSF9TSVpFXCIsIGZ1bmN0aW9uIChSZXNvdXJjZSwgJGh0dHAsIEJBU0VfVVJMLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJVEVNX0JBVENIX1NJWkUpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgSXRlbVJlc291cmNlID0gZnVuY3Rpb24gKCRodHRwLCBCQVNFX1VSTCwgSVRFTV9CQVRDSF9TSVpFKSB7XG4gICAgICAgIFJlc291cmNlLmNhbGwodGhpcywgJGh0dHAsIEJBU0VfVVJMKTtcbiAgICAgICAgdGhpcy5iYXRjaFNpemUgPSBJVEVNX0JBVENIX1NJWkU7XG4gICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICB9O1xuXG4gICAgSXRlbVJlc291cmNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUmVzb3VyY2UucHJvdG90eXBlKTtcblxuICAgIEl0ZW1SZXNvdXJjZS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc3RhcnJlZENvdW50ID0gMDtcbiAgICAgICAgdGhpcy5sb3dlc3RJZCA9IDA7XG4gICAgICAgIHRoaXMuaGlnaGVzdElkID0gMDtcbiAgICAgICAgUmVzb3VyY2UucHJvdG90eXBlLmNsZWFyLmNhbGwodGhpcyk7XG4gICAgfTtcblxuICAgIEl0ZW1SZXNvdXJjZS5wcm90b3R5cGUucmVjZWl2ZSA9IGZ1bmN0aW9uICh2YWx1ZSwgY2hhbm5lbCkge1xuICAgICAgICBzd2l0Y2ggKGNoYW5uZWwpIHtcblxuICAgICAgICBjYXNlICduZXdlc3RJdGVtSWQnOlxuICAgICAgICAgICAgdGhpcy5uZXdlc3RJdGVtSWQgPSB2YWx1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ3N0YXJyZWQnOlxuICAgICAgICAgICAgdGhpcy5zdGFycmVkQ291bnQgPSB2YWx1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICB2YWx1ZS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZSBsb3dlc3QgYW5kIGhpZ2hlc3QgaWRcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5sb3dlc3RJZCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmxvd2VzdElkID0gaXRlbS5pZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuaGlnaGVzdElkID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaGlnaGVzdElkID0gaXRlbS5pZDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5pZCA+IHNlbGYuaGlnaGVzdElkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaGlnaGVzdElkID0gaXRlbS5pZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uaWQgPCBzZWxmLmxvd2VzdElkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYubG93ZXN0SWQgPSBpdGVtLmlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBSZXNvdXJjZS5wcm90b3R5cGUucmVjZWl2ZS5jYWxsKHRoaXMsIHZhbHVlLCBjaGFubmVsKTtcbiAgICAgICAgfVxuICAgIH07XG5cblxuICAgIEl0ZW1SZXNvdXJjZS5wcm90b3R5cGUuZ2V0TmV3ZXN0SXRlbUlkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uZXdlc3RJdGVtSWQ7XG4gICAgfTtcblxuXG4gICAgSXRlbVJlc291cmNlLnByb3RvdHlwZS5nZXRTdGFycmVkQ291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXJyZWRDb3VudDtcbiAgICB9O1xuXG5cbiAgICBJdGVtUmVzb3VyY2UucHJvdG90eXBlLnN0YXIgPSBmdW5jdGlvbiAoaXRlbUlkLCBpc1N0YXJyZWQpIHtcbiAgICAgICAgaWYgKGlzU3RhcnJlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpc1N0YXJyZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGl0ID0gdGhpcy5nZXQoaXRlbUlkKTtcbiAgICAgICAgdmFyIHVybCA9IHRoaXMuQkFTRV9VUkwgK1xuICAgICAgICAgICAgJy9pdGVtcy8nICsgaXQuZmVlZElkICsgJy8nICsgaXQuZ3VpZEhhc2ggKyAnL3N0YXInO1xuXG4gICAgICAgIGl0LnN0YXJyZWQgPSBpc1N0YXJyZWQ7XG5cbiAgICAgICAgaWYgKGlzU3RhcnJlZCkge1xuICAgICAgICAgICAgdGhpcy5zdGFycmVkQ291bnQgKz0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnJlZENvdW50IC09IDE7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwKHtcbiAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgaXNTdGFycmVkOiBpc1N0YXJyZWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG4gICAgSXRlbVJlc291cmNlLnByb3RvdHlwZS50b2dnbGVTdGFyID0gZnVuY3Rpb24gKGl0ZW1JZCkge1xuICAgICAgICBpZiAodGhpcy5nZXQoaXRlbUlkKS5zdGFycmVkKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXIoaXRlbUlkLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YXIoaXRlbUlkLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH07XG5cblxuICAgIEl0ZW1SZXNvdXJjZS5wcm90b3R5cGUubWFya0l0ZW1SZWFkID0gZnVuY3Rpb24gKGl0ZW1JZCwgaXNSZWFkKSB7XG4gICAgICAgIGlmIChpc1JlYWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaXNSZWFkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZ2V0KGl0ZW1JZCkudW5yZWFkID0gIWlzUmVhZDtcblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwKHtcbiAgICAgICAgICAgIHVybDogdGhpcy5CQVNFX1VSTCArICcvaXRlbXMvJyArIGl0ZW1JZCArICcvcmVhZCcsXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBpc1JlYWQ6IGlzUmVhZFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG5cbiAgICBJdGVtUmVzb3VyY2UucHJvdG90eXBlLm1hcmtJdGVtc1JlYWQgPSBmdW5jdGlvbiAoaXRlbUlkcykge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgaXRlbUlkcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW1JZCkge1xuICAgICAgICAgICAgc2VsZi5nZXQoaXRlbUlkKS51bnJlYWQgPSBmYWxzZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cCh7XG4gICAgICAgICAgICB1cmw6IHRoaXMuQkFTRV9VUkwgKyAnL2l0ZW1zL3JlYWQvbXVsdGlwbGUnLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgaXRlbUlkczogaXRlbUlkc1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG5cbiAgICBJdGVtUmVzb3VyY2UucHJvdG90eXBlLm1hcmtGZWVkUmVhZCA9IGZ1bmN0aW9uIChmZWVkSWQsIHJlYWQpIHtcbiAgICAgICAgaWYgKHJlYWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmVhZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLnZhbHVlcy5maWx0ZXIoZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmZlZWRJZCA9PT0gZmVlZElkO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBpdGVtLnVucmVhZCA9ICFyZWFkO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodGhpcy5CQVNFX1VSTCArICcvZmVlZHMvJyArIGZlZWRJZCArICcvcmVhZCcsIHtcbiAgICAgICAgICAgIGhpZ2hlc3RJdGVtSWQ6IHRoaXMuZ2V0TmV3ZXN0SXRlbUlkKClcbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG4gICAgSXRlbVJlc291cmNlLnByb3RvdHlwZS5tYXJrUmVhZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy52YWx1ZXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgaXRlbS51bnJlYWQgPSBmYWxzZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cCh7XG4gICAgICAgICAgICB1cmw6IHRoaXMuQkFTRV9VUkwgKyAnL2l0ZW1zL3JlYWQnLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgaGlnaGVzdEl0ZW1JZDogdGhpcy5nZXROZXdlc3RJdGVtSWQoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG5cbiAgICBJdGVtUmVzb3VyY2UucHJvdG90eXBlLmF1dG9QYWdlID0gZnVuY3Rpb24gKHR5cGUsIGlkLCBvbGRlc3RGaXJzdCxcbiAgICBzaG93QWxsLCBzZWFyY2gpIHtcbiAgICAgICAgdmFyIG9mZnNldDtcblxuICAgICAgICBpZiAob2xkZXN0Rmlyc3QpIHtcbiAgICAgICAgICAgIG9mZnNldCA9IHRoaXMuaGlnaGVzdElkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb2Zmc2V0ID0gdGhpcy5sb3dlc3RJZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAoe1xuICAgICAgICAgICAgdXJsOiB0aGlzLkJBU0VfVVJMICsgJy9pdGVtcycsXG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgICAgICAgb2Zmc2V0OiBvZmZzZXQsXG4gICAgICAgICAgICAgICAgbGltaXQ6IHRoaXMuYmF0Y2hTaXplLFxuICAgICAgICAgICAgICAgIG9sZGVzdEZpcnN0OiBvbGRlc3RGaXJzdCxcbiAgICAgICAgICAgICAgICBzaG93QWxsOiBzaG93QWxsLFxuICAgICAgICAgICAgICAgIHNlYXJjaDogc2VhcmNoXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cblxuICAgIEl0ZW1SZXNvdXJjZS5wcm90b3R5cGUuaW1wb3J0QXJ0aWNsZXMgPSBmdW5jdGlvbiAoanNvbikge1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwKHtcbiAgICAgICAgICAgIHVybDogdGhpcy5CQVNFX1VSTCArICcvZmVlZHMvaW1wb3J0L2FydGljbGVzJyxcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGpzb246IGpzb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG4gICAgcmV0dXJuIG5ldyBJdGVtUmVzb3VyY2UoJGh0dHAsIEJBU0VfVVJMLCBJVEVNX0JBVENIX1NJWkUpO1xufV0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5zZXJ2aWNlKCdMb2FkaW5nJywgZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHRoaXMubG9hZGluZyA9IHtcbiAgICAgICAgZ2xvYmFsOiBmYWxzZSxcbiAgICAgICAgY29udGVudDogZmFsc2UsXG4gICAgICAgIGF1dG9wYWdpbmc6IGZhbHNlXG4gICAgfTtcblxuICAgIHRoaXMuc2V0TG9hZGluZyA9IGZ1bmN0aW9uIChhcmVhLCBpc0xvYWRpbmcpIHtcbiAgICAgICAgdGhpcy5sb2FkaW5nW2FyZWFdID0gaXNMb2FkaW5nO1xuICAgIH07XG5cbiAgICB0aGlzLmlzTG9hZGluZyA9IGZ1bmN0aW9uIChhcmVhKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvYWRpbmdbYXJlYV07XG4gICAgfTtcblxufSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLnNlcnZpY2UoJ09QTUxJbXBvcnRlcicsIFtcIkZlZWRSZXNvdXJjZVwiLCBcIkZvbGRlclJlc291cmNlXCIsIFwiUHVibGlzaGVyXCIsIFwiJHFcIiwgZnVuY3Rpb24gKEZlZWRSZXNvdXJjZSwgRm9sZGVyUmVzb3VyY2UsIFB1Ymxpc2hlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHEpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIHN0YXJ0RmVlZEpvYiA9IGZ1bmN0aW9uIChxdWV1ZSkge1xuICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgIGlmIChxdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgZmVlZCA9IHF1ZXVlLnBvcCgpO1xuICAgICAgICAgICAgdmFyIHVybCA9IGZlZWQudXJsO1xuICAgICAgICAgICAgdmFyIHRpdGxlID0gZmVlZC50aXRsZTtcbiAgICAgICAgICAgIHZhciBmb2xkZXJJZCA9IDA7XG4gICAgICAgICAgICB2YXIgZm9sZGVyTmFtZSA9IGZlZWQuZm9sZGVyTmFtZTtcblxuICAgICAgICAgICAgaWYgKGZvbGRlck5hbWUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIEZvbGRlclJlc291cmNlLmdldChmb2xkZXJOYW1lKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZvbGRlciA9IEZvbGRlclJlc291cmNlLmdldChmb2xkZXJOYW1lKTtcbiAgICAgICAgICAgICAgICBmb2xkZXIub3BlbmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBmb2xkZXJJZCA9IGZvbGRlci5pZDtcblxuICAgICAgICAgICAgICAgIC8vIGRpc3BsYXkgZm9sZGVyIHdoaWxlIGFkZGluZyB0aGUgZmVlZFxuICAgICAgICAgICAgICAgIGZvbGRlci5nZXRzRmVlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgZm9sZGVyLmdldHNGZWVkQ291bnRlciA9IGZvbGRlci5nZXRzRmVlZENvdW50ZXIgfHwgMDtcbiAgICAgICAgICAgICAgICBmb2xkZXIuZ2V0c0ZlZWRDb3VudGVyICs9IDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB0byBub3QgYWRkIGFscmVhZHkgZXhpc3RpbmcgZmVlZHNcbiAgICAgICAgICAgIGlmICh1cmwgIT09IHVuZGVmaW5lZCAmJiBGZWVkUmVzb3VyY2UuZ2V0KHVybCkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIEZlZWRSZXNvdXJjZS5jcmVhdGUodXJsLCBmb2xkZXJJZCwgdGl0bGUpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgUHVibGlzaGVyLnB1Ymxpc2hBbGwoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb2xkZXJJZCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9sZGVyLmdldHNGZWVkQ291bnRlciAtPSAxO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm9sZGVyLmdldHNGZWVkQ291bnRlciA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbGRlci5nZXRzRmVlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0RmVlZEpvYihxdWV1ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9O1xuXG4gICAgdGhpcy5pbXBvcnRGb2xkZXJzID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgLy8gYXNzdW1wdGlvbjogZm9sZGVycyBhcmUgZmFzdCB0byBjcmVhdGUgYW5kIHdlIGRvbnQgbmVlZCBhIHF1ZXVlIGZvclxuICAgICAgICAvLyB0aGVtXG4gICAgICAgIHZhciBmZWVkUXVldWUgPSBbXTtcbiAgICAgICAgdmFyIGZvbGRlclByb21pc2VzID0gW107XG4gICAgICAgIGNvbnRlbnQuZm9sZGVycy5mb3JFYWNoKGZ1bmN0aW9uIChmb2xkZXIpIHtcbiAgICAgICAgICAgIGlmIChmb2xkZXIubmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgLy8gc2tpcCBhbHJlYWR5IGNyZWF0ZWQgZm9sZGVyc1xuICAgICAgICAgICAgICAgIGlmIChGb2xkZXJSZXNvdXJjZS5nZXQoZm9sZGVyLm5hbWUpID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBGb2xkZXJSZXNvdXJjZS5jcmVhdGUoZm9sZGVyLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBQdWJsaXNoZXIucHVibGlzaEFsbChkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGZvbGRlclByb21pc2VzLnB1c2gocHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9sZGVyLmZlZWRzLmZvckVhY2goZnVuY3Rpb24gKGZlZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZmVlZC5mb2xkZXJOYW1lID0gZm9sZGVyLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgIGZlZWRRdWV1ZS5wdXNoKGZlZWQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZmVlZFF1ZXVlID0gZmVlZFF1ZXVlLmNvbmNhdChjb250ZW50LmZlZWRzKTtcblxuICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICRxLmFsbChmb2xkZXJQcm9taXNlcykuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGZlZWRRdWV1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH07XG5cbiAgICB0aGlzLmltcG9ydEZlZWRRdWV1ZSA9IGZ1bmN0aW9uIChmZWVkUXVldWUsIGpvYlNpemUpIHtcbiAgICAgICAgLy8gcXVldWUgZmVlZHMgdG8gcHJldmVudCBzZXJ2ZXIgc2xvd2Rvd25cbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICB2YXIgam9iUHJvbWlzZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPGpvYlNpemU7IGkrPTEpIHtcbiAgICAgICAgICAgIGpvYlByb21pc2VzLnB1c2goc3RhcnRGZWVkSm9iKGZlZWRRdWV1ZSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgJHEuYWxsKGpvYlByb21pc2VzKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfTtcblxufV0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5zZXJ2aWNlKCdPUE1MUGFyc2VyJywgZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBwYXJzZU91dGxpbmUgPSBmdW5jdGlvbiAob3V0bGluZSkge1xuICAgICAgICB2YXIgdXJsID0gb3V0bGluZS5hdHRyKCd4bWxVcmwnKSB8fCBvdXRsaW5lLmF0dHIoJ2h0bWxVcmwnKTtcbiAgICAgICAgdmFyIG5hbWUgPSBvdXRsaW5lLmF0dHIoJ3RpdGxlJykgfHwgb3V0bGluZS5hdHRyKCd0ZXh0JykgfHwgdXJsO1xuXG4gICAgICAgIC8vIGZvbGRlclxuICAgICAgICBpZiAodXJsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2ZvbGRlcicsXG4gICAgICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgICBmZWVkczogW11cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy8gZmVlZFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZmVlZCcsXG4gICAgICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgICB1cmw6IHVybFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyB0aGVyZSBpcyBvbmx5IG9uZSBsZXZlbCwgc28gZmVlZHMgaW4gYSBmb2xkZXIgaW4gYSBmb2xkZXIgc2hvdWxkIGJlXG4gICAgLy8gYXR0YWNoZWQgdG8gdGhlIHJvb3QgZm9sZGVyXG4gICAgdmFyIHJlY3Vyc2l2ZWx5UGFyc2UgPSBmdW5jdGlvbiAobGV2ZWwsIHJvb3QsIGZpcnN0TGV2ZWwpIHtcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPGxldmVsLmxlbmd0aDsgaSs9MSkge1xuICAgICAgICAgICAgdmFyIG91dGxpbmUgPSAkKGxldmVsW2ldKTtcblxuICAgICAgICAgICAgdmFyIGVudHJ5ID0gcGFyc2VPdXRsaW5lKG91dGxpbmUpO1xuXG4gICAgICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gJ2ZlZWQnKSB7XG4gICAgICAgICAgICAgICAgcm9vdC5mZWVkcy5wdXNoKGVudHJ5KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAvLyBvbmx5IGZpcnN0IGxldmVsIHNob3VsZCBhcHBlbmQgZm9sZGVyc1xuICAgICAgICAgICAgICAgIGlmIChmaXJzdExldmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZWx5UGFyc2Uob3V0bGluZS5jaGlsZHJlbignb3V0bGluZScpLCBlbnRyeSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICByb290LmZvbGRlcnMucHVzaChlbnRyeSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlbHlQYXJzZShvdXRsaW5lLmNoaWxkcmVuKCdvdXRsaW5lJyksIHJvb3QsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcm9vdDtcbiAgICB9O1xuXG4gICAgdGhpcy5wYXJzZSA9IGZ1bmN0aW9uICh4bWwpIHtcbiAgICAgICAgeG1sID0gJC5wYXJzZVhNTCh4bWwpO1xuICAgICAgICB2YXIgZmlyc3RMZXZlbCA9ICQoeG1sKS5maW5kKCdib2R5ID4gb3V0bGluZScpO1xuXG4gICAgICAgIHZhciByb290ID0ge1xuICAgICAgICAgICAgJ2ZlZWRzJzogW10sXG4gICAgICAgICAgICAnZm9sZGVycyc6IFtdXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHJlY3Vyc2l2ZWx5UGFyc2UoZmlyc3RMZXZlbCwgcm9vdCwgdHJ1ZSk7XG4gICAgfTtcblxufSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuXG4vKmpzaGludCB1bmRlZjpmYWxzZSovXG5hcHAuc2VydmljZSgnUHVibGlzaGVyJywgZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHRoaXMuY2hhbm5lbHMgPSB7fTtcblxuICAgIHRoaXMuc3Vic2NyaWJlID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRvQ2hhbm5lbHM6IGZ1bmN0aW9uIChjaGFubmVscykge1xuICAgICAgICAgICAgICAgIGNoYW5uZWxzLmZvckVhY2goZnVuY3Rpb24gKGNoYW5uZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jaGFubmVsc1tjaGFubmVsXSA9IHNlbGYuY2hhbm5lbHNbY2hhbm5lbF0gfHwgW107XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2hhbm5lbHNbY2hhbm5lbF0ucHVzaChvYmopO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgfTtcblxuICAgIHRoaXMucHVibGlzaEFsbCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICBPYmplY3Qua2V5cyhkYXRhKS5mb3JFYWNoKGZ1bmN0aW9uIChjaGFubmVsKSB7XG4gICAgICAgICAgICB2YXIgbGlzdGVuZXJzID0gc2VsZi5jaGFubmVsc1tjaGFubmVsXTtcbiAgICAgICAgICAgIGlmIChsaXN0ZW5lcnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikge1xuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lci5yZWNlaXZlKGRhdGFbY2hhbm5lbF0sIGNoYW5uZWwpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG59KTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuZmFjdG9yeSgnUmVzb3VyY2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIFJlc291cmNlID0gZnVuY3Rpb24gKGh0dHAsIEJBU0VfVVJMLCBpZCkge1xuICAgICAgICB0aGlzLmlkID0gaWQgfHwgJ2lkJztcbiAgICAgICAgdGhpcy52YWx1ZXMgPSBbXTtcbiAgICAgICAgdGhpcy5oYXNoTWFwID0ge307XG4gICAgICAgIHRoaXMuaHR0cCA9IGh0dHA7XG4gICAgICAgIHRoaXMuQkFTRV9VUkwgPSBCQVNFX1VSTDtcbiAgICB9O1xuXG5cbiAgICBSZXNvdXJjZS5wcm90b3R5cGUucmVjZWl2ZSA9IGZ1bmN0aW9uIChvYmpzKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgb2Jqcy5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIHNlbGYuYWRkKG9iaik7XG4gICAgICAgIH0pO1xuICAgIH07XG5cblxuICAgIFJlc291cmNlLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHZhciBleGlzdGluZyA9IHRoaXMuaGFzaE1hcFtvYmpbdGhpcy5pZF1dO1xuXG4gICAgICAgIGlmIChleGlzdGluZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlcy5wdXNoKG9iaik7XG4gICAgICAgICAgICB0aGlzLmhhc2hNYXBbb2JqW3RoaXMuaWRdXSA9IG9iajtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGNvcHkgdmFsdWVzIGZyb20gbmV3IHRvIG9sZCBvYmplY3QgaWYgaXQgZXhpc3RzIGFscmVhZHlcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgZXhpc3Rpbmdba2V5XSA9IG9ialtrZXldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cbiAgICBSZXNvdXJjZS5wcm90b3R5cGUuc2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVzLmxlbmd0aDtcbiAgICB9O1xuXG5cbiAgICBSZXNvdXJjZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhc2hNYXBbaWRdO1xuICAgIH07XG5cblxuICAgIFJlc291cmNlLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgLy8gZmluZCBpbmRleCBvZiBvYmplY3QgdGhhdCBzaG91bGQgYmUgZGVsZXRlZFxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBkZWxldGVBdEluZGV4ID0gdGhpcy52YWx1ZXMuZmluZEluZGV4KGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50W3NlbGYuaWRdID09PSBpZDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGRlbGV0ZUF0SW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZXMuc3BsaWNlKGRlbGV0ZUF0SW5kZXgsIDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaGFzaE1hcFtpZF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuaGFzaE1hcFtpZF07XG4gICAgICAgIH1cbiAgICB9O1xuXG5cbiAgICBSZXNvdXJjZS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaGFzaE1hcCA9IHt9O1xuXG4gICAgICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTIzMjA0MFxuICAgICAgICAvLyB0aGlzIGlzIHRoZSBmYXN0ZXMgd2F5IHRvIGVtcHR5IGFuIGFycmF5IHdoZW4geW91IHdhbnQgdG8ga2VlcFxuICAgICAgICAvLyB0aGUgcmVmZXJlbmNlIGFyb3VuZFxuICAgICAgICB3aGlsZSAodGhpcy52YWx1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZXMucG9wKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cbiAgICBSZXNvdXJjZS5wcm90b3R5cGUuZ2V0QWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXM7XG4gICAgfTtcblxuXG4gICAgcmV0dXJuIFJlc291cmNlO1xufSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuXG4gLypqc2hpbnQgdW51c2VkOmZhbHNlKi9cbmFwcC5zZXJ2aWNlKCdTZXR0aW5nc1Jlc291cmNlJywgW1wiJGh0dHBcIiwgXCJCQVNFX1VSTFwiLCBmdW5jdGlvbiAoJGh0dHAsIEJBU0VfVVJMKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdGhpcy5zZXR0aW5ncyA9IHtcbiAgICAgICAgbGFuZ3VhZ2U6ICdlbicsXG4gICAgICAgIHNob3dBbGw6IG51bGwsXG4gICAgICAgIGNvbXBhY3Q6IGZhbHNlLFxuICAgICAgICBvbGRlc3RGaXJzdDogbnVsbCxcbiAgICAgICAgcHJldmVudFJlYWRPblNjcm9sbDogZmFsc2UsXG4gICAgICAgIGNvbXBhY3RFeHBhbmQ6IGZhbHNlLFxuICAgICAgICBleHBsb3JlVXJsOiAnJ1xuICAgIH07XG4gICAgdGhpcy5kZWZhdWx0TGFuZ3VhZ2VDb2RlID0gJ2VuJztcbiAgICB0aGlzLnN1cHBvcnRlZExhbmd1YWdlQ29kZXMgPSBbXG4gICAgICAgICdhci1tYScsICdhcicsICdiZycsICdjYScsICdjcycsICdjdicsICdkYScsICdkZScsICdlbCcsICdlbicsICdlbi1jYScsXG4gICAgICAgICdlbi1nYicsICdlbycsICdlcycsICdldCcsICdldScsICdmaScsICdmci1jYScsICdmcicsICdnbCcsICdoZScsICdoaScsXG4gICAgICAgICdodScsICdpZCcsICdpcycsICdpdCcsICdqYScsICdrYScsICdrbycsICdsdicsICdtcy1teScsICduYicsICduZScsXG4gICAgICAgICdubCcsICdwbCcsICdwdC1icicsICdwdCcsICdybycsICdydScsICdzaycsICdzbCcsICdzdicsICd0aCcsICd0cicsXG4gICAgICAgICd0em0tbGEnLCAndHptJywgJ3VrJywgJ3poLWNuJywgJ3poLXR3J1xuICAgIF07XG5cbiAgICB0aGlzLmdldFN1cHBvcnRlZExhbmd1YWdlQ29kZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN1cHBvcnRlZExhbmd1YWdlQ29kZXM7XG4gICAgfTtcblxuICAgIHRoaXMucmVjZWl2ZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgT2JqZWN0LmtleXMoZGF0YSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBkYXRhW2tleV07XG5cbiAgICAgICAgICAgIGlmIChrZXkgPT09ICdsYW5ndWFnZScpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHNlbGYucHJvY2Vzc0xhbmd1YWdlQ29kZSh2YWx1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGYuc2V0dGluZ3Nba2V5XSA9IHZhbHVlO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzW2tleV07XG4gICAgfTtcblxuICAgIHRoaXMuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5nc1trZXldID0gdmFsdWU7XG5cbiAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgIHVybDogQkFTRV9VUkwgKyAnL3NldHRpbmdzJyxcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2U6IHRoaXMuc2V0dGluZ3MubGFuZ3VhZ2UsXG4gICAgICAgICAgICAgICAgc2hvd0FsbDogdGhpcy5zZXR0aW5ncy5zaG93QWxsLFxuICAgICAgICAgICAgICAgIGNvbXBhY3Q6IHRoaXMuc2V0dGluZ3MuY29tcGFjdCxcbiAgICAgICAgICAgICAgICBvbGRlc3RGaXJzdDogdGhpcy5zZXR0aW5ncy5vbGRlc3RGaXJzdCxcbiAgICAgICAgICAgICAgICBjb21wYWN0RXhwYW5kOiB0aGlzLnNldHRpbmdzLmNvbXBhY3RFeHBhbmQsXG4gICAgICAgICAgICAgICAgcHJldmVudFJlYWRPblNjcm9sbDogdGhpcy5zZXR0aW5ncy5wcmV2ZW50UmVhZE9uU2Nyb2xsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0aGlzLnByb2Nlc3NMYW5ndWFnZUNvZGUgPSBmdW5jdGlvbiAobGFuZ3VhZ2VDb2RlKSB7XG4gICAgICAgIGxhbmd1YWdlQ29kZSA9IGxhbmd1YWdlQ29kZS5yZXBsYWNlKCdfJywgJy0nKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIGlmICh0aGlzLnN1cHBvcnRlZExhbmd1YWdlQ29kZXMuaW5kZXhPZihsYW5ndWFnZUNvZGUpIDwgMCkge1xuICAgICAgICAgICAgbGFuZ3VhZ2VDb2RlID0gbGFuZ3VhZ2VDb2RlLnNwbGl0KCctJylbMF07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5zdXBwb3J0ZWRMYW5ndWFnZUNvZGVzLmluZGV4T2YobGFuZ3VhZ2VDb2RlKSA8IDApIHtcbiAgICAgICAgICAgIGxhbmd1YWdlQ29kZSA9IHRoaXMuZGVmYXVsdExhbmd1YWdlQ29kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBsYW5ndWFnZUNvZGU7XG4gICAgfTtcblxufV0pO1xuIiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuXG4vKipcbiAqIFRoaXMgcHJlZmlsbHMgdGhlIGFkZCBmZWVkIHNlY3Rpb24gaWYgYW4gZXh0ZXJuYWwgbGluayBoYXMgP3N1YnNyaWJlX3RvXG4gKiBmaWxsZWQgb3V0XG4gKi9cbihmdW5jdGlvbiAod2luZG93LCBkb2N1bWVudCwgbmF2aWdhdG9yLCB1cmwsICQsIHVuZGVmaW5lZCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIHJlZ2lzdGVyIHJlYWRlciBhcyBmZWVkIHJlYWRlciBpbiBmaXJlZm94XG4gICAgdmFyIGxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uO1xuICAgIHZhciBzdG9yYWdlID0gd2luZG93LmxvY2FsU3RvcmFnZTtcblxuICAgIC8vIGlmIGlzQ29udGVudEhhbmRsZXJSZWdpc3RlcmVkIGlzIG5vdCBpbXBsZW1lbnRlZCAoRmlyZWZveCBJJ20gbG9va2luZ1xuICAgIC8vIGF0IHlvdSkgd2UgdXNlIGxvY2Fsc3RvcmFnZSB0byBwcmV2ZW50IHJlZ2lzdGVyaW5nIHRoZSBmZWVkIHJlYWRlciB0d2ljZVxuICAgIHZhciByZWdpc3RlckhhbmRsZXIgPSBmdW5jdGlvbiAobWltZSwgdXJsLCB0aXRsZSkge1xuICAgICAgICB2YXIgcmVnaXN0ZXJlZCA9IG5hdmlnYXRvci5pc0NvbnRlbnRIYW5kbGVyUmVnaXN0ZXJlZDtcblxuICAgICAgICB2YXIgaXNSZWdpc3RlcmVkID0gZnVuY3Rpb24gKG1pbWUsIHVybCkge1xuICAgICAgICAgICAgaWYgKHJlZ2lzdGVyZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVnaXN0ZXJlZChtaW1lLCB1cmwpICE9PSAnbmV3JztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JhZ2UuZ2V0SXRlbSgncmVnaXN0ZXJlZEhhbmRsZXInKSA9PT0gdXJsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChuYXZpZ2F0b3IucmVnaXN0ZXJDb250ZW50SGFuZGxlciAmJiAhaXNSZWdpc3RlcmVkKG1pbWUsIHVybCkpIHtcbiAgICAgICAgICAgIG5hdmlnYXRvci5yZWdpc3RlckNvbnRlbnRIYW5kbGVyKG1pbWUsIHVybCwgdGl0bGUpO1xuICAgICAgICAgICAgaWYgKCFyZWdpc3RlcmVkKSB7XG4gICAgICAgICAgICAgICAgc3RvcmFnZS5zZXRJdGVtKCdyZWdpc3RlcmVkSGFuZGxlcicsIHVybCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGNsZWFuVXJsID0gbG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgbG9jYXRpb24uaG9zdCArIGxvY2F0aW9uLnBhdGhuYW1lO1xuXG4gICAgdmFyIHN1YnNjcmliZVVybCA9IGNsZWFuVXJsICsgJz9zdWJzY3JpYmVfdG89JXMnO1xuICAgIHZhciBtaW1lVHlwZSA9ICdhcHBsaWNhdGlvbi92bmQubW96aWxsYS5tYXliZS5mZWVkJztcbiAgICB2YXIgdGl0bGUgPSAnb3duQ2xvdWQgTmV3cyBAICcgKyBjbGVhblVybDtcblxuICAgIHJlZ2lzdGVySGFuZGxlcihtaW1lVHlwZSwgc3Vic2NyaWJlVXJsLCB0aXRsZSk7XG5cblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHVybCgnP3N1YnNjcmliZV90bycpO1xuICAgICAgICBpZiAoc3Vic2NyaXB0aW9uICYmIHN1YnNjcmlwdGlvbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICQoJyNuZXctZmVlZCcpLnNob3coKTtcblxuICAgICAgICAgICAgdmFyIGlucHV0ID0gJCgnaW5wdXRbbmctbW9kZWw9XCJOYXZpZ2F0aW9uLmZlZWQudXJsXCJdJyk7XG4gICAgICAgICAgICBpbnB1dC52YWwoc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIGlucHV0LnRyaWdnZXIoJ2lucHV0Jyk7XG5cbiAgICAgICAgICAgIC8vIGhhY2t5IHdheSB0byBmb2N1cyBiZWNhdXNlIGluaXRpYWwgbG9hZGluZyBvZiBhIGZlZWRcbiAgICAgICAgICAgIC8vIHN0ZWFscyB0aGUgZm9jdXNcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZm9jdXMoKTtcbiAgICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICB9XG4gICAgfSk7XG5cbn0pKHdpbmRvdywgZG9jdW1lbnQsIG5hdmlnYXRvciwgdXJsLCAkKTtcbiIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cblxuLyoqXG4gKiBWYXJpb3VzIGZpeGVzXG4gKi9cbihmdW5jdGlvbiAod2luZG93LCBkb2N1bWVudCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIElmIEY1IGlzIHVzZWQgdG8gcmVsb2FkIHRoZSBwYWdlIGluIEZpcmVmb3gsIHRoZSBjb250ZW50IHdpbGwgc29tZXRpbWVzXG4gICAgLy8gYmUgc2Nyb2xsZWQgYmFjayB0byB0aGUgcG9zaXRpb24gd2hlcmUgaXQgd2FzIGJlZm9yZSB0aGUgcmVsb2FkIHdoaWNoXG4gICAgLy8gd2lsbCBjYXVzZSBuZXcgYXJ0aWNsZXMgYmVpbmcgbWFya2VkIGFzIHJlYWRcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhcHAtY29udGVudCcpO1xuICAgICAgICBjb250ZW50LnNjcm9sbFRvKDAsIDApO1xuICAgIH0pO1xuXG59KSh3aW5kb3csIGRvY3VtZW50KTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5cbi8qKlxuICogQ29kZSBpbiBoZXJlIGFjdHMgb25seSBhcyBhIGNsaWNrIHNob3J0Y3V0IG1lY2hhbmlzbS4gVGhhdCdzIHdoeSBpdHMgbm90XG4gKiBiZWluZyBwdXQgaW50byBhIGRpcmVjdGl2ZSBzaW5jZSBpdCBoYXMgdG8gYmUgdGVzdGVkIHdpdGggcHJvdHJhY3RvclxuICogYW55d2F5cyBhbmQgdGhlcmVzIG5vIGJlbmVmaXQgZnJvbSB3aXJpbmcgaXQgaW50byB0aGUgYW5ndWxhciBhcHBcbiAqL1xuKGZ1bmN0aW9uICh3aW5kb3csIGRvY3VtZW50LCAkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIG5vSW5wdXRGb2N1c2VkID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuICEoXG4gICAgICAgICAgICBlbGVtZW50LmlzKCdpbnB1dCcpIHx8XG4gICAgICAgICAgICBlbGVtZW50LmlzKCdzZWxlY3QnKSB8fFxuICAgICAgICAgICAgZWxlbWVudC5pcygndGV4dGFyZWEnKSB8fFxuICAgICAgICAgICAgZWxlbWVudC5pcygnY2hlY2tib3gnKVxuICAgICAgICApO1xuICAgIH07XG5cbiAgICB2YXIgbm9Nb2RpZmllcktleSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICByZXR1cm4gIShcbiAgICAgICAgICAgIGV2ZW50LnNoaWZ0S2V5IHx8XG4gICAgICAgICAgICBldmVudC5hbHRLZXkgfHxcbiAgICAgICAgICAgIGV2ZW50LmN0cmxLZXkgfHxcbiAgICAgICAgICAgIGV2ZW50Lm1ldGFLZXlcbiAgICAgICAgKTtcbiAgICB9O1xuXG4gICAgdmFyIG1hcmtBbGxSZWFkID0gZnVuY3Rpb24gKG5hdmlnYXRpb25BcmVhKSB7XG4gICAgICAgIHZhciBzZWxlY3RvciA9ICcuYWN0aXZlID4gLmFwcC1uYXZpZ2F0aW9uLWVudHJ5LW1lbnUgLm1hcmstcmVhZCBidXR0b24nO1xuICAgICAgICB2YXIgYnV0dG9uID0gbmF2aWdhdGlvbkFyZWEuZmluZChzZWxlY3Rvcik7XG4gICAgICAgIGlmIChidXR0b24ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgYnV0dG9uLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGlzSW5TY3JvbGxWaWV3ID0gZnVuY3Rpb24gKGVsZW0sIHNjcm9sbEFyZWEpIHtcbiAgICAgICAgLy8gb2Zmc2V0KCkudG9wIGFkZHMgdGhlIG5hdmlnYXRpb24gYmFyIHRvbyBzbyB3ZSBoYXZlIHRvIHN1YnJhY3QgaXRcbiAgICAgICAgdmFyIGVsZW1Ub3AgPSBlbGVtLm9mZnNldCgpLnRvcCAtIHNjcm9sbEFyZWEub2Zmc2V0KCkudG9wO1xuICAgICAgICB2YXIgZWxlbUJvdHRvbSA9IGVsZW1Ub3AgKyBlbGVtLmhlaWdodCgpO1xuXG4gICAgICAgIHZhciBhcmVhQm90dG9tID0gc2Nyb2xsQXJlYS5oZWlnaHQoKTtcblxuICAgICAgICByZXR1cm4gZWxlbVRvcCA+PSAwICYmIGVsZW1Cb3R0b20gPCBhcmVhQm90dG9tO1xuICAgIH07XG5cbiAgICB2YXIgc2Nyb2xsVG9OYXZpZ2F0aW9uRWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtLCBzY3JvbGxBcmVhLCB0b1RvcCkge1xuICAgICAgICBpZiAoZWxlbS5sZW5ndGggPT09IDAgfHwgKCF0b1RvcCAmJiBpc0luU2Nyb2xsVmlldyhlbGVtLCBzY3JvbGxBcmVhKSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzY3JvbGxBcmVhLnNjcm9sbFRvcChcbiAgICAgICAgICAgIGVsZW0ub2Zmc2V0KCkudG9wIC0gc2Nyb2xsQXJlYS5vZmZzZXQoKS50b3AgKyBzY3JvbGxBcmVhLnNjcm9sbFRvcCgpXG4gICAgICAgICk7XG4gICAgfTtcblxuICAgIHZhciBzY3JvbGxUb0FjdGl2ZU5hdmlnYXRpb25FbnRyeSA9IGZ1bmN0aW9uIChuYXZpZ2F0aW9uQXJlYSkge1xuICAgICAgICB2YXIgZWxlbWVudCA9IG5hdmlnYXRpb25BcmVhLmZpbmQoJy5hY3RpdmUnKTtcbiAgICAgICAgc2Nyb2xsVG9OYXZpZ2F0aW9uRWxlbWVudChlbGVtZW50LCBuYXZpZ2F0aW9uQXJlYS5jaGlsZHJlbigndWwnKSwgdHJ1ZSk7XG4gICAgfTtcblxuICAgIHZhciByZWxvYWRGZWVkID0gZnVuY3Rpb24gKG5hdmlnYXRpb25BcmVhKSB7XG4gICAgICAgIG5hdmlnYXRpb25BcmVhLmZpbmQoJy5hY3RpdmUgPiBhOnZpc2libGUnKS50cmlnZ2VyKCdjbGljaycpO1xuICAgIH07XG5cbiAgICB2YXIgdHJ5UmVsb2FkID0gZnVuY3Rpb24gKG5hdmlnYXRpb25BcmVhLCBzY3JvbGxBcmVhKSB7XG4gICAgICAgIGlmIChzY3JvbGxBcmVhLnNjcm9sbFRvcCgpID09PSAwKSB7XG4gICAgICAgICAgICB2YXIgcHVsbFRvUmVmcmVzaCA9IHNjcm9sbEFyZWEuZmluZCgnLnB1bGwtdG8tcmVmcmVzaCcpO1xuICAgICAgICAgICAgaWYgKCFwdWxsVG9SZWZyZXNoLmhhc0NsYXNzKCdzaG93LXB1bGwtdG8tcmVmcmVzaCcpKSB7XG4gICAgICAgICAgICAgICAgcHVsbFRvUmVmcmVzaC5hZGRDbGFzcygnc2hvdy1wdWxsLXRvLXJlZnJlc2gnKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocHVsbFRvUmVmcmVzaC5oYXNDbGFzcygnZG9uZScpKSB7XG4gICAgICAgICAgICAgICAgcmVsb2FkRmVlZChuYXZpZ2F0aW9uQXJlYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGFjdGl2YXRlTmF2aWdhdGlvbkVudHJ5ID0gZnVuY3Rpb24gKGVsZW1lbnQsIG5hdmlnYXRpb25BcmVhKSB7XG4gICAgICAgIGVsZW1lbnQuY2hpbGRyZW4oJ2E6dmlzaWJsZScpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgIHNjcm9sbFRvTmF2aWdhdGlvbkVsZW1lbnQoZWxlbWVudCwgbmF2aWdhdGlvbkFyZWEuY2hpbGRyZW4oJ3VsJykpO1xuICAgIH07XG5cbiAgICB2YXIgbmV4dEZlZWQgPSBmdW5jdGlvbiAobmF2aWdhdGlvbkFyZWEpIHtcbiAgICAgICAgdmFyIGN1cnJlbnQgPSBuYXZpZ2F0aW9uQXJlYS5maW5kKCcuYWN0aXZlJyk7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IG5hdmlnYXRpb25BcmVhLmZpbmQoJy5leHBsb3JlLWZlZWQsJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJy5zdWJzY3JpcHRpb25zLWZlZWQ6dmlzaWJsZSwnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLnN0YXJyZWQtZmVlZDp2aXNpYmxlLCcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcuZmVlZDp2aXNpYmxlJyk7XG5cbiAgICAgICAgaWYgKGN1cnJlbnQuaGFzQ2xhc3MoJ2ZvbGRlcicpKSB7XG4gICAgICAgICAgICB3aGlsZSAoY3VycmVudC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN1YmZlZWRzID0gY3VycmVudC5maW5kKCcuZmVlZDp2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHN1YmZlZWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVOYXZpZ2F0aW9uRW50cnkoJChzdWJmZWVkc1swXSksIG5hdmlnYXRpb25BcmVhKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5uZXh0KCcuZm9sZGVyJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIG5vIHN1YmZlZWQgZm91bmRcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZJWE1FOiBPKG4pIHJ1bnRpbWUuIElmIHNvbWVvbmUgY3JlYXRlcyBhIG5pY2UgYW5kIG5vdCBmdWdseSBzb2x1dGlvblxuICAgICAgICAvLyBwbGVhc2UgY3JlYXRlIGEgUFJcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPGVsZW1lbnRzLmxlbmd0aC0xOyBpKz0xKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGVsZW1lbnRzW2ldO1xuXG4gICAgICAgICAgICBpZiAoZWxlbWVudCA9PT0gY3VycmVudFswXSkge1xuICAgICAgICAgICAgICAgIHZhciBuZXh0ID0gZWxlbWVudHNbaSsxXTtcbiAgICAgICAgICAgICAgICBhY3RpdmF0ZU5hdmlnYXRpb25FbnRyeSgkKG5leHQpLCBuYXZpZ2F0aW9uQXJlYSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldFBhcmVudEZvbGRlciA9IGZ1bmN0aW9uIChjdXJyZW50KSB7XG4gICAgICAgIHJldHVybiBjdXJyZW50LnBhcmVudCgpLnBhcmVudCgnLmZvbGRlcicpO1xuICAgIH07XG5cbiAgICB2YXIgc2VsZWN0Rmlyc3RPckxhc3RGb2xkZXIgPSBmdW5jdGlvbiAobmF2aWdhdGlvbkFyZWEsIGlzTGFzdCkge1xuICAgICAgICB2YXIgZm9sZGVycyA9IG5hdmlnYXRpb25BcmVhLmZpbmQoJy5mb2xkZXI6dmlzaWJsZScpO1xuXG4gICAgICAgIHZhciBpbmRleDtcbiAgICAgICAgaWYgKGlzTGFzdCkge1xuICAgICAgICAgICAgaW5kZXggPSBmb2xkZXJzLmxlbmd0aCAtIDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbmRleCA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZm9sZGVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBhY3RpdmF0ZU5hdmlnYXRpb25FbnRyeSgkKGZvbGRlcnNbaW5kZXhdKSwgbmF2aWdhdGlvbkFyZWEpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBwcmV2aW91c0ZvbGRlciA9IGZ1bmN0aW9uIChuYXZpZ2F0aW9uQXJlYSkge1xuICAgICAgICB2YXIgY3VycmVudCA9IG5hdmlnYXRpb25BcmVhLmZpbmQoJy5hY3RpdmUnKTtcblxuICAgICAgICAvLyBjYXNlczogZm9sZGVyIGFjdGl2ZSwgc3ViZmVlZCBhY3RpdmUsIGZlZWQgYWN0aXZlLCBub25lIGFjdGl2ZVxuICAgICAgICBpZiAoY3VycmVudC5oYXNDbGFzcygnZm9sZGVyJykpIHtcbiAgICAgICAgICAgIGFjdGl2YXRlTmF2aWdhdGlvbkVudHJ5KGN1cnJlbnQucHJldkFsbCgnLmZvbGRlcjp2aXNpYmxlJykuZmlyc3QoKSxcbiAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uQXJlYSk7XG4gICAgICAgIH0gZWxzZSBpZiAoY3VycmVudC5oYXNDbGFzcygnZmVlZCcpKSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50Rm9sZGVyID0gZ2V0UGFyZW50Rm9sZGVyKGN1cnJlbnQpO1xuICAgICAgICAgICAgaWYgKHBhcmVudEZvbGRlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgLy8gZmlyc3QgZ28gdG8gcHJldmlvdXMgZm9sZGVyIHNob3VsZCBzZWxlY3QgdGhlIHBhcmVudCBmb2xkZXJcbiAgICAgICAgICAgICAgICBhY3RpdmF0ZU5hdmlnYXRpb25FbnRyeShwYXJlbnRGb2xkZXIsIG5hdmlnYXRpb25BcmVhKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0Rmlyc3RPckxhc3RGb2xkZXIobmF2aWdhdGlvbkFyZWEsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZWN0Rmlyc3RPckxhc3RGb2xkZXIobmF2aWdhdGlvbkFyZWEsIHRydWUpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBuZXh0Rm9sZGVyID0gZnVuY3Rpb24gKG5hdmlnYXRpb25BcmVhKSB7XG4gICAgICAgIHZhciBjdXJyZW50ID0gbmF2aWdhdGlvbkFyZWEuZmluZCgnLmFjdGl2ZScpO1xuXG4gICAgICAgIC8vIGNhc2VzOiBmb2xkZXIgYWN0aXZlLCBzdWJmZWVkIGFjdGl2ZSwgZmVlZCBhY3RpdmUsIG5vbmUgYWN0aXZlXG4gICAgICAgIGlmIChjdXJyZW50Lmhhc0NsYXNzKCdmb2xkZXInKSkge1xuICAgICAgICAgICAgYWN0aXZhdGVOYXZpZ2F0aW9uRW50cnkoY3VycmVudC5uZXh0QWxsKCcuZm9sZGVyOnZpc2libGUnKS5maXJzdCgpLFxuICAgICAgICAgICAgICAgIG5hdmlnYXRpb25BcmVhKTtcbiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50Lmhhc0NsYXNzKCdmZWVkJykpIHtcbiAgICAgICAgICAgIHZhciBwYXJlbnRGb2xkZXIgPSBnZXRQYXJlbnRGb2xkZXIoY3VycmVudCk7XG4gICAgICAgICAgICBpZiAocGFyZW50Rm9sZGVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBhY3RpdmF0ZU5hdmlnYXRpb25FbnRyeShcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50Rm9sZGVyLm5leHRBbGwoJy5mb2xkZXI6dmlzaWJsZScpLmZpcnN0KCksXG4gICAgICAgICAgICAgICAgICAgIG5hdmlnYXRpb25BcmVhXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0Rmlyc3RPckxhc3RGb2xkZXIobmF2aWdhdGlvbkFyZWEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZWN0Rmlyc3RPckxhc3RGb2xkZXIobmF2aWdhdGlvbkFyZWEpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBwcmV2aW91c0ZlZWQgPSBmdW5jdGlvbiAobmF2aWdhdGlvbkFyZWEpIHtcbiAgICAgICAgdmFyIGN1cnJlbnQgPSBuYXZpZ2F0aW9uQXJlYS5maW5kKCcuYWN0aXZlJyk7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IG5hdmlnYXRpb25BcmVhLmZpbmQoJy5leHBsb3JlLWZlZWQsJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJy5zdWJzY3JpcHRpb25zLWZlZWQ6dmlzaWJsZSwnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLnN0YXJyZWQtZmVlZDp2aXNpYmxlLCcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcuZmVlZDp2aXNpYmxlJyk7XG5cbiAgICAgICAgLy8gc3BlY2lhbCBjYXNlOiBmb2xkZXIgc2VsZWN0ZWRcbiAgICAgICAgaWYgKGN1cnJlbnQuaGFzQ2xhc3MoJ2ZvbGRlcicpKSB7XG4gICAgICAgICAgICB2YXIgcHJldmlvdXNGb2xkZXIgPSBjdXJyZW50LnByZXYoJy5mb2xkZXInKTtcblxuICAgICAgICAgICAgd2hpbGUgKHByZXZpb3VzRm9sZGVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgc3ViZmVlZHMgPSBwcmV2aW91c0ZvbGRlci5maW5kKCcuZmVlZDp2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHN1YmZlZWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVOYXZpZ2F0aW9uRW50cnkoJChzdWJmZWVkc1tzdWJmZWVkcy5sZW5ndGgtMV0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGlvbkFyZWEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByZXZpb3VzRm9sZGVyID0gcHJldmlvdXNGb2xkZXIucHJldignLmZvbGRlcicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBubyBzdWJmZWVkIGZvdW5kIHRyeSB2aXNpYmxlIGZlZWRzXG4gICAgICAgICAgICB2YXIgZmVlZHMgPSBjdXJyZW50LnNpYmxpbmdzKCcuZmVlZCcpO1xuXG4gICAgICAgICAgICBpZiAoZmVlZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGFjdGl2YXRlTmF2aWdhdGlvbkVudHJ5KCQoZmVlZHNbZmVlZHMubGVuZ3RoLTFdKSxcbiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGlvbkFyZWEpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAvLyBubyBmZWVkIGZvdW5kLCBnbyB0byBzdGFycmVkXG4gICAgICAgICAgICB2YXIgc3RhcnJlZCA9ICQoJy5zdGFycmVkLWZlZWQ6dmlzaWJsZScpO1xuICAgICAgICAgICAgaWYgKHN0YXJyZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGFjdGl2YXRlTmF2aWdhdGlvbkVudHJ5KHN0YXJyZWQsIG5hdmlnYXRpb25BcmVhKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRklYTUU6IE8obikgcnVudGltZS4gSWYgc29tZW9uZSBjcmVhdGVzIGEgbmljZSBhbmQgbm90IGZ1Z2x5IHNvbHV0aW9uXG4gICAgICAgIC8vIHBsZWFzZSBjcmVhdGUgYSBQUlxuICAgICAgICBmb3IgKHZhciBpPWVsZW1lbnRzLmxlbmd0aC0xOyBpPjA7IGktPTEpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZWxlbWVudHNbaV07XG5cbiAgICAgICAgICAgIGlmIChlbGVtZW50ID09PSBjdXJyZW50WzBdKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByZXZpb3VzID0gZWxlbWVudHNbaS0xXTtcbiAgICAgICAgICAgICAgICBhY3RpdmF0ZU5hdmlnYXRpb25FbnRyeSgkKHByZXZpb3VzKSwgbmF2aWdhdGlvbkFyZWEpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBvbkFjdGl2ZUl0ZW0gPSBmdW5jdGlvbiAoc2Nyb2xsQXJlYSwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGl0ZW1zID0gc2Nyb2xsQXJlYS5maW5kKCcuaXRlbScpO1xuXG4gICAgICAgIGl0ZW1zLmVhY2goZnVuY3Rpb24gKGluZGV4LCBpdGVtKSB7XG4gICAgICAgICAgICBpdGVtID0gJChpdGVtKTtcblxuICAgICAgICAgICAgLy8gMTMwcHggb2YgdGhlIGl0ZW0gc2hvdWxkIGJlIHZpc2libGVcbiAgICAgICAgICAgIGlmICgoaXRlbS5oZWlnaHQoKSArIGl0ZW0ucG9zaXRpb24oKS50b3ApID4gMzApIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhpdGVtKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9O1xuXG4gICAgdmFyIHRvZ2dsZVVucmVhZCA9IGZ1bmN0aW9uIChzY3JvbGxBcmVhKSB7XG4gICAgICAgIG9uQWN0aXZlSXRlbShzY3JvbGxBcmVhLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgaXRlbS5maW5kKCcudG9nZ2xlLWtlZXAtdW5yZWFkJykudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciB0b2dnbGVTdGFyID0gZnVuY3Rpb24gKHNjcm9sbEFyZWEpIHtcbiAgICAgICAgb25BY3RpdmVJdGVtKHNjcm9sbEFyZWEsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBpdGVtLmZpbmQoJy5zdGFyJykudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBleHBhbmRJdGVtID0gZnVuY3Rpb24gKHNjcm9sbEFyZWEpIHtcbiAgICAgICAgb25BY3RpdmVJdGVtKHNjcm9sbEFyZWEsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBpdGVtLmZpbmQoJy51dGlscycpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgb3BlbkxpbmsgPSBmdW5jdGlvbiAoc2Nyb2xsQXJlYSkge1xuICAgICAgICBvbkFjdGl2ZUl0ZW0oc2Nyb2xsQXJlYSwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW0udHJpZ2dlcignY2xpY2snKTsgIC8vIG1hcmsgcmVhZFxuICAgICAgICAgICAgd2luZG93Lm9wZW4oaXRlbS5maW5kKCcuZXh0ZXJuYWw6dmlzaWJsZScpLmF0dHIoJ2hyZWYnKSwgJ19ibGFuaycpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIHNjcm9sbFRvSXRlbSA9IGZ1bmN0aW9uIChzY3JvbGxBcmVhLCBpdGVtLCBleHBhbmRJdGVtSW5Db21wYWN0KSB7XG4gICAgICAgIC8vIGlmIHlvdSBnbyB0byB0aGUgbmV4dCBhcnRpY2xlIGluIGNvbXBhY3QgdmlldywgaXQgc2hvdWxkXG4gICAgICAgIC8vIGV4cGFuZCB0aGUgY3VycmVudCBvbmVcbiAgICAgICAgc2Nyb2xsQXJlYS5zY3JvbGxUb3AoXG4gICAgICAgICAgICBpdGVtLm9mZnNldCgpLnRvcCAtIHNjcm9sbEFyZWEub2Zmc2V0KCkudG9wICsgc2Nyb2xsQXJlYS5zY3JvbGxUb3AoKVxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChleHBhbmRJdGVtSW5Db21wYWN0KSB7XG4gICAgICAgICAgICBvbkFjdGl2ZUl0ZW0oc2Nyb2xsQXJlYSwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBpZiAoIWl0ZW0uaGFzQ2xhc3MoJ29wZW4nKSkge1xuICAgICAgICAgICAgICAgICAgICBpdGVtLmZpbmQoJy51dGlscycpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIHNjcm9sbFRvTmV4dEl0ZW0gPSBmdW5jdGlvbiAoc2Nyb2xsQXJlYSwgZXhwYW5kSXRlbUluQ29tcGFjdCkge1xuICAgICAgICB2YXIgaXRlbXMgPSBzY3JvbGxBcmVhLmZpbmQoJy5pdGVtJyk7XG4gICAgICAgIHZhciBqdW1wZWQgPSBmYWxzZTtcblxuICAgICAgICBpdGVtcy5lYWNoKGZ1bmN0aW9uIChpbmRleCwgaXRlbSkge1xuICAgICAgICAgICAgaXRlbSA9ICQoaXRlbSk7XG5cbiAgICAgICAgICAgIC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBpdGVtcyB0aGF0IGhhdmUgZXhwYW5kIGVuYWJsZWQ6XG4gICAgICAgICAgICAvLyBpZiB5b3UgY2xpY2sgbmV4dCBhbmQgdGhlIGZpcnN0IGl0ZW0gaGFzIG5vdCBiZWVuIGV4cGFuZWQgYW5kXG4gICAgICAgICAgICAvLyBpcyBvbiB0aGUgdG9wLCBpdCBzaG91bGQgYmUgZXhwYW5kZWQgaW5zdGVhZCBvZiB0aGUgbmV4dCBvbmVcbiAgICAgICAgICAgIGlmICgoaXRlbS5wb3NpdGlvbigpLnRvcCA9PT0gMCAmJiBleHBhbmRJdGVtSW5Db21wYWN0ICYmXG4gICAgICAgICAgICAgICAgICFpdGVtLmhhc0NsYXNzKCdvcGVuJykpIHx8XG4gICAgICAgICAgICAgICAgaXRlbS5wb3NpdGlvbigpLnRvcCA+IDEwKSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9JdGVtKHNjcm9sbEFyZWEsIGl0ZW0sIGV4cGFuZEl0ZW1JbkNvbXBhY3QpO1xuXG4gICAgICAgICAgICAgICAganVtcGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gaW4gY2FzZSB0aGlzIGlzIHRoZSBsYXN0IGl0ZW0gaXQgc2hvdWxkIHN0aWxsIHNjcm9sbCBiZWxvdyB0aGUgdG9wXG4gICAgICAgIGlmICghanVtcGVkKSB7XG4gICAgICAgICAgICBzY3JvbGxBcmVhLnNjcm9sbFRvcChzY3JvbGxBcmVhLnByb3AoJ3Njcm9sbEhlaWdodCcpKTtcbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIHZhciBzY3JvbGxUb1ByZXZpb3VzSXRlbSA9IGZ1bmN0aW9uIChuYXZpZ2F0aW9uQXJlYSwgc2Nyb2xsQXJlYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwYW5kSXRlbUluQ29tcGFjdCkge1xuICAgICAgICB2YXIgaXRlbXMgPSBzY3JvbGxBcmVhLmZpbmQoJy5pdGVtJyk7XG4gICAgICAgIHZhciBqdW1wZWQgPSBmYWxzZTtcblxuICAgICAgICBpdGVtcy5lYWNoKGZ1bmN0aW9uIChpbmRleCwgaXRlbSkge1xuICAgICAgICAgICAgaXRlbSA9ICQoaXRlbSk7XG5cbiAgICAgICAgICAgIGlmICgoaXRlbS5wb3NpdGlvbigpLnRvcCArIDEwKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByZXZpb3VzID0gaXRlbS5wcmV2KCk7XG5cbiAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBhcmUgbm8gaXRlbXMgYmVmb3JlIHRoZSBjdXJyZW50IG9uZVxuICAgICAgICAgICAgICAgIGlmIChwcmV2aW91cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvSXRlbShzY3JvbGxBcmVhLCBwcmV2aW91cywgZXhwYW5kSXRlbUluQ29tcGFjdCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5UmVsb2FkKG5hdmlnYXRpb25BcmVhLCBzY3JvbGxBcmVhKTtcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsQXJlYS5zY3JvbGxUb3AoMCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAganVtcGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gaWYgdGhlcmUgd2FzIG5vIGp1bXAganVtcCB0byB0aGUgbGFzdCBlbGVtZW50XG4gICAgICAgIGlmICghanVtcGVkICYmIGl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHNjcm9sbFRvSXRlbShzY3JvbGxBcmVhLCBpdGVtcy5sYXN0KCkpO1xuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgJChkb2N1bWVudCkua2V5dXAoZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBrZXlDb2RlID0gZXZlbnQua2V5Q29kZTtcbiAgICAgICAgdmFyIHNjcm9sbEFyZWEgPSAkKCcjYXBwLWNvbnRlbnQnKTtcbiAgICAgICAgdmFyIG5hdmlnYXRpb25BcmVhID0gJCgnI2FwcC1uYXZpZ2F0aW9uJyk7XG4gICAgICAgIHZhciBpc0NvbXBhY3RWaWV3ID0gJCgnI2FydGljbGVzLmNvbXBhY3QnKS5sZW5ndGggPiAwO1xuICAgICAgICB2YXIgaXNFeHBhbmRJdGVtID0gJCgnI2FydGljbGVzJylcbiAgICAgICAgICAgIC5hdHRyKCduZXdzLWNvbXBhY3QtZXhwYW5kJykgPT09ICd0cnVlJztcbiAgICAgICAgdmFyIGV4cGFuZEl0ZW1JbkNvbXBhY3QgPSBpc0NvbXBhY3RWaWV3ICYmIGlzRXhwYW5kSXRlbTtcblxuICAgICAgICBpZiAobm9JbnB1dEZvY3VzZWQoJCgnOmZvY3VzJykpICYmIG5vTW9kaWZpZXJLZXkoZXZlbnQpKSB7XG4gICAgICAgICAgICAvLyBqLCBuLCByaWdodCBhcnJvd1xuICAgICAgICAgICAgaWYgKFs3NCwgNzgsIDM5XS5pbmRleE9mKGtleUNvZGUpID49IDApIHtcblxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9OZXh0SXRlbShzY3JvbGxBcmVhLCBleHBhbmRJdGVtSW5Db21wYWN0KTtcblxuICAgICAgICAgICAgLy8gaywgcCwgbGVmdCBhcnJvd1xuICAgICAgICAgICAgfSBlbHNlIGlmIChbNzUsIDgwLCAzN10uaW5kZXhPZihrZXlDb2RlKSA+PSAwKSB7XG5cbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHNjcm9sbFRvUHJldmlvdXNJdGVtKG5hdmlnYXRpb25BcmVhLCBzY3JvbGxBcmVhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGFuZEl0ZW1JbkNvbXBhY3QpO1xuXG4gICAgICAgICAgICAvLyB1XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFs4NV0uaW5kZXhPZihrZXlDb2RlKSA+PSAwKSB7XG5cbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRvZ2dsZVVucmVhZChzY3JvbGxBcmVhKTtcblxuICAgICAgICAgICAgLy8gZVxuICAgICAgICAgICAgfSBlbHNlIGlmIChbNjldLmluZGV4T2Yoa2V5Q29kZSkgPj0gMCkge1xuXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBleHBhbmRJdGVtKHNjcm9sbEFyZWEpO1xuXG4gICAgICAgICAgICAvLyBzLCBpLCBsXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFs3MywgODMsIDc2XS5pbmRleE9mKGtleUNvZGUpID49IDApIHtcblxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdG9nZ2xlU3RhcihzY3JvbGxBcmVhKTtcblxuICAgICAgICAgICAgLy8gaFxuICAgICAgICAgICAgfSBlbHNlIGlmIChbNzJdLmluZGV4T2Yoa2V5Q29kZSkgPj0gMCkge1xuXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0b2dnbGVTdGFyKHNjcm9sbEFyZWEpO1xuICAgICAgICAgICAgICAgIHNjcm9sbFRvTmV4dEl0ZW0oc2Nyb2xsQXJlYSk7XG5cbiAgICAgICAgICAgIC8vIG9cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoWzc5XS5pbmRleE9mKGtleUNvZGUpID49IDApIHtcblxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgb3Blbkxpbmsoc2Nyb2xsQXJlYSk7XG5cbiAgICAgICAgICAgIC8vIHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoWzgyXS5pbmRleE9mKGtleUNvZGUpID49IDApIHtcblxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgcmVsb2FkRmVlZChuYXZpZ2F0aW9uQXJlYSk7XG5cbiAgICAgICAgICAgIC8vIGZcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoWzcwXS5pbmRleE9mKGtleUNvZGUpID49IDApIHtcblxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgbmV4dEZlZWQobmF2aWdhdGlvbkFyZWEpO1xuXG4gICAgICAgICAgICAvLyBkXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFs2OF0uaW5kZXhPZihrZXlDb2RlKSA+PSAwKSB7XG5cbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHByZXZpb3VzRmVlZChuYXZpZ2F0aW9uQXJlYSk7XG5cbiAgICAgICAgICAgIC8vIGNcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoWzY3XS5pbmRleE9mKGtleUNvZGUpID49IDApIHtcblxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgcHJldmlvdXNGb2xkZXIobmF2aWdhdGlvbkFyZWEpO1xuXG4gICAgICAgICAgICAvLyBhXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFs2NV0uaW5kZXhPZihrZXlDb2RlKSA+PSAwKSB7XG5cbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHNjcm9sbFRvQWN0aXZlTmF2aWdhdGlvbkVudHJ5KG5hdmlnYXRpb25BcmVhKTtcblxuICAgICAgICAgICAgLy8gdlxuICAgICAgICAgICAgfSBlbHNlIGlmIChbODZdLmluZGV4T2Yoa2V5Q29kZSkgPj0gMCkge1xuXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBuZXh0Rm9sZGVyKG5hdmlnYXRpb25BcmVhKTtcblxuICAgICAgICAgICAgLy8gcVxuICAgICAgICAgICAgfSBlbHNlIGlmIChbODFdLmluZGV4T2Yoa2V5Q29kZSkgPj0gMCkge1xuXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAkKCcjc2VhcmNoYm94JykuZm9jdXMoKTtcblxuICAgICAgICAgICAgLy8gcGFnZSB1cFxuICAgICAgICAgICAgfSBlbHNlIGlmIChbMzNdLmluZGV4T2Yoa2V5Q29kZSkgPj0gMCkge1xuXG4gICAgICAgICAgICAgICAgdHJ5UmVsb2FkKG5hdmlnYXRpb25BcmVhLCBzY3JvbGxBcmVhKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIC8vIGV2ZXJ5dGhpbmcgd2l0aCBzaGlmdFxuICAgICAgICB9IGVsc2UgaWYgKG5vSW5wdXRGb2N1c2VkKCQoJzpmb2N1cycpKSAmJiBldmVudC5zaGlmdEtleSkge1xuXG4gICAgICAgICAgICAvLyBzaGlmdCArIGFcbiAgICAgICAgICAgIGlmIChbNjVdLmluZGV4T2Yoa2V5Q29kZSkgPj0gMCkge1xuXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBtYXJrQWxsUmVhZChuYXZpZ2F0aW9uQXJlYSk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG59KHdpbmRvdywgZG9jdW1lbnQsICQpKTtcbiIsIndpbmRvdy5OZXdzID0gd2luZG93Lk5ld3MgfHwge307XG5cblxuKGZ1bmN0aW9uICh3aW5kb3csIGRvY3VtZW50LCAkLCBleHBvcnRzLCB1bmRlZmluZWQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgYXJ0aWNsZUFjdGlvblBsdWdpbnMgPSBbXTtcblxuICAgIGV4cG9ydHMuYWRkQXJ0aWNsZUFjdGlvbiA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgYXJ0aWNsZUFjdGlvblBsdWdpbnMucHVzaChhY3Rpb24pO1xuICAgIH07XG5cbiAgICBleHBvcnRzLmdldEFydGljbGVBY3Rpb25QbHVnaW5zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYXJ0aWNsZUFjdGlvblBsdWdpbnM7XG4gICAgfTtcblxufSkod2luZG93LCBkb2N1bWVudCwgalF1ZXJ5LCB3aW5kb3cuTmV3cyk7XG5cbiIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5ydW4oW1wiJGRvY3VtZW50XCIsIFwiJHJvb3RTY29wZVwiLCBmdW5jdGlvbiAoJGRvY3VtZW50LCAkcm9vdFNjb3BlKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgICRkb2N1bWVudC5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdkb2N1bWVudENsaWNrZWQnLCBldmVudCk7XG4gICAgfSk7XG59XSk7XG5cbmFwcC5kaXJlY3RpdmUoJ2FwcE5hdmlnYXRpb25FbnRyeVV0aWxzJywgZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0MnLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsbSkge1xuICAgICAgICAgICAgdmFyIG1lbnUgPSBlbG0uc2libGluZ3MoJy5hcHAtbmF2aWdhdGlvbi1lbnRyeS1tZW51Jyk7XG4gICAgICAgICAgICB2YXIgYnV0dG9uID0gJChlbG0pXG4gICAgICAgICAgICAgICAgLmZpbmQoJy5hcHAtbmF2aWdhdGlvbi1lbnRyeS11dGlscy1tZW51LWJ1dHRvbiBidXR0b24nKTtcblxuICAgICAgICAgICAgYnV0dG9uLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBtZW51LnRvZ2dsZUNsYXNzKCdvcGVuJyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgc2NvcGUuJG9uKCdkb2N1bWVudENsaWNrZWQnLCBmdW5jdGlvbiAoc2NvcGUsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCAhPT0gYnV0dG9uWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lbnUucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59KTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuZGlyZWN0aXZlKCduZXdzQWRkRmVlZCcsIFtcIiRyb290U2NvcGVcIiwgXCIkdGltZW91dFwiLCBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHRpbWVvdXQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW0pIHtcbiAgICAgICAgICAgICRyb290U2NvcGUuJG9uKCdhZGRGZWVkJywgZnVuY3Rpb24gKF8sIHVybCkge1xuXG4gICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbS5pcygnOmFuaW1hdGVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0uc3RvcCh0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0uc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFlbGVtLmlzKCc6dmlzaWJsZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnNsaWRlRG93bigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsZW0uZmluZCgnW25nLW1vZGVsPVwiTmF2aWdhdGlvbi5mZWVkLnVybFwiXScpLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBzY29wZS5OYXZpZ2F0aW9uLmZlZWQudXJsID0gdXJsO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufV0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5kaXJlY3RpdmUoJ25ld3NBcnRpY2xlQWN0aW9ucycsIGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIG5ld3NBcnRpY2xlQWN0aW9uczogJz0nLFxuICAgICAgICAgICAgbm9QbHVnaW5zOiAnPSdcbiAgICAgICAgfSxcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtKSB7XG4gICAgICAgICAgICB2YXIgcGx1Z2lucyA9IE5ld3MuZ2V0QXJ0aWNsZUFjdGlvblBsdWdpbnMoKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpPHBsdWdpbnMubGVuZ3RoOyBpKz0xKSB7XG4gICAgICAgICAgICAgICAgcGx1Z2luc1tpXShlbGVtLCBzY29wZS5uZXdzQXJ0aWNsZUFjdGlvbnMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzY29wZS5ub1BsdWdpbnMgPSBwbHVnaW5zLmxlbmd0aCA9PT0gMDtcbiAgICAgICAgfVxuICAgIH07XG59KTtcbiIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5kaXJlY3RpdmUoJ25ld3NBdXRvRm9jdXMnLCBbXCIkdGltZW91dFwiLCBmdW5jdGlvbiAoJHRpbWVvdXQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzY29wZSwgZWxlbSwgYXR0cnMpIHtcbiAgICAgICAgdmFyIHRvRm9jdXMgPSBlbGVtO1xuXG4gICAgICAgIGlmIChhdHRycy5uZXdzQXV0b0ZvY3VzKSB7XG4gICAgICAgICAgICB0b0ZvY3VzID0gJChhdHRycy5uZXdzQXV0b0ZvY3VzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRvIGNvbWJhdCAkZGlnZXN0IGFscmVhZHkgaW4gcHJvY2VzcyBlcnJvciB3aGVuIHJvdXRlIGNoYW5nZXNcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdG9Gb2N1cy5mb2N1cygpO1xuICAgICAgICB9LCAwKTtcbiAgICB9O1xufV0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5kaXJlY3RpdmUoJ25ld3NCaW5kSHRtbFVuc2FmZScsIGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCBlbGVtLCBhdHRyKSB7XG4gICAgICAgIHNjb3BlLiR3YXRjaChhdHRyLm5ld3NCaW5kSHRtbFVuc2FmZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWxlbS5odG1sKHNjb3BlLiRldmFsKGF0dHIubmV3c0JpbmRIdG1sVW5zYWZlKSk7XG4gICAgICAgIH0pO1xuICAgIH07XG59KTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuZGlyZWN0aXZlKCduZXdzRHJhZ2dhYmxlJywgZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHJldHVybiBmdW5jdGlvbiAoc2NvcGUsIGVsZW0sIGF0dHIpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBzY29wZS4kZXZhbChhdHRyLm5ld3NEcmFnZ2FibGUpO1xuXG4gICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChvcHRpb25zKSkge1xuICAgICAgICAgICAgZWxlbS5kcmFnZ2FibGUob3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbGVtLmRyYWdnYWJsZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXR0ci4kb2JzZXJ2ZSgnbmV3c0RyYWdnYWJsZURpc2FibGUnLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICAgICAgZWxlbS5kcmFnZ2FibGUoJ2Rpc2FibGUnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxlbS5kcmFnZ2FibGUoJ2VuYWJsZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xufSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmRpcmVjdGl2ZSgnbmV3c0Ryb3BwYWJsZScsIFtcIiRyb290U2NvcGVcIiwgZnVuY3Rpb24gKCRyb290U2NvcGUpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCBlbGVtLCBhdHRyKSB7XG4gICAgICAgIHZhciBkZXRhaWxzID0ge1xuICAgICAgICAgICAgYWNjZXB0OiAnLmZlZWQnLFxuICAgICAgICAgICAgaG92ZXJDbGFzczogJ2RyYWctYW5kLWRyb3AnLFxuICAgICAgICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgICAgICAgZHJvcDogZnVuY3Rpb24gKGV2ZW50LCB1aSkge1xuXG4gICAgICAgICAgICAgICAgJCgnLmRyYWctYW5kLWRyb3AnKS5yZW1vdmVDbGFzcygnZHJhZy1hbmQtZHJvcCcpO1xuXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIGZvbGRlcklkOiBwYXJzZUludChlbGVtLmRhdGEoJ2lkJyksIDEwKSxcbiAgICAgICAgICAgICAgICAgICAgZmVlZElkOiBwYXJzZUludCgkKHVpLmRyYWdnYWJsZSkuZGF0YSgnaWQnKSwgMTApXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnbW92ZUZlZWRUb0ZvbGRlcicsIGRhdGEpO1xuICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShhdHRyLmRyb3BwYWJsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgZWxlbS5kcm9wcGFibGUoZGV0YWlscyk7XG4gICAgfTtcbn1dKTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5cbmFwcC5kaXJlY3RpdmUoJ25ld3NGaW5pc2hlZFRyYW5zaXRpb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzY29wZSwgZWxlbSwgYXR0cnMpIHtcbiAgICAgICAgZWxlbS5vbigndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVsZW0uYWRkQ2xhc3MoYXR0cnMubmV3c0ZpbmlzaGVkVHJhbnNpdGlvbik7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbn0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5kaXJlY3RpdmUoJ25ld3NGb2N1cycsIFtcIiR0aW1lb3V0XCIsIFwiJGludGVycG9sYXRlXCIsIGZ1bmN0aW9uICgkdGltZW91dCwgJGludGVycG9sYXRlKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzY29wZSwgZWxlbSwgYXR0cnMpIHtcbiAgICAgICAgZWxlbS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdG9SZWFkZCA9ICQoJGludGVycG9sYXRlKGF0dHJzLm5ld3NGb2N1cykoc2NvcGUpKTtcbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0b1JlYWRkLmZvY3VzKCk7XG4gICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG59XSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuXG5hcHAuZGlyZWN0aXZlKCduZXdzSW5zdGFudE5vdGlmaWNhdGlvbicsIGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW0pIHtcbiAgICAgICAgICAgIGVsZW0uaGlkZSgpO1xuXG4gICAgICAgICAgICB2YXIgbm90aWZpY2F0aW9uID0gZWxlbS5odG1sKCk7XG4gICAgICAgICAgICBPQy5Ob3RpZmljYXRpb24uc2hvd0h0bWwobm90aWZpY2F0aW9uKTtcbiAgICAgICAgfVxuICAgIH07XG5cbn0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cblxuLyoqXG4gKiBQYXVzZSBwbGF5YmFjayBvbiBlbGVtZW50cyBvdGhlciB0aGFuIHRoZSBjdXJyZW50IG9uZVxuICovXG5hcHAuZGlyZWN0aXZlKCduZXdzUGxheU9uZScsIFtcIiRyb290U2NvcGVcIiwgZnVuY3Rpb24gKCRyb290U2NvcGUpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtKSB7XG4gICAgICAgICAgICBlbGVtLm9uKCdwbGF5JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgncGxheWluZycsIGVsZW0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICRyb290U2NvcGUuJG9uKCdwbGF5aW5nJywgZnVuY3Rpb24gKHNjb3BlLCBhcmdzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3NbMF0gIT09IGVsZW1bMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbVswXS5wYXVzZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn1dKTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuZGlyZWN0aXZlKCduZXdzUHVsbFRvUmVmcmVzaCcsIFtcIiRyb290U2NvcGVcIiwgZnVuY3Rpb24gKCRyb290U2NvcGUpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgc2Nyb2xsZWQgPSBmYWxzZTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBuZXdzUHVsbFRvUmVmcmVzaDogJz0nXG4gICAgICAgIH0sXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCkge1xuXG4gICAgICAgICAgICAvLyBjaGFuZ2UgaW4gdGhlIHJvdXRlIG1lYW5zIHRoZSBjb250ZW50IGlzIHJlZnJlc2hlZFxuICAgICAgICAgICAgLy8gc28gcmVzZXQgdGhlIHZhclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN0YXJ0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNjcm9sbGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgc2NvcGUubmV3c1B1bGxUb1JlZnJlc2ggPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBlbGVtZW50Lm9uKCdzY3JvbGwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuc2Nyb2xsVG9wKCkgPT09IDAgJiYgc2Nyb2xsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUubmV3c1B1bGxUb1JlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzY3JvbGxlZCA9IHRydWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59XSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmRpcmVjdGl2ZSgnbmV3c1JlYWRGaWxlJywgZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHJldHVybiBmdW5jdGlvbiAoc2NvcGUsIGVsZW0sIGF0dHIpIHtcblxuICAgICAgICBlbGVtLmNoYW5nZShmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIHZhciBmaWxlID0gZWxlbVswXS5maWxlc1swXTtcbiAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXG4gICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gRklYTUU6IGlzIHRoZXJlIGEgbW9yZSBmbGV4aWJsZSBzb2x1dGlvbiB3aGVyZSB3ZSBkb250IGhhdmVcbiAgICAgICAgICAgICAgICAvLyB0byBiaW5kIHRoZSBmaWxlIHRvIHNjb3BlP1xuICAgICAgICAgICAgICAgIHNjb3BlLiRmaWxlQ29udGVudCA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGF0dHIubmV3c1JlYWRGaWxlKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpO1xuICAgICAgICB9KTtcbiAgICB9O1xufSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmRpcmVjdGl2ZSgnbmV3c1JlZnJlc2hNYXNvbnJ5JywgW1wiJHRpbWVvdXRcIiwgZnVuY3Rpb24gKCR0aW1lb3V0KSB7XG5cdCd1c2Ugc3RyaWN0Jztcblx0dmFyIHJlZnJlc2ggPSBmdW5jdGlvbiAoZWxlbSkge1xuXHRcdCR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdCR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0ZWxlbS5wYXJlbnQoKS5tYXNvbnJ5KHtcblx0XHRcdFx0XHRpdGVtU2VsZWN0b3I6ICcuZ3JpZC1pdGVtJyxcblx0XHRcdFx0XHRndXR0ZXI6IDI1LFxuXHRcdFx0XHRcdGNvbHVtbldpZHRoOiAzMDBcblx0XHRcdFx0fSk7XG5cdFx0XHR9LCAxMDApO1xuXHRcdH0pO1xuXHR9O1xuXG5cdHJldHVybiBmdW5jdGlvbiAoc2NvcGUsIGVsZW0pIHtcblx0XHRpZiAoc2NvcGUuJGxhc3QpIHtcblx0XHRcdHJlZnJlc2goZWxlbSk7XG5cdFx0fVxuXHR9O1xufV0pO1xuIiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmRpcmVjdGl2ZSgnbmV3c1Njcm9sbCcsIFtcIiR0aW1lb3V0XCIsIFwiSVRFTV9BVVRPX1BBR0VfU0laRVwiLCBcIk1BUktfUkVBRF9USU1FT1VUXCIsIFwiU0NST0xMX1RJTUVPVVRcIiwgZnVuY3Rpb24gKCR0aW1lb3V0LCBJVEVNX0FVVE9fUEFHRV9TSVpFLFxuICAgIE1BUktfUkVBRF9USU1FT1VULCBTQ1JPTExfVElNRU9VVCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgdGltZXI7XG5cbiAgICAvLyBhdXRvcGFnaW5nXG4gICAgdmFyIGF1dG9QYWdlID0gZnVuY3Rpb24gKGxpbWl0LCBlbGVtLCBzY29wZSkge1xuICAgICAgICB2YXIgY291bnRlciA9IDA7XG4gICAgICAgIHZhciBhcnRpY2xlcyA9IGVsZW0uZmluZCgnLml0ZW0nKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gYXJ0aWNsZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpIC09IDEpIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gJChhcnRpY2xlc1tpXSk7XG5cblxuICAgICAgICAgICAgLy8gaWYgdGhlIGNvdW50ZXIgaXMgaGlnaGVyIHRoYW4gdGhlIHNpemUgaXQgbWVhbnNcbiAgICAgICAgICAgIC8vIHRoYXQgaXQgZGlkbnQgYnJlYWsgdG8gYXV0byBwYWdlIHlldCBhbmQgdGhhdFxuICAgICAgICAgICAgLy8gdGhlcmUgYXJlIG1vcmUgaXRlbXMsIHNvIGJyZWFrXG4gICAgICAgICAgICBpZiAoY291bnRlciA+PSBsaW1pdCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyB0aGlzIGlzIG9ubHkgcmVhY2hlZCB3aGVuIHRoZSBpdGVtIGlzIG5vdCBpc1xuICAgICAgICAgICAgLy8gYmVsb3cgdGhlIHRvcCBhbmQgd2UgZGlkbnQgaGl0IHRoZSBmYWN0b3IgeWV0IHNvXG4gICAgICAgICAgICAvLyBhdXRvcGFnZSBhbmQgYnJlYWtcbiAgICAgICAgICAgIGlmIChpdGVtLnBvc2l0aW9uKCkudG9wIDwgMCkge1xuICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShzY29wZS5uZXdzU2Nyb2xsQXV0b1BhZ2UpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb3VudGVyICs9IDE7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gbWFyayByZWFkXG4gICAgdmFyIG1hcmtSZWFkID0gZnVuY3Rpb24gKGVuYWJsZWQsIGVsZW0sIHNjb3BlKSB7XG4gICAgICAgIGlmIChlbmFibGVkKSB7XG4gICAgICAgICAgICB2YXIgaWRzID0gW107XG4gICAgICAgICAgICB2YXIgYXJ0aWNsZXMgPSBlbGVtLmZpbmQoJy5pdGVtOm5vdCgucmVhZCknKTtcblxuICAgICAgICAgICAgYXJ0aWNsZXMuZWFjaChmdW5jdGlvbihpbmRleCwgYXJ0aWNsZSkge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gJChhcnRpY2xlKTtcblxuICAgICAgICAgICAgICAgIGlmIChpdGVtLnBvc2l0aW9uKCkudG9wIDw9IC0xMCkge1xuICAgICAgICAgICAgICAgICAgICBpZHMucHVzaChwYXJzZUludChpdGVtLmRhdGEoJ2lkJyksIDEwKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBzY29wZS5pdGVtSWRzID0gaWRzO1xuICAgICAgICAgICAgc2NvcGUuJGFwcGx5KHNjb3BlLm5ld3NTY3JvbGxNYXJrUmVhZCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICduZXdzU2Nyb2xsJzogJ0AnLFxuICAgICAgICAgICAgJ25ld3NTY3JvbGxBdXRvUGFnZSc6ICcmJyxcbiAgICAgICAgICAgICduZXdzU2Nyb2xsTWFya1JlYWQnOiAnJicsXG4gICAgICAgICAgICAnbmV3c1Njcm9sbEVuYWJsZWRNYXJrUmVhZCc6ICc9JyxcbiAgICAgICAgfSxcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtKSB7XG4gICAgICAgICAgICB2YXIgYWxsb3dTY3JvbGwgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIHNjcm9sbEFyZWEgPSBlbGVtO1xuXG4gICAgICAgICAgICBpZiAoc2NvcGUubmV3c1Njcm9sbCkge1xuICAgICAgICAgICAgICAgIHNjcm9sbEFyZWEgPSAkKHNjb3BlLm5ld3NTY3JvbGwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgc2Nyb2xsSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvLyBhbGxvdyBvbmx5IG9uZSBzY3JvbGwgZXZlbnQgdG8gdHJpZ2dlciBldmVyeSAzMDBtc1xuICAgICAgICAgICAgICAgIGlmIChhbGxvd1Njcm9sbCkge1xuICAgICAgICAgICAgICAgICAgICBhbGxvd1Njcm9sbCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93U2Nyb2xsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSwgU0NST0xMX1RJTUVPVVQqMTAwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgYXV0b1BhZ2UoSVRFTV9BVVRPX1BBR0VfU0laRSwgZWxlbSwgc2NvcGUpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvbnQgc3RhY2sgbWFyayByZWFkIHJlcXVlc3RzXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aW1lcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQuY2FuY2VsKHRpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIGFsbG93IHVzZXIgdG8gdW5kbyBhY2NpZGVudGFsIHNjcm9sbFxuICAgICAgICAgICAgICAgICAgICB0aW1lciA9ICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtSZWFkKHNjb3BlLm5ld3NTY3JvbGxFbmFibGVkTWFya1JlYWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGltZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIH0sIE1BUktfUkVBRF9USU1FT1VUKjEwMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHNjcm9sbEFyZWEub24oJ3Njcm9sbCcsIHNjcm9sbEhhbmRsZXIpO1xuXG4gICAgICAgICAgICAvLyByZW1vdmUgc2Nyb2xsIGhhbmRsZXIgaWYgZWxlbWVudCBpcyBkZXN0cm95ZWRcbiAgICAgICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsQXJlYS5vZmYoJ3Njcm9sbCcsIHNjcm9sbEhhbmRsZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufV0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5kaXJlY3RpdmUoJ25ld3NTZWFyY2gnLCBbXCIkZG9jdW1lbnRcIiwgXCIkbG9jYXRpb25cIiwgZnVuY3Rpb24gKCRkb2N1bWVudCwgJGxvY2F0aW9uKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICdvblNlYXJjaCc6ICc9J1xuICAgICAgICB9LFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUpIHtcbiAgICAgICAgICAgIHZhciBib3ggPSAkKCcjc2VhcmNoYm94Jyk7XG4gICAgICAgICAgICBib3gudmFsKCRsb2NhdGlvbi5zZWFyY2goKS5zZWFyY2gpO1xuXG4gICAgICAgICAgICB2YXIgZG9TZWFyY2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gYm94LnZhbCgpO1xuICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLm9uU2VhcmNoKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGJveC5vbignc2VhcmNoIGtleXVwJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdzZWFyY2gnIHx8IGV2ZW50LmtleUNvZGUgPT09IDEzKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvU2VhcmNoKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGNhcnJ5IG92ZXIgc2VhcmNoIG9uIHJvdXRlIGNoYW5nZVxuICAgICAgICAgICAgc2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJGxvY2F0aW9uLnNlYXJjaCgpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHNlYXJjaCkge1xuICAgICAgICAgICAgICAgIGlmIChzZWFyY2ggJiYgc2VhcmNoLnNlYXJjaCkge1xuICAgICAgICAgICAgICAgICAgICBib3gudmFsKHNlYXJjaC5zZWFyY2gpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJveC52YWwoJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn1dKTtcbiIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5kaXJlY3RpdmUoJ25ld3NTdGlja3lNZW51JywgZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHJldHVybiBmdW5jdGlvbiAoc2NvcGUsIGVsZW0sIGF0dHIpIHtcbiAgICAgICAgdmFyIGhlaWdodCA9IDQwO1xuXG4gICAgICAgICQoYXR0ci5uZXdzU3RpY2t5TWVudSkuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzY3JvbGxIZWlnaHQgPSAkKHRoaXMpLnNjcm9sbFRvcCgpO1xuXG4gICAgICAgICAgICBpZiAoc2Nyb2xsSGVpZ2h0ID4gaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgZWxlbS5hZGRDbGFzcygnZml4ZWQnKTtcbiAgICAgICAgICAgICAgICBlbGVtLmNzcygndG9wJywgc2Nyb2xsSGVpZ2h0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxlbS5yZW1vdmVDbGFzcygnZml4ZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbn0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5kaXJlY3RpdmUoJ25ld3NTdG9wUHJvcGFnYXRpb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCkge1xuICAgICAgICAgICAgZWxlbWVudC5iaW5kKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmRpcmVjdGl2ZSgnbmV3c1RpbWVvdXQnLCBbXCIkdGltZW91dFwiLCBcIiRyb290U2NvcGVcIiwgZnVuY3Rpb24gKCR0aW1lb3V0LCAkcm9vdFNjb3BlKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICduZXdzVGltZW91dCc6ICcmJ1xuICAgICAgICB9LFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBkZXN0cm95ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBzZWNvbmRzID0gNztcbiAgICAgICAgICAgIHZhciB0aW1lciA9ICR0aW1lb3V0KHNjb3BlLm5ld3NUaW1lb3V0LCBzZWNvbmRzICogMTAwMCk7XG5cbiAgICAgICAgICAgIC8vIHJlbW92ZSB0aW1lb3V0IGlmIGVsZW1lbnQgaXMgYmVpbmcgcmVtb3ZlZCBieVxuICAgICAgICAgICAgLy8gZm9yIGluc3RhbmNlIGNsaWNraW5nIG9uIHRoZSB4IGJ1dHRvblxuICAgICAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBkZXN0cm95ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICR0aW1lb3V0LmNhbmNlbCh0aW1lcik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gYWxzbyBkZWxldGUgdGhlIGVudHJ5IGlmIHVuZG8gaXMgaWdub3JlZCBhbmQgdGhlIHVybFxuICAgICAgICAgICAgLy8gaXMgY2hhbmdlZFxuICAgICAgICAgICAgJHJvb3RTY29wZS4kb24oJyRsb2NhdGlvbkNoYW5nZVN0YXJ0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vICRsb2NhdGlvbkNoYW5nZVN0YXJ0IHRyaWdnZXJzIHR3aWNlIGJlY2F1c2Ugb2YgdGhlIHRyYWlsaW5nXG4gICAgICAgICAgICAgICAgLy8gc2xhc2ggb24gdGhlIGxpbmsgd2hpY2ggaXMga2luZGEgYSBoYWNrIHRvIHJlbG9hZCB0aGUgcm91dGVcbiAgICAgICAgICAgICAgICAvLyBpZiB5b3UgY2xpY2sgb24gdGhlIGxpbmsgd2hlbiB0aGUgcm91dGUgaXMgdGhlIHNhbWVcbiAgICAgICAgICAgICAgICAkdGltZW91dC5jYW5jZWwodGltZXIpO1xuICAgICAgICAgICAgICAgIGlmICghZGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlc3Ryb3llZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLm5ld3NUaW1lb3V0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufV0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5kaXJlY3RpdmUoJ25ld3NUaXRsZVVucmVhZENvdW50JywgW1wiJHdpbmRvd1wiLCBmdW5jdGlvbiAoJHdpbmRvdykge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBiYXNlVGl0bGUgPSAkd2luZG93LmRvY3VtZW50LnRpdGxlO1xuICAgIHZhciB0aXRsZXMgPSBiYXNlVGl0bGUuc3BsaXQoJy0nKTtcbiAgICB2YXIgYXBwTmFtZSA9IHRpdGxlc1swXSB8fCAnTmV3cyc7XG4gICAgdmFyIG93bkNsb3VkTmFtZSA9IHRpdGxlc1sxXSB8fCAnb3duQ2xvdWQnO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIHVucmVhZENvdW50OiAnQCdcbiAgICAgICAgfSxcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtLCBhdHRycykge1xuICAgICAgICAgICAgYXR0cnMuJG9ic2VydmUoJ3VucmVhZENvdW50JywgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSAnMCcpIHtcbiAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5kb2N1bWVudC50aXRsZSA9IGFwcE5hbWUgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJygnICsgdmFsdWUgKyAnKSAtICcgKyBvd25DbG91ZE5hbWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5kb2N1bWVudC50aXRsZSA9IGFwcE5hbWUgKyAnIC0gJyArIG93bkNsb3VkTmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbn1dKTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuZGlyZWN0aXZlKCduZXdzVG9nZ2xlU2hvdycsIGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICduZXdzVG9nZ2xlU2hvdyc6ICdAJ1xuICAgICAgICB9LFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW0pIHtcbiAgICAgICAgICAgIGVsZW0uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkKHNjb3BlLm5ld3NUb2dnbGVTaG93KTtcbiAgICAgICAgICAgICAgICB0YXJnZXQudG9nZ2xlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59KTtcbiIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5kaXJlY3RpdmUoJ25ld3NUcmlnZ2VyQ2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzY29wZSwgZWxtLCBhdHRyKSB7XG4gICAgICAgIGVsbS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKGF0dHIubmV3c1RyaWdnZXJDbGljaykudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxufSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
