var app=angular.module("News",["ngRoute","ngSanitize","ngAnimate"]);app.config(["$routeProvider","$provide","$httpProvider",function(e,n,r){"use strict";var i={FEED:0,FOLDER:1,STARRED:2,SUBSCRIPTIONS:3,SHARED:4,EXPLORE:5};n.constant("REFRESH_RATE",60),n.constant("ITEM_BATCH_SIZE",40),n.constant("ITEM_AUTO_PAGE_SIZE",20),n.constant("BASE_URL",OC.generateUrl("/apps/news")),n.constant("FEED_TYPE",i),n.constant("MARK_READ_TIMEOUT",.5),n.constant("SCROLL_TIMEOUT",.1),n.factory("CSRFInterceptor",["$q","BASE_URL","$window",function(e,t,n){return{request:function(r){var i=n.location.href.split(n.location.pathname)[0];return(0===r.url.indexOf(t)||0===r.url.indexOf(i))&&(r.headers.requesttoken=oc_requesttoken),r||e.when(r)}}}]);var o={0:t("news","Request failed, network connection unavailable!"),401:t("news","Request unauthorized. Are you logged in?"),403:t("news","Request forbidden. Are you an admin?"),412:t("news","Token expired or app not enabled! Reload the page!"),500:t("news","Internal server error! Please check your data/owncloud.log file for additional information!"),503:t("news","Request failed, ownCloud is in currently in maintenance mode!")};n.factory("ConnectionErrorInterceptor",["$q","$timeout",function(e,t){var n;return{responseError:function(r){return r.status in o&&(n&&t.cancel(n),OC.Notification.hide(),OC.Notification.showHtml(o[r.status]),n=t(function(){OC.Notification.hide()},5e3)),e.reject(r)}}}]),r.interceptors.push("CSRFInterceptor"),r.interceptors.push("ConnectionErrorInterceptor");var s=function(e){return{data:["$http","$route","$q","$location","BASE_URL","ITEM_BATCH_SIZE","FEED_TYPE","SettingsResource","FeedResource",function(t,n,r,i,o,s,a,u,d){var c=u.get("showAll"),l=u.get("oldestFirst"),f=i.search().search||"",h=r.defer();if(null===c||null===l)h.resolve({});else{var p={type:e,limit:s,showAll:c,oldestFirst:l,search:f};if(void 0!==n.current&&void 0!==n.current.params&&void 0!==n.current.params.id&&(p.id=n.current.params.id),e===a.FEED){var g=d.getById(p.id);void 0===g||2===g.ordering?p.oldestFirst=!1:1===g.ordering&&(p.oldestFirst=!0)}t({url:o+"/items",method:"GET",params:p}).success(function(e){h.resolve(e)})}return h.promise}]}},a=function(){return{sites:["$http","$q","BASE_URL","$location","Publisher","SettingsResource",function(e,t,n,r,i,o){var s=t.defer(),a=r.search().lang;return a||(a=o.get("language")),e.get(n+"/settings").then(function(t){i.publishAll(t);var n=o.get("exploreUrl").replace(/\/+$/,""),r=n+"/feeds."+a+".json",s=n+"/feeds.en.json";return e.get(r)["catch"](function(){return e.get(s)})}).then(function(e){s.resolve(e.data)})["catch"](function(){s.reject()}),s.promise}]}};e.when("/items",{controller:"ContentController as Content",templateUrl:"content.html",resolve:s(i.SUBSCRIPTIONS),type:i.SUBSCRIPTIONS}).when("/items/starred",{controller:"ContentController as Content",templateUrl:"content.html",resolve:s(i.STARRED),type:i.STARRED}).when("/items/feeds/:id",{controller:"ContentController as Content",templateUrl:"content.html",resolve:s(i.FEED),type:i.FEED}).when("/items/folders/:id",{controller:"ContentController as Content",templateUrl:"content.html",resolve:s(i.FOLDER),type:i.FOLDER}).when("/explore",{controller:"ExploreController as Explore",templateUrl:"explore.html",resolve:a(),type:i.EXPLORE}).when("/shortcuts",{templateUrl:"shortcuts.html",type:-1})}]),app.run(["$rootScope","$location","$http","$q","$interval","$route","Loading","ItemResource","FeedResource","FolderResource","SettingsResource","Publisher","BASE_URL","FEED_TYPE","REFRESH_RATE",function(e,t,n,r,i,o,s,a,u,d,c,l,f,h,p){"use strict";s.setLoading("global",!0),l.subscribe(a).toChannels(["items","newestItemId","starred"]),l.subscribe(d).toChannels(["folders"]),l.subscribe(u).toChannels(["feeds"]),l.subscribe(c).toChannels(["settings"]);var g=r.defer();n.get(f+"/settings").success(function(e){l.publishAll(e),g.resolve()});var v=r.defer(),m=t.path();n.get(f+"/feeds/active").success(function(e){var n;switch(e.activeFeed.type){case h.FEED:n="/items/feeds/"+e.activeFeed.id;break;case h.FOLDER:n="/items/folders/"+e.activeFeed.id;break;case h.STARRED:n="/items/starred";break;case h.EXPLORE:n="/explore";break;default:n="/items"}/^\/items(\/(starred|explore|feeds\/\d+|folders\/\d+))?\/?$/.test(m)||t.path(n),v.resolve()});var y,E=r.defer();n.get(f+"/feeds").success(function(e){y=e,E.resolve()});var C,F=r.defer();n.get(f+"/folders").success(function(e){C=e,F.resolve()}),r.all([E.promise,F.promise]).then(function(){l.publishAll(y),l.publishAll(C),0===y.feeds.length&&0===C.folders.length&&t.path("/explore")}),r.all([g.promise,v.promise,E.promise,F.promise]).then(function(){o.reload(),s.setLoading("global",!1)}),i(function(){n.get(f+"/feeds").success(function(e){l.publishAll(e)}),n.get(f+"/folders").success(function(e){l.publishAll(e)})},1e3*p),e.$on("$routeChangeStart",function(){s.setLoading("content",!0)}),e.$on("$routeChangeSuccess",function(){s.setLoading("content",!1)}),e.$on("$routeChangeError",function(){t.path("/items")})}]),app.controller("AppController",["Loading","FeedResource","FolderResource",function(e,t,n){"use strict";this.loading=e,this.isFirstRun=function(){return 0===t.size()&&0===n.size()},this.play=function(e){this.playingItem=e}}]),app.controller("ContentController",["Publisher","FeedResource","ItemResource","SettingsResource","data","$route","$routeParams","$location","FEED_TYPE","ITEM_AUTO_PAGE_SIZE","Loading",function(e,t,n,r,i,o,s,a,u,d,c){"use strict";n.clear(),e.publishAll(i),this.isAutoPagingEnabled=!0,n.size()>=d?this.isNothingMoreToAutoPage=!1:this.isNothingMoreToAutoPage=!0,this.getItems=function(){return n.getAll()},this.toggleStar=function(e){n.toggleStar(e)},this.toggleItem=function(e){this.isCompactView()&&(e.show=!e.show)},this.isShowAll=function(){return r.get("showAll")},this.markRead=function(e){var r=n.get(e);r.keepUnread||r.unread!==!0||(n.markItemRead(e),t.markItemOfFeedRead(r.feedId))},this.getFeed=function(e){return t.getById(e)},this.toggleKeepUnread=function(e){var r=n.get(e);r.unread||(t.markItemOfFeedUnread(r.feedId),n.markItemRead(e,!1)),r.keepUnread=!r.keepUnread};var l=this,f=function(){var e=r.get("oldestFirst");if(l.isFeed()){var n=t.getById(s.id);n&&1===n.ordering?e=!0:n&&2===n.ordering&&(e=!1)}return e};this.orderBy=function(){return f()?"id":"-id"},this.isCompactView=function(){return r.get("compact")},this.isCompactExpand=function(){return r.get("compactExpand")},this.autoPagingEnabled=function(){return this.isAutoPagingEnabled},this.markReadEnabled=function(){return!r.get("preventReadOnScroll")},this.scrollRead=function(e){var r=[],i=[];e.forEach(function(e){var t=n.get(e);t.keepUnread||(r.push(e),i.push(t.feedId))}),r.length>0&&(t.markItemsOfFeedsRead(i),n.markItemsRead(r))},this.isFeed=function(){return o.current.$$route.type===u.FEED},this.autoPage=function(){if(!this.isNothingMoreToAutoPage){if(!this.isAutoPagingEnabled)return void(this.autoPageAgain=!0);this.isAutoPagingEnabled=!1,this.autoPageAgain=!1;var t=o.current.$$route.type,i=s.id,u=f(),l=r.get("showAll"),h=this,p=a.search().search;c.setLoading("autopaging",!0),n.autoPage(t,i,u,l,p).success(function(t){e.publishAll(t),t.items.length>=d?h.isAutoPagingEnabled=!0:h.isNothingMoreToAutoPage=!0,h.isAutoPagingEnabled&&h.autoPageAgain&&h.autoPage()}).error(function(){h.isAutoPagingEnabled=!0})["finally"](function(){c.setLoading("autopaging",!1)})}},this.getRelativeDate=function(e){if(void 0!==e&&""!==e){var t=r.get("language"),n=moment.unix(e).locale(t).fromNow()+"";return n}return""},this.refresh=function(){o.reload()},this.getMediaType=function(e){return e&&0===e.indexOf("audio")?"audio":e&&0===e.indexOf("video")?"video":void 0}}]),app.controller("ExploreController",["sites","$rootScope","FeedResource","SettingsResource","$location",function(e,t,n,r,i){"use strict";this.sites=e,this.feeds=Object.keys(e).map(function(t){return[t,e[t]]}).reduce(function(e,t){var n=t[0],r=t[1];return r.forEach(function(e){e.category=n}),e.concat(r)},[]),this.feedExists=function(e){return void 0!==n.getByLocation(e)},this.subscribeTo=function(e){t.$broadcast("addFeed",e)},this.isCategoryShown=function(e){return e.filter(function(e){return void 0===n.getByLocation(e.feed)}).length>0},this.getSupportedLanguageCodes=function(){return r.getSupportedLanguageCodes()},this.getCurrentLanguageCode=function(){var e=i.search().lang;return e||(e=r.get("language")),e},this.showLanguage=function(e){i.url("/explore/?lang="+e)},this.selectedLanguageCode=this.getCurrentLanguageCode()}]),app.controller("NavigationController",["$route","FEED_TYPE","FeedResource","FolderResource","ItemResource","SettingsResource","Publisher","$rootScope","$location","$q",function(e,t,n,r,i,o,s,a,u,d){"use strict";this.feedError="",this.showNewFolder=!1,this.renamingFolder=!1,this.addingFeed=!1,this.addingFolder=!1,this.folderError="",this.renameError="",this.feed={};var c=function(){return parseInt(e.current.params.id,10)};this.getLanguageCode=function(){return o.get("language")},this.getFeeds=function(){return n.getAll()},this.getFolders=function(){return r.getAll()},this.markFolderRead=function(e){n.markFolderRead(e),n.getByFolderId(e).forEach(function(e){i.markFeedRead(e.id)})},this.markFeedRead=function(e){i.markFeedRead(e),n.markFeedRead(e)},this.markRead=function(){i.markRead(),n.markRead()},this.isShowAll=function(){return o.get("showAll")},this.getFeedsOfFolder=function(e){return n.getByFolderId(e)},this.getUnreadCount=function(){return n.getUnreadCount()},this.isUnread=function(){return this.getUnreadCount()>0},this.getFeedUnreadCount=function(e){var t=n.getById(e);return void 0!==t?t.unreadCount:0},this.isFeedUnread=function(e){return this.getFeedUnreadCount(e)>0},this.getFolderUnreadCount=function(e){return n.getFolderUnreadCount(e)},this.isFolderUnread=function(e){return this.getFolderUnreadCount(e)>0},this.getStarredCount=function(){return i.getStarredCount()},this.isStarredUnread=function(){return this.getStarredCount()>0},this.toggleFolder=function(e){r.toggleOpen(e)},this.hasFeeds=function(e){return void 0!==n.getFolderUnreadCount(e)},this.subFeedActive=function(r){var i=e.current.$$route.type;if(i===t.FEED){var o=n.getById(c());if(void 0!==o&&o.folderId===r)return!0}return!1},this.isSubscriptionsActive=function(){return e.current&&e.current.$$route.type===t.SUBSCRIPTIONS},this.isStarredActive=function(){return e.current&&e.current.$$route.type===t.STARRED},this.isExploreActive=function(){return e.current&&e.current.$$route.type===t.EXPLORE},this.isFolderActive=function(n){return e.current&&e.current.$$route.type===t.FOLDER&&c()===n},this.isFeedActive=function(n){return e.current&&e.current.$$route.type===t.FEED&&c()===n},this.folderNameExists=function(e){return e=e||"",void 0!==r.get(e.trim())},this.feedUrlExists=function(e){return e=e||"",e=e.trim(),void 0!==n.get(e)||void 0!==n.get("http://"+e)},this.createFeed=function(e){var t=this;this.showNewFolder=!1,this.addingFeed=!0;var i=e.newFolder,o=e.existingFolder||{id:0};void 0===i||""===i?(o.getsFeed=!0,n.create(e.url,o.id,void 0).then(function(e){s.publishAll(e),u.path("/items/feeds/"+e.feeds[0].id+"/")})["finally"](function(){o.getsFeed=void 0,e.url="",t.addingFeed=!1})):r.create(i).then(function(n){s.publishAll(n),e.existingFolder=r.get(n.folders[0].name),e.newFolder=void 0,t.createFeed(e)})},this.createFolder=function(e){var t=this;this.addingFolder=!0,r.create(e.name).then(function(e){s.publishAll(e)})["finally"](function(){t.addingFolder=!1,e.name=""})},this.moveFeed=function(t,r){var i=!1,o=n.getById(t);o.folderId!==r&&((this.isFolderActive(o.folderId)||this.isFolderActive(r))&&(i=!0),n.move(t,r),i&&e.reload())},this.renameFeed=function(e){n.patch(e.id,{title:e.title}),e.editing=!1},this.renameFolder=function(e,t){e.renameError="",this.renamingFolder=!0;var n=this;e.name===t?(e.renameError="",e.editing=!1,this.renamingFolder=!1):r.rename(e.name,t).then(function(){e.renameError="",e.editing=!1},function(t){e.renameError=t})["finally"](function(){n.renamingFolder=!1})},this.reversiblyDeleteFeed=function(t){n.reversiblyDelete(t.id)["finally"](function(){e.reload()})},this.undoDeleteFeed=function(t){n.undoDelete(t.id)["finally"](function(){e.reload()})},this.deleteFeed=function(e){n["delete"](e.url)},this.reversiblyDeleteFolder=function(t){d.all(n.reversiblyDeleteFolder(t.id),r.reversiblyDelete(t.name))["finally"](function(){e.reload()})},this.undoDeleteFolder=function(t){d.all(n.undoDeleteFolder(t.id),r.undoDelete(t.name))["finally"](function(){e.reload()})},this.deleteFolder=function(e){n.deleteFolder(e.id),r["delete"](e.name)},this.setOrdering=function(t,r){n.patch(t.id,{ordering:r}),e.reload()},this.togglePinned=function(e){var t=n.getById(e);return t?n.patch(e,{pinned:!t.pinned}):void 0},this.setUpdateMode=function(e,t){return n.patch(e,{updateMode:t})},this.toggleFullText=function(t){a.$broadcast("$routeChangeStart"),n.toggleFullText(t.id)["finally"](function(){a.$broadcast("$routeChangeSuccess"),e.reload()})},this.search=function(e){""===e?u.search("search",null):u.search("search",e)};var l=this;a.$on("moveFeedToFolder",function(e,t){l.moveFeed(t.feedId,t.folderId)});var f=function(){var i;e.current&&(i=e.current.$$route.type);var o=0;if(i===t.FOLDER)o=c();else if(i===t.FEED){var s=n.getById(c());s&&(o=s.folderId)}var a;0!==o&&(a=r.getById(o)),l.feed.existingFolder=a};a.$on("$routeChangeSuccess",function(){f()})}]),app.controller("SettingsController",["$route","$q","SettingsResource","ItemResource","OPMLParser","OPMLImporter","Publisher",function(e,t,n,r,i,o,s){"use strict";this.isOPMLImporting=!1,this.isArticlesImporting=!1,this.opmlImportError=!1,this.articleImportError=!1;var a=function(t,r){n.set(t,r),["showAll","oldestFirst","compact"].indexOf(t)>=0&&e.reload()};this.toggleSetting=function(e){a(e,!this.getSetting(e))},this.getSetting=function(e){return n.get(e)},this.importOPML=function(e){this.opmlImportError=!1,this.articleImportError=!1;try{this.isOPMLImporting=!1;var t=i.parse(e),n=this,r=5;o.importFolders(t).then(function(e){return o.importFeedQueue(e,r)})["finally"](function(){n.isOPMLImporting=!1})}catch(s){console.error(s),this.isOPMLImporting=!1,this.opmlImportError=!0}},this.importArticles=function(e){this.opmlImportError=!1,this.articleImportError=!1;try{this.isArticlesImporting=!0;var t=JSON.parse(e),n=this;r.importArticles(t).success(function(e){s.publishAll(e)})["finally"](function(){n.isArticlesImporting=!1})}catch(i){console.error(i),this.articleImportError=!0,this.isArticlesImporting=!1}}}]),app.filter("trustUrl",["$sce",function(e){"use strict";return function(t){return e.trustAsResourceUrl(t)}}]),app.filter("unreadCountFormatter",function(){"use strict";return function(e){return e>999?"999+":e}}),app.factory("FeedResource",["Resource","$http","BASE_URL","$q",function(e,t,n,r){"use strict";var i=function(t,n,r){e.call(this,t,n,"url"),this.ids={},this.locations={},this.unreadCount=0,this.folderUnreadCount={},this.folderIds={},this.$q=r};return i.prototype=Object.create(e.prototype),i.prototype.receive=function(t){e.prototype.receive.call(this,t),this.updateUnreadCache(),this.updateFolderCache()},i.prototype.clear=function(){e.prototype.clear.call(this),this.unreadCount=0,this.folderUnreadCount={},this.folderIds={},this.ids={},this.locations={}},i.prototype.updateUnreadCache=function(){this.unreadCount=0,this.folderUnreadCount={};var e=this;this.values.forEach(function(t){t.unreadCount&&(e.unreadCount+=t.unreadCount),void 0!==t.folderId&&(e.folderUnreadCount[t.folderId]=e.folderUnreadCount[t.folderId]||0,e.folderUnreadCount[t.folderId]+=t.unreadCount)})},i.prototype.updateFolderCache=function(){this.folderIds={};var e=this;this.values.forEach(function(t){e.folderIds[t.folderId]=e.folderIds[t.folderId]||[],e.folderIds[t.folderId].push(t)})},i.prototype.add=function(t){e.prototype.add.call(this,t),void 0!==t.id&&(this.ids[t.id]=this.hashMap[t.url]),void 0!==t.location&&(this.locations[t.location]=this.hashMap[t.url])},i.prototype.markRead=function(){this.values.forEach(function(e){e.unreadCount=0}),this.updateUnreadCache()},i.prototype.markFeedRead=function(e){this.ids[e].unreadCount=0,this.updateUnreadCache()},i.prototype.markFolderRead=function(e){this.values.forEach(function(t){t.folderId===e&&(t.unreadCount=0)}),this.updateUnreadCache()},i.prototype.markItemOfFeedRead=function(e){this.ids[e].unreadCount-=1,this.updateUnreadCache()},i.prototype.markItemsOfFeedsRead=function(e){var t=this;e.forEach(function(e){t.ids[e].unreadCount-=1}),this.updateUnreadCache()},i.prototype.markItemOfFeedUnread=function(e){this.ids[e].unreadCount+=1,this.updateUnreadCache()},i.prototype.getUnreadCount=function(){return this.unreadCount},i.prototype.getFolderUnreadCount=function(e){return this.folderUnreadCount[e]},i.prototype.getByFolderId=function(e){return this.folderIds[e]||[]},i.prototype.getById=function(e){return this.ids[e]},i.prototype.getByLocation=function(e){return this.locations[e]},i.prototype.move=function(e,t){var n=this.getById(e);return n.folderId=t,this.updateFolderCache(),this.updateUnreadCache(),this.patch(e,{folderId:t})},i.prototype.create=function(e,t,n){e=e.trim(),e.startsWith("http")||(e="https://"+e),void 0!==n&&(n=n.trim());var r={url:e,folderId:t||0,title:n||e,unreadCount:0};this.add(r),this.updateFolderCache();var i=this.$q.defer();return this.http({method:"POST",url:this.BASE_URL+"/feeds",data:{url:e,parentFolderId:t||0,title:n}}).success(function(e){i.resolve(e)}).error(function(e){r.faviconLink="",r.error=e.message,i.reject()}),i.promise},i.prototype.reversiblyDelete=function(e,t,n){var r=this.getById(e);return r&&n!==!0&&(r.deleted=!0),t!==!1&&this.updateUnreadCache(),this.http["delete"](this.BASE_URL+"/feeds/"+e)},i.prototype.reversiblyDeleteFolder=function(e){var t=this,n=[];this.getByFolderId(e).forEach(function(e){n.push(t.reversiblyDelete(e.id,!1,!0))}),this.updateUnreadCache();var r=this.$q.all(n);return r.promise},i.prototype["delete"]=function(t,n){var r=this.get(t);return void 0!==r&&r.id&&delete this.ids[r.id],void 0!==r&&r.location&&delete this.locations[r.location],e.prototype["delete"].call(this,t),n!==!1&&(this.updateUnreadCache(),this.updateFolderCache()),r},i.prototype.deleteFolder=function(e){var t=this;this.getByFolderId(e).forEach(function(e){t["delete"](e.url,!1)}),this.updateUnreadCache(),this.updateFolderCache()},i.prototype.undoDelete=function(e,t){var n=this.getById(e);return n&&(n.deleted=!1),t!==!1&&this.updateUnreadCache(),this.http.post(this.BASE_URL+"/feeds/"+e+"/restore")},i.prototype.undoDeleteFolder=function(e){var t=this,n=[];this.getByFolderId(e).forEach(function(e){n.push(t.undoDelete(e.id,!1))}),this.updateUnreadCache();var r=this.$q.all(n);return r.promise},i.prototype.setOrdering=function(e,t){var n=this.getById(e);if(n){n.ordering=t;var r=this.BASE_URL+"/feeds/"+e;return this.http.patch(r,{ordering:t})}},i.prototype.setPinned=function(e,t){var n=this.getById(e);if(n){n.pinned=t;var r=this.BASE_URL+"/feeds/"+e;return this.http.patch(r,{pinned:t})}},i.prototype.patch=function(e,t){var n=this.getById(e);if(n){Object.keys(t).forEach(function(e){n[e]=t[e]});var r=this.BASE_URL+"/feeds/"+e;return this.http.patch(r,t)}},i.prototype.toggleFullText=function(e){var t=this.getById(e);return this.patch(e,{fullTextEnabled:!t.fullTextEnabled})},new i(t,n,r)}]),app.factory("FolderResource",["Resource","$http","BASE_URL","$q",function(e,t,n,r){"use strict";var i=function(t,n,r){e.call(this,t,n,"name"),this.deleted=null,this.$q=r,this.ids={}};return i.prototype=Object.create(e.prototype),i.prototype.add=function(t){e.prototype.add.call(this,t),void 0!==t.id&&(this.ids[t.id]=this.hashMap[t.name])},i.prototype.clear=function(){e.prototype.clear.call(this),this.ids={}},i.prototype["delete"]=function(t){var n=this.get(t);return void 0!==n&&n.id&&delete this.ids[n.id],e.prototype["delete"].call(this,t),n},i.prototype.toggleOpen=function(e){var t=this.get(e);return t.opened=!t.opened,this.http({url:this.BASE_URL+"/folders/"+t.id+"/open",method:"POST",data:{folderId:t.id,open:t.opened}})},i.prototype.rename=function(e,t){var n=this.get(e),r=this.$q.defer(),i=this;return this.http({url:this.BASE_URL+"/folders/"+n.id+"/rename",method:"POST",data:{folderName:t}}).success(function(){n.name=t,delete i.hashMap[e],i.hashMap[t]=n,r.resolve()}).error(function(e){r.reject(e.message)}),r.promise},i.prototype.getById=function(e){return this.ids[e]},i.prototype.create=function(e){e=e.trim();var t={name:e};this.add(t);var n=this.$q.defer();return this.http({url:this.BASE_URL+"/folders",method:"POST",data:{folderName:e}}).success(function(e){n.resolve(e)}).error(function(e){t.error=e.message}),n.promise},i.prototype.reversiblyDelete=function(e){var t=this.get(e),n=t.id;return t.deleted=!0,this.http["delete"](this.BASE_URL+"/folders/"+n)},i.prototype.undoDelete=function(e){var t=this.get(e),n=t.id;return t.deleted=!1,this.http.post(this.BASE_URL+"/folders/"+n+"/restore")},new i(t,n,r)}]),app.factory("ItemResource",["Resource","$http","BASE_URL","ITEM_BATCH_SIZE",function(e,t,n,r){"use strict";var i=function(t,n,r){e.call(this,t,n),this.batchSize=r,this.clear()};return i.prototype=Object.create(e.prototype),i.prototype.clear=function(){this.starredCount=0,this.lowestId=0,this.highestId=0,e.prototype.clear.call(this)},i.prototype.receive=function(t,n){switch(n){case"newestItemId":this.newestItemId=t;break;case"starred":this.starredCount=t;break;default:var r=this;t.forEach(function(e){0===r.lowestId&&(r.lowestId=e.id),0===r.highestId&&(r.highestId=e.id),e.id>r.highestId&&(r.highestId=e.id),e.id<r.lowestId&&(r.lowestId=e.id)}),e.prototype.receive.call(this,t,n)}},i.prototype.getNewestItemId=function(){return this.newestItemId},i.prototype.getStarredCount=function(){return this.starredCount},i.prototype.star=function(e,t){void 0===t&&(t=!0);var n=this.get(e),r=this.BASE_URL+"/items/"+n.feedId+"/"+n.guidHash+"/star";return n.starred=t,t?this.starredCount+=1:this.starredCount-=1,this.http({url:r,method:"POST",data:{isStarred:t}})},i.prototype.toggleStar=function(e){this.get(e).starred?this.star(e,!1):this.star(e,!0)},i.prototype.markItemRead=function(e,t){return void 0===t&&(t=!0),this.get(e).unread=!t,this.http({url:this.BASE_URL+"/items/"+e+"/read",method:"POST",data:{isRead:t}})},i.prototype.markItemsRead=function(e){var t=this;return e.forEach(function(e){t.get(e).unread=!1}),this.http({url:this.BASE_URL+"/items/read/multiple",method:"POST",data:{itemIds:e}})},i.prototype.markFeedRead=function(e,t){void 0===t&&(t=!0);var n=this.values.filter(function(t){return t.feedId===e});return n.forEach(function(e){e.unread=!t}),this.http.post(this.BASE_URL+"/feeds/"+e+"/read",{highestItemId:this.getNewestItemId()})},i.prototype.markRead=function(){return this.values.forEach(function(e){e.unread=!1}),this.http({url:this.BASE_URL+"/items/read",method:"POST",data:{highestItemId:this.getNewestItemId()}})},i.prototype.autoPage=function(e,t,n,r,i){var o;return o=n?this.highestId:this.lowestId,this.http({url:this.BASE_URL+"/items",method:"GET",params:{type:e,id:t,offset:o,limit:this.batchSize,oldestFirst:n,showAll:r,search:i}})},i.prototype.importArticles=function(e){return this.http({url:this.BASE_URL+"/feeds/import/articles",method:"POST",data:{json:e}})},new i(t,n,r)}]),app.service("Loading",function(){"use strict";this.loading={global:!1,content:!1,autopaging:!1},this.setLoading=function(e,t){this.loading[e]=t},this.isLoading=function(e){return this.loading[e]}}),app.service("OPMLImporter",["FeedResource","FolderResource","Publisher","$q",function(e,t,n,r){"use strict";var i=function(o){var s=r.defer();if(o.length>0){var a=o.pop(),u=a.url,d=a.title,c=0,l=a.folderName;if(void 0!==l&&void 0!==t.get(l)){var f=t.get(l);f.opened=!0,c=f.id,f.getsFeed=!0,f.getsFeedCounter=f.getsFeedCounter||0,f.getsFeedCounter+=1}void 0!==u&&void 0===e.get(u)&&e.create(u,c,d).then(function(e){n.publishAll(e)})["finally"](function(){0!==c&&(f.getsFeedCounter-=1,0===f.getsFeedCounter&&(f.getsFeed=!1)),i(o)})}else s.resolve();return s.promise};this.importFolders=function(e){var i=[],o=[];e.folders.forEach(function(e){if(void 0!==e.name){if(void 0===t.get(e.name)){var r=t.create(e.name).then(function(e){n.publishAll(e)});o.push(r)}e.feeds.forEach(function(t){t.folderName=e.name,i.push(t)})}}),i=i.concat(e.feeds);var s=r.defer();return r.all(o)["finally"](function(){s.resolve(i)}),s.promise},this.importFeedQueue=function(e,t){for(var n=r.defer(),o=[],s=0;t>s;s+=1)o.push(i(e));return r.all(o).then(function(){n.resolve()}),n.promise}}]),app.service("OPMLParser",function(){"use strict";var e=function(e){var t=e.attr("xmlUrl")||e.attr("htmlUrl"),n=e.attr("title")||e.attr("text")||t;return void 0===t?{type:"folder",name:n,feeds:[]}:{type:"feed",name:n,url:t}},t=function(n,r,i){for(var o=0;o<n.length;o+=1){var s=$(n[o]),a=e(s);"feed"===a.type?r.feeds.push(a):i?(t(s.children("outline"),a,!1),r.folders.push(a)):t(s.children("outline"),r,!1)}return r};this.parse=function(e){e=$.parseXML(e);var n=$(e).find("body > outline"),r={feeds:[],folders:[]};return t(n,r,!0)}}),app.service("Publisher",function(){"use strict";this.channels={},this.subscribe=function(e){var t=this;return{toChannels:function(n){n.forEach(function(n){t.channels[n]=t.channels[n]||[],t.channels[n].push(e)})}}},this.publishAll=function(e){var t=this;Object.keys(e).forEach(function(n){var r=t.channels[n];void 0!==r&&r.forEach(function(t){t.receive(e[n],n)})})}}),app.factory("Resource",function(){"use strict";var e=function(e,t,n){this.id=n||"id",this.values=[],this.hashMap={},this.http=e,this.BASE_URL=t};return e.prototype.receive=function(e){var t=this;e.forEach(function(e){t.add(e)})},e.prototype.add=function(e){var t=this.hashMap[e[this.id]];void 0===t?(this.values.push(e),this.hashMap[e[this.id]]=e):Object.keys(e).forEach(function(n){t[n]=e[n]})},e.prototype.size=function(){return this.values.length},e.prototype.get=function(e){return this.hashMap[e]},e.prototype["delete"]=function(e){var t=this,n=this.values.findIndex(function(n){return n[t.id]===e});void 0!==n&&this.values.splice(n,1),void 0!==this.hashMap[e]&&delete this.hashMap[e]},e.prototype.clear=function(){for(this.hashMap={};this.values.length>0;)this.values.pop()},e.prototype.getAll=function(){return this.values},e}),app.service("SettingsResource",["$http","BASE_URL",function(e,t){"use strict";this.settings={language:"en",showAll:null,compact:!1,oldestFirst:null,preventReadOnScroll:!1,compactExpand:!1,exploreUrl:""},this.defaultLanguageCode="en",this.supportedLanguageCodes=["ar-ma","ar","bg","ca","cs","cv","da","de","el","en","en-ca","en-gb","eo","es","et","eu","fi","fr-ca","fr","gl","he","hi","hu","id","is","it","ja","ka","ko","lv","ms-my","nb","ne","nl","pl","pt-br","pt","ro","ru","sk","sl","sv","th","tr","tzm-la","tzm","uk","zh-cn","zh-tw"],this.getSupportedLanguageCodes=function(){return this.supportedLanguageCodes},this.receive=function(e){var t=this;Object.keys(e).forEach(function(n){var r=e[n];"language"===n&&(r=t.processLanguageCode(r)),t.settings[n]=r})},this.get=function(e){return this.settings[e]},this.set=function(n,r){return this.settings[n]=r,e({url:t+"/settings",method:"PUT",data:{language:this.settings.language,showAll:this.settings.showAll,compact:this.settings.compact,oldestFirst:this.settings.oldestFirst,compactExpand:this.settings.compactExpand,preventReadOnScroll:this.settings.preventReadOnScroll}})},this.processLanguageCode=function(e){return e=e.replace("_","-").toLowerCase(),this.supportedLanguageCodes.indexOf(e)<0&&(e=e.split("-")[0]),this.supportedLanguageCodes.indexOf(e)<0&&(e=this.defaultLanguageCode),e}}]),function(e,t,n,r,i,o){"use strict";var s=e.location,a=e.localStorage,u=function(e,t,r){var i=n.isContentHandlerRegistered,o=function(e,t){return i?"new"!==i(e,t):a.getItem("registeredHandler")===t};n.registerContentHandler&&!o(e,t)&&(n.registerContentHandler(e,t,r),i||a.setItem("registeredHandler",t))},d=s.protocol+"//"+s.host+s.pathname,c=d+"?subscribe_to=%s",l="application/vnd.mozilla.maybe.feed",f="ownCloud News @ "+d;u(l,c,f),i(t).ready(function(){var e=r("?subscribe_to");if(e&&"undefined"!==e){i("#new-feed").show();var t=i('input[ng-model="Navigation.feed.url"]');t.val(e),t.trigger("input"),setTimeout(function(){t.focus()},1e3)}})}(window,document,navigator,url,$),function(e,t){"use strict";e.addEventListener("beforeunload",function(){var e=t.querySelector("#app-content");e.scrollTo(0,0)})}(window,document),function(e,t,n){"use strict";var r=function(e){return!(e.is("input")||e.is("select")||e.is("textarea")||e.is("checkbox"))},i=function(e){return!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)},o=function(e){var t=".active > .app-navigation-entry-menu .mark-read button",n=e.find(t);n.length>0&&n.trigger("click")},s=function(e,t){var n=e.offset().top-t.offset().top,r=n+e.height(),i=t.height();return n>=0&&i>r},a=function(e,t,n){0===e.length||!n&&s(e,t)||t.scrollTop(e.offset().top-t.offset().top+t.scrollTop())},u=function(e){var t=e.find(".active");a(t,e.children("ul"),!0)},d=function(e){e.find(".active > a:visible").trigger("click")},c=function(e,t){if(0===t.scrollTop()){var n=t.find(".pull-to-refresh");n.hasClass("show-pull-to-refresh")?n.hasClass("done")&&d(e):n.addClass("show-pull-to-refresh")}},l=function(e,t){e.children("a:visible").trigger("click"),a(e,t.children("ul"))},f=function(e){var t=e.find(".active"),r=e.find(".explore-feed,.subscriptions-feed:visible,.starred-feed:visible,.feed:visible");if(t.hasClass("folder"))for(;t.length>0;){var i=t.find(".feed:visible");if(i.length>0)return void l(n(i[0]),e);t=t.next(".folder")}else for(var o=0;o<r.length-1;o+=1){var s=r[o];if(s===t[0]){var a=r[o+1];l(n(a),e);break}}},h=function(e){return e.parent().parent(".folder")},p=function(e,t){var r,i=e.find(".folder:visible");r=t?i.length-1:0,i.length>0&&l(n(i[r]),e)},g=function(e){var t=e.find(".active");if(t.hasClass("folder"))l(t.prevAll(".folder:visible").first(),e);else if(t.hasClass("feed")){var n=h(t);n.length>0?l(n,e):p(e,!0)}else p(e,!0)},v=function(e){var t=e.find(".active");if(t.hasClass("folder"))l(t.nextAll(".folder:visible").first(),e);else if(t.hasClass("feed")){var n=h(t);n.length>0?l(n.nextAll(".folder:visible").first(),e):p(e)}else p(e)},m=function(e){var t=e.find(".active"),r=e.find(".explore-feed,.subscriptions-feed:visible,.starred-feed:visible,.feed:visible");if(t.hasClass("folder")){for(var i=t.prev(".folder");i.length>0;){var o=i.find(".feed:visible");if(o.length>0)return void l(n(o[o.length-1]),e);i=i.prev(".folder")}var s=t.siblings(".feed");if(s.length>0)return void l(n(s[s.length-1]),e);var a=n(".starred-feed:visible");return void(a.length>0&&l(a,e))}for(var u=r.length-1;u>0;u-=1){var d=r[u];if(d===t[0]){var c=r[u-1];l(n(c),e);break}}},y=function(e,t){var r=e.find(".item");r.each(function(e,r){return r=n(r),r.height()+r.position().top>30?(t(r),!1):void 0})},E=function(e){y(e,function(e){e.find(".toggle-keep-unread").trigger("click")})},C=function(e){y(e,function(e){e.find(".star").trigger("click")})},F=function(e){y(e,function(e){e.find(".utils").trigger("click")})},I=function(t){y(t,function(t){t.trigger("click"),e.open(t.find(".external:visible").attr("href"),"_blank")})},w=function(e,t,n){e.scrollTop(t.offset().top-e.offset().top+e.scrollTop()),n&&y(e,function(e){e.hasClass("open")||e.find(".utils").trigger("click")})},R=function(e,t){var r=e.find(".item"),i=!1;r.each(function(r,o){return o=n(o),0===o.position().top&&t&&!o.hasClass("open")||o.position().top>10?(w(e,o,t),i=!0,!1):void 0}),i||e.scrollTop(e.prop("scrollHeight"))},b=function(e,t,r){var i=t.find(".item"),o=!1;i.each(function(i,s){if(s=n(s),s.position().top+10>=0){var a=s.prev();return a.length>0?w(t,a,r):(c(e,t),t.scrollTop(0)),o=!0,!1}}),!o&&i.length>0&&w(t,i.last())};n(t).keyup(function(e){var t=e.keyCode,s=n("#app-content"),a=n("#app-navigation"),l=n("#articles.compact").length>0,h="true"===n("#articles").attr("news-compact-expand"),p=l&&h;r(n(":focus"))&&i(e)?[74,78,39].indexOf(t)>=0?(e.preventDefault(),R(s,p)):[75,80,37].indexOf(t)>=0?(e.preventDefault(),
b(a,s,p)):[85].indexOf(t)>=0?(e.preventDefault(),E(s)):[69].indexOf(t)>=0?(e.preventDefault(),F(s)):[73,83,76].indexOf(t)>=0?(e.preventDefault(),C(s)):[72].indexOf(t)>=0?(e.preventDefault(),C(s),R(s)):[79].indexOf(t)>=0?(e.preventDefault(),I(s)):[82].indexOf(t)>=0?(e.preventDefault(),d(a)):[70].indexOf(t)>=0?(e.preventDefault(),f(a)):[68].indexOf(t)>=0?(e.preventDefault(),m(a)):[67].indexOf(t)>=0?(e.preventDefault(),g(a)):[65].indexOf(t)>=0?(e.preventDefault(),u(a)):[86].indexOf(t)>=0?(e.preventDefault(),v(a)):[81].indexOf(t)>=0?(e.preventDefault(),n("#searchbox").focus()):[33].indexOf(t)>=0&&c(a,s):r(n(":focus"))&&e.shiftKey&&[65].indexOf(t)>=0&&(e.preventDefault(),o(a))})}(window,document,$),window.News=window.News||{},function(e,t,n,r,i){"use strict";var o=[];r.addArticleAction=function(e){o.push(e)},r.getArticleActionPlugins=function(){return o}}(window,document,jQuery,window.News),app.run(["$document","$rootScope",function(e,t){"use strict";e.click(function(e){t.$broadcast("documentClicked",e)})}]),app.directive("appNavigationEntryUtils",function(){"use strict";return{restrict:"C",link:function(e,t){var n=t.siblings(".app-navigation-entry-menu"),r=$(t).find(".app-navigation-entry-utils-menu-button button");r.click(function(){n.toggleClass("open")}),e.$on("documentClicked",function(e,t){t.target!==r[0]&&n.removeClass("open")})}}}),app.directive("newsAddFeed",["$rootScope","$timeout",function(e,t){"use strict";return{restrict:"A",link:function(n,r){e.$on("addFeed",function(e,i){t(function(){r.is(":animated")?(r.stop(!0,!0),r.show()):r.is(":visible")||r.slideDown(),r.find('[ng-model="Navigation.feed.url"]').focus()}),n.Navigation.feed.url=i})}}}]),app.directive("newsArticleActions",function(){"use strict";return{restrict:"A",scope:{newsArticleActions:"=",noPlugins:"="},link:function(e,t){for(var n=News.getArticleActionPlugins(),r=0;r<n.length;r+=1)n[r](t,e.newsArticleActions);e.noPlugins=0===n.length}}}),app.directive("newsAutoFocus",["$timeout",function(e){"use strict";return function(t,n,r){var i=n;r.newsAutoFocus&&(i=$(r.newsAutoFocus)),e(function(){i.focus()},0)}}]),app.directive("newsBindHtmlUnsafe",function(){"use strict";return function(e,t,n){e.$watch(n.newsBindHtmlUnsafe,function(){t.html(e.$eval(n.newsBindHtmlUnsafe))})}}),app.directive("newsDraggable",function(){"use strict";return function(e,t,n){var r=e.$eval(n.newsDraggable);angular.isDefined(r)?t.draggable(r):t.draggable(),n.$observe("newsDraggableDisable",function(e){"true"===e?t.draggable("disable"):t.draggable("enable")})}}),app.directive("newsDroppable",["$rootScope",function(e){"use strict";return function(t,n,r){var i={accept:".feed",hoverClass:"drag-and-drop",greedy:!0,drop:function(i,o){$(".drag-and-drop").removeClass("drag-and-drop");var s={folderId:parseInt(n.data("id"),10),feedId:parseInt($(o.draggable).data("id"),10)};e.$broadcast("moveFeedToFolder",s),t.$apply(r.droppable)}};n.droppable(i)}}]),app.directive("newsFinishedTransition",function(){"use strict";return function(e,t,n){t.on("transitionend",function(){t.addClass(n.newsFinishedTransition)})}}),app.directive("newsFocus",["$timeout","$interpolate",function(e,t){"use strict";return function(n,r,i){r.click(function(){var r=$(t(i.newsFocus)(n));e(function(){r.focus()},500)})}}]),app.directive("newsInstantNotification",function(){"use strict";return{restrict:"E",link:function(e,t){t.hide();var n=t.html();OC.Notification.showHtml(n)}}}),app.directive("newsPlayOne",["$rootScope",function(e){"use strict";return{restrict:"A",link:function(t,n){n.on("play",function(){e.$broadcast("playing",n)}),e.$on("playing",function(e,t){t[0]!==n[0]&&n[0].pause()})}}}]),app.directive("newsPullToRefresh",["$rootScope",function(e){"use strict";var t=!1;return{restrict:"A",scope:{newsPullToRefresh:"="},link:function(n,r){e.$on("$routeChangeStart",function(){t=!1,n.newsPullToRefresh=!1}),r.on("scroll",function(){0===r.scrollTop()&&t&&(n.newsPullToRefresh=!0),t=!0})}}}]),app.directive("newsReadFile",function(){"use strict";return function(e,t,n){t.change(function(){var r=t[0].files[0],i=new FileReader;i.onload=function(t){e.$fileContent=t.target.result,e.$apply(n.newsReadFile)},i.readAsText(r)})}}),app.directive("newsRefreshMasonry",["$timeout",function(e){"use strict";var t=function(t){e(function(){e(function(){t.parent().masonry({itemSelector:".grid-item",gutter:25,columnWidth:300})})})};return function(e,n){e.$last&&t(n)}}]),app.directive("newsScroll",["$timeout","ITEM_AUTO_PAGE_SIZE","MARK_READ_TIMEOUT","SCROLL_TIMEOUT",function(e,t,n,r){"use strict";var i,o=function(e,t,n){for(var r=0,i=t.find(".item"),o=i.length-1;o>=0;o-=1){var s=$(i[o]);if(r>=e)break;if(s.position().top<0){n.$apply(n.newsScrollAutoPage);break}r+=1}},s=function(e,t,n){if(e){var r=[],i=t.find(".item:not(.read)");i.each(function(e,t){var n=$(t);return n.position().top<=-10?void r.push(parseInt(n.data("id"),10)):!1}),n.itemIds=r,n.$apply(n.newsScrollMarkRead)}};return{restrict:"A",scope:{newsScroll:"@",newsScrollAutoPage:"&",newsScrollMarkRead:"&",newsScrollEnabledMarkRead:"="},link:function(a,u){var d=!0,c=u;a.newsScroll&&(c=$(a.newsScroll));var l=function(){d&&(d=!1,e(function(){d=!0},1e3*r),o(t,u,a),i&&e.cancel(i),i=e(function(){s(a.newsScrollEnabledMarkRead,u,a),i=void 0},1e3*n))};c.on("scroll",l),a.$on("$destroy",function(){c.off("scroll",l)})}}}]),app.directive("newsSearch",["$document","$location",function(e,t){"use strict";return{restrict:"E",scope:{onSearch:"="},link:function(e){var n=$("#searchbox");n.val(t.search().search);var r=function(){var t=n.val();e.$apply(function(){e.onSearch(t)})};n.on("search keyup",function(e){("search"===e.type||13===e.keyCode)&&r()}),e.$watch(function(){return t.search()},function(e){e&&e.search?n.val(e.search):n.val("")})}}}]),app.directive("newsStickyMenu",function(){"use strict";return function(e,t,n){var r=40;$(n.newsStickyMenu).scroll(function(){var e=$(this).scrollTop();e>r?(t.addClass("fixed"),t.css("top",e)):t.removeClass("fixed")})}}),app.directive("newsStopPropagation",function(){"use strict";return{restrict:"A",link:function(e,t){t.bind("click",function(e){e.stopPropagation()})}}}),app.directive("newsTimeout",["$timeout","$rootScope",function(e,t){"use strict";return{restrict:"A",scope:{newsTimeout:"&"},link:function(n,r){var i=!1,o=7,s=e(n.newsTimeout,1e3*o);n.$on("$destroy",function(){i=!0,e.cancel(s)}),t.$on("$locationChangeStart",function(){e.cancel(s),i||(i=!0,r.remove(),n.newsTimeout())})}}}]),app.directive("newsTitleUnreadCount",["$window",function(e){"use strict";var t=e.document.title,n=t.split("-"),r=n[0]||"News",i=n[1]||"ownCloud";return{restrict:"E",scope:{unreadCount:"@"},link:function(t,n,o){o.$observe("unreadCount",function(t){"0"!==t?e.document.title=r+"("+t+") - "+i:e.document.title=r+" - "+i})}}}]),app.directive("newsToggleShow",function(){"use strict";return{restrict:"A",scope:{newsToggleShow:"@"},link:function(e,t){t.click(function(){var t=$(e.newsToggleShow);t.toggle()})}}}),app.directive("newsTriggerClick",function(){"use strict";return function(e,t,n){t.click(function(){$(n.newsTriggerClick).trigger("click")})}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFwcC5qcyIsIkNvbmZpZy5qcyIsIlJ1bi5qcyIsIkFwcENvbnRyb2xsZXIuanMiLCJDb250ZW50Q29udHJvbGxlci5qcyIsIkV4cGxvcmVDb250cm9sbGVyLmpzIiwiTmF2aWdhdGlvbkNvbnRyb2xsZXIuanMiLCJTZXR0aW5nc0NvbnRyb2xsZXIuanMiLCJUcnVzdFVybC5qcyIsIlVucmVhZENvdW50Rm9ybWF0dGVyLmpzIiwiRmVlZFJlc291cmNlLmpzIiwiRm9sZGVyUmVzb3VyY2UuanMiLCJJdGVtUmVzb3VyY2UuanMiLCJMb2FkaW5nLmpzIiwiT1BNTEltcG9ydGVyLmpzIiwiT1BNTFBhcnNlci5qcyIsIlB1Ymxpc2hlci5qcyIsIlJlc291cmNlLmpzIiwiU2V0dGluZ3NSZXNvdXJjZS5qcyIsIkV4dGVyblN1YnNjcmlwdGlvbi5qcyIsIkZpeGVzLmpzIiwiS2V5Ym9hcmRTaG9ydGN1dHMuanMiLCJBcnRpY2xlQWN0aW9uUGx1Z2luLmpzIiwiQXBwTmF2aWdhdGlvbkVudHJ5VXRpbHMuanMiLCJOZXdzQWRkRmVlZC5qcyIsIk5ld3NBcnRpY2xlQWN0aW9ucy5qcyIsIk5ld3NBdXRvRm9jdXMuanMiLCJOZXdzQmluZFVuc2FmZUh0bWwuanMiLCJOZXdzRHJhZ2dhYmxlLmpzIiwiTmV3c0Ryb3BwYWJsZS5qcyIsIk5ld3NGaW5pc2hlZFRyYW5zaXRpb24uanMiLCJOZXdzRm9jdXMuanMiLCJOZXdzSW5zdGFudE5vdGlmaWNhdGlvbi5qcyIsIk5ld3NQbGF5T25lLmpzIiwiTmV3c1B1bGxUb1JlZnJlc2guanMiLCJOZXdzUmVhZEZpbGUuanMiLCJOZXdzUmVmcmVzaE1hc29ucnkuanMiLCJOZXdzU2Nyb2xsLmpzIiwiTmV3c1NlYXJjaC5qcyIsIk5ld3NTdGlja3lNZW51LmpzIiwiTmV3c1N0b3BQcm9wYWdhdGlvbi5qcyIsIk5ld3NUaW1lb3V0LmpzIiwiTmV3c1RpdGxlVW5yZWFkQ291bnQuanMiLCJOZXdzVG9nZ2xlU2hvdy5qcyIsIk5ld3NUcmlnZ2VyQ2xpY2suanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJHByb3ZpZGUiLCIkaHR0cFByb3ZpZGVyIiwiZmVlZFR5cGUiLCJGRUVEIiwiRk9MREVSIiwiU1RBUlJFRCIsIlNVQlNDUklQVElPTlMiLCJTSEFSRUQiLCJFWFBMT1JFIiwiY29uc3RhbnQiLCJPQyIsImdlbmVyYXRlVXJsIiwiZmFjdG9yeSIsIiRxIiwiQkFTRV9VUkwiLCIkd2luZG93IiwicmVxdWVzdCIsImRvbWFpbiIsImxvY2F0aW9uIiwiaHJlZiIsInNwbGl0IiwicGF0aG5hbWUiLCJ1cmwiLCJpbmRleE9mIiwiaGVhZGVycyIsInJlcXVlc3R0b2tlbiIsIm9jX3JlcXVlc3R0b2tlbiIsIndoZW4iLCJlcnJvck1lc3NhZ2VzIiwwLCJ0Iiw0MDEsNDAzLDQxMiw1MDAsNTAzLCIkdGltZW91dCIsInRpbWVyIiwicmVzcG9uc2VFcnJvciIsInJlc3BvbnNlIiwic3RhdHVzIiwiY2FuY2VsIiwiTm90aWZpY2F0aW9uIiwiaGlkZSIsInNob3dIdG1sIiwicmVqZWN0IiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsImdldEl0ZW1SZXNvbHZlIiwidHlwZSIsImRhdGEiLCIkaHR0cCIsIiRyb3V0ZSIsIiRsb2NhdGlvbiIsIklURU1fQkFUQ0hfU0laRSIsIkZFRURfVFlQRSIsIlNldHRpbmdzUmVzb3VyY2UiLCJGZWVkUmVzb3VyY2UiLCJzaG93QWxsIiwiZ2V0Iiwib2xkZXN0Rmlyc3QiLCJzZWFyY2giLCJkZWZlcnJlZCIsImRlZmVyIiwicmVzb2x2ZSIsInBhcmFtZXRlcnMiLCJsaW1pdCIsInVuZGVmaW5lZCIsImN1cnJlbnQiLCJwYXJhbXMiLCJpZCIsImZlZWQiLCJnZXRCeUlkIiwib3JkZXJpbmciLCJtZXRob2QiLCJzdWNjZXNzIiwicHJvbWlzZSIsImdldEV4cGxvcmVSZXNvbHZlIiwic2l0ZXMiLCJQdWJsaXNoZXIiLCJsYW5ndWFnZSIsImxhbmciLCJ0aGVuIiwicHVibGlzaEFsbCIsInJlcGxhY2UiLCJleHBsb3JlVXJsIiwiZGVmYXVsdEV4cGxvcmVVcmwiLCJjb250cm9sbGVyIiwidGVtcGxhdGVVcmwiLCJydW4iLCIkcm9vdFNjb3BlIiwiJGludGVydmFsIiwiTG9hZGluZyIsIkl0ZW1SZXNvdXJjZSIsIkZvbGRlclJlc291cmNlIiwiUkVGUkVTSF9SQVRFIiwic2V0TG9hZGluZyIsInN1YnNjcmliZSIsInRvQ2hhbm5lbHMiLCJzZXR0aW5nc0RlZmVycmVkIiwiYWN0aXZlRmVlZERlZmVycmVkIiwicGF0aCIsImFjdGl2ZUZlZWQiLCJ0ZXN0IiwiZmVlZHMiLCJmZWVkRGVmZXJyZWQiLCJmb2xkZXJzIiwiZm9sZGVyRGVmZXJyZWQiLCJhbGwiLCJsZW5ndGgiLCJyZWxvYWQiLCIkb24iLCJ0aGlzIiwibG9hZGluZyIsImlzRmlyc3RSdW4iLCJzaXplIiwicGxheSIsIml0ZW0iLCJwbGF5aW5nSXRlbSIsIiRyb3V0ZVBhcmFtcyIsIklURU1fQVVUT19QQUdFX1NJWkUiLCJjbGVhciIsImlzQXV0b1BhZ2luZ0VuYWJsZWQiLCJpc05vdGhpbmdNb3JlVG9BdXRvUGFnZSIsImdldEl0ZW1zIiwiZ2V0QWxsIiwidG9nZ2xlU3RhciIsIml0ZW1JZCIsInRvZ2dsZUl0ZW0iLCJpc0NvbXBhY3RWaWV3Iiwic2hvdyIsImlzU2hvd0FsbCIsIm1hcmtSZWFkIiwia2VlcFVucmVhZCIsInVucmVhZCIsIm1hcmtJdGVtUmVhZCIsIm1hcmtJdGVtT2ZGZWVkUmVhZCIsImZlZWRJZCIsImdldEZlZWQiLCJ0b2dnbGVLZWVwVW5yZWFkIiwibWFya0l0ZW1PZkZlZWRVbnJlYWQiLCJzZWxmIiwiZ2V0T3JkZXJpbmciLCJpc0ZlZWQiLCJvcmRlckJ5IiwiaXNDb21wYWN0RXhwYW5kIiwiYXV0b1BhZ2luZ0VuYWJsZWQiLCJtYXJrUmVhZEVuYWJsZWQiLCJzY3JvbGxSZWFkIiwiaXRlbUlkcyIsImlkcyIsImZlZWRJZHMiLCJmb3JFYWNoIiwibWFya0l0ZW1zT2ZGZWVkc1JlYWQiLCJtYXJrSXRlbXNSZWFkIiwiJCRyb3V0ZSIsImF1dG9QYWdlIiwiYXV0b1BhZ2VBZ2FpbiIsIml0ZW1zIiwiZXJyb3IiLCJnZXRSZWxhdGl2ZURhdGUiLCJ0aW1lc3RhbXAiLCJsYW5ndWFnZUNvZGUiLCJkYXRlIiwibW9tZW50IiwidW5peCIsImxvY2FsZSIsImZyb21Ob3ciLCJyZWZyZXNoIiwiZ2V0TWVkaWFUeXBlIiwiT2JqZWN0Iiwia2V5cyIsIm1hcCIsImtleSIsInJlZHVjZSIsInhzIiwieCIsImNhdGVnb3J5IiwiZmVlZExpc3QiLCJjb25jYXQiLCJmZWVkRXhpc3RzIiwiZ2V0QnlMb2NhdGlvbiIsInN1YnNjcmliZVRvIiwiJGJyb2FkY2FzdCIsImlzQ2F0ZWdvcnlTaG93biIsImZpbHRlciIsImVsZW1lbnQiLCJnZXRTdXBwb3J0ZWRMYW5ndWFnZUNvZGVzIiwiZ2V0Q3VycmVudExhbmd1YWdlQ29kZSIsInNob3dMYW5ndWFnZSIsInNlbGVjdGVkTGFuZ3VhZ2VDb2RlIiwiZmVlZEVycm9yIiwic2hvd05ld0ZvbGRlciIsInJlbmFtaW5nRm9sZGVyIiwiYWRkaW5nRmVlZCIsImFkZGluZ0ZvbGRlciIsImZvbGRlckVycm9yIiwicmVuYW1lRXJyb3IiLCJnZXRSb3V0ZUlkIiwicGFyc2VJbnQiLCJnZXRMYW5ndWFnZUNvZGUiLCJnZXRGZWVkcyIsImdldEZvbGRlcnMiLCJtYXJrRm9sZGVyUmVhZCIsImZvbGRlcklkIiwiZ2V0QnlGb2xkZXJJZCIsIm1hcmtGZWVkUmVhZCIsImdldEZlZWRzT2ZGb2xkZXIiLCJnZXRVbnJlYWRDb3VudCIsImlzVW5yZWFkIiwiZ2V0RmVlZFVucmVhZENvdW50IiwidW5yZWFkQ291bnQiLCJpc0ZlZWRVbnJlYWQiLCJnZXRGb2xkZXJVbnJlYWRDb3VudCIsImlzRm9sZGVyVW5yZWFkIiwiZ2V0U3RhcnJlZENvdW50IiwiaXNTdGFycmVkVW5yZWFkIiwidG9nZ2xlRm9sZGVyIiwiZm9sZGVyTmFtZSIsInRvZ2dsZU9wZW4iLCJoYXNGZWVkcyIsInN1YkZlZWRBY3RpdmUiLCJpc1N1YnNjcmlwdGlvbnNBY3RpdmUiLCJpc1N0YXJyZWRBY3RpdmUiLCJpc0V4cGxvcmVBY3RpdmUiLCJpc0ZvbGRlckFjdGl2ZSIsImlzRmVlZEFjdGl2ZSIsImZvbGRlck5hbWVFeGlzdHMiLCJ0cmltIiwiZmVlZFVybEV4aXN0cyIsImNyZWF0ZUZlZWQiLCJuZXdGb2xkZXIiLCJleGlzdGluZ0ZvbGRlciIsImdldHNGZWVkIiwiY3JlYXRlIiwibmFtZSIsImNyZWF0ZUZvbGRlciIsImZvbGRlciIsIm1vdmVGZWVkIiwibW92ZSIsInJlbmFtZUZlZWQiLCJwYXRjaCIsInRpdGxlIiwiZWRpdGluZyIsInJlbmFtZUZvbGRlciIsInJlbmFtZSIsIm1lc3NhZ2UiLCJyZXZlcnNpYmx5RGVsZXRlRmVlZCIsInJldmVyc2libHlEZWxldGUiLCJ1bmRvRGVsZXRlRmVlZCIsInVuZG9EZWxldGUiLCJkZWxldGVGZWVkIiwicmV2ZXJzaWJseURlbGV0ZUZvbGRlciIsInVuZG9EZWxldGVGb2xkZXIiLCJkZWxldGVGb2xkZXIiLCJzZXRPcmRlcmluZyIsInRvZ2dsZVBpbm5lZCIsInBpbm5lZCIsInNldFVwZGF0ZU1vZGUiLCJ1cGRhdGVNb2RlIiwidG9nZ2xlRnVsbFRleHQiLCJ2YWx1ZSIsInNjb3BlIiwic2V0U2VsZWN0ZWRGb2xkZXJGb3JSb3V0ZSIsIk9QTUxQYXJzZXIiLCJPUE1MSW1wb3J0ZXIiLCJpc09QTUxJbXBvcnRpbmciLCJpc0FydGljbGVzSW1wb3J0aW5nIiwib3BtbEltcG9ydEVycm9yIiwiYXJ0aWNsZUltcG9ydEVycm9yIiwic2V0IiwidG9nZ2xlU2V0dGluZyIsImdldFNldHRpbmciLCJpbXBvcnRPUE1MIiwiY29udGVudCIsInBhcnNlZENvbnRlbnQiLCJwYXJzZSIsImpvYlNpemUiLCJpbXBvcnRGb2xkZXJzIiwiZmVlZFF1ZXVlIiwiaW1wb3J0RmVlZFF1ZXVlIiwiY29uc29sZSIsImltcG9ydEFydGljbGVzIiwiYXJ0aWNsZXMiLCJKU09OIiwiJHNjZSIsInRydXN0QXNSZXNvdXJjZVVybCIsIlJlc291cmNlIiwiY2FsbCIsImxvY2F0aW9ucyIsImZvbGRlclVucmVhZENvdW50IiwiZm9sZGVySWRzIiwicHJvdG90eXBlIiwicmVjZWl2ZSIsInVwZGF0ZVVucmVhZENhY2hlIiwidXBkYXRlRm9sZGVyQ2FjaGUiLCJ2YWx1ZXMiLCJhZGQiLCJoYXNoTWFwIiwic3RhcnRzV2l0aCIsImh0dHAiLCJwYXJlbnRGb2xkZXJJZCIsImZhdmljb25MaW5rIiwidXBkYXRlQ2FjaGUiLCJpc0ZvbGRlciIsImRlbGV0ZWQiLCJwcm9taXNlcyIsInBvc3QiLCJzZXRQaW5uZWQiLCJpc1Bpbm5lZCIsImRpZmYiLCJmdWxsVGV4dEVuYWJsZWQiLCJvcGVuZWQiLCJvcGVuIiwidG9Gb2xkZXJOYW1lIiwiYmF0Y2hTaXplIiwic3RhcnJlZENvdW50IiwibG93ZXN0SWQiLCJoaWdoZXN0SWQiLCJjaGFubmVsIiwibmV3ZXN0SXRlbUlkIiwiZ2V0TmV3ZXN0SXRlbUlkIiwic3RhciIsImlzU3RhcnJlZCIsIml0IiwiZ3VpZEhhc2giLCJzdGFycmVkIiwiaXNSZWFkIiwicmVhZCIsImhpZ2hlc3RJdGVtSWQiLCJvZmZzZXQiLCJqc29uIiwic2VydmljZSIsImdsb2JhbCIsImF1dG9wYWdpbmciLCJhcmVhIiwiaXNMb2FkaW5nIiwic3RhcnRGZWVkSm9iIiwicXVldWUiLCJwb3AiLCJnZXRzRmVlZENvdW50ZXIiLCJmb2xkZXJQcm9taXNlcyIsImpvYlByb21pc2VzIiwiaSIsInBhcnNlT3V0bGluZSIsIm91dGxpbmUiLCJhdHRyIiwicmVjdXJzaXZlbHlQYXJzZSIsImxldmVsIiwicm9vdCIsImZpcnN0TGV2ZWwiLCIkIiwiZW50cnkiLCJjaGlsZHJlbiIsInhtbCIsInBhcnNlWE1MIiwiZmluZCIsImNoYW5uZWxzIiwib2JqIiwibGlzdGVuZXJzIiwibGlzdGVuZXIiLCJvYmpzIiwiZXhpc3RpbmciLCJkZWxldGVBdEluZGV4IiwiZmluZEluZGV4Iiwic3BsaWNlIiwic2V0dGluZ3MiLCJjb21wYWN0IiwicHJldmVudFJlYWRPblNjcm9sbCIsImNvbXBhY3RFeHBhbmQiLCJkZWZhdWx0TGFuZ3VhZ2VDb2RlIiwic3VwcG9ydGVkTGFuZ3VhZ2VDb2RlcyIsInByb2Nlc3NMYW5ndWFnZUNvZGUiLCJ0b0xvd2VyQ2FzZSIsIndpbmRvdyIsImRvY3VtZW50IiwibmF2aWdhdG9yIiwic3RvcmFnZSIsImxvY2FsU3RvcmFnZSIsInJlZ2lzdGVySGFuZGxlciIsIm1pbWUiLCJyZWdpc3RlcmVkIiwiaXNDb250ZW50SGFuZGxlclJlZ2lzdGVyZWQiLCJpc1JlZ2lzdGVyZWQiLCJnZXRJdGVtIiwicmVnaXN0ZXJDb250ZW50SGFuZGxlciIsInNldEl0ZW0iLCJjbGVhblVybCIsInByb3RvY29sIiwiaG9zdCIsInN1YnNjcmliZVVybCIsIm1pbWVUeXBlIiwicmVhZHkiLCJzdWJzY3JpcHRpb24iLCJpbnB1dCIsInZhbCIsInRyaWdnZXIiLCJzZXRUaW1lb3V0IiwiZm9jdXMiLCJhZGRFdmVudExpc3RlbmVyIiwicXVlcnlTZWxlY3RvciIsInNjcm9sbFRvIiwibm9JbnB1dEZvY3VzZWQiLCJpcyIsIm5vTW9kaWZpZXJLZXkiLCJldmVudCIsInNoaWZ0S2V5IiwiYWx0S2V5IiwiY3RybEtleSIsIm1ldGFLZXkiLCJtYXJrQWxsUmVhZCIsIm5hdmlnYXRpb25BcmVhIiwic2VsZWN0b3IiLCJidXR0b24iLCJpc0luU2Nyb2xsVmlldyIsImVsZW0iLCJzY3JvbGxBcmVhIiwiZWxlbVRvcCIsInRvcCIsImVsZW1Cb3R0b20iLCJoZWlnaHQiLCJhcmVhQm90dG9tIiwic2Nyb2xsVG9OYXZpZ2F0aW9uRWxlbWVudCIsInRvVG9wIiwic2Nyb2xsVG9wIiwic2Nyb2xsVG9BY3RpdmVOYXZpZ2F0aW9uRW50cnkiLCJyZWxvYWRGZWVkIiwidHJ5UmVsb2FkIiwicHVsbFRvUmVmcmVzaCIsImhhc0NsYXNzIiwiYWRkQ2xhc3MiLCJhY3RpdmF0ZU5hdmlnYXRpb25FbnRyeSIsIm5leHRGZWVkIiwiZWxlbWVudHMiLCJzdWJmZWVkcyIsIm5leHQiLCJnZXRQYXJlbnRGb2xkZXIiLCJwYXJlbnQiLCJzZWxlY3RGaXJzdE9yTGFzdEZvbGRlciIsImlzTGFzdCIsImluZGV4IiwicHJldmlvdXNGb2xkZXIiLCJwcmV2QWxsIiwiZmlyc3QiLCJwYXJlbnRGb2xkZXIiLCJuZXh0Rm9sZGVyIiwibmV4dEFsbCIsInByZXZpb3VzRmVlZCIsInByZXYiLCJzaWJsaW5ncyIsInByZXZpb3VzIiwib25BY3RpdmVJdGVtIiwiY2FsbGJhY2siLCJlYWNoIiwicG9zaXRpb24iLCJ0b2dnbGVVbnJlYWQiLCJleHBhbmRJdGVtIiwib3BlbkxpbmsiLCJzY3JvbGxUb0l0ZW0iLCJleHBhbmRJdGVtSW5Db21wYWN0Iiwic2Nyb2xsVG9OZXh0SXRlbSIsImp1bXBlZCIsInByb3AiLCJzY3JvbGxUb1ByZXZpb3VzSXRlbSIsImxhc3QiLCJrZXl1cCIsImtleUNvZGUiLCJpc0V4cGFuZEl0ZW0iLCJwcmV2ZW50RGVmYXVsdCIsIk5ld3MiLCJleHBvcnRzIiwiYXJ0aWNsZUFjdGlvblBsdWdpbnMiLCJhZGRBcnRpY2xlQWN0aW9uIiwiYWN0aW9uIiwiZ2V0QXJ0aWNsZUFjdGlvblBsdWdpbnMiLCJqUXVlcnkiLCIkZG9jdW1lbnQiLCJjbGljayIsImRpcmVjdGl2ZSIsInJlc3RyaWN0IiwibGluayIsImVsbSIsIm1lbnUiLCJ0b2dnbGVDbGFzcyIsInRhcmdldCIsInJlbW92ZUNsYXNzIiwiXyIsInN0b3AiLCJzbGlkZURvd24iLCJOYXZpZ2F0aW9uIiwibmV3c0FydGljbGVBY3Rpb25zIiwibm9QbHVnaW5zIiwicGx1Z2lucyIsImF0dHJzIiwidG9Gb2N1cyIsIm5ld3NBdXRvRm9jdXMiLCIkd2F0Y2giLCJuZXdzQmluZEh0bWxVbnNhZmUiLCJodG1sIiwiJGV2YWwiLCJvcHRpb25zIiwibmV3c0RyYWdnYWJsZSIsImlzRGVmaW5lZCIsImRyYWdnYWJsZSIsIiRvYnNlcnZlIiwiZGV0YWlscyIsImFjY2VwdCIsImhvdmVyQ2xhc3MiLCJncmVlZHkiLCJkcm9wIiwidWkiLCIkYXBwbHkiLCJkcm9wcGFibGUiLCJvbiIsIm5ld3NGaW5pc2hlZFRyYW5zaXRpb24iLCIkaW50ZXJwb2xhdGUiLCJ0b1JlYWRkIiwibmV3c0ZvY3VzIiwibm90aWZpY2F0aW9uIiwiYXJncyIsInBhdXNlIiwic2Nyb2xsZWQiLCJuZXdzUHVsbFRvUmVmcmVzaCIsImNoYW5nZSIsImZpbGUiLCJmaWxlcyIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJvbmxvYWQiLCIkZmlsZUNvbnRlbnQiLCJyZXN1bHQiLCJuZXdzUmVhZEZpbGUiLCJyZWFkQXNUZXh0IiwibWFzb25yeSIsIml0ZW1TZWxlY3RvciIsImd1dHRlciIsImNvbHVtbldpZHRoIiwiJGxhc3QiLCJNQVJLX1JFQURfVElNRU9VVCIsIlNDUk9MTF9USU1FT1VUIiwiY291bnRlciIsIm5ld3NTY3JvbGxBdXRvUGFnZSIsImVuYWJsZWQiLCJhcnRpY2xlIiwibmV3c1Njcm9sbE1hcmtSZWFkIiwibmV3c1Njcm9sbCIsIm5ld3NTY3JvbGxFbmFibGVkTWFya1JlYWQiLCJhbGxvd1Njcm9sbCIsInNjcm9sbEhhbmRsZXIiLCJvZmYiLCJvblNlYXJjaCIsImJveCIsImRvU2VhcmNoIiwibmV3c1N0aWNreU1lbnUiLCJzY3JvbGwiLCJzY3JvbGxIZWlnaHQiLCJjc3MiLCJiaW5kIiwic3RvcFByb3BhZ2F0aW9uIiwibmV3c1RpbWVvdXQiLCJkZXN0cm95ZWQiLCJzZWNvbmRzIiwicmVtb3ZlIiwiYmFzZVRpdGxlIiwidGl0bGVzIiwiYXBwTmFtZSIsIm93bkNsb3VkTmFtZSIsIm5ld3NUb2dnbGVTaG93IiwidG9nZ2xlIiwibmV3c1RyaWdnZXJDbGljayJdLCJtYXBwaW5ncyI6IkFBV0EsR0FBQUEsS0FBQUMsUUFBQUMsT0FBQSxRQUFBLFVBQUEsYUFBQSxhQ0ZBRixLQUFBRyxRQUFBLGlCQUFBLFdBQUEsZ0JBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FDQSxZQUVBLElBQUFDLElBQ0FDLEtBQUEsRUFDQUMsT0FBQSxF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XG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuXG4vKiBqc2hpbnQgdW51c2VkOiBmYWxzZSAqL1xudmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdOZXdzJywgWyduZ1JvdXRlJywgJ25nU2FuaXRpemUnLCAnbmdBbmltYXRlJ10pO1xuIiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmNvbmZpZyhbXCIkcm91dGVQcm92aWRlclwiLCBcIiRwcm92aWRlXCIsIFwiJGh0dHBQcm92aWRlclwiLCBmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIsICRwcm92aWRlLCAkaHR0cFByb3ZpZGVyKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGZlZWRUeXBlID0ge1xuICAgICAgICBGRUVEOiAwLFxuICAgICAgICBGT0xERVI6IDEsXG4gICAgICAgIFNUQVJSRUQ6IDIsXG4gICAgICAgIFNVQlNDUklQVElPTlM6IDMsXG4gICAgICAgIFNIQVJFRDogNCxcbiAgICAgICAgRVhQTE9SRTogNVxuICAgIH07XG5cbiAgICAvLyBjb25zdGFudHNcbiAgICAkcHJvdmlkZS5jb25zdGFudCgnUkVGUkVTSF9SQVRFJywgNjApOyAgLy8gc2Vjb25kc1xuICAgICRwcm92aWRlLmNvbnN0YW50KCdJVEVNX0JBVENIX1NJWkUnLCA0MCk7ICAvLyBob3cgbWFueSBpdGVtcyBzaG91bGQgYmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmV0Y2hlZCBpbml0aWFsbHlcbiAgICAkcHJvdmlkZS5jb25zdGFudCgnSVRFTV9BVVRPX1BBR0VfU0laRScsIDIwKTtcbiAgICAkcHJvdmlkZS5jb25zdGFudCgnQkFTRV9VUkwnLCBPQy5nZW5lcmF0ZVVybCgnL2FwcHMvbmV3cycpKTtcbiAgICAkcHJvdmlkZS5jb25zdGFudCgnRkVFRF9UWVBFJywgZmVlZFR5cGUpO1xuICAgICRwcm92aWRlLmNvbnN0YW50KCdNQVJLX1JFQURfVElNRU9VVCcsIDAuNSk7XG4gICAgJHByb3ZpZGUuY29uc3RhbnQoJ1NDUk9MTF9USU1FT1VUJywgMC4xKTtcblxuICAgIC8vIG1ha2Ugc3VyZSB0aGF0IHRoZSBDU1JGIGhlYWRlciBpcyBvbmx5IHNlbnQgdG8gdGhlIG93bkNsb3VkIGRvbWFpblxuICAgICRwcm92aWRlLmZhY3RvcnkoJ0NTUkZJbnRlcmNlcHRvcicsIFtcIiRxXCIsIFwiQkFTRV9VUkxcIiwgXCIkd2luZG93XCIsIGZ1bmN0aW9uICgkcSwgQkFTRV9VUkwsICR3aW5kb3cpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlcXVlc3Q6IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgICAgICAgICB2YXIgZG9tYWluID1cbiAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCR3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUpWzBdO1xuICAgICAgICAgICAgICAgIGlmIChjb25maWcudXJsLmluZGV4T2YoQkFTRV9VUkwpID09PSAwIHx8XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy51cmwuaW5kZXhPZihkb21haW4pID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8qanNoaW50IGNhbWVsY2FzZTogZmFsc2UgKi9cbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMucmVxdWVzdHRva2VuID0gb2NfcmVxdWVzdHRva2VuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBjb25maWcgfHwgJHEud2hlbihjb25maWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1dKTtcbiAgICB2YXIgZXJyb3JNZXNzYWdlcyA9IHtcbiAgICAgICAgMDogdCgnbmV3cycsICdSZXF1ZXN0IGZhaWxlZCwgbmV0d29yayBjb25uZWN0aW9uIHVuYXZhaWxhYmxlIScpLFxuICAgICAgICA0MDE6IHQoJ25ld3MnLCAnUmVxdWVzdCB1bmF1dGhvcml6ZWQuIEFyZSB5b3UgbG9nZ2VkIGluPycpLFxuICAgICAgICA0MDM6IHQoJ25ld3MnLCAnUmVxdWVzdCBmb3JiaWRkZW4uIEFyZSB5b3UgYW4gYWRtaW4/JyksXG4gICAgICAgIDQxMjogdCgnbmV3cycsICdUb2tlbiBleHBpcmVkIG9yIGFwcCBub3QgZW5hYmxlZCEgUmVsb2FkIHRoZSBwYWdlIScpLFxuICAgICAgICA1MDA6IHQoJ25ld3MnLCAnSW50ZXJuYWwgc2VydmVyIGVycm9yISBQbGVhc2UgY2hlY2sgeW91ciAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEvb3duY2xvdWQubG9nIGZpbGUgZm9yIGFkZGl0aW9uYWwgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICdpbmZvcm1hdGlvbiEnKSxcbiAgICAgICAgNTAzOiB0KCduZXdzJywgJ1JlcXVlc3QgZmFpbGVkLCBvd25DbG91ZCBpcyBpbiBjdXJyZW50bHkgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICdpbiBtYWludGVuYW5jZSBtb2RlIScpLFxuICAgIH07XG4gICAgJHByb3ZpZGUuZmFjdG9yeSgnQ29ubmVjdGlvbkVycm9ySW50ZXJjZXB0b3InLCBbXCIkcVwiLCBcIiR0aW1lb3V0XCIsIGZ1bmN0aW9uICgkcSwgJHRpbWVvdXQpIHtcbiAgICAgICAgdmFyIHRpbWVyO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzcG9uc2VFcnJvcjogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgLy8gc3RhdHVzIDAgaXMgYSBuZXR3b3JrIGVycm9yXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyBpbiBlcnJvck1lc3NhZ2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aW1lcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQuY2FuY2VsKHRpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBPQy5Ob3RpZmljYXRpb24uaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICBPQy5Ob3RpZmljYXRpb24uc2hvd0h0bWwoZXJyb3JNZXNzYWdlc1tyZXNwb25zZS5zdGF0dXNdKTtcbiAgICAgICAgICAgICAgICAgICAgdGltZXIgPSAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBPQy5Ob3RpZmljYXRpb24uaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9LCA1MDAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfV0pO1xuICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ0NTUkZJbnRlcmNlcHRvcicpO1xuICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ0Nvbm5lY3Rpb25FcnJvckludGVyY2VwdG9yJyk7XG5cbiAgICAvLyByb3V0aW5nXG4gICAgdmFyIGdldEl0ZW1SZXNvbHZlID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC8vIHJlcXVlc3QgdG8gaXRlbXMgYWxzbyByZXR1cm5zIGZlZWRzXG4gICAgICAgICAgICBkYXRhOiAvKiBAbmdJbmplY3QgKi8gW1wiJGh0dHBcIiwgXCIkcm91dGVcIiwgXCIkcVwiLCBcIiRsb2NhdGlvblwiLCBcIkJBU0VfVVJMXCIsIFwiSVRFTV9CQVRDSF9TSVpFXCIsIFwiRkVFRF9UWVBFXCIsIFwiU2V0dGluZ3NSZXNvdXJjZVwiLCBcIkZlZWRSZXNvdXJjZVwiLCBmdW5jdGlvbiAoXG4gICAgICAgICAgICAkaHR0cCwgJHJvdXRlLCAkcSwgJGxvY2F0aW9uLCBCQVNFX1VSTCwgSVRFTV9CQVRDSF9TSVpFLCBGRUVEX1RZUEUsXG4gICAgICAgICAgICBTZXR0aW5nc1Jlc291cmNlLCBGZWVkUmVzb3VyY2UpIHtcblxuICAgICAgICAgICAgICAgIHZhciBzaG93QWxsID0gU2V0dGluZ3NSZXNvdXJjZS5nZXQoJ3Nob3dBbGwnKTtcbiAgICAgICAgICAgICAgICB2YXIgb2xkZXN0Rmlyc3QgPSBTZXR0aW5nc1Jlc291cmNlLmdldCgnb2xkZXN0Rmlyc3QnKTtcbiAgICAgICAgICAgICAgICB2YXIgc2VhcmNoID0gJGxvY2F0aW9uLnNlYXJjaCgpLnNlYXJjaCB8fCAnJztcblxuICAgICAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgICAgICAgICAvLyBpZiB0aG9zZSB0d28gdmFsdWVzIGFyZSBudWxsIGl0IG1lYW5zIHdlIGRpZCBub3QgcmVjZWl2ZVxuICAgICAgICAgICAgICAgIC8vIHRoZSBzZXR0aW5ncyByZXF1ZXN0IGZyb20gdGhlIHNlcnZlciBzbyBkb250IHF1ZXJ5IHRoZSBzZXJ2ZXJcbiAgICAgICAgICAgICAgICBpZiAoc2hvd0FsbCA9PT0gbnVsbCB8fCBvbGRlc3RGaXJzdCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHt9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW1ldGVycyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW1pdDogSVRFTV9CQVRDSF9TSVpFLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0FsbDogc2hvd0FsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZGVzdEZpcnN0OiBvbGRlc3RGaXJzdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaDogc2VhcmNoXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCRyb3V0ZS5jdXJyZW50ICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb3V0ZS5jdXJyZW50LnBhcmFtcyAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm91dGUuY3VycmVudC5wYXJhbXMuaWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5pZCA9ICRyb3V0ZS5jdXJyZW50LnBhcmFtcy5pZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIGEgY3VzdG9tIG9yZGVyaW5nIGlzIHNldFxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gRkVFRF9UWVBFLkZFRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmZWVkID0gRmVlZFJlc291cmNlLmdldEJ5SWQocGFyYW1ldGVycy5pZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uIGludGlhbCBsb2FkLCB0aGUgZmVlZCBvcmRlcmluZyBpcyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmZWVkID09PSB1bmRlZmluZWQgfHwgZmVlZC5vcmRlcmluZyA9PT0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMub2xkZXN0Rmlyc3QgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZmVlZC5vcmRlcmluZyA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMub2xkZXN0Rmlyc3QgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgJGh0dHAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAgQkFTRV9VUkwgKyAnL2l0ZW1zJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHBhcmFtZXRlcnNcbiAgICAgICAgICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgICAgICB9XVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICB2YXIgZ2V0RXhwbG9yZVJlc29sdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzaXRlczogLyogQG5nSW5qZWN0ICovIFtcIiRodHRwXCIsIFwiJHFcIiwgXCJCQVNFX1VSTFwiLCBcIiRsb2NhdGlvblwiLCBcIlB1Ymxpc2hlclwiLCBcIlNldHRpbmdzUmVzb3VyY2VcIiwgZnVuY3Rpb24gKFxuICAgICAgICAgICAgJGh0dHAsICRxLCBCQVNFX1VSTCwgJGxvY2F0aW9uLCBQdWJsaXNoZXIsIFNldHRpbmdzUmVzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICAgICAgLy8gYWx3YXlzIHVzZSB0aGUgY29kZSBmcm9tIHRoZSB1cmxcbiAgICAgICAgICAgICAgICB2YXIgbGFuZ3VhZ2UgPSAkbG9jYXRpb24uc2VhcmNoKCkubGFuZztcbiAgICAgICAgICAgICAgICBpZiAoIWxhbmd1YWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlID0gU2V0dGluZ3NSZXNvdXJjZS5nZXQoJ2xhbmd1YWdlJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KEJBU0VfVVJMICsgJy9zZXR0aW5ncycpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgUHVibGlzaGVyLnB1Ymxpc2hBbGwoZGF0YSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IHVybCBhbmQgc3RyaXAgdHJhaWxpbmcgc2xhc2hlc1xuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gU2V0dGluZ3NSZXNvdXJjZS5nZXQoJ2V4cGxvcmVVcmwnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcLyskLywgJycpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBleHBsb3JlVXJsID0gdXJsICsgJy9mZWVkcy4nICsgbGFuZ3VhZ2UgKyAnLmpzb24nO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGVmYXVsdEV4cGxvcmVVcmwgPSB1cmwgKyAnL2ZlZWRzLmVuLmpzb24nO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGh0dHBcbiAgICAgICAgICAgICAgICAgICAgICAgIC5nZXQoZXhwbG9yZVVybClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldChkZWZhdWx0RXhwbG9yZVVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhLmRhdGEpO1xuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgICAgIH1dXG4gICAgICAgIH07XG4gICAgfTtcblxuICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgICAgIC53aGVuKCcvaXRlbXMnLCB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQ29udGVudENvbnRyb2xsZXIgYXMgQ29udGVudCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbnRlbnQuaHRtbCcsXG4gICAgICAgICAgICByZXNvbHZlOiBnZXRJdGVtUmVzb2x2ZShmZWVkVHlwZS5TVUJTQ1JJUFRJT05TKSxcbiAgICAgICAgICAgIHR5cGU6IGZlZWRUeXBlLlNVQlNDUklQVElPTlNcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9pdGVtcy9zdGFycmVkJywge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0NvbnRlbnRDb250cm9sbGVyIGFzIENvbnRlbnQnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb250ZW50Lmh0bWwnLFxuICAgICAgICAgICAgcmVzb2x2ZTogZ2V0SXRlbVJlc29sdmUoZmVlZFR5cGUuU1RBUlJFRCksXG4gICAgICAgICAgICB0eXBlOiBmZWVkVHlwZS5TVEFSUkVEXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvaXRlbXMvZmVlZHMvOmlkJywge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0NvbnRlbnRDb250cm9sbGVyIGFzIENvbnRlbnQnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb250ZW50Lmh0bWwnLFxuICAgICAgICAgICAgcmVzb2x2ZTogZ2V0SXRlbVJlc29sdmUoZmVlZFR5cGUuRkVFRCksXG4gICAgICAgICAgICB0eXBlOiBmZWVkVHlwZS5GRUVEXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvaXRlbXMvZm9sZGVycy86aWQnLCB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQ29udGVudENvbnRyb2xsZXIgYXMgQ29udGVudCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbnRlbnQuaHRtbCcsXG4gICAgICAgICAgICByZXNvbHZlOiBnZXRJdGVtUmVzb2x2ZShmZWVkVHlwZS5GT0xERVIpLFxuICAgICAgICAgICAgdHlwZTogZmVlZFR5cGUuRk9MREVSXG4gICAgICAgIH0pLndoZW4oJy9leHBsb3JlJywge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0V4cGxvcmVDb250cm9sbGVyIGFzIEV4cGxvcmUnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdleHBsb3JlLmh0bWwnLFxuICAgICAgICAgICAgcmVzb2x2ZTogZ2V0RXhwbG9yZVJlc29sdmUoKSxcbiAgICAgICAgICAgIHR5cGU6IGZlZWRUeXBlLkVYUExPUkVcbiAgICAgICAgfSkud2hlbignL3Nob3J0Y3V0cycsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2hvcnRjdXRzLmh0bWwnLFxuICAgICAgICAgICAgdHlwZTogLTFcbiAgICAgICAgfSk7XG5cbn1dKTtcbiIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5ydW4oW1wiJHJvb3RTY29wZVwiLCBcIiRsb2NhdGlvblwiLCBcIiRodHRwXCIsIFwiJHFcIiwgXCIkaW50ZXJ2YWxcIiwgXCIkcm91dGVcIiwgXCJMb2FkaW5nXCIsIFwiSXRlbVJlc291cmNlXCIsIFwiRmVlZFJlc291cmNlXCIsIFwiRm9sZGVyUmVzb3VyY2VcIiwgXCJTZXR0aW5nc1Jlc291cmNlXCIsIFwiUHVibGlzaGVyXCIsIFwiQkFTRV9VUkxcIiwgXCJGRUVEX1RZUEVcIiwgXCJSRUZSRVNIX1JBVEVcIiwgZnVuY3Rpb24gKCRyb290U2NvcGUsICRsb2NhdGlvbiwgJGh0dHAsICRxLCAkaW50ZXJ2YWwsICRyb3V0ZSwgTG9hZGluZyxcbiAgICAgICAgIEl0ZW1SZXNvdXJjZSwgRmVlZFJlc291cmNlLCBGb2xkZXJSZXNvdXJjZSwgU2V0dGluZ3NSZXNvdXJjZSxcbiAgICAgICAgICBQdWJsaXNoZXIsIEJBU0VfVVJMLCBGRUVEX1RZUEUsIFJFRlJFU0hfUkFURSkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIHNob3cgTG9hZGluZyBzY3JlZW5cbiAgICBMb2FkaW5nLnNldExvYWRpbmcoJ2dsb2JhbCcsIHRydWUpO1xuXG4gICAgLy8gbGlzdGVuIHRvIGtleXMgaW4gcmV0dXJuZWQgcXVlcmllcyB0byBhdXRvbWF0aWNhbGx5IGRpc3RyaWJ1dGUgdGhlXG4gICAgLy8gaW5jb21pbmcgdmFsdWVzIHRvIG1vZGVsc1xuICAgIFB1Ymxpc2hlci5zdWJzY3JpYmUoSXRlbVJlc291cmNlKS50b0NoYW5uZWxzKFsnaXRlbXMnLCAnbmV3ZXN0SXRlbUlkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N0YXJyZWQnXSk7XG4gICAgUHVibGlzaGVyLnN1YnNjcmliZShGb2xkZXJSZXNvdXJjZSkudG9DaGFubmVscyhbJ2ZvbGRlcnMnXSk7XG4gICAgUHVibGlzaGVyLnN1YnNjcmliZShGZWVkUmVzb3VyY2UpLnRvQ2hhbm5lbHMoWydmZWVkcyddKTtcbiAgICBQdWJsaXNoZXIuc3Vic2NyaWJlKFNldHRpbmdzUmVzb3VyY2UpLnRvQ2hhbm5lbHMoWydzZXR0aW5ncyddKTtcblxuICAgIC8vIGxvYWQgZmVlZHMsIHNldHRpbmdzIGFuZCBsYXN0IHJlYWQgZmVlZFxuICAgIHZhciBzZXR0aW5nc0RlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAkaHR0cC5nZXQoQkFTRV9VUkwgKyAnL3NldHRpbmdzJykuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBQdWJsaXNoZXIucHVibGlzaEFsbChkYXRhKTtcbiAgICAgICAgc2V0dGluZ3NEZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgfSk7XG5cbiAgICB2YXIgYWN0aXZlRmVlZERlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICB2YXIgcGF0aCA9ICRsb2NhdGlvbi5wYXRoKCk7XG4gICAgJGh0dHAuZ2V0KEJBU0VfVVJMICsgJy9mZWVkcy9hY3RpdmUnKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHZhciB1cmw7XG5cbiAgICAgICAgc3dpdGNoIChkYXRhLmFjdGl2ZUZlZWQudHlwZSkge1xuXG4gICAgICAgIGNhc2UgRkVFRF9UWVBFLkZFRUQ6XG4gICAgICAgICAgICB1cmwgPSAnL2l0ZW1zL2ZlZWRzLycgKyBkYXRhLmFjdGl2ZUZlZWQuaWQ7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIEZFRURfVFlQRS5GT0xERVI6XG4gICAgICAgICAgICB1cmwgPSAnL2l0ZW1zL2ZvbGRlcnMvJyArIGRhdGEuYWN0aXZlRmVlZC5pZDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgRkVFRF9UWVBFLlNUQVJSRUQ6XG4gICAgICAgICAgICB1cmwgPSAnL2l0ZW1zL3N0YXJyZWQnO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBGRUVEX1RZUEUuRVhQTE9SRTpcbiAgICAgICAgICAgIHVybCA9ICcvZXhwbG9yZSc7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdXJsID0gJy9pdGVtcyc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBvbmx5IHJlZGlyZWN0IGlmIHVybCBpcyBlbXB0eSBvciBmYXVsdHlcbiAgICAgICAgaWYgKCEvXlxcL2l0ZW1zKFxcLyhzdGFycmVkfGV4cGxvcmV8ZmVlZHNcXC9cXGQrfGZvbGRlcnNcXC9cXGQrKSk/XFwvPyQvXG4gICAgICAgICAgICAudGVzdChwYXRoKSkge1xuICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgodXJsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFjdGl2ZUZlZWREZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgfSk7XG5cbiAgICB2YXIgZmVlZERlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICB2YXIgZmVlZHM7XG4gICAgJGh0dHAuZ2V0KEJBU0VfVVJMICsgJy9mZWVkcycpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgZmVlZHMgPSBkYXRhO1xuICAgICAgICBmZWVkRGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgIH0pO1xuXG4gICAgdmFyIGZvbGRlckRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICB2YXIgZm9sZGVycztcbiAgICAkaHR0cC5nZXQoQkFTRV9VUkwgKyAnL2ZvbGRlcnMnKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGZvbGRlcnMgPSBkYXRhO1xuICAgICAgICBmb2xkZXJEZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgfSk7XG5cbiAgICAkcS5hbGwoW1xuICAgICAgICBmZWVkRGVmZXJyZWQucHJvbWlzZSxcbiAgICAgICAgZm9sZGVyRGVmZXJyZWQucHJvbWlzZVxuICAgIF0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBmaXJzdCBwdWJsaXNoIGZlZWRzIHRvIGNvcnJlY3RseSB1cGRhdGUgdGhlIGZvbGRlciByZXNvdXJjZSB1bnJlYWRcbiAgICAgICAgLy8gY2FjaGVcbiAgICAgICAgUHVibGlzaGVyLnB1Ymxpc2hBbGwoZmVlZHMpO1xuICAgICAgICBQdWJsaXNoZXIucHVibGlzaEFsbChmb2xkZXJzKTtcbiAgICAgICAgaWYgKGZlZWRzLmZlZWRzLmxlbmd0aCA9PT0gMCAmJiBmb2xkZXJzLmZvbGRlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2V4cGxvcmUnKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gZGlzYWJsZSBsb2FkaW5nIGlmIGFsbCBpbml0aWFsIHJlcXVlc3RzIGZpbmlzaGVkXG4gICAgJHEuYWxsKFxuICAgICAgICBbXG4gICAgICAgICAgICBzZXR0aW5nc0RlZmVycmVkLnByb21pc2UsXG4gICAgICAgICAgICBhY3RpdmVGZWVkRGVmZXJyZWQucHJvbWlzZSxcbiAgICAgICAgICAgIGZlZWREZWZlcnJlZC5wcm9taXNlLFxuICAgICAgICAgICAgZm9sZGVyRGVmZXJyZWQucHJvbWlzZVxuICAgICAgICBdXG4gICAgKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkcm91dGUucmVsb2FkKCk7XG4gICAgICAgICAgICBMb2FkaW5nLnNldExvYWRpbmcoJ2dsb2JhbCcsIGZhbHNlKTtcbiAgICAgICAgfSk7XG5cbiAgICAvLyByZWZyZXNoIGZlZWRzIGFuZCBmb2xkZXJzXG4gICAgJGludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJGh0dHAuZ2V0KEJBU0VfVVJMICsgJy9mZWVkcycpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIFB1Ymxpc2hlci5wdWJsaXNoQWxsKGRhdGEpO1xuICAgICAgICB9KTtcbiAgICAgICAgJGh0dHAuZ2V0KEJBU0VfVVJMICsgJy9mb2xkZXJzJykuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgUHVibGlzaGVyLnB1Ymxpc2hBbGwoZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH0sIFJFRlJFU0hfUkFURSAqIDEwMDApO1xuXG5cbiAgICAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIExvYWRpbmcuc2V0TG9hZGluZygnY29udGVudCcsIHRydWUpO1xuICAgIH0pO1xuXG4gICAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIExvYWRpbmcuc2V0TG9hZGluZygnY29udGVudCcsIGZhbHNlKTtcbiAgICB9KTtcblxuICAgIC8vIGluIGNhc2Ugb2Ygd3JvbmcgaWQgZXRjIHNob3cgYWxsIGl0ZW1zXG4gICAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZUVycm9yJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2l0ZW1zJyk7XG4gICAgfSk7XG5cbn1dKTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuY29udHJvbGxlcignQXBwQ29udHJvbGxlcicsXG5bXCJMb2FkaW5nXCIsIFwiRmVlZFJlc291cmNlXCIsIFwiRm9sZGVyUmVzb3VyY2VcIiwgZnVuY3Rpb24gKExvYWRpbmcsIEZlZWRSZXNvdXJjZSwgRm9sZGVyUmVzb3VyY2UpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB0aGlzLmxvYWRpbmcgPSBMb2FkaW5nO1xuXG4gICAgdGhpcy5pc0ZpcnN0UnVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gRmVlZFJlc291cmNlLnNpemUoKSA9PT0gMCAmJiBGb2xkZXJSZXNvdXJjZS5zaXplKCkgPT09IDA7XG4gICAgfTtcblxuICAgIHRoaXMucGxheSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHRoaXMucGxheWluZ0l0ZW0gPSBpdGVtO1xuICAgIH07XG59XSk7XG4iLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuY29udHJvbGxlcignQ29udGVudENvbnRyb2xsZXInLFxuW1wiUHVibGlzaGVyXCIsIFwiRmVlZFJlc291cmNlXCIsIFwiSXRlbVJlc291cmNlXCIsIFwiU2V0dGluZ3NSZXNvdXJjZVwiLCBcImRhdGFcIiwgXCIkcm91dGVcIiwgXCIkcm91dGVQYXJhbXNcIiwgXCIkbG9jYXRpb25cIiwgXCJGRUVEX1RZUEVcIiwgXCJJVEVNX0FVVE9fUEFHRV9TSVpFXCIsIFwiTG9hZGluZ1wiLCBmdW5jdGlvbiAoUHVibGlzaGVyLCBGZWVkUmVzb3VyY2UsIEl0ZW1SZXNvdXJjZSwgU2V0dGluZ3NSZXNvdXJjZSwgZGF0YSxcbiAgICAkcm91dGUsICRyb3V0ZVBhcmFtcywgJGxvY2F0aW9uLCBGRUVEX1RZUEUsIElURU1fQVVUT19QQUdFX1NJWkUsIExvYWRpbmcpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBJdGVtUmVzb3VyY2UuY2xlYXIoKTtcblxuICAgIC8vIGRpc3RyaWJ1dGUgZGF0YSB0byBtb2RlbHMgYmFzZWQgb24ga2V5XG4gICAgUHVibGlzaGVyLnB1Ymxpc2hBbGwoZGF0YSk7XG5cblxuICAgIHRoaXMuaXNBdXRvUGFnaW5nRW5hYmxlZCA9IHRydWU7XG5cbiAgICAvLyB0aGUgaW50ZXJmYWNlIHNob3VsZCBzaG93IGEgaGludCBpZiB0aGVyZSBhcmUgbm90IGVub3VnaCBpdGVtcyBzZW50IHNvXG4gICAgLy8gaXQncyBhc3N1bWVkIHRoYXQgdGhlcmVzIG5vdGhpbmcgdG8gYXV0cGFnZVxuICAgIGlmIChJdGVtUmVzb3VyY2Uuc2l6ZSgpID49IElURU1fQVVUT19QQUdFX1NJWkUpIHtcbiAgICAgICAgdGhpcy5pc05vdGhpbmdNb3JlVG9BdXRvUGFnZSA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaXNOb3RoaW5nTW9yZVRvQXV0b1BhZ2UgPSB0cnVlO1xuICAgIH1cblxuICAgIHRoaXMuZ2V0SXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBJdGVtUmVzb3VyY2UuZ2V0QWxsKCk7XG4gICAgfTtcblxuICAgIHRoaXMudG9nZ2xlU3RhciA9IGZ1bmN0aW9uIChpdGVtSWQpIHtcbiAgICAgICAgSXRlbVJlc291cmNlLnRvZ2dsZVN0YXIoaXRlbUlkKTtcbiAgICB9O1xuXG4gICAgdGhpcy50b2dnbGVJdGVtID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgLy8gVE9ETzogdW5pdHRlc3RcbiAgICAgICAgaWYgKHRoaXMuaXNDb21wYWN0VmlldygpKSB7XG4gICAgICAgICAgICBpdGVtLnNob3cgPSAhaXRlbS5zaG93O1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuaXNTaG93QWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gU2V0dGluZ3NSZXNvdXJjZS5nZXQoJ3Nob3dBbGwnKTtcbiAgICB9O1xuXG4gICAgdGhpcy5tYXJrUmVhZCA9IGZ1bmN0aW9uIChpdGVtSWQpIHtcbiAgICAgICAgdmFyIGl0ZW0gPSBJdGVtUmVzb3VyY2UuZ2V0KGl0ZW1JZCk7XG5cbiAgICAgICAgaWYgKCFpdGVtLmtlZXBVbnJlYWQgJiYgaXRlbS51bnJlYWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIEl0ZW1SZXNvdXJjZS5tYXJrSXRlbVJlYWQoaXRlbUlkKTtcbiAgICAgICAgICAgIEZlZWRSZXNvdXJjZS5tYXJrSXRlbU9mRmVlZFJlYWQoaXRlbS5mZWVkSWQpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0RmVlZCA9IGZ1bmN0aW9uIChmZWVkSWQpIHtcbiAgICAgICAgcmV0dXJuIEZlZWRSZXNvdXJjZS5nZXRCeUlkKGZlZWRJZCk7XG4gICAgfTtcblxuICAgIHRoaXMudG9nZ2xlS2VlcFVucmVhZCA9IGZ1bmN0aW9uIChpdGVtSWQpIHtcbiAgICAgICAgdmFyIGl0ZW0gPSBJdGVtUmVzb3VyY2UuZ2V0KGl0ZW1JZCk7XG4gICAgICAgIGlmICghaXRlbS51bnJlYWQpIHtcbiAgICAgICAgICAgIEZlZWRSZXNvdXJjZS5tYXJrSXRlbU9mRmVlZFVucmVhZChpdGVtLmZlZWRJZCk7XG4gICAgICAgICAgICBJdGVtUmVzb3VyY2UubWFya0l0ZW1SZWFkKGl0ZW1JZCwgZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgaXRlbS5rZWVwVW5yZWFkID0gIWl0ZW0ua2VlcFVucmVhZDtcbiAgICB9O1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBnZXRPcmRlcmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG9yZGVyaW5nID0gU2V0dGluZ3NSZXNvdXJjZS5nZXQoJ29sZGVzdEZpcnN0Jyk7XG5cbiAgICAgICAgaWYgKHNlbGYuaXNGZWVkKCkpIHtcbiAgICAgICAgICAgIHZhciBmZWVkID0gRmVlZFJlc291cmNlLmdldEJ5SWQoJHJvdXRlUGFyYW1zLmlkKTtcbiAgICAgICAgICAgIGlmIChmZWVkICYmIGZlZWQub3JkZXJpbmcgPT09IDEpIHtcbiAgICAgICAgICAgICAgICBvcmRlcmluZyA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGZlZWQgJiYgZmVlZC5vcmRlcmluZyA9PT0gMikge1xuICAgICAgICAgICAgICAgIG9yZGVyaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gb3JkZXJpbmc7XG4gICAgfTtcblxuICAgIHRoaXMub3JkZXJCeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGdldE9yZGVyaW5nKCkpIHtcbiAgICAgICAgICAgIHJldHVybiAnaWQnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICctaWQnO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuaXNDb21wYWN0VmlldyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFNldHRpbmdzUmVzb3VyY2UuZ2V0KCdjb21wYWN0Jyk7XG4gICAgfTtcblxuICAgIHRoaXMuaXNDb21wYWN0RXhwYW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gU2V0dGluZ3NSZXNvdXJjZS5nZXQoJ2NvbXBhY3RFeHBhbmQnKTtcbiAgICB9O1xuXG4gICAgdGhpcy5hdXRvUGFnaW5nRW5hYmxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNBdXRvUGFnaW5nRW5hYmxlZDtcbiAgICB9O1xuXG4gICAgdGhpcy5tYXJrUmVhZEVuYWJsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhU2V0dGluZ3NSZXNvdXJjZS5nZXQoJ3ByZXZlbnRSZWFkT25TY3JvbGwnKTtcbiAgICB9O1xuXG4gICAgdGhpcy5zY3JvbGxSZWFkID0gZnVuY3Rpb24gKGl0ZW1JZHMpIHtcbiAgICAgICAgdmFyIGlkcyA9IFtdO1xuICAgICAgICB2YXIgZmVlZElkcyA9IFtdO1xuXG4gICAgICAgIGl0ZW1JZHMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbUlkKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IEl0ZW1SZXNvdXJjZS5nZXQoaXRlbUlkKTtcbiAgICAgICAgICAgIGlmICghaXRlbS5rZWVwVW5yZWFkKSB7XG4gICAgICAgICAgICAgICAgaWRzLnB1c2goaXRlbUlkKTtcbiAgICAgICAgICAgICAgICBmZWVkSWRzLnB1c2goaXRlbS5mZWVkSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoaWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIEZlZWRSZXNvdXJjZS5tYXJrSXRlbXNPZkZlZWRzUmVhZChmZWVkSWRzKTtcbiAgICAgICAgICAgIEl0ZW1SZXNvdXJjZS5tYXJrSXRlbXNSZWFkKGlkcyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5pc0ZlZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAkcm91dGUuY3VycmVudC4kJHJvdXRlLnR5cGUgPT09IEZFRURfVFlQRS5GRUVEO1xuICAgIH07XG5cbiAgICB0aGlzLmF1dG9QYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pc05vdGhpbmdNb3JlVG9BdXRvUGFnZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaW4gY2FzZSBhIHN1YnNlcXVlbnQgYXV0b3BhZ2UgcmVxdWVzdCBjb21lcyBpbiB3YWl0IHVudGlsXG4gICAgICAgIC8vIHRoZSBjdXJyZW50IG9uZSBmaW5pc2hlZCBhbmQgZXhlY3V0ZSBhIHJlcXVlc3QgaW1tZWRpYXRlbHkgYWZ0ZXJ3YXJkc1xuICAgICAgICBpZiAoIXRoaXMuaXNBdXRvUGFnaW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5hdXRvUGFnZUFnYWluID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaXNBdXRvUGFnaW5nRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmF1dG9QYWdlQWdhaW4gPSBmYWxzZTtcblxuICAgICAgICB2YXIgdHlwZSA9ICRyb3V0ZS5jdXJyZW50LiQkcm91dGUudHlwZTtcbiAgICAgICAgdmFyIGlkID0gJHJvdXRlUGFyYW1zLmlkO1xuICAgICAgICB2YXIgb2xkZXN0Rmlyc3QgPSBnZXRPcmRlcmluZygpO1xuICAgICAgICB2YXIgc2hvd0FsbCA9IFNldHRpbmdzUmVzb3VyY2UuZ2V0KCdzaG93QWxsJyk7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIHNlYXJjaCA9ICRsb2NhdGlvbi5zZWFyY2goKS5zZWFyY2g7XG5cbiAgICAgICAgTG9hZGluZy5zZXRMb2FkaW5nKCdhdXRvcGFnaW5nJywgdHJ1ZSk7XG5cbiAgICAgICAgSXRlbVJlc291cmNlLmF1dG9QYWdlKHR5cGUsIGlkLCBvbGRlc3RGaXJzdCwgc2hvd0FsbCwgc2VhcmNoKVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgUHVibGlzaGVyLnB1Ymxpc2hBbGwoZGF0YSk7XG5cbiAgICAgICAgICAgIGlmIChkYXRhLml0ZW1zLmxlbmd0aCA+PSBJVEVNX0FVVE9fUEFHRV9TSVpFKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5pc0F1dG9QYWdpbmdFbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZi5pc05vdGhpbmdNb3JlVG9BdXRvUGFnZSA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzZWxmLmlzQXV0b1BhZ2luZ0VuYWJsZWQgJiYgc2VsZi5hdXRvUGFnZUFnYWluKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5hdXRvUGFnZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS5lcnJvcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLmlzQXV0b1BhZ2luZ0VuYWJsZWQgPSB0cnVlO1xuICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIExvYWRpbmcuc2V0TG9hZGluZygnYXV0b3BhZ2luZycsIGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0UmVsYXRpdmVEYXRlID0gZnVuY3Rpb24gKHRpbWVzdGFtcCkge1xuICAgICAgICBpZiAodGltZXN0YW1wICE9PSB1bmRlZmluZWQgJiYgdGltZXN0YW1wICE9PSAnJykge1xuICAgICAgICAgICAgdmFyIGxhbmd1YWdlQ29kZSA9IFNldHRpbmdzUmVzb3VyY2UuZ2V0KCdsYW5ndWFnZScpO1xuICAgICAgICAgICAgdmFyIGRhdGUgPVxuICAgICAgICAgICAgICAgIG1vbWVudC51bml4KHRpbWVzdGFtcCkubG9jYWxlKGxhbmd1YWdlQ29kZSkuZnJvbU5vdygpICsgJyc7XG4gICAgICAgICAgICByZXR1cm4gZGF0ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRyb3V0ZS5yZWxvYWQoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRNZWRpYVR5cGUgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICBpZiAodHlwZSAmJiB0eXBlLmluZGV4T2YoJ2F1ZGlvJykgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiAnYXVkaW8nO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgJiYgdHlwZS5pbmRleE9mKCd2aWRlbycpID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3ZpZGVvJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9O1xuXG59XSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmNvbnRyb2xsZXIoJ0V4cGxvcmVDb250cm9sbGVyJyxcbltcInNpdGVzXCIsIFwiJHJvb3RTY29wZVwiLCBcIkZlZWRSZXNvdXJjZVwiLCBcIlNldHRpbmdzUmVzb3VyY2VcIiwgXCIkbG9jYXRpb25cIiwgZnVuY3Rpb24gKHNpdGVzLCAkcm9vdFNjb3BlLCBGZWVkUmVzb3VyY2UsIFNldHRpbmdzUmVzb3VyY2UsICRsb2NhdGlvbikge1xuXHQndXNlIHN0cmljdCc7XG5cblx0dGhpcy5zaXRlcyA9IHNpdGVzO1xuXHQvLyBqb2luIGFsbCBzaXRlc1xuXHR0aGlzLmZlZWRzID0gT2JqZWN0LmtleXMoc2l0ZXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdFx0cmV0dXJuIFtrZXksIHNpdGVzW2tleV1dO1xuXHR9KS5yZWR1Y2UoZnVuY3Rpb24gKHhzLCB4KSB7XG5cdFx0dmFyIGNhdGVnb3J5ID0geFswXTtcblx0XHR2YXIgZmVlZExpc3QgPSB4WzFdO1xuXHRcdGZlZWRMaXN0LmZvckVhY2goZnVuY3Rpb24gKGZlZWQpIHtcblx0XHRcdGZlZWQuY2F0ZWdvcnkgPSBjYXRlZ29yeTtcblx0XHR9KTtcblx0XHRyZXR1cm4geHMuY29uY2F0KGZlZWRMaXN0KTtcblx0fSwgW10pO1xuXG5cdHRoaXMuZmVlZEV4aXN0cyA9IGZ1bmN0aW9uIChsb2NhdGlvbikge1xuXHRcdHJldHVybiBGZWVkUmVzb3VyY2UuZ2V0QnlMb2NhdGlvbihsb2NhdGlvbikgIT09IHVuZGVmaW5lZDtcblx0fTtcblxuXHR0aGlzLnN1YnNjcmliZVRvID0gZnVuY3Rpb24gKGxvY2F0aW9uKSB7XG5cdFx0JHJvb3RTY29wZS4kYnJvYWRjYXN0KCdhZGRGZWVkJywgbG9jYXRpb24pO1xuXHR9O1xuXG5cdHRoaXMuaXNDYXRlZ29yeVNob3duID0gZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRyZXR1cm4gZGF0YS5maWx0ZXIoZnVuY3Rpb24gKGVsZW1lbnQpIHtcblx0XHRcdFx0cmV0dXJuIEZlZWRSZXNvdXJjZS5nZXRCeUxvY2F0aW9uKGVsZW1lbnQuZmVlZCkgPT09IHVuZGVmaW5lZDtcblx0XHRcdH0pLmxlbmd0aCA+IDA7XG5cdH07XG5cblx0dGhpcy5nZXRTdXBwb3J0ZWRMYW5ndWFnZUNvZGVzID0gZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiBTZXR0aW5nc1Jlc291cmNlLmdldFN1cHBvcnRlZExhbmd1YWdlQ29kZXMoKTtcblx0fTtcblxuXHR0aGlzLmdldEN1cnJlbnRMYW5ndWFnZUNvZGUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIGxhbmd1YWdlID0gJGxvY2F0aW9uLnNlYXJjaCgpLmxhbmc7XG5cdFx0aWYgKCFsYW5ndWFnZSkge1xuXHRcdFx0bGFuZ3VhZ2UgPSBTZXR0aW5nc1Jlc291cmNlLmdldCgnbGFuZ3VhZ2UnKTtcblx0XHR9XG5cdFx0cmV0dXJuIGxhbmd1YWdlO1xuXHR9O1xuXG5cdHRoaXMuc2hvd0xhbmd1YWdlID0gZnVuY3Rpb24gKGxhbmd1YWdlQ29kZSkge1xuXHRcdCRsb2NhdGlvbi51cmwoJy9leHBsb3JlLz9sYW5nPScgKyBsYW5ndWFnZUNvZGUpO1xuXHR9O1xuXG5cdHRoaXMuc2VsZWN0ZWRMYW5ndWFnZUNvZGUgPSB0aGlzLmdldEN1cnJlbnRMYW5ndWFnZUNvZGUoKTtcbn1dKTtcbiIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5jb250cm9sbGVyKCdOYXZpZ2F0aW9uQ29udHJvbGxlcicsXG5bXCIkcm91dGVcIiwgXCJGRUVEX1RZUEVcIiwgXCJGZWVkUmVzb3VyY2VcIiwgXCJGb2xkZXJSZXNvdXJjZVwiLCBcIkl0ZW1SZXNvdXJjZVwiLCBcIlNldHRpbmdzUmVzb3VyY2VcIiwgXCJQdWJsaXNoZXJcIiwgXCIkcm9vdFNjb3BlXCIsIFwiJGxvY2F0aW9uXCIsIFwiJHFcIiwgZnVuY3Rpb24gKCRyb3V0ZSwgRkVFRF9UWVBFLCBGZWVkUmVzb3VyY2UsIEZvbGRlclJlc291cmNlLCBJdGVtUmVzb3VyY2UsXG4gICAgU2V0dGluZ3NSZXNvdXJjZSwgUHVibGlzaGVyLCAkcm9vdFNjb3BlLCAkbG9jYXRpb24sICRxKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdGhpcy5mZWVkRXJyb3IgPSAnJztcbiAgICB0aGlzLnNob3dOZXdGb2xkZXIgPSBmYWxzZTtcbiAgICB0aGlzLnJlbmFtaW5nRm9sZGVyID0gZmFsc2U7XG4gICAgdGhpcy5hZGRpbmdGZWVkID0gZmFsc2U7XG4gICAgdGhpcy5hZGRpbmdGb2xkZXIgPSBmYWxzZTtcbiAgICB0aGlzLmZvbGRlckVycm9yID0gJyc7XG4gICAgdGhpcy5yZW5hbWVFcnJvciA9ICcnO1xuICAgIHRoaXMuZmVlZCA9IHt9O1xuXG4gICAgdmFyIGdldFJvdXRlSWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludCgkcm91dGUuY3VycmVudC5wYXJhbXMuaWQsIDEwKTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRMYW5ndWFnZUNvZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBTZXR0aW5nc1Jlc291cmNlLmdldCgnbGFuZ3VhZ2UnKTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRGZWVkcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIEZlZWRSZXNvdXJjZS5nZXRBbGwoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRGb2xkZXJzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gRm9sZGVyUmVzb3VyY2UuZ2V0QWxsKCk7XG4gICAgfTtcblxuICAgIHRoaXMubWFya0ZvbGRlclJlYWQgPSBmdW5jdGlvbiAoZm9sZGVySWQpIHtcbiAgICAgICAgRmVlZFJlc291cmNlLm1hcmtGb2xkZXJSZWFkKGZvbGRlcklkKTtcblxuICAgICAgICBGZWVkUmVzb3VyY2UuZ2V0QnlGb2xkZXJJZChmb2xkZXJJZCkuZm9yRWFjaChmdW5jdGlvbiAoZmVlZCkge1xuICAgICAgICAgICAgSXRlbVJlc291cmNlLm1hcmtGZWVkUmVhZChmZWVkLmlkKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRoaXMubWFya0ZlZWRSZWFkID0gZnVuY3Rpb24gKGZlZWRJZCkge1xuICAgICAgICBJdGVtUmVzb3VyY2UubWFya0ZlZWRSZWFkKGZlZWRJZCk7XG4gICAgICAgIEZlZWRSZXNvdXJjZS5tYXJrRmVlZFJlYWQoZmVlZElkKTtcbiAgICB9O1xuXG4gICAgdGhpcy5tYXJrUmVhZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgSXRlbVJlc291cmNlLm1hcmtSZWFkKCk7XG4gICAgICAgIEZlZWRSZXNvdXJjZS5tYXJrUmVhZCgpO1xuICAgIH07XG5cbiAgICB0aGlzLmlzU2hvd0FsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFNldHRpbmdzUmVzb3VyY2UuZ2V0KCdzaG93QWxsJyk7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0RmVlZHNPZkZvbGRlciA9IGZ1bmN0aW9uIChmb2xkZXJJZCkge1xuICAgICAgICByZXR1cm4gRmVlZFJlc291cmNlLmdldEJ5Rm9sZGVySWQoZm9sZGVySWQpO1xuICAgIH07XG5cbiAgICB0aGlzLmdldFVucmVhZENvdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gRmVlZFJlc291cmNlLmdldFVucmVhZENvdW50KCk7XG4gICAgfTtcblxuICAgIHRoaXMuaXNVbnJlYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFVucmVhZENvdW50KCkgPiAwO1xuICAgIH07XG5cbiAgICB0aGlzLmdldEZlZWRVbnJlYWRDb3VudCA9IGZ1bmN0aW9uIChmZWVkSWQpIHtcbiAgICAgICAgdmFyIGZlZWQgPSBGZWVkUmVzb3VyY2UuZ2V0QnlJZChmZWVkSWQpO1xuICAgICAgICBpZiAoZmVlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmVlZC51bnJlYWRDb3VudDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuaXNGZWVkVW5yZWFkID0gZnVuY3Rpb24gKGZlZWRJZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRGZWVkVW5yZWFkQ291bnQoZmVlZElkKSA+IDA7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0Rm9sZGVyVW5yZWFkQ291bnQ9IGZ1bmN0aW9uIChmb2xkZXJJZCkge1xuICAgICAgICByZXR1cm4gRmVlZFJlc291cmNlLmdldEZvbGRlclVucmVhZENvdW50KGZvbGRlcklkKTtcbiAgICB9O1xuXG4gICAgdGhpcy5pc0ZvbGRlclVucmVhZCA9IGZ1bmN0aW9uIChmb2xkZXJJZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRGb2xkZXJVbnJlYWRDb3VudChmb2xkZXJJZCkgPiAwO1xuICAgIH07XG5cbiAgICB0aGlzLmdldFN0YXJyZWRDb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIEl0ZW1SZXNvdXJjZS5nZXRTdGFycmVkQ291bnQoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5pc1N0YXJyZWRVbnJlYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFN0YXJyZWRDb3VudCgpID4gMDtcbiAgICB9O1xuXG4gICAgdGhpcy50b2dnbGVGb2xkZXIgPSBmdW5jdGlvbiAoZm9sZGVyTmFtZSkge1xuICAgICAgICBGb2xkZXJSZXNvdXJjZS50b2dnbGVPcGVuKGZvbGRlck5hbWUpO1xuICAgIH07XG5cbiAgICB0aGlzLmhhc0ZlZWRzID0gZnVuY3Rpb24gKGZvbGRlcklkKSB7XG4gICAgICAgIHJldHVybiBGZWVkUmVzb3VyY2UuZ2V0Rm9sZGVyVW5yZWFkQ291bnQoZm9sZGVySWQpICE9PSB1bmRlZmluZWQ7XG4gICAgfTtcblxuICAgIHRoaXMuc3ViRmVlZEFjdGl2ZSA9IGZ1bmN0aW9uIChmb2xkZXJJZCkge1xuICAgICAgICB2YXIgdHlwZSA9ICRyb3V0ZS5jdXJyZW50LiQkcm91dGUudHlwZTtcblxuICAgICAgICBpZiAodHlwZSA9PT0gRkVFRF9UWVBFLkZFRUQpIHtcbiAgICAgICAgICAgIHZhciBmZWVkID0gRmVlZFJlc291cmNlLmdldEJ5SWQoZ2V0Um91dGVJZCgpKTtcblxuICAgICAgICAgICAgaWYgKGZlZWQgIT09IHVuZGVmaW5lZCAmJiBmZWVkLmZvbGRlcklkID09PSBmb2xkZXJJZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICB0aGlzLmlzU3Vic2NyaXB0aW9uc0FjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICRyb3V0ZS5jdXJyZW50ICYmXG4gICAgICAgICAgICAkcm91dGUuY3VycmVudC4kJHJvdXRlLnR5cGUgPT09IEZFRURfVFlQRS5TVUJTQ1JJUFRJT05TO1xuICAgIH07XG5cbiAgICB0aGlzLmlzU3RhcnJlZEFjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICRyb3V0ZS5jdXJyZW50ICYmXG4gICAgICAgICAgICAkcm91dGUuY3VycmVudC4kJHJvdXRlLnR5cGUgPT09IEZFRURfVFlQRS5TVEFSUkVEO1xuICAgIH07XG5cbiAgICB0aGlzLmlzRXhwbG9yZUFjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICRyb3V0ZS5jdXJyZW50ICYmXG4gICAgICAgICAgICAkcm91dGUuY3VycmVudC4kJHJvdXRlLnR5cGUgPT09IEZFRURfVFlQRS5FWFBMT1JFO1xuICAgIH07XG5cbiAgICB0aGlzLmlzRm9sZGVyQWN0aXZlID0gZnVuY3Rpb24gKGZvbGRlcklkKSB7XG4gICAgICAgIHJldHVybiAkcm91dGUuY3VycmVudCAmJlxuICAgICAgICAgICAgJHJvdXRlLmN1cnJlbnQuJCRyb3V0ZS50eXBlID09PSBGRUVEX1RZUEUuRk9MREVSICYmXG4gICAgICAgICAgICBnZXRSb3V0ZUlkKCkgPT09IGZvbGRlcklkO1xuICAgIH07XG5cbiAgICB0aGlzLmlzRmVlZEFjdGl2ZSA9IGZ1bmN0aW9uIChmZWVkSWQpIHtcbiAgICAgICAgcmV0dXJuICRyb3V0ZS5jdXJyZW50ICYmXG4gICAgICAgICAgICAkcm91dGUuY3VycmVudC4kJHJvdXRlLnR5cGUgPT09IEZFRURfVFlQRS5GRUVEICYmXG4gICAgICAgICAgICBnZXRSb3V0ZUlkKCkgPT09IGZlZWRJZDtcbiAgICB9O1xuXG4gICAgdGhpcy5mb2xkZXJOYW1lRXhpc3RzID0gZnVuY3Rpb24gKGZvbGRlck5hbWUpIHtcbiAgICAgICAgZm9sZGVyTmFtZSA9IGZvbGRlck5hbWUgfHwgJyc7XG4gICAgICAgIHJldHVybiBGb2xkZXJSZXNvdXJjZS5nZXQoZm9sZGVyTmFtZS50cmltKCkpICE9PSB1bmRlZmluZWQ7XG4gICAgfTtcblxuICAgIHRoaXMuZmVlZFVybEV4aXN0cyA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgdXJsID0gdXJsIHx8ICcnO1xuICAgICAgICB1cmwgPSB1cmwudHJpbSgpO1xuICAgICAgICByZXR1cm4gRmVlZFJlc291cmNlLmdldCh1cmwpICE9PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIEZlZWRSZXNvdXJjZS5nZXQoJ2h0dHA6Ly8nICsgdXJsKSAhPT0gdW5kZWZpbmVkO1xuICAgIH07XG5cbiAgICB0aGlzLmNyZWF0ZUZlZWQgPSBmdW5jdGlvbiAoZmVlZCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMuc2hvd05ld0ZvbGRlciA9IGZhbHNlO1xuICAgICAgICB0aGlzLmFkZGluZ0ZlZWQgPSB0cnVlO1xuXG4gICAgICAgIHZhciBuZXdGb2xkZXIgPSBmZWVkLm5ld0ZvbGRlcjtcbiAgICAgICAgdmFyIGV4aXN0aW5nRm9sZGVyID0gZmVlZC5leGlzdGluZ0ZvbGRlciB8fCB7aWQ6IDB9O1xuXG4gICAgICAgIC8vIHdlIGRvbnQgbmVlZCB0byBjcmVhdGUgYSBuZXcgZm9sZGVyXG4gICAgICAgIGlmIChuZXdGb2xkZXIgPT09IHVuZGVmaW5lZCB8fCBuZXdGb2xkZXIgPT09ICcnKSB7XG4gICAgICAgICAgICAvLyB0aGlzIGlzIHNldCB0byBkaXNwbGF5IHRoZSBmZWVkIGluIGFueSBmb2xkZXIsIGV2ZW4gaWYgdGhlIGZvbGRlclxuICAgICAgICAgICAgLy8gaXMgY2xvc2VkIG9yIGhhcyBubyB1bnJlYWQgYXJ0aWNsZXNcbiAgICAgICAgICAgIGV4aXN0aW5nRm9sZGVyLmdldHNGZWVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgRmVlZFJlc291cmNlLmNyZWF0ZShmZWVkLnVybCwgZXhpc3RpbmdGb2xkZXIuaWQsIHVuZGVmaW5lZClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG5cbiAgICAgICAgICAgICAgICBQdWJsaXNoZXIucHVibGlzaEFsbChkYXRhKTtcblxuICAgICAgICAgICAgICAgIC8vIHNldCBmb2xkZXIgYXMgZGVmYXVsdFxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvaXRlbXMvZmVlZHMvJyArIGRhdGEuZmVlZHNbMF0uaWQgKyAnLycpO1xuXG4gICAgICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBleGlzdGluZ0ZvbGRlci5nZXRzRmVlZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBmZWVkLnVybCA9ICcnO1xuICAgICAgICAgICAgICAgIHNlbGYuYWRkaW5nRmVlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBmb2xkZXIgZmlyc3QgYW5kIHRoZW4gdGhlIGZlZWRcbiAgICAgICAgICAgIEZvbGRlclJlc291cmNlLmNyZWF0ZShuZXdGb2xkZXIpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcblxuICAgICAgICAgICAgICAgIFB1Ymxpc2hlci5wdWJsaXNoQWxsKGRhdGEpO1xuXG4gICAgICAgICAgICAgICAgLy8gc2V0IHRoZSBjcmVhdGVkIGZvbGRlciBvbiBzY29wZSBzbyBpdHMgcHJlc2VsZWN0ZWQgZm9yIHRoZVxuICAgICAgICAgICAgICAgIC8vIG5leHQgYWRkaXRpb25cbiAgICAgICAgICAgICAgICBmZWVkLmV4aXN0aW5nRm9sZGVyID0gRm9sZGVyUmVzb3VyY2UuZ2V0KGRhdGEuZm9sZGVyc1swXS5uYW1lKTtcbiAgICAgICAgICAgICAgICBmZWVkLm5ld0ZvbGRlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBzZWxmLmNyZWF0ZUZlZWQoZmVlZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmNyZWF0ZUZvbGRlciA9IGZ1bmN0aW9uIChmb2xkZXIpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB0aGlzLmFkZGluZ0ZvbGRlciA9IHRydWU7XG4gICAgICAgIEZvbGRlclJlc291cmNlLmNyZWF0ZShmb2xkZXIubmFtZSkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgUHVibGlzaGVyLnB1Ymxpc2hBbGwoZGF0YSk7XG4gICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5hZGRpbmdGb2xkZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIGZvbGRlci5uYW1lID0gJyc7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0aGlzLm1vdmVGZWVkID0gZnVuY3Rpb24gKGZlZWRJZCwgZm9sZGVySWQpIHtcbiAgICAgICAgdmFyIHJlbG9hZCA9IGZhbHNlO1xuICAgICAgICB2YXIgZmVlZCA9IEZlZWRSZXNvdXJjZS5nZXRCeUlkKGZlZWRJZCk7XG5cbiAgICAgICAgaWYgKGZlZWQuZm9sZGVySWQgPT09IGZvbGRlcklkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5pc0ZvbGRlckFjdGl2ZShmZWVkLmZvbGRlcklkKSB8fFxuICAgICAgICAgICAgdGhpcy5pc0ZvbGRlckFjdGl2ZShmb2xkZXJJZCkpIHtcbiAgICAgICAgICAgIHJlbG9hZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBGZWVkUmVzb3VyY2UubW92ZShmZWVkSWQsIGZvbGRlcklkKTtcblxuICAgICAgICBpZiAocmVsb2FkKSB7XG4gICAgICAgICAgICAkcm91dGUucmVsb2FkKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5yZW5hbWVGZWVkID0gZnVuY3Rpb24gKGZlZWQpIHtcbiAgICAgICAgRmVlZFJlc291cmNlLnBhdGNoKGZlZWQuaWQsIHt0aXRsZTogZmVlZC50aXRsZX0pO1xuICAgICAgICBmZWVkLmVkaXRpbmcgPSBmYWxzZTtcbiAgICB9O1xuXG4gICAgdGhpcy5yZW5hbWVGb2xkZXIgPSBmdW5jdGlvbiAoZm9sZGVyLCBuYW1lKSB7XG4gICAgICAgIGZvbGRlci5yZW5hbWVFcnJvciA9ICcnO1xuICAgICAgICB0aGlzLnJlbmFtaW5nRm9sZGVyID0gdHJ1ZTtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIGlmIChmb2xkZXIubmFtZSA9PT0gbmFtZSkge1xuICAgICAgICAgICAgZm9sZGVyLnJlbmFtZUVycm9yID0gJyc7XG4gICAgICAgICAgICBmb2xkZXIuZWRpdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5yZW5hbWluZ0ZvbGRlciA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgRm9sZGVyUmVzb3VyY2UucmVuYW1lKGZvbGRlci5uYW1lLCBuYW1lKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBmb2xkZXIucmVuYW1lRXJyb3IgPSAnJztcbiAgICAgICAgICAgICAgICBmb2xkZXIuZWRpdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBmb2xkZXIucmVuYW1lRXJyb3IgPSBtZXNzYWdlO1xuICAgICAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5yZW5hbWluZ0ZvbGRlciA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5yZXZlcnNpYmx5RGVsZXRlRmVlZCA9IGZ1bmN0aW9uIChmZWVkKSB7XG4gICAgICAgIEZlZWRSZXNvdXJjZS5yZXZlcnNpYmx5RGVsZXRlKGZlZWQuaWQpLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHJvdXRlLnJlbG9hZCgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdGhpcy51bmRvRGVsZXRlRmVlZCA9IGZ1bmN0aW9uIChmZWVkKSB7XG4gICAgICAgIEZlZWRSZXNvdXJjZS51bmRvRGVsZXRlKGZlZWQuaWQpLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHJvdXRlLnJlbG9hZCgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdGhpcy5kZWxldGVGZWVkID0gZnVuY3Rpb24gKGZlZWQpIHtcbiAgICAgICAgRmVlZFJlc291cmNlLmRlbGV0ZShmZWVkLnVybCk7XG4gICAgfTtcblxuXG4gICAgdGhpcy5yZXZlcnNpYmx5RGVsZXRlRm9sZGVyID0gZnVuY3Rpb24gKGZvbGRlcikge1xuICAgICAgICAkcS5hbGwoXG4gICAgICAgICAgICBGZWVkUmVzb3VyY2UucmV2ZXJzaWJseURlbGV0ZUZvbGRlcihmb2xkZXIuaWQpLFxuICAgICAgICAgICAgRm9sZGVyUmVzb3VyY2UucmV2ZXJzaWJseURlbGV0ZShmb2xkZXIubmFtZSlcbiAgICAgICAgKS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRyb3V0ZS5yZWxvYWQoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRoaXMudW5kb0RlbGV0ZUZvbGRlciA9IGZ1bmN0aW9uIChmb2xkZXIpIHtcbiAgICAgICAgJHEuYWxsKFxuICAgICAgICAgICAgRmVlZFJlc291cmNlLnVuZG9EZWxldGVGb2xkZXIoZm9sZGVyLmlkKSxcbiAgICAgICAgICAgIEZvbGRlclJlc291cmNlLnVuZG9EZWxldGUoZm9sZGVyLm5hbWUpXG4gICAgICAgICkuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkcm91dGUucmVsb2FkKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0aGlzLmRlbGV0ZUZvbGRlciA9IGZ1bmN0aW9uIChmb2xkZXIpIHtcbiAgICAgICAgRmVlZFJlc291cmNlLmRlbGV0ZUZvbGRlcihmb2xkZXIuaWQpO1xuICAgICAgICBGb2xkZXJSZXNvdXJjZS5kZWxldGUoZm9sZGVyLm5hbWUpO1xuICAgIH07XG5cbiAgICB0aGlzLnNldE9yZGVyaW5nID0gZnVuY3Rpb24gKGZlZWQsIG9yZGVyaW5nKSB7XG4gICAgICAgIEZlZWRSZXNvdXJjZS5wYXRjaChmZWVkLmlkLCB7b3JkZXJpbmc6IG9yZGVyaW5nfSk7XG4gICAgICAgICRyb3V0ZS5yZWxvYWQoKTtcbiAgICB9O1xuXG4gICAgdGhpcy50b2dnbGVQaW5uZWQgPSBmdW5jdGlvbiAoZmVlZElkKSB7XG4gICAgICAgIHZhciBmZWVkID0gRmVlZFJlc291cmNlLmdldEJ5SWQoZmVlZElkKTtcbiAgICAgICAgaWYgKGZlZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBGZWVkUmVzb3VyY2UucGF0Y2goZmVlZElkLCB7cGlubmVkOiAhZmVlZC5waW5uZWR9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnNldFVwZGF0ZU1vZGUgPSBmdW5jdGlvbiAoZmVlZElkLCB1cGRhdGVNb2RlKSB7XG4gICAgICAgIHJldHVybiBGZWVkUmVzb3VyY2UucGF0Y2goZmVlZElkLCB7dXBkYXRlTW9kZTogdXBkYXRlTW9kZX0pO1xuICAgIH07XG5cbiAgICB0aGlzLnRvZ2dsZUZ1bGxUZXh0ID0gZnVuY3Rpb24gKGZlZWQpIHtcbiAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCckcm91dGVDaGFuZ2VTdGFydCcpO1xuICAgICAgICBGZWVkUmVzb3VyY2UudG9nZ2xlRnVsbFRleHQoZmVlZC5pZCkuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJyRyb3V0ZUNoYW5nZVN1Y2Nlc3MnKTtcbiAgICAgICAgICAgICRyb3V0ZS5yZWxvYWQoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRoaXMuc2VhcmNoID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgICAgICRsb2NhdGlvbi5zZWFyY2goJ3NlYXJjaCcsIG51bGwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJGxvY2F0aW9uLnNlYXJjaCgnc2VhcmNoJywgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICRyb290U2NvcGUuJG9uKCdtb3ZlRmVlZFRvRm9sZGVyJywgZnVuY3Rpb24gKHNjb3BlLCBkYXRhKSB7XG4gICAgICAgIHNlbGYubW92ZUZlZWQoZGF0YS5mZWVkSWQsIGRhdGEuZm9sZGVySWQpO1xuICAgIH0pO1xuXG4gICAgLy8gYmFzZWQgb24gdGhlIHJvdXRlIHdlIHdhbnQgdG8gcHJlc2VsZWN0IGEgZm9sZGVyIGluIHRoZSBhZGQgbmV3IGZlZWRcbiAgICAvLyBkcm9wIGRvd25cbiAgICB2YXIgc2V0U2VsZWN0ZWRGb2xkZXJGb3JSb3V0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHR5cGU7XG4gICAgICAgIGlmICgkcm91dGUuY3VycmVudCkge1xuICAgICAgICAgICAgdHlwZSA9ICRyb3V0ZS5jdXJyZW50LiQkcm91dGUudHlwZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBmb2xkZXJJZCA9IDA7XG5cbiAgICAgICAgaWYgKHR5cGUgPT09IEZFRURfVFlQRS5GT0xERVIpIHtcbiAgICAgICAgICAgIGZvbGRlcklkID0gZ2V0Um91dGVJZCgpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IEZFRURfVFlQRS5GRUVEKSB7XG4gICAgICAgICAgICB2YXIgZmVlZCA9IEZlZWRSZXNvdXJjZS5nZXRCeUlkKGdldFJvdXRlSWQoKSk7XG5cbiAgICAgICAgICAgIGlmIChmZWVkKSB7XG4gICAgICAgICAgICAgICAgZm9sZGVySWQgPSBmZWVkLmZvbGRlcklkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGZvbGRlcjtcbiAgICAgICAgaWYgKGZvbGRlcklkICE9PSAwKSB7XG4gICAgICAgICAgICBmb2xkZXIgPSBGb2xkZXJSZXNvdXJjZS5nZXRCeUlkKGZvbGRlcklkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYuZmVlZC5leGlzdGluZ0ZvbGRlciA9IGZvbGRlcjtcbiAgICB9O1xuXG4gICAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNldFNlbGVjdGVkRm9sZGVyRm9yUm91dGUoKTtcbiAgICB9KTtcblxufV0pO1xuIiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmNvbnRyb2xsZXIoJ1NldHRpbmdzQ29udHJvbGxlcicsXG5bXCIkcm91dGVcIiwgXCIkcVwiLCBcIlNldHRpbmdzUmVzb3VyY2VcIiwgXCJJdGVtUmVzb3VyY2VcIiwgXCJPUE1MUGFyc2VyXCIsIFwiT1BNTEltcG9ydGVyXCIsIFwiUHVibGlzaGVyXCIsIGZ1bmN0aW9uICgkcm91dGUsICRxLCBTZXR0aW5nc1Jlc291cmNlLCBJdGVtUmVzb3VyY2UsIE9QTUxQYXJzZXIsXG4gICAgICAgICAgT1BNTEltcG9ydGVyLCBQdWJsaXNoZXIpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB0aGlzLmlzT1BNTEltcG9ydGluZyA9IGZhbHNlO1xuICAgIHRoaXMuaXNBcnRpY2xlc0ltcG9ydGluZyA9IGZhbHNlO1xuICAgIHRoaXMub3BtbEltcG9ydEVycm9yID0gZmFsc2U7XG4gICAgdGhpcy5hcnRpY2xlSW1wb3J0RXJyb3IgPSBmYWxzZTtcblxuICAgIHZhciBzZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICBTZXR0aW5nc1Jlc291cmNlLnNldChrZXksIHZhbHVlKTtcblxuICAgICAgICBpZiAoWydzaG93QWxsJywgJ29sZGVzdEZpcnN0JywgJ2NvbXBhY3QnXS5pbmRleE9mKGtleSkgPj0gMCkge1xuICAgICAgICAgICAgJHJvdXRlLnJlbG9hZCgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMudG9nZ2xlU2V0dGluZyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgc2V0KGtleSwgIXRoaXMuZ2V0U2V0dGluZyhrZXkpKTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRTZXR0aW5nID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICByZXR1cm4gU2V0dGluZ3NSZXNvdXJjZS5nZXQoa2V5KTtcbiAgICB9O1xuXG4gICAgdGhpcy5pbXBvcnRPUE1MID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgdGhpcy5vcG1sSW1wb3J0RXJyb3IgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5hcnRpY2xlSW1wb3J0RXJyb3IgPSBmYWxzZTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5pc09QTUxJbXBvcnRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBwYXJzZWRDb250ZW50ID0gT1BNTFBhcnNlci5wYXJzZShjb250ZW50KTtcblxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGpvYlNpemUgPSA1O1xuXG4gICAgICAgICAgICBPUE1MSW1wb3J0ZXIuaW1wb3J0Rm9sZGVycyhwYXJzZWRDb250ZW50KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGZlZWRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBPUE1MSW1wb3J0ZXIuaW1wb3J0RmVlZFF1ZXVlKGZlZWRRdWV1ZSwgam9iU2l6ZSk7XG4gICAgICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmlzT1BNTEltcG9ydGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5pc09QTUxJbXBvcnRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMub3BtbEltcG9ydEVycm9yID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmltcG9ydEFydGljbGVzID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgdGhpcy5vcG1sSW1wb3J0RXJyb3IgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5hcnRpY2xlSW1wb3J0RXJyb3IgPSBmYWxzZTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5pc0FydGljbGVzSW1wb3J0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBhcnRpY2xlcyA9IEpTT04ucGFyc2UoY29udGVudCk7XG5cbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIEl0ZW1SZXNvdXJjZS5pbXBvcnRBcnRpY2xlcyhhcnRpY2xlcykuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIFB1Ymxpc2hlci5wdWJsaXNoQWxsKGRhdGEpO1xuICAgICAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5pc0FydGljbGVzSW1wb3J0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICB0aGlzLmFydGljbGVJbXBvcnRFcnJvciA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmlzQXJ0aWNsZXNJbXBvcnRpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG5cbn1dKTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuZmlsdGVyKCd0cnVzdFVybCcsIFtcIiRzY2VcIiwgZnVuY3Rpb24gKCRzY2UpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKHVybCkge1xuICAgICAgICByZXR1cm4gJHNjZS50cnVzdEFzUmVzb3VyY2VVcmwodXJsKTtcbiAgICB9O1xufV0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5maWx0ZXIoJ3VucmVhZENvdW50Rm9ybWF0dGVyJywgZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHJldHVybiBmdW5jdGlvbiAodW5yZWFkQ291bnQpIHtcbiAgICAgICAgaWYgKHVucmVhZENvdW50ID4gOTk5KSB7XG4gICAgICAgICAgICByZXR1cm4gJzk5OSsnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bnJlYWRDb3VudDtcbiAgICB9O1xufSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmZhY3RvcnkoJ0ZlZWRSZXNvdXJjZScsIFtcIlJlc291cmNlXCIsIFwiJGh0dHBcIiwgXCJCQVNFX1VSTFwiLCBcIiRxXCIsIGZ1bmN0aW9uIChSZXNvdXJjZSwgJGh0dHAsIEJBU0VfVVJMLCAkcSkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBGZWVkUmVzb3VyY2UgPSBmdW5jdGlvbiAoJGh0dHAsIEJBU0VfVVJMLCAkcSkge1xuICAgICAgICBSZXNvdXJjZS5jYWxsKHRoaXMsICRodHRwLCBCQVNFX1VSTCwgJ3VybCcpO1xuICAgICAgICB0aGlzLmlkcyA9IHt9O1xuICAgICAgICB0aGlzLmxvY2F0aW9ucyA9IHt9O1xuICAgICAgICB0aGlzLnVucmVhZENvdW50ID0gMDtcbiAgICAgICAgdGhpcy5mb2xkZXJVbnJlYWRDb3VudCA9IHt9O1xuICAgICAgICB0aGlzLmZvbGRlcklkcyA9IHt9O1xuICAgICAgICB0aGlzLiRxID0gJHE7XG4gICAgfTtcblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFJlc291cmNlLnByb3RvdHlwZSk7XG5cbiAgICBGZWVkUmVzb3VyY2UucHJvdG90eXBlLnJlY2VpdmUgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBSZXNvdXJjZS5wcm90b3R5cGUucmVjZWl2ZS5jYWxsKHRoaXMsIGRhdGEpO1xuICAgICAgICB0aGlzLnVwZGF0ZVVucmVhZENhY2hlKCk7XG4gICAgICAgIHRoaXMudXBkYXRlRm9sZGVyQ2FjaGUoKTtcbiAgICB9O1xuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgUmVzb3VyY2UucHJvdG90eXBlLmNsZWFyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMudW5yZWFkQ291bnQgPSAwO1xuICAgICAgICB0aGlzLmZvbGRlclVucmVhZENvdW50ID0ge307XG4gICAgICAgIHRoaXMuZm9sZGVySWRzID0ge307XG4gICAgICAgIHRoaXMuaWRzID0ge307XG4gICAgICAgIHRoaXMubG9jYXRpb25zID0ge307XG4gICAgfTtcblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUudXBkYXRlVW5yZWFkQ2FjaGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudW5yZWFkQ291bnQgPSAwO1xuICAgICAgICB0aGlzLmZvbGRlclVucmVhZENvdW50ID0ge307XG5cbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB0aGlzLnZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uIChmZWVkKSB7XG4gICAgICAgICAgICBpZiAoZmVlZC51bnJlYWRDb3VudCkge1xuICAgICAgICAgICAgICAgIHNlbGYudW5yZWFkQ291bnQgKz0gZmVlZC51bnJlYWRDb3VudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmZWVkLmZvbGRlcklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmZvbGRlclVucmVhZENvdW50W2ZlZWQuZm9sZGVySWRdID1cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5mb2xkZXJVbnJlYWRDb3VudFtmZWVkLmZvbGRlcklkXSB8fCAwO1xuICAgICAgICAgICAgICAgIHNlbGYuZm9sZGVyVW5yZWFkQ291bnRbZmVlZC5mb2xkZXJJZF0gKz0gZmVlZC51bnJlYWRDb3VudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS51cGRhdGVGb2xkZXJDYWNoZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5mb2xkZXJJZHMgPSB7fTtcblxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMudmFsdWVzLmZvckVhY2goZnVuY3Rpb24gKGZlZWQpIHtcbiAgICAgICAgICAgIHNlbGYuZm9sZGVySWRzW2ZlZWQuZm9sZGVySWRdID1cbiAgICAgICAgICAgICAgICBzZWxmLmZvbGRlcklkc1tmZWVkLmZvbGRlcklkXSB8fCBbXTtcbiAgICAgICAgICAgIHNlbGYuZm9sZGVySWRzW2ZlZWQuZm9sZGVySWRdLnB1c2goZmVlZCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIFJlc291cmNlLnByb3RvdHlwZS5hZGQuY2FsbCh0aGlzLCB2YWx1ZSk7XG4gICAgICAgIGlmICh2YWx1ZS5pZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmlkc1t2YWx1ZS5pZF0gPSB0aGlzLmhhc2hNYXBbdmFsdWUudXJsXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUubG9jYXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5sb2NhdGlvbnNbdmFsdWUubG9jYXRpb25dID0gdGhpcy5oYXNoTWFwW3ZhbHVlLnVybF07XG4gICAgICAgIH1cbiAgICB9O1xuXG5cbiAgICBGZWVkUmVzb3VyY2UucHJvdG90eXBlLm1hcmtSZWFkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uIChmZWVkKSB7XG4gICAgICAgICAgICBmZWVkLnVucmVhZENvdW50ID0gMDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy51cGRhdGVVbnJlYWRDYWNoZSgpO1xuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUubWFya0ZlZWRSZWFkID0gZnVuY3Rpb24gKGZlZWRJZCkge1xuICAgICAgICB0aGlzLmlkc1tmZWVkSWRdLnVucmVhZENvdW50ID0gMDtcbiAgICAgICAgdGhpcy51cGRhdGVVbnJlYWRDYWNoZSgpO1xuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUubWFya0ZvbGRlclJlYWQgPSBmdW5jdGlvbiAoZm9sZGVySWQpIHtcbiAgICAgICAgdGhpcy52YWx1ZXMuZm9yRWFjaChmdW5jdGlvbiAoZmVlZCkge1xuICAgICAgICAgICAgaWYgKGZlZWQuZm9sZGVySWQgPT09IGZvbGRlcklkKSB7XG4gICAgICAgICAgICAgICAgZmVlZC51bnJlYWRDb3VudCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMudXBkYXRlVW5yZWFkQ2FjaGUoKTtcbiAgICB9O1xuXG5cbiAgICBGZWVkUmVzb3VyY2UucHJvdG90eXBlLm1hcmtJdGVtT2ZGZWVkUmVhZCA9IGZ1bmN0aW9uIChmZWVkSWQpIHtcbiAgICAgICAgdGhpcy5pZHNbZmVlZElkXS51bnJlYWRDb3VudCAtPSAxO1xuICAgICAgICB0aGlzLnVwZGF0ZVVucmVhZENhY2hlKCk7XG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS5tYXJrSXRlbXNPZkZlZWRzUmVhZCA9IGZ1bmN0aW9uIChmZWVkSWRzKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgZmVlZElkcy5mb3JFYWNoKGZ1bmN0aW9uIChmZWVkSWQpIHtcbiAgICAgICAgICAgIHNlbGYuaWRzW2ZlZWRJZF0udW5yZWFkQ291bnQgLT0gMTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy51cGRhdGVVbnJlYWRDYWNoZSgpO1xuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUubWFya0l0ZW1PZkZlZWRVbnJlYWQgPSBmdW5jdGlvbiAoZmVlZElkKSB7XG4gICAgICAgIHRoaXMuaWRzW2ZlZWRJZF0udW5yZWFkQ291bnQgKz0gMTtcbiAgICAgICAgdGhpcy51cGRhdGVVbnJlYWRDYWNoZSgpO1xuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUuZ2V0VW5yZWFkQ291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVucmVhZENvdW50O1xuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUuZ2V0Rm9sZGVyVW5yZWFkQ291bnQgPSBmdW5jdGlvbiAoZm9sZGVySWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9sZGVyVW5yZWFkQ291bnRbZm9sZGVySWRdO1xuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUuZ2V0QnlGb2xkZXJJZCA9IGZ1bmN0aW9uIChmb2xkZXJJZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mb2xkZXJJZHNbZm9sZGVySWRdIHx8IFtdO1xuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUuZ2V0QnlJZCA9IGZ1bmN0aW9uIChmZWVkSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWRzW2ZlZWRJZF07XG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS5nZXRCeUxvY2F0aW9uID0gZnVuY3Rpb24gKGxvY2F0aW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2F0aW9uc1tsb2NhdGlvbl07XG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS5tb3ZlID0gZnVuY3Rpb24gKGZlZWRJZCwgZm9sZGVySWQpIHtcbiAgICAgICAgdmFyIGZlZWQgPSB0aGlzLmdldEJ5SWQoZmVlZElkKTtcbiAgICAgICAgZmVlZC5mb2xkZXJJZCA9IGZvbGRlcklkO1xuXG4gICAgICAgIHRoaXMudXBkYXRlRm9sZGVyQ2FjaGUoKTtcbiAgICAgICAgdGhpcy51cGRhdGVVbnJlYWRDYWNoZSgpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnBhdGNoKGZlZWRJZCwge2ZvbGRlcklkOiBmb2xkZXJJZH0pO1xuXG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAodXJsLCBmb2xkZXJJZCwgdGl0bGUpIHtcbiAgICAgICAgdXJsID0gdXJsLnRyaW0oKTtcbiAgICAgICAgaWYgKCF1cmwuc3RhcnRzV2l0aCgnaHR0cCcpKSB7XG4gICAgICAgICAgICB1cmwgPSAnaHR0cHM6Ly8nICsgdXJsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRpdGxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRpdGxlID0gdGl0bGUudHJpbSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGZlZWQgPSB7XG4gICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgIGZvbGRlcklkOiBmb2xkZXJJZCB8fCAwLFxuICAgICAgICAgICAgdGl0bGU6IHRpdGxlIHx8IHVybCxcbiAgICAgICAgICAgIHVucmVhZENvdW50OiAwXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5hZGQoZmVlZCk7XG4gICAgICAgIHRoaXMudXBkYXRlRm9sZGVyQ2FjaGUoKTtcblxuICAgICAgICB2YXIgZGVmZXJyZWQgPSB0aGlzLiRxLmRlZmVyKCk7XG5cbiAgICAgICAgdGhpcy5odHRwKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgdXJsOiB0aGlzLkJBU0VfVVJMICsgJy9mZWVkcycsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgcGFyZW50Rm9sZGVySWQ6IGZvbGRlcklkIHx8IDAsXG4gICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZGF0YSk7XG4gICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBmZWVkLmZhdmljb25MaW5rID0gJyc7XG4gICAgICAgICAgICBmZWVkLmVycm9yID0gZGF0YS5tZXNzYWdlO1xuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUucmV2ZXJzaWJseURlbGV0ZSA9IGZ1bmN0aW9uIChpZCwgdXBkYXRlQ2FjaGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRm9sZGVyKSB7XG4gICAgICAgIHZhciBmZWVkID0gdGhpcy5nZXRCeUlkKGlkKTtcblxuICAgICAgICAvLyBpZiBhIGZvbGRlciBpcyBkZWxldGVkIGl0IGRvZXMgbm90IGhhdmUgdG8gdHJpZ2dlciB0aGUgZGVsZXRlXG4gICAgICAgIC8vIGF0dHJpYnV0ZSBmb3IgdGhlIGZlZWQgYmVjYXVzZSB0aGUgZmVlZCBpcyBub3QgZGVsZXRlZCwgaXRzIGp1c3Qgbm90XG4gICAgICAgIC8vIGRpc3BsYXllZC4gT3RoZXJ3aXNlIHRoaXMgY2F1c2VzIHRoZSBmZWVkIHRvIGFsc28gYmUgZGVsZXRlZCBhZ2FpblxuICAgICAgICAvLyBiZWNhdXNlIHRoZSBmb2xkZXIgZGVzdHJveXMgdGhlIGZlZWQncyBzY29wZVxuICAgICAgICBpZiAoZmVlZCAmJiBpc0ZvbGRlciAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgZmVlZC5kZWxldGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1cGRhdGVDYWNoZSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVW5yZWFkQ2FjaGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAuZGVsZXRlKHRoaXMuQkFTRV9VUkwgKyAnL2ZlZWRzLycgKyBpZCk7XG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS5yZXZlcnNpYmx5RGVsZXRlRm9sZGVyID0gZnVuY3Rpb24gKGZvbGRlcklkKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIHByb21pc2VzID0gW107XG4gICAgICAgIHRoaXMuZ2V0QnlGb2xkZXJJZChmb2xkZXJJZCkuZm9yRWFjaChmdW5jdGlvbiAoZmVlZCkge1xuICAgICAgICAgICAgcHJvbWlzZXMucHVzaChzZWxmLnJldmVyc2libHlEZWxldGUoZmVlZC5pZCwgZmFsc2UsIHRydWUpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy51cGRhdGVVbnJlYWRDYWNoZSgpO1xuXG4gICAgICAgIHZhciBkZWZlcnJlZCA9IHRoaXMuJHEuYWxsKHByb21pc2VzKTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAodXJsLCB1cGRhdGVDYWNoZSkge1xuICAgICAgICB2YXIgZmVlZCA9IHRoaXMuZ2V0KHVybCk7XG4gICAgICAgIGlmIChmZWVkICE9PSB1bmRlZmluZWQgJiYgZmVlZC5pZCkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuaWRzW2ZlZWQuaWRdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZlZWQgIT09IHVuZGVmaW5lZCAmJiBmZWVkLmxvY2F0aW9uKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5sb2NhdGlvbnNbZmVlZC5sb2NhdGlvbl07XG4gICAgICAgIH1cblxuICAgICAgICBSZXNvdXJjZS5wcm90b3R5cGUuZGVsZXRlLmNhbGwodGhpcywgdXJsKTtcblxuICAgICAgICBpZiAodXBkYXRlQ2FjaGUgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVVucmVhZENhY2hlKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZvbGRlckNhY2hlKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmVlZDtcbiAgICB9O1xuXG5cbiAgICBGZWVkUmVzb3VyY2UucHJvdG90eXBlLmRlbGV0ZUZvbGRlciA9IGZ1bmN0aW9uIChmb2xkZXJJZCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMuZ2V0QnlGb2xkZXJJZChmb2xkZXJJZCkuZm9yRWFjaChmdW5jdGlvbiAoZmVlZCkge1xuICAgICAgICAgICAgc2VsZi5kZWxldGUoZmVlZC51cmwsIGZhbHNlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy51cGRhdGVVbnJlYWRDYWNoZSgpO1xuICAgICAgICB0aGlzLnVwZGF0ZUZvbGRlckNhY2hlKCk7XG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS51bmRvRGVsZXRlID0gZnVuY3Rpb24gKGlkLCB1cGRhdGVDYWNoZSkge1xuICAgICAgICB2YXIgZmVlZCA9IHRoaXMuZ2V0QnlJZChpZCk7XG5cbiAgICAgICAgaWYgKGZlZWQpIHtcbiAgICAgICAgICAgIGZlZWQuZGVsZXRlZCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHVwZGF0ZUNhY2hlICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVVbnJlYWRDYWNoZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KHRoaXMuQkFTRV9VUkwgKyAnL2ZlZWRzLycgKyBpZCArICcvcmVzdG9yZScpO1xuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUudW5kb0RlbGV0ZUZvbGRlciA9IGZ1bmN0aW9uIChmb2xkZXJJZCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xuXG4gICAgICAgIHRoaXMuZ2V0QnlGb2xkZXJJZChmb2xkZXJJZCkuZm9yRWFjaChmdW5jdGlvbiAoZmVlZCkge1xuICAgICAgICAgICAgcHJvbWlzZXMucHVzaChzZWxmLnVuZG9EZWxldGUoZmVlZC5pZCwgZmFsc2UpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy51cGRhdGVVbnJlYWRDYWNoZSgpO1xuXG4gICAgICAgIHZhciBkZWZlcnJlZCA9IHRoaXMuJHEuYWxsKHByb21pc2VzKTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS5zZXRPcmRlcmluZyA9IGZ1bmN0aW9uIChmZWVkSWQsIG9yZGVyaW5nKSB7XG4gICAgICAgIHZhciBmZWVkID0gdGhpcy5nZXRCeUlkKGZlZWRJZCk7XG5cbiAgICAgICAgaWYgKGZlZWQpIHtcbiAgICAgICAgICAgIGZlZWQub3JkZXJpbmcgPSBvcmRlcmluZztcbiAgICAgICAgICAgIHZhciB1cmwgPSB0aGlzLkJBU0VfVVJMICsgJy9mZWVkcy8nICsgZmVlZElkO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wYXRjaCh1cmwsIHtcbiAgICAgICAgICAgICAgICBvcmRlcmluZzogb3JkZXJpbmdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS5zZXRQaW5uZWQgPSBmdW5jdGlvbiAoZmVlZElkLCBpc1Bpbm5lZCkge1xuICAgICAgICB2YXIgZmVlZCA9IHRoaXMuZ2V0QnlJZChmZWVkSWQpO1xuXG4gICAgICAgIGlmIChmZWVkKSB7XG4gICAgICAgICAgICBmZWVkLnBpbm5lZCA9IGlzUGlubmVkO1xuICAgICAgICAgICAgdmFyIHVybCA9IHRoaXMuQkFTRV9VUkwgKyAnL2ZlZWRzLycgKyBmZWVkSWQ7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBhdGNoKHVybCwge1xuICAgICAgICAgICAgICAgIHBpbm5lZDogaXNQaW5uZWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS5wYXRjaCA9IGZ1bmN0aW9uIChmZWVkSWQsIGRpZmYpIHtcbiAgICAgICAgdmFyIGZlZWQgPSB0aGlzLmdldEJ5SWQoZmVlZElkKTtcblxuICAgICAgICBpZiAoZmVlZCkge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoZGlmZikuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgICAgICBmZWVkW2tleV0gPSBkaWZmW2tleV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciB1cmwgPSB0aGlzLkJBU0VfVVJMICsgJy9mZWVkcy8nICsgZmVlZElkO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wYXRjaCh1cmwsIGRpZmYpO1xuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS50b2dnbGVGdWxsVGV4dCA9IGZ1bmN0aW9uIChmZWVkSWQpIHtcbiAgICAgICAgdmFyIGZlZWQgPSB0aGlzLmdldEJ5SWQoZmVlZElkKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5wYXRjaChmZWVkSWQsIHtmdWxsVGV4dEVuYWJsZWQ6ICFmZWVkLmZ1bGxUZXh0RW5hYmxlZH0pO1xuICAgIH07XG5cblxuICAgIHJldHVybiBuZXcgRmVlZFJlc291cmNlKCRodHRwLCBCQVNFX1VSTCwgJHEpO1xufV0pO1xuIiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmZhY3RvcnkoJ0ZvbGRlclJlc291cmNlJywgW1wiUmVzb3VyY2VcIiwgXCIkaHR0cFwiLCBcIkJBU0VfVVJMXCIsIFwiJHFcIiwgZnVuY3Rpb24gKFJlc291cmNlLCAkaHR0cCwgQkFTRV9VUkwsICRxKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIEZvbGRlclJlc291cmNlID0gZnVuY3Rpb24gKCRodHRwLCBCQVNFX1VSTCwgJHEpIHtcbiAgICAgICAgUmVzb3VyY2UuY2FsbCh0aGlzLCAkaHR0cCwgQkFTRV9VUkwsICduYW1lJyk7XG4gICAgICAgIHRoaXMuZGVsZXRlZCA9IG51bGw7XG4gICAgICAgIHRoaXMuJHEgPSAkcTtcbiAgICAgICAgdGhpcy5pZHMgPSB7fTtcbiAgICB9O1xuXG4gICAgRm9sZGVyUmVzb3VyY2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShSZXNvdXJjZS5wcm90b3R5cGUpO1xuXG5cbiAgICBGb2xkZXJSZXNvdXJjZS5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIFJlc291cmNlLnByb3RvdHlwZS5hZGQuY2FsbCh0aGlzLCB2YWx1ZSk7XG4gICAgICAgIGlmICh2YWx1ZS5pZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmlkc1t2YWx1ZS5pZF0gPSB0aGlzLmhhc2hNYXBbdmFsdWUubmFtZV07XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgRm9sZGVyUmVzb3VyY2UucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBSZXNvdXJjZS5wcm90b3R5cGUuY2xlYXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5pZHMgPSB7fTtcbiAgICB9O1xuXG4gICAgRm9sZGVyUmVzb3VyY2UucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHZhciBmb2xkZXIgPSB0aGlzLmdldChuYW1lKTtcbiAgICAgICAgaWYgKGZvbGRlciAhPT0gdW5kZWZpbmVkICYmIGZvbGRlci5pZCkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuaWRzW2ZvbGRlci5pZF07XG4gICAgICAgIH1cblxuICAgICAgICBSZXNvdXJjZS5wcm90b3R5cGUuZGVsZXRlLmNhbGwodGhpcywgbmFtZSk7XG5cbiAgICAgICAgcmV0dXJuIGZvbGRlcjtcbiAgICB9O1xuXG4gICAgRm9sZGVyUmVzb3VyY2UucHJvdG90eXBlLnRvZ2dsZU9wZW4gPSBmdW5jdGlvbiAoZm9sZGVyTmFtZSkge1xuICAgICAgICB2YXIgZm9sZGVyID0gdGhpcy5nZXQoZm9sZGVyTmFtZSk7XG4gICAgICAgIGZvbGRlci5vcGVuZWQgPSAhZm9sZGVyLm9wZW5lZDtcblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwKHtcbiAgICAgICAgICAgIHVybDogdGhpcy5CQVNFX1VSTCArICcvZm9sZGVycy8nICsgZm9sZGVyLmlkICsgJy9vcGVuJyxcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGZvbGRlcklkOiBmb2xkZXIuaWQsXG4gICAgICAgICAgICAgICAgb3BlbjogZm9sZGVyLm9wZW5lZFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG5cbiAgICBGb2xkZXJSZXNvdXJjZS5wcm90b3R5cGUucmVuYW1lID0gZnVuY3Rpb24gKGZvbGRlck5hbWUsIHRvRm9sZGVyTmFtZSkge1xuICAgICAgICB2YXIgZm9sZGVyID0gdGhpcy5nZXQoZm9sZGVyTmFtZSk7XG4gICAgICAgIHZhciBkZWZlcnJlZCA9IHRoaXMuJHEuZGVmZXIoKTtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuaHR0cCh7XG4gICAgICAgICAgICB1cmw6IHRoaXMuQkFTRV9VUkwgKyAnL2ZvbGRlcnMvJyArIGZvbGRlci5pZCArICcvcmVuYW1lJyxcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGZvbGRlck5hbWU6IHRvRm9sZGVyTmFtZVxuICAgICAgICAgICAgfVxuICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZvbGRlci5uYW1lID0gdG9Gb2xkZXJOYW1lO1xuICAgICAgICAgICAgZGVsZXRlIHNlbGYuaGFzaE1hcFtmb2xkZXJOYW1lXTtcbiAgICAgICAgICAgIHNlbGYuaGFzaE1hcFt0b0ZvbGRlck5hbWVdID0gZm9sZGVyO1xuXG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZGF0YS5tZXNzYWdlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfTtcblxuICAgIEZvbGRlclJlc291cmNlLnByb3RvdHlwZS5nZXRCeUlkID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlkc1tpZF07XG4gICAgfTtcblxuICAgIEZvbGRlclJlc291cmNlLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoZm9sZGVyTmFtZSkge1xuICAgICAgICBmb2xkZXJOYW1lID0gZm9sZGVyTmFtZS50cmltKCk7XG4gICAgICAgIHZhciBmb2xkZXIgPSB7XG4gICAgICAgICAgICBuYW1lOiBmb2xkZXJOYW1lXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5hZGQoZm9sZGVyKTtcblxuICAgICAgICB2YXIgZGVmZXJyZWQgPSB0aGlzLiRxLmRlZmVyKCk7XG5cbiAgICAgICAgdGhpcy5odHRwKHtcbiAgICAgICAgICAgIHVybDogdGhpcy5CQVNFX1VSTCArICcvZm9sZGVycycsXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBmb2xkZXJOYW1lOiBmb2xkZXJOYW1lXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZGF0YSk7XG4gICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBmb2xkZXIuZXJyb3IgPSBkYXRhLm1lc3NhZ2U7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH07XG5cblxuICAgIEZvbGRlclJlc291cmNlLnByb3RvdHlwZS5yZXZlcnNpYmx5RGVsZXRlID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgdmFyIGZvbGRlciA9IHRoaXMuZ2V0KG5hbWUpO1xuICAgICAgICB2YXIgaWQgPSBmb2xkZXIuaWQ7XG4gICAgICAgIGZvbGRlci5kZWxldGVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5kZWxldGUodGhpcy5CQVNFX1VSTCArICcvZm9sZGVycy8nICsgaWQpO1xuICAgIH07XG5cblxuICAgIEZvbGRlclJlc291cmNlLnByb3RvdHlwZS51bmRvRGVsZXRlID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgdmFyIGZvbGRlciA9IHRoaXMuZ2V0KG5hbWUpO1xuICAgICAgICB2YXIgaWQgPSBmb2xkZXIuaWQ7XG4gICAgICAgIGZvbGRlci5kZWxldGVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh0aGlzLkJBU0VfVVJMICsgJy9mb2xkZXJzLycgKyBpZCArICcvcmVzdG9yZScpO1xuICAgIH07XG5cblxuICAgIHJldHVybiBuZXcgRm9sZGVyUmVzb3VyY2UoJGh0dHAsIEJBU0VfVVJMLCAkcSk7XG59XSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmZhY3RvcnkoJ0l0ZW1SZXNvdXJjZScsIFtcIlJlc291cmNlXCIsIFwiJGh0dHBcIiwgXCJCQVNFX1VSTFwiLCBcIklURU1fQkFUQ0hfU0laRVwiLCBmdW5jdGlvbiAoUmVzb3VyY2UsICRodHRwLCBCQVNFX1VSTCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSVRFTV9CQVRDSF9TSVpFKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIEl0ZW1SZXNvdXJjZSA9IGZ1bmN0aW9uICgkaHR0cCwgQkFTRV9VUkwsIElURU1fQkFUQ0hfU0laRSkge1xuICAgICAgICBSZXNvdXJjZS5jYWxsKHRoaXMsICRodHRwLCBCQVNFX1VSTCk7XG4gICAgICAgIHRoaXMuYmF0Y2hTaXplID0gSVRFTV9CQVRDSF9TSVpFO1xuICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgfTtcblxuICAgIEl0ZW1SZXNvdXJjZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFJlc291cmNlLnByb3RvdHlwZSk7XG5cbiAgICBJdGVtUmVzb3VyY2UucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnN0YXJyZWRDb3VudCA9IDA7XG4gICAgICAgIHRoaXMubG93ZXN0SWQgPSAwO1xuICAgICAgICB0aGlzLmhpZ2hlc3RJZCA9IDA7XG4gICAgICAgIFJlc291cmNlLnByb3RvdHlwZS5jbGVhci5jYWxsKHRoaXMpO1xuICAgIH07XG5cbiAgICBJdGVtUmVzb3VyY2UucHJvdG90eXBlLnJlY2VpdmUgPSBmdW5jdGlvbiAodmFsdWUsIGNoYW5uZWwpIHtcbiAgICAgICAgc3dpdGNoIChjaGFubmVsKSB7XG5cbiAgICAgICAgY2FzZSAnbmV3ZXN0SXRlbUlkJzpcbiAgICAgICAgICAgIHRoaXMubmV3ZXN0SXRlbUlkID0gdmFsdWU7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdzdGFycmVkJzpcbiAgICAgICAgICAgIHRoaXMuc3RhcnJlZENvdW50ID0gdmFsdWU7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgdmFsdWUuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemUgbG93ZXN0IGFuZCBoaWdoZXN0IGlkXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYubG93ZXN0SWQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5sb3dlc3RJZCA9IGl0ZW0uaWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZWxmLmhpZ2hlc3RJZCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmhpZ2hlc3RJZCA9IGl0ZW0uaWQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uaWQgPiBzZWxmLmhpZ2hlc3RJZCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmhpZ2hlc3RJZCA9IGl0ZW0uaWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpdGVtLmlkIDwgc2VsZi5sb3dlc3RJZCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmxvd2VzdElkID0gaXRlbS5pZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgUmVzb3VyY2UucHJvdG90eXBlLnJlY2VpdmUuY2FsbCh0aGlzLCB2YWx1ZSwgY2hhbm5lbCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cbiAgICBJdGVtUmVzb3VyY2UucHJvdG90eXBlLmdldE5ld2VzdEl0ZW1JZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmV3ZXN0SXRlbUlkO1xuICAgIH07XG5cblxuICAgIEl0ZW1SZXNvdXJjZS5wcm90b3R5cGUuZ2V0U3RhcnJlZENvdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGFycmVkQ291bnQ7XG4gICAgfTtcblxuXG4gICAgSXRlbVJlc291cmNlLnByb3RvdHlwZS5zdGFyID0gZnVuY3Rpb24gKGl0ZW1JZCwgaXNTdGFycmVkKSB7XG4gICAgICAgIGlmIChpc1N0YXJyZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaXNTdGFycmVkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpdCA9IHRoaXMuZ2V0KGl0ZW1JZCk7XG4gICAgICAgIHZhciB1cmwgPSB0aGlzLkJBU0VfVVJMICtcbiAgICAgICAgICAgICcvaXRlbXMvJyArIGl0LmZlZWRJZCArICcvJyArIGl0Lmd1aWRIYXNoICsgJy9zdGFyJztcblxuICAgICAgICBpdC5zdGFycmVkID0gaXNTdGFycmVkO1xuXG4gICAgICAgIGlmIChpc1N0YXJyZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnJlZENvdW50ICs9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJyZWRDb3VudCAtPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cCh7XG4gICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGlzU3RhcnJlZDogaXNTdGFycmVkXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cblxuICAgIEl0ZW1SZXNvdXJjZS5wcm90b3R5cGUudG9nZ2xlU3RhciA9IGZ1bmN0aW9uIChpdGVtSWQpIHtcbiAgICAgICAgaWYgKHRoaXMuZ2V0KGl0ZW1JZCkuc3RhcnJlZCkge1xuICAgICAgICAgICAgdGhpcy5zdGFyKGl0ZW1JZCwgZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGFyKGl0ZW1JZCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cbiAgICBJdGVtUmVzb3VyY2UucHJvdG90eXBlLm1hcmtJdGVtUmVhZCA9IGZ1bmN0aW9uIChpdGVtSWQsIGlzUmVhZCkge1xuICAgICAgICBpZiAoaXNSZWFkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlzUmVhZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmdldChpdGVtSWQpLnVucmVhZCA9ICFpc1JlYWQ7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cCh7XG4gICAgICAgICAgICB1cmw6IHRoaXMuQkFTRV9VUkwgKyAnL2l0ZW1zLycgKyBpdGVtSWQgKyAnL3JlYWQnLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgaXNSZWFkOiBpc1JlYWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG4gICAgSXRlbVJlc291cmNlLnByb3RvdHlwZS5tYXJrSXRlbXNSZWFkID0gZnVuY3Rpb24gKGl0ZW1JZHMpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIGl0ZW1JZHMuZm9yRWFjaChmdW5jdGlvbihpdGVtSWQpIHtcbiAgICAgICAgICAgIHNlbGYuZ2V0KGl0ZW1JZCkudW5yZWFkID0gZmFsc2U7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAoe1xuICAgICAgICAgICAgdXJsOiB0aGlzLkJBU0VfVVJMICsgJy9pdGVtcy9yZWFkL211bHRpcGxlJyxcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGl0ZW1JZHM6IGl0ZW1JZHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG4gICAgSXRlbVJlc291cmNlLnByb3RvdHlwZS5tYXJrRmVlZFJlYWQgPSBmdW5jdGlvbiAoZmVlZElkLCByZWFkKSB7XG4gICAgICAgIGlmIChyZWFkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJlYWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGl0ZW1zID0gdGhpcy52YWx1ZXMuZmlsdGVyKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5mZWVkSWQgPT09IGZlZWRJZDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgaXRlbS51bnJlYWQgPSAhcmVhZDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KHRoaXMuQkFTRV9VUkwgKyAnL2ZlZWRzLycgKyBmZWVkSWQgKyAnL3JlYWQnLCB7XG4gICAgICAgICAgICBoaWdoZXN0SXRlbUlkOiB0aGlzLmdldE5ld2VzdEl0ZW1JZCgpXG4gICAgICAgIH0pO1xuICAgIH07XG5cblxuICAgIEl0ZW1SZXNvdXJjZS5wcm90b3R5cGUubWFya1JlYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudmFsdWVzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW0udW5yZWFkID0gZmFsc2U7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAoe1xuICAgICAgICAgICAgdXJsOiB0aGlzLkJBU0VfVVJMICsgJy9pdGVtcy9yZWFkJyxcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGhpZ2hlc3RJdGVtSWQ6IHRoaXMuZ2V0TmV3ZXN0SXRlbUlkKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG4gICAgSXRlbVJlc291cmNlLnByb3RvdHlwZS5hdXRvUGFnZSA9IGZ1bmN0aW9uICh0eXBlLCBpZCwgb2xkZXN0Rmlyc3QsXG4gICAgc2hvd0FsbCwgc2VhcmNoKSB7XG4gICAgICAgIHZhciBvZmZzZXQ7XG5cbiAgICAgICAgaWYgKG9sZGVzdEZpcnN0KSB7XG4gICAgICAgICAgICBvZmZzZXQgPSB0aGlzLmhpZ2hlc3RJZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9mZnNldCA9IHRoaXMubG93ZXN0SWQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwKHtcbiAgICAgICAgICAgIHVybDogdGhpcy5CQVNFX1VSTCArICcvaXRlbXMnLFxuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgICAgICAgIG9mZnNldDogb2Zmc2V0LFxuICAgICAgICAgICAgICAgIGxpbWl0OiB0aGlzLmJhdGNoU2l6ZSxcbiAgICAgICAgICAgICAgICBvbGRlc3RGaXJzdDogb2xkZXN0Rmlyc3QsXG4gICAgICAgICAgICAgICAgc2hvd0FsbDogc2hvd0FsbCxcbiAgICAgICAgICAgICAgICBzZWFyY2g6IHNlYXJjaFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG5cbiAgICBJdGVtUmVzb3VyY2UucHJvdG90eXBlLmltcG9ydEFydGljbGVzID0gZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cCh7XG4gICAgICAgICAgICB1cmw6IHRoaXMuQkFTRV9VUkwgKyAnL2ZlZWRzL2ltcG9ydC9hcnRpY2xlcycsXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBqc29uOiBqc29uXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cblxuICAgIHJldHVybiBuZXcgSXRlbVJlc291cmNlKCRodHRwLCBCQVNFX1VSTCwgSVRFTV9CQVRDSF9TSVpFKTtcbn1dKTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuc2VydmljZSgnTG9hZGluZycsIGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB0aGlzLmxvYWRpbmcgPSB7XG4gICAgICAgIGdsb2JhbDogZmFsc2UsXG4gICAgICAgIGNvbnRlbnQ6IGZhbHNlLFxuICAgICAgICBhdXRvcGFnaW5nOiBmYWxzZVxuICAgIH07XG5cbiAgICB0aGlzLnNldExvYWRpbmcgPSBmdW5jdGlvbiAoYXJlYSwgaXNMb2FkaW5nKSB7XG4gICAgICAgIHRoaXMubG9hZGluZ1thcmVhXSA9IGlzTG9hZGluZztcbiAgICB9O1xuXG4gICAgdGhpcy5pc0xvYWRpbmcgPSBmdW5jdGlvbiAoYXJlYSkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2FkaW5nW2FyZWFdO1xuICAgIH07XG5cbn0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5zZXJ2aWNlKCdPUE1MSW1wb3J0ZXInLCBbXCJGZWVkUmVzb3VyY2VcIiwgXCJGb2xkZXJSZXNvdXJjZVwiLCBcIlB1Ymxpc2hlclwiLCBcIiRxXCIsIGZ1bmN0aW9uIChGZWVkUmVzb3VyY2UsIEZvbGRlclJlc291cmNlLCBQdWJsaXNoZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRxKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBzdGFydEZlZWRKb2IgPSBmdW5jdGlvbiAocXVldWUpIHtcbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICBpZiAocXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIGZlZWQgPSBxdWV1ZS5wb3AoKTtcbiAgICAgICAgICAgIHZhciB1cmwgPSBmZWVkLnVybDtcbiAgICAgICAgICAgIHZhciB0aXRsZSA9IGZlZWQudGl0bGU7XG4gICAgICAgICAgICB2YXIgZm9sZGVySWQgPSAwO1xuICAgICAgICAgICAgdmFyIGZvbGRlck5hbWUgPSBmZWVkLmZvbGRlck5hbWU7XG5cbiAgICAgICAgICAgIGlmIChmb2xkZXJOYW1lICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICBGb2xkZXJSZXNvdXJjZS5nZXQoZm9sZGVyTmFtZSkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHZhciBmb2xkZXIgPSBGb2xkZXJSZXNvdXJjZS5nZXQoZm9sZGVyTmFtZSk7XG4gICAgICAgICAgICAgICAgZm9sZGVyLm9wZW5lZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgZm9sZGVySWQgPSBmb2xkZXIuaWQ7XG5cbiAgICAgICAgICAgICAgICAvLyBkaXNwbGF5IGZvbGRlciB3aGlsZSBhZGRpbmcgdGhlIGZlZWRcbiAgICAgICAgICAgICAgICBmb2xkZXIuZ2V0c0ZlZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGZvbGRlci5nZXRzRmVlZENvdW50ZXIgPSBmb2xkZXIuZ2V0c0ZlZWRDb3VudGVyIHx8IDA7XG4gICAgICAgICAgICAgICAgZm9sZGVyLmdldHNGZWVkQ291bnRlciArPSAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBtYWtlIHN1cmUgdG8gbm90IGFkZCBhbHJlYWR5IGV4aXN0aW5nIGZlZWRzXG4gICAgICAgICAgICBpZiAodXJsICE9PSB1bmRlZmluZWQgJiYgRmVlZFJlc291cmNlLmdldCh1cmwpID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBGZWVkUmVzb3VyY2UuY3JlYXRlKHVybCwgZm9sZGVySWQsIHRpdGxlKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIFB1Ymxpc2hlci5wdWJsaXNoQWxsKGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZm9sZGVySWQgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbGRlci5nZXRzRmVlZENvdW50ZXIgLT0gMTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvbGRlci5nZXRzRmVlZENvdW50ZXIgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2xkZXIuZ2V0c0ZlZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzdGFydEZlZWRKb2IocXVldWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfTtcblxuICAgIHRoaXMuaW1wb3J0Rm9sZGVycyA9IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgIC8vIGFzc3VtcHRpb246IGZvbGRlcnMgYXJlIGZhc3QgdG8gY3JlYXRlIGFuZCB3ZSBkb250IG5lZWQgYSBxdWV1ZSBmb3JcbiAgICAgICAgLy8gdGhlbVxuICAgICAgICB2YXIgZmVlZFF1ZXVlID0gW107XG4gICAgICAgIHZhciBmb2xkZXJQcm9taXNlcyA9IFtdO1xuICAgICAgICBjb250ZW50LmZvbGRlcnMuZm9yRWFjaChmdW5jdGlvbiAoZm9sZGVyKSB7XG4gICAgICAgICAgICBpZiAoZm9sZGVyLm5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIC8vIHNraXAgYWxyZWFkeSBjcmVhdGVkIGZvbGRlcnNcbiAgICAgICAgICAgICAgICBpZiAoRm9sZGVyUmVzb3VyY2UuZ2V0KGZvbGRlci5uYW1lKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gRm9sZGVyUmVzb3VyY2UuY3JlYXRlKGZvbGRlci5uYW1lKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgUHVibGlzaGVyLnB1Ymxpc2hBbGwoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBmb2xkZXJQcm9taXNlcy5wdXNoKHByb21pc2UpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvbGRlci5mZWVkcy5mb3JFYWNoKGZ1bmN0aW9uIChmZWVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZlZWQuZm9sZGVyTmFtZSA9IGZvbGRlci5uYW1lO1xuICAgICAgICAgICAgICAgICAgICBmZWVkUXVldWUucHVzaChmZWVkKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGZlZWRRdWV1ZSA9IGZlZWRRdWV1ZS5jb25jYXQoY29udGVudC5mZWVkcyk7XG5cbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICAkcS5hbGwoZm9sZGVyUHJvbWlzZXMpLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShmZWVkUXVldWUpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9O1xuXG4gICAgdGhpcy5pbXBvcnRGZWVkUXVldWUgPSBmdW5jdGlvbiAoZmVlZFF1ZXVlLCBqb2JTaXplKSB7XG4gICAgICAgIC8vIHF1ZXVlIGZlZWRzIHRvIHByZXZlbnQgc2VydmVyIHNsb3dkb3duXG4gICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgdmFyIGpvYlByb21pc2VzID0gW107XG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxqb2JTaXplOyBpKz0xKSB7XG4gICAgICAgICAgICBqb2JQcm9taXNlcy5wdXNoKHN0YXJ0RmVlZEpvYihmZWVkUXVldWUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgICRxLmFsbChqb2JQcm9taXNlcykudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH07XG5cbn1dKTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuc2VydmljZSgnT1BNTFBhcnNlcicsIGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgcGFyc2VPdXRsaW5lID0gZnVuY3Rpb24gKG91dGxpbmUpIHtcbiAgICAgICAgdmFyIHVybCA9IG91dGxpbmUuYXR0cigneG1sVXJsJykgfHwgb3V0bGluZS5hdHRyKCdodG1sVXJsJyk7XG4gICAgICAgIHZhciBuYW1lID0gb3V0bGluZS5hdHRyKCd0aXRsZScpIHx8IG91dGxpbmUuYXR0cigndGV4dCcpIHx8IHVybDtcblxuICAgICAgICAvLyBmb2xkZXJcbiAgICAgICAgaWYgKHVybCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdmb2xkZXInLFxuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgZmVlZHM6IFtdXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vIGZlZWRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2ZlZWQnLFxuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgdXJsOiB1cmxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gdGhlcmUgaXMgb25seSBvbmUgbGV2ZWwsIHNvIGZlZWRzIGluIGEgZm9sZGVyIGluIGEgZm9sZGVyIHNob3VsZCBiZVxuICAgIC8vIGF0dGFjaGVkIHRvIHRoZSByb290IGZvbGRlclxuICAgIHZhciByZWN1cnNpdmVseVBhcnNlID0gZnVuY3Rpb24gKGxldmVsLCByb290LCBmaXJzdExldmVsKSB7XG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxsZXZlbC5sZW5ndGg7IGkrPTEpIHtcbiAgICAgICAgICAgIHZhciBvdXRsaW5lID0gJChsZXZlbFtpXSk7XG5cbiAgICAgICAgICAgIHZhciBlbnRyeSA9IHBhcnNlT3V0bGluZShvdXRsaW5lKTtcblxuICAgICAgICAgICAgaWYgKGVudHJ5LnR5cGUgPT09ICdmZWVkJykge1xuICAgICAgICAgICAgICAgIHJvb3QuZmVlZHMucHVzaChlbnRyeSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgLy8gb25seSBmaXJzdCBsZXZlbCBzaG91bGQgYXBwZW5kIGZvbGRlcnNcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RMZXZlbCkge1xuICAgICAgICAgICAgICAgICAgICByZWN1cnNpdmVseVBhcnNlKG91dGxpbmUuY2hpbGRyZW4oJ291dGxpbmUnKSwgZW50cnksIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgcm9vdC5mb2xkZXJzLnB1c2goZW50cnkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZWx5UGFyc2Uob3V0bGluZS5jaGlsZHJlbignb3V0bGluZScpLCByb290LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJvb3Q7XG4gICAgfTtcblxuICAgIHRoaXMucGFyc2UgPSBmdW5jdGlvbiAoeG1sKSB7XG4gICAgICAgIHhtbCA9ICQucGFyc2VYTUwoeG1sKTtcbiAgICAgICAgdmFyIGZpcnN0TGV2ZWwgPSAkKHhtbCkuZmluZCgnYm9keSA+IG91dGxpbmUnKTtcblxuICAgICAgICB2YXIgcm9vdCA9IHtcbiAgICAgICAgICAgICdmZWVkcyc6IFtdLFxuICAgICAgICAgICAgJ2ZvbGRlcnMnOiBbXVxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiByZWN1cnNpdmVseVBhcnNlKGZpcnN0TGV2ZWwsIHJvb3QsIHRydWUpO1xuICAgIH07XG5cbn0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cblxuLypqc2hpbnQgdW5kZWY6ZmFsc2UqL1xuYXBwLnNlcnZpY2UoJ1B1Ymxpc2hlcicsIGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB0aGlzLmNoYW5uZWxzID0ge307XG5cbiAgICB0aGlzLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0b0NoYW5uZWxzOiBmdW5jdGlvbiAoY2hhbm5lbHMpIHtcbiAgICAgICAgICAgICAgICBjaGFubmVscy5mb3JFYWNoKGZ1bmN0aW9uIChjaGFubmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2hhbm5lbHNbY2hhbm5lbF0gPSBzZWxmLmNoYW5uZWxzW2NoYW5uZWxdIHx8IFtdO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNoYW5uZWxzW2NoYW5uZWxdLnB1c2gob2JqKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgIH07XG5cbiAgICB0aGlzLnB1Ymxpc2hBbGwgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgT2JqZWN0LmtleXMoZGF0YSkuZm9yRWFjaChmdW5jdGlvbiAoY2hhbm5lbCkge1xuICAgICAgICAgICAgdmFyIGxpc3RlbmVycyA9IHNlbGYuY2hhbm5lbHNbY2hhbm5lbF07XG4gICAgICAgICAgICBpZiAobGlzdGVuZXJzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAobGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXIucmVjZWl2ZShkYXRhW2NoYW5uZWxdLCBjaGFubmVsKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxufSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmZhY3RvcnkoJ1Jlc291cmNlJywgZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBSZXNvdXJjZSA9IGZ1bmN0aW9uIChodHRwLCBCQVNFX1VSTCwgaWQpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkIHx8ICdpZCc7XG4gICAgICAgIHRoaXMudmFsdWVzID0gW107XG4gICAgICAgIHRoaXMuaGFzaE1hcCA9IHt9O1xuICAgICAgICB0aGlzLmh0dHAgPSBodHRwO1xuICAgICAgICB0aGlzLkJBU0VfVVJMID0gQkFTRV9VUkw7XG4gICAgfTtcblxuXG4gICAgUmVzb3VyY2UucHJvdG90eXBlLnJlY2VpdmUgPSBmdW5jdGlvbiAob2Jqcykge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIG9ianMuZm9yRWFjaChmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICBzZWxmLmFkZChvYmopO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG5cbiAgICBSZXNvdXJjZS5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICB2YXIgZXhpc3RpbmcgPSB0aGlzLmhhc2hNYXBbb2JqW3RoaXMuaWRdXTtcblxuICAgICAgICBpZiAoZXhpc3RpbmcgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZXMucHVzaChvYmopO1xuICAgICAgICAgICAgdGhpcy5oYXNoTWFwW29ialt0aGlzLmlkXV0gPSBvYmo7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBjb3B5IHZhbHVlcyBmcm9tIG5ldyB0byBvbGQgb2JqZWN0IGlmIGl0IGV4aXN0cyBhbHJlYWR5XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhvYmopLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgIGV4aXN0aW5nW2tleV0gPSBvYmpba2V5XTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgUmVzb3VyY2UucHJvdG90eXBlLnNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlcy5sZW5ndGg7XG4gICAgfTtcblxuXG4gICAgUmVzb3VyY2UucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNoTWFwW2lkXTtcbiAgICB9O1xuXG5cbiAgICBSZXNvdXJjZS5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIC8vIGZpbmQgaW5kZXggb2Ygb2JqZWN0IHRoYXQgc2hvdWxkIGJlIGRlbGV0ZWRcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgZGVsZXRlQXRJbmRleCA9IHRoaXMudmFsdWVzLmZpbmRJbmRleChmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudFtzZWxmLmlkXSA9PT0gaWQ7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChkZWxldGVBdEluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWVzLnNwbGljZShkZWxldGVBdEluZGV4LCAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmhhc2hNYXBbaWRdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmhhc2hNYXBbaWRdO1xuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgUmVzb3VyY2UucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmhhc2hNYXAgPSB7fTtcblxuICAgICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEyMzIwNDBcbiAgICAgICAgLy8gdGhpcyBpcyB0aGUgZmFzdGVzIHdheSB0byBlbXB0eSBhbiBhcnJheSB3aGVuIHlvdSB3YW50IHRvIGtlZXBcbiAgICAgICAgLy8gdGhlIHJlZmVyZW5jZSBhcm91bmRcbiAgICAgICAgd2hpbGUgKHRoaXMudmFsdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWVzLnBvcCgpO1xuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgUmVzb3VyY2UucHJvdG90eXBlLmdldEFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVzO1xuICAgIH07XG5cblxuICAgIHJldHVybiBSZXNvdXJjZTtcbn0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cblxuIC8qanNoaW50IHVudXNlZDpmYWxzZSovXG5hcHAuc2VydmljZSgnU2V0dGluZ3NSZXNvdXJjZScsIFtcIiRodHRwXCIsIFwiQkFTRV9VUkxcIiwgZnVuY3Rpb24gKCRodHRwLCBCQVNFX1VSTCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHRoaXMuc2V0dGluZ3MgPSB7XG4gICAgICAgIGxhbmd1YWdlOiAnZW4nLFxuICAgICAgICBzaG93QWxsOiBudWxsLFxuICAgICAgICBjb21wYWN0OiBmYWxzZSxcbiAgICAgICAgb2xkZXN0Rmlyc3Q6IG51bGwsXG4gICAgICAgIHByZXZlbnRSZWFkT25TY3JvbGw6IGZhbHNlLFxuICAgICAgICBjb21wYWN0RXhwYW5kOiBmYWxzZSxcbiAgICAgICAgZXhwbG9yZVVybDogJydcbiAgICB9O1xuICAgIHRoaXMuZGVmYXVsdExhbmd1YWdlQ29kZSA9ICdlbic7XG4gICAgdGhpcy5zdXBwb3J0ZWRMYW5ndWFnZUNvZGVzID0gW1xuICAgICAgICAnYXItbWEnLCAnYXInLCAnYmcnLCAnY2EnLCAnY3MnLCAnY3YnLCAnZGEnLCAnZGUnLCAnZWwnLCAnZW4nLCAnZW4tY2EnLFxuICAgICAgICAnZW4tZ2InLCAnZW8nLCAnZXMnLCAnZXQnLCAnZXUnLCAnZmknLCAnZnItY2EnLCAnZnInLCAnZ2wnLCAnaGUnLCAnaGknLFxuICAgICAgICAnaHUnLCAnaWQnLCAnaXMnLCAnaXQnLCAnamEnLCAna2EnLCAna28nLCAnbHYnLCAnbXMtbXknLCAnbmInLCAnbmUnLFxuICAgICAgICAnbmwnLCAncGwnLCAncHQtYnInLCAncHQnLCAncm8nLCAncnUnLCAnc2snLCAnc2wnLCAnc3YnLCAndGgnLCAndHInLFxuICAgICAgICAndHptLWxhJywgJ3R6bScsICd1aycsICd6aC1jbicsICd6aC10dydcbiAgICBdO1xuXG4gICAgdGhpcy5nZXRTdXBwb3J0ZWRMYW5ndWFnZUNvZGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdXBwb3J0ZWRMYW5ndWFnZUNvZGVzO1xuICAgIH07XG5cbiAgICB0aGlzLnJlY2VpdmUgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIE9iamVjdC5rZXlzKGRhdGEpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gZGF0YVtrZXldO1xuXG4gICAgICAgICAgICBpZiAoa2V5ID09PSAnbGFuZ3VhZ2UnKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBzZWxmLnByb2Nlc3NMYW5ndWFnZUNvZGUodmFsdWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWxmLnNldHRpbmdzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5nc1trZXldO1xuICAgIH07XG5cbiAgICB0aGlzLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3Nba2V5XSA9IHZhbHVlO1xuXG4gICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICB1cmw6IEJBU0VfVVJMICsgJy9zZXR0aW5ncycsXG4gICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGxhbmd1YWdlOiB0aGlzLnNldHRpbmdzLmxhbmd1YWdlLFxuICAgICAgICAgICAgICAgIHNob3dBbGw6IHRoaXMuc2V0dGluZ3Muc2hvd0FsbCxcbiAgICAgICAgICAgICAgICBjb21wYWN0OiB0aGlzLnNldHRpbmdzLmNvbXBhY3QsXG4gICAgICAgICAgICAgICAgb2xkZXN0Rmlyc3Q6IHRoaXMuc2V0dGluZ3Mub2xkZXN0Rmlyc3QsXG4gICAgICAgICAgICAgICAgY29tcGFjdEV4cGFuZDogdGhpcy5zZXR0aW5ncy5jb21wYWN0RXhwYW5kLFxuICAgICAgICAgICAgICAgIHByZXZlbnRSZWFkT25TY3JvbGw6IHRoaXMuc2V0dGluZ3MucHJldmVudFJlYWRPblNjcm9sbFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdGhpcy5wcm9jZXNzTGFuZ3VhZ2VDb2RlID0gZnVuY3Rpb24gKGxhbmd1YWdlQ29kZSkge1xuICAgICAgICBsYW5ndWFnZUNvZGUgPSBsYW5ndWFnZUNvZGUucmVwbGFjZSgnXycsICctJykudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICBpZiAodGhpcy5zdXBwb3J0ZWRMYW5ndWFnZUNvZGVzLmluZGV4T2YobGFuZ3VhZ2VDb2RlKSA8IDApIHtcbiAgICAgICAgICAgIGxhbmd1YWdlQ29kZSA9IGxhbmd1YWdlQ29kZS5zcGxpdCgnLScpWzBdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc3VwcG9ydGVkTGFuZ3VhZ2VDb2Rlcy5pbmRleE9mKGxhbmd1YWdlQ29kZSkgPCAwKSB7XG4gICAgICAgICAgICBsYW5ndWFnZUNvZGUgPSB0aGlzLmRlZmF1bHRMYW5ndWFnZUNvZGU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbGFuZ3VhZ2VDb2RlO1xuICAgIH07XG5cbn1dKTtcbiIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cblxuLyoqXG4gKiBUaGlzIHByZWZpbGxzIHRoZSBhZGQgZmVlZCBzZWN0aW9uIGlmIGFuIGV4dGVybmFsIGxpbmsgaGFzID9zdWJzcmliZV90b1xuICogZmlsbGVkIG91dFxuICovXG4oZnVuY3Rpb24gKHdpbmRvdywgZG9jdW1lbnQsIG5hdmlnYXRvciwgdXJsLCAkLCB1bmRlZmluZWQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICAvLyByZWdpc3RlciByZWFkZXIgYXMgZmVlZCByZWFkZXIgaW4gZmlyZWZveFxuICAgIHZhciBsb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbjtcbiAgICB2YXIgc3RvcmFnZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2U7XG5cbiAgICAvLyBpZiBpc0NvbnRlbnRIYW5kbGVyUmVnaXN0ZXJlZCBpcyBub3QgaW1wbGVtZW50ZWQgKEZpcmVmb3ggSSdtIGxvb2tpbmdcbiAgICAvLyBhdCB5b3UpIHdlIHVzZSBsb2NhbHN0b3JhZ2UgdG8gcHJldmVudCByZWdpc3RlcmluZyB0aGUgZmVlZCByZWFkZXIgdHdpY2VcbiAgICB2YXIgcmVnaXN0ZXJIYW5kbGVyID0gZnVuY3Rpb24gKG1pbWUsIHVybCwgdGl0bGUpIHtcbiAgICAgICAgdmFyIHJlZ2lzdGVyZWQgPSBuYXZpZ2F0b3IuaXNDb250ZW50SGFuZGxlclJlZ2lzdGVyZWQ7XG5cbiAgICAgICAgdmFyIGlzUmVnaXN0ZXJlZCA9IGZ1bmN0aW9uIChtaW1lLCB1cmwpIHtcbiAgICAgICAgICAgIGlmIChyZWdpc3RlcmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2lzdGVyZWQobWltZSwgdXJsKSAhPT0gJ25ldyc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdG9yYWdlLmdldEl0ZW0oJ3JlZ2lzdGVyZWRIYW5kbGVyJykgPT09IHVybDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAobmF2aWdhdG9yLnJlZ2lzdGVyQ29udGVudEhhbmRsZXIgJiYgIWlzUmVnaXN0ZXJlZChtaW1lLCB1cmwpKSB7XG4gICAgICAgICAgICBuYXZpZ2F0b3IucmVnaXN0ZXJDb250ZW50SGFuZGxlcihtaW1lLCB1cmwsIHRpdGxlKTtcbiAgICAgICAgICAgIGlmICghcmVnaXN0ZXJlZCkge1xuICAgICAgICAgICAgICAgIHN0b3JhZ2Uuc2V0SXRlbSgncmVnaXN0ZXJlZEhhbmRsZXInLCB1cmwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBjbGVhblVybCA9IGxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIGxvY2F0aW9uLmhvc3QgKyBsb2NhdGlvbi5wYXRobmFtZTtcblxuICAgIHZhciBzdWJzY3JpYmVVcmwgPSBjbGVhblVybCArICc/c3Vic2NyaWJlX3RvPSVzJztcbiAgICB2YXIgbWltZVR5cGUgPSAnYXBwbGljYXRpb24vdm5kLm1vemlsbGEubWF5YmUuZmVlZCc7XG4gICAgdmFyIHRpdGxlID0gJ293bkNsb3VkIE5ld3MgQCAnICsgY2xlYW5Vcmw7XG5cbiAgICByZWdpc3RlckhhbmRsZXIobWltZVR5cGUsIHN1YnNjcmliZVVybCwgdGl0bGUpO1xuXG5cbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB1cmwoJz9zdWJzY3JpYmVfdG8nKTtcbiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbiAmJiBzdWJzY3JpcHRpb24gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAkKCcjbmV3LWZlZWQnKS5zaG93KCk7XG5cbiAgICAgICAgICAgIHZhciBpbnB1dCA9ICQoJ2lucHV0W25nLW1vZGVsPVwiTmF2aWdhdGlvbi5mZWVkLnVybFwiXScpO1xuICAgICAgICAgICAgaW5wdXQudmFsKHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICBpbnB1dC50cmlnZ2VyKCdpbnB1dCcpO1xuXG4gICAgICAgICAgICAvLyBoYWNreSB3YXkgdG8gZm9jdXMgYmVjYXVzZSBpbml0aWFsIGxvYWRpbmcgb2YgYSBmZWVkXG4gICAgICAgICAgICAvLyBzdGVhbHMgdGhlIGZvY3VzXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlucHV0LmZvY3VzKCk7XG4gICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG59KSh3aW5kb3csIGRvY3VtZW50LCBuYXZpZ2F0b3IsIHVybCwgJCk7XG4iLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5cbi8qKlxuICogVmFyaW91cyBmaXhlc1xuICovXG4oZnVuY3Rpb24gKHdpbmRvdywgZG9jdW1lbnQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICAvLyBJZiBGNSBpcyB1c2VkIHRvIHJlbG9hZCB0aGUgcGFnZSBpbiBGaXJlZm94LCB0aGUgY29udGVudCB3aWxsIHNvbWV0aW1lc1xuICAgIC8vIGJlIHNjcm9sbGVkIGJhY2sgdG8gdGhlIHBvc2l0aW9uIHdoZXJlIGl0IHdhcyBiZWZvcmUgdGhlIHJlbG9hZCB3aGljaFxuICAgIC8vIHdpbGwgY2F1c2UgbmV3IGFydGljbGVzIGJlaW5nIG1hcmtlZCBhcyByZWFkXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYXBwLWNvbnRlbnQnKTtcbiAgICAgICAgY29udGVudC5zY3JvbGxUbygwLCAwKTtcbiAgICB9KTtcblxufSkod2luZG93LCBkb2N1bWVudCk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuXG4vKipcbiAqIENvZGUgaW4gaGVyZSBhY3RzIG9ubHkgYXMgYSBjbGljayBzaG9ydGN1dCBtZWNoYW5pc20uIFRoYXQncyB3aHkgaXRzIG5vdFxuICogYmVpbmcgcHV0IGludG8gYSBkaXJlY3RpdmUgc2luY2UgaXQgaGFzIHRvIGJlIHRlc3RlZCB3aXRoIHByb3RyYWN0b3JcbiAqIGFueXdheXMgYW5kIHRoZXJlcyBubyBiZW5lZml0IGZyb20gd2lyaW5nIGl0IGludG8gdGhlIGFuZ3VsYXIgYXBwXG4gKi9cbihmdW5jdGlvbiAod2luZG93LCBkb2N1bWVudCwgJCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBub0lucHV0Rm9jdXNlZCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiAhKFxuICAgICAgICAgICAgZWxlbWVudC5pcygnaW5wdXQnKSB8fFxuICAgICAgICAgICAgZWxlbWVudC5pcygnc2VsZWN0JykgfHxcbiAgICAgICAgICAgIGVsZW1lbnQuaXMoJ3RleHRhcmVhJykgfHxcbiAgICAgICAgICAgIGVsZW1lbnQuaXMoJ2NoZWNrYm94JylcbiAgICAgICAgKTtcbiAgICB9O1xuXG4gICAgdmFyIG5vTW9kaWZpZXJLZXkgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuICEoXG4gICAgICAgICAgICBldmVudC5zaGlmdEtleSB8fFxuICAgICAgICAgICAgZXZlbnQuYWx0S2V5IHx8XG4gICAgICAgICAgICBldmVudC5jdHJsS2V5IHx8XG4gICAgICAgICAgICBldmVudC5tZXRhS2V5XG4gICAgICAgICk7XG4gICAgfTtcblxuICAgIHZhciBtYXJrQWxsUmVhZCA9IGZ1bmN0aW9uIChuYXZpZ2F0aW9uQXJlYSkge1xuICAgICAgICB2YXIgc2VsZWN0b3IgPSAnLmFjdGl2ZSA+IC5hcHAtbmF2aWdhdGlvbi1lbnRyeS1tZW51IC5tYXJrLXJlYWQgYnV0dG9uJztcbiAgICAgICAgdmFyIGJ1dHRvbiA9IG5hdmlnYXRpb25BcmVhLmZpbmQoc2VsZWN0b3IpO1xuICAgICAgICBpZiAoYnV0dG9uLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGJ1dHRvbi50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBpc0luU2Nyb2xsVmlldyA9IGZ1bmN0aW9uIChlbGVtLCBzY3JvbGxBcmVhKSB7XG4gICAgICAgIC8vIG9mZnNldCgpLnRvcCBhZGRzIHRoZSBuYXZpZ2F0aW9uIGJhciB0b28gc28gd2UgaGF2ZSB0byBzdWJyYWN0IGl0XG4gICAgICAgIHZhciBlbGVtVG9wID0gZWxlbS5vZmZzZXQoKS50b3AgLSBzY3JvbGxBcmVhLm9mZnNldCgpLnRvcDtcbiAgICAgICAgdmFyIGVsZW1Cb3R0b20gPSBlbGVtVG9wICsgZWxlbS5oZWlnaHQoKTtcblxuICAgICAgICB2YXIgYXJlYUJvdHRvbSA9IHNjcm9sbEFyZWEuaGVpZ2h0KCk7XG5cbiAgICAgICAgcmV0dXJuIGVsZW1Ub3AgPj0gMCAmJiBlbGVtQm90dG9tIDwgYXJlYUJvdHRvbTtcbiAgICB9O1xuXG4gICAgdmFyIHNjcm9sbFRvTmF2aWdhdGlvbkVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbSwgc2Nyb2xsQXJlYSwgdG9Ub3ApIHtcbiAgICAgICAgaWYgKGVsZW0ubGVuZ3RoID09PSAwIHx8ICghdG9Ub3AgJiYgaXNJblNjcm9sbFZpZXcoZWxlbSwgc2Nyb2xsQXJlYSkpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2Nyb2xsQXJlYS5zY3JvbGxUb3AoXG4gICAgICAgICAgICBlbGVtLm9mZnNldCgpLnRvcCAtIHNjcm9sbEFyZWEub2Zmc2V0KCkudG9wICsgc2Nyb2xsQXJlYS5zY3JvbGxUb3AoKVxuICAgICAgICApO1xuICAgIH07XG5cbiAgICB2YXIgc2Nyb2xsVG9BY3RpdmVOYXZpZ2F0aW9uRW50cnkgPSBmdW5jdGlvbiAobmF2aWdhdGlvbkFyZWEpIHtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBuYXZpZ2F0aW9uQXJlYS5maW5kKCcuYWN0aXZlJyk7XG4gICAgICAgIHNjcm9sbFRvTmF2aWdhdGlvbkVsZW1lbnQoZWxlbWVudCwgbmF2aWdhdGlvbkFyZWEuY2hpbGRyZW4oJ3VsJyksIHRydWUpO1xuICAgIH07XG5cbiAgICB2YXIgcmVsb2FkRmVlZCA9IGZ1bmN0aW9uIChuYXZpZ2F0aW9uQXJlYSkge1xuICAgICAgICBuYXZpZ2F0aW9uQXJlYS5maW5kKCcuYWN0aXZlID4gYTp2aXNpYmxlJykudHJpZ2dlcignY2xpY2snKTtcbiAgICB9O1xuXG4gICAgdmFyIHRyeVJlbG9hZCA9IGZ1bmN0aW9uIChuYXZpZ2F0aW9uQXJlYSwgc2Nyb2xsQXJlYSkge1xuICAgICAgICBpZiAoc2Nyb2xsQXJlYS5zY3JvbGxUb3AoKSA9PT0gMCkge1xuICAgICAgICAgICAgdmFyIHB1bGxUb1JlZnJlc2ggPSBzY3JvbGxBcmVhLmZpbmQoJy5wdWxsLXRvLXJlZnJlc2gnKTtcbiAgICAgICAgICAgIGlmICghcHVsbFRvUmVmcmVzaC5oYXNDbGFzcygnc2hvdy1wdWxsLXRvLXJlZnJlc2gnKSkge1xuICAgICAgICAgICAgICAgIHB1bGxUb1JlZnJlc2guYWRkQ2xhc3MoJ3Nob3ctcHVsbC10by1yZWZyZXNoJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHB1bGxUb1JlZnJlc2guaGFzQ2xhc3MoJ2RvbmUnKSkge1xuICAgICAgICAgICAgICAgIHJlbG9hZEZlZWQobmF2aWdhdGlvbkFyZWEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBhY3RpdmF0ZU5hdmlnYXRpb25FbnRyeSA9IGZ1bmN0aW9uIChlbGVtZW50LCBuYXZpZ2F0aW9uQXJlYSkge1xuICAgICAgICBlbGVtZW50LmNoaWxkcmVuKCdhOnZpc2libGUnKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICBzY3JvbGxUb05hdmlnYXRpb25FbGVtZW50KGVsZW1lbnQsIG5hdmlnYXRpb25BcmVhLmNoaWxkcmVuKCd1bCcpKTtcbiAgICB9O1xuXG4gICAgdmFyIG5leHRGZWVkID0gZnVuY3Rpb24gKG5hdmlnYXRpb25BcmVhKSB7XG4gICAgICAgIHZhciBjdXJyZW50ID0gbmF2aWdhdGlvbkFyZWEuZmluZCgnLmFjdGl2ZScpO1xuICAgICAgICB2YXIgZWxlbWVudHMgPSBuYXZpZ2F0aW9uQXJlYS5maW5kKCcuZXhwbG9yZS1mZWVkLCcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcuc3Vic2NyaXB0aW9ucy1mZWVkOnZpc2libGUsJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJy5zdGFycmVkLWZlZWQ6dmlzaWJsZSwnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLmZlZWQ6dmlzaWJsZScpO1xuXG4gICAgICAgIGlmIChjdXJyZW50Lmhhc0NsYXNzKCdmb2xkZXInKSkge1xuICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBzdWJmZWVkcyA9IGN1cnJlbnQuZmluZCgnLmZlZWQ6dmlzaWJsZScpO1xuICAgICAgICAgICAgICAgIGlmIChzdWJmZWVkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlTmF2aWdhdGlvbkVudHJ5KCQoc3ViZmVlZHNbMF0pLCBuYXZpZ2F0aW9uQXJlYSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQubmV4dCgnLmZvbGRlcicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBubyBzdWJmZWVkIGZvdW5kXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGSVhNRTogTyhuKSBydW50aW1lLiBJZiBzb21lb25lIGNyZWF0ZXMgYSBuaWNlIGFuZCBub3QgZnVnbHkgc29sdXRpb25cbiAgICAgICAgLy8gcGxlYXNlIGNyZWF0ZSBhIFBSXG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxlbGVtZW50cy5sZW5ndGgtMTsgaSs9MSkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBlbGVtZW50c1tpXTtcblxuICAgICAgICAgICAgaWYgKGVsZW1lbnQgPT09IGN1cnJlbnRbMF0pIHtcbiAgICAgICAgICAgICAgICB2YXIgbmV4dCA9IGVsZW1lbnRzW2krMV07XG4gICAgICAgICAgICAgICAgYWN0aXZhdGVOYXZpZ2F0aW9uRW50cnkoJChuZXh0KSwgbmF2aWdhdGlvbkFyZWEpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXRQYXJlbnRGb2xkZXIgPSBmdW5jdGlvbiAoY3VycmVudCkge1xuICAgICAgICByZXR1cm4gY3VycmVudC5wYXJlbnQoKS5wYXJlbnQoJy5mb2xkZXInKTtcbiAgICB9O1xuXG4gICAgdmFyIHNlbGVjdEZpcnN0T3JMYXN0Rm9sZGVyID0gZnVuY3Rpb24gKG5hdmlnYXRpb25BcmVhLCBpc0xhc3QpIHtcbiAgICAgICAgdmFyIGZvbGRlcnMgPSBuYXZpZ2F0aW9uQXJlYS5maW5kKCcuZm9sZGVyOnZpc2libGUnKTtcblxuICAgICAgICB2YXIgaW5kZXg7XG4gICAgICAgIGlmIChpc0xhc3QpIHtcbiAgICAgICAgICAgIGluZGV4ID0gZm9sZGVycy5sZW5ndGggLSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW5kZXggPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZvbGRlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgYWN0aXZhdGVOYXZpZ2F0aW9uRW50cnkoJChmb2xkZXJzW2luZGV4XSksIG5hdmlnYXRpb25BcmVhKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgcHJldmlvdXNGb2xkZXIgPSBmdW5jdGlvbiAobmF2aWdhdGlvbkFyZWEpIHtcbiAgICAgICAgdmFyIGN1cnJlbnQgPSBuYXZpZ2F0aW9uQXJlYS5maW5kKCcuYWN0aXZlJyk7XG5cbiAgICAgICAgLy8gY2FzZXM6IGZvbGRlciBhY3RpdmUsIHN1YmZlZWQgYWN0aXZlLCBmZWVkIGFjdGl2ZSwgbm9uZSBhY3RpdmVcbiAgICAgICAgaWYgKGN1cnJlbnQuaGFzQ2xhc3MoJ2ZvbGRlcicpKSB7XG4gICAgICAgICAgICBhY3RpdmF0ZU5hdmlnYXRpb25FbnRyeShjdXJyZW50LnByZXZBbGwoJy5mb2xkZXI6dmlzaWJsZScpLmZpcnN0KCksXG4gICAgICAgICAgICAgICAgbmF2aWdhdGlvbkFyZWEpO1xuICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnQuaGFzQ2xhc3MoJ2ZlZWQnKSkge1xuICAgICAgICAgICAgdmFyIHBhcmVudEZvbGRlciA9IGdldFBhcmVudEZvbGRlcihjdXJyZW50KTtcbiAgICAgICAgICAgIGlmIChwYXJlbnRGb2xkZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIC8vIGZpcnN0IGdvIHRvIHByZXZpb3VzIGZvbGRlciBzaG91bGQgc2VsZWN0IHRoZSBwYXJlbnQgZm9sZGVyXG4gICAgICAgICAgICAgICAgYWN0aXZhdGVOYXZpZ2F0aW9uRW50cnkocGFyZW50Rm9sZGVyLCBuYXZpZ2F0aW9uQXJlYSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGVjdEZpcnN0T3JMYXN0Rm9sZGVyKG5hdmlnYXRpb25BcmVhLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGVjdEZpcnN0T3JMYXN0Rm9sZGVyKG5hdmlnYXRpb25BcmVhLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgbmV4dEZvbGRlciA9IGZ1bmN0aW9uIChuYXZpZ2F0aW9uQXJlYSkge1xuICAgICAgICB2YXIgY3VycmVudCA9IG5hdmlnYXRpb25BcmVhLmZpbmQoJy5hY3RpdmUnKTtcblxuICAgICAgICAvLyBjYXNlczogZm9sZGVyIGFjdGl2ZSwgc3ViZmVlZCBhY3RpdmUsIGZlZWQgYWN0aXZlLCBub25lIGFjdGl2ZVxuICAgICAgICBpZiAoY3VycmVudC5oYXNDbGFzcygnZm9sZGVyJykpIHtcbiAgICAgICAgICAgIGFjdGl2YXRlTmF2aWdhdGlvbkVudHJ5KGN1cnJlbnQubmV4dEFsbCgnLmZvbGRlcjp2aXNpYmxlJykuZmlyc3QoKSxcbiAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uQXJlYSk7XG4gICAgICAgIH0gZWxzZSBpZiAoY3VycmVudC5oYXNDbGFzcygnZmVlZCcpKSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50Rm9sZGVyID0gZ2V0UGFyZW50Rm9sZGVyKGN1cnJlbnQpO1xuICAgICAgICAgICAgaWYgKHBhcmVudEZvbGRlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgYWN0aXZhdGVOYXZpZ2F0aW9uRW50cnkoXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudEZvbGRlci5uZXh0QWxsKCcuZm9sZGVyOnZpc2libGUnKS5maXJzdCgpLFxuICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uQXJlYVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGVjdEZpcnN0T3JMYXN0Rm9sZGVyKG5hdmlnYXRpb25BcmVhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGVjdEZpcnN0T3JMYXN0Rm9sZGVyKG5hdmlnYXRpb25BcmVhKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgcHJldmlvdXNGZWVkID0gZnVuY3Rpb24gKG5hdmlnYXRpb25BcmVhKSB7XG4gICAgICAgIHZhciBjdXJyZW50ID0gbmF2aWdhdGlvbkFyZWEuZmluZCgnLmFjdGl2ZScpO1xuICAgICAgICB2YXIgZWxlbWVudHMgPSBuYXZpZ2F0aW9uQXJlYS5maW5kKCcuZXhwbG9yZS1mZWVkLCcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcuc3Vic2NyaXB0aW9ucy1mZWVkOnZpc2libGUsJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJy5zdGFycmVkLWZlZWQ6dmlzaWJsZSwnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLmZlZWQ6dmlzaWJsZScpO1xuXG4gICAgICAgIC8vIHNwZWNpYWwgY2FzZTogZm9sZGVyIHNlbGVjdGVkXG4gICAgICAgIGlmIChjdXJyZW50Lmhhc0NsYXNzKCdmb2xkZXInKSkge1xuICAgICAgICAgICAgdmFyIHByZXZpb3VzRm9sZGVyID0gY3VycmVudC5wcmV2KCcuZm9sZGVyJyk7XG5cbiAgICAgICAgICAgIHdoaWxlIChwcmV2aW91c0ZvbGRlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN1YmZlZWRzID0gcHJldmlvdXNGb2xkZXIuZmluZCgnLmZlZWQ6dmlzaWJsZScpO1xuICAgICAgICAgICAgICAgIGlmIChzdWJmZWVkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlTmF2aWdhdGlvbkVudHJ5KCQoc3ViZmVlZHNbc3ViZmVlZHMubGVuZ3RoLTFdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRpb25BcmVhKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcmV2aW91c0ZvbGRlciA9IHByZXZpb3VzRm9sZGVyLnByZXYoJy5mb2xkZXInKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gbm8gc3ViZmVlZCBmb3VuZCB0cnkgdmlzaWJsZSBmZWVkc1xuICAgICAgICAgICAgdmFyIGZlZWRzID0gY3VycmVudC5zaWJsaW5ncygnLmZlZWQnKTtcblxuICAgICAgICAgICAgaWYgKGZlZWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBhY3RpdmF0ZU5hdmlnYXRpb25FbnRyeSgkKGZlZWRzW2ZlZWRzLmxlbmd0aC0xXSksXG4gICAgICAgICAgICAgICAgICAgIG5hdmlnYXRpb25BcmVhKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgLy8gbm8gZmVlZCBmb3VuZCwgZ28gdG8gc3RhcnJlZFxuICAgICAgICAgICAgdmFyIHN0YXJyZWQgPSAkKCcuc3RhcnJlZC1mZWVkOnZpc2libGUnKTtcbiAgICAgICAgICAgIGlmIChzdGFycmVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBhY3RpdmF0ZU5hdmlnYXRpb25FbnRyeShzdGFycmVkLCBuYXZpZ2F0aW9uQXJlYSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZJWE1FOiBPKG4pIHJ1bnRpbWUuIElmIHNvbWVvbmUgY3JlYXRlcyBhIG5pY2UgYW5kIG5vdCBmdWdseSBzb2x1dGlvblxuICAgICAgICAvLyBwbGVhc2UgY3JlYXRlIGEgUFJcbiAgICAgICAgZm9yICh2YXIgaT1lbGVtZW50cy5sZW5ndGgtMTsgaT4wOyBpLT0xKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGVsZW1lbnRzW2ldO1xuXG4gICAgICAgICAgICBpZiAoZWxlbWVudCA9PT0gY3VycmVudFswXSkge1xuICAgICAgICAgICAgICAgIHZhciBwcmV2aW91cyA9IGVsZW1lbnRzW2ktMV07XG4gICAgICAgICAgICAgICAgYWN0aXZhdGVOYXZpZ2F0aW9uRW50cnkoJChwcmV2aW91cyksIG5hdmlnYXRpb25BcmVhKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgb25BY3RpdmVJdGVtID0gZnVuY3Rpb24gKHNjcm9sbEFyZWEsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBpdGVtcyA9IHNjcm9sbEFyZWEuZmluZCgnLml0ZW0nKTtcblxuICAgICAgICBpdGVtcy5lYWNoKGZ1bmN0aW9uIChpbmRleCwgaXRlbSkge1xuICAgICAgICAgICAgaXRlbSA9ICQoaXRlbSk7XG5cbiAgICAgICAgICAgIC8vIDEzMHB4IG9mIHRoZSBpdGVtIHNob3VsZCBiZSB2aXNpYmxlXG4gICAgICAgICAgICBpZiAoKGl0ZW0uaGVpZ2h0KCkgKyBpdGVtLnBvc2l0aW9uKCkudG9wKSA+IDMwKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soaXRlbSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfTtcblxuICAgIHZhciB0b2dnbGVVbnJlYWQgPSBmdW5jdGlvbiAoc2Nyb2xsQXJlYSkge1xuICAgICAgICBvbkFjdGl2ZUl0ZW0oc2Nyb2xsQXJlYSwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW0uZmluZCgnLnRvZ2dsZS1rZWVwLXVucmVhZCcpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgdG9nZ2xlU3RhciA9IGZ1bmN0aW9uIChzY3JvbGxBcmVhKSB7XG4gICAgICAgIG9uQWN0aXZlSXRlbShzY3JvbGxBcmVhLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgaXRlbS5maW5kKCcuc3RhcicpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgZXhwYW5kSXRlbSA9IGZ1bmN0aW9uIChzY3JvbGxBcmVhKSB7XG4gICAgICAgIG9uQWN0aXZlSXRlbShzY3JvbGxBcmVhLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgaXRlbS5maW5kKCcudXRpbHMnKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIG9wZW5MaW5rID0gZnVuY3Rpb24gKHNjcm9sbEFyZWEpIHtcbiAgICAgICAgb25BY3RpdmVJdGVtKHNjcm9sbEFyZWEsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBpdGVtLnRyaWdnZXIoJ2NsaWNrJyk7ICAvLyBtYXJrIHJlYWRcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKGl0ZW0uZmluZCgnLmV4dGVybmFsOnZpc2libGUnKS5hdHRyKCdocmVmJyksICdfYmxhbmsnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBzY3JvbGxUb0l0ZW0gPSBmdW5jdGlvbiAoc2Nyb2xsQXJlYSwgaXRlbSwgZXhwYW5kSXRlbUluQ29tcGFjdCkge1xuICAgICAgICAvLyBpZiB5b3UgZ28gdG8gdGhlIG5leHQgYXJ0aWNsZSBpbiBjb21wYWN0IHZpZXcsIGl0IHNob3VsZFxuICAgICAgICAvLyBleHBhbmQgdGhlIGN1cnJlbnQgb25lXG4gICAgICAgIHNjcm9sbEFyZWEuc2Nyb2xsVG9wKFxuICAgICAgICAgICAgaXRlbS5vZmZzZXQoKS50b3AgLSBzY3JvbGxBcmVhLm9mZnNldCgpLnRvcCArIHNjcm9sbEFyZWEuc2Nyb2xsVG9wKClcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoZXhwYW5kSXRlbUluQ29tcGFjdCkge1xuICAgICAgICAgICAgb25BY3RpdmVJdGVtKHNjcm9sbEFyZWEsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpdGVtLmhhc0NsYXNzKCdvcGVuJykpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5maW5kKCcudXRpbHMnKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBzY3JvbGxUb05leHRJdGVtID0gZnVuY3Rpb24gKHNjcm9sbEFyZWEsIGV4cGFuZEl0ZW1JbkNvbXBhY3QpIHtcbiAgICAgICAgdmFyIGl0ZW1zID0gc2Nyb2xsQXJlYS5maW5kKCcuaXRlbScpO1xuICAgICAgICB2YXIganVtcGVkID0gZmFsc2U7XG5cbiAgICAgICAgaXRlbXMuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW0gPSAkKGl0ZW0pO1xuXG4gICAgICAgICAgICAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgaXRlbXMgdGhhdCBoYXZlIGV4cGFuZCBlbmFibGVkOlxuICAgICAgICAgICAgLy8gaWYgeW91IGNsaWNrIG5leHQgYW5kIHRoZSBmaXJzdCBpdGVtIGhhcyBub3QgYmVlbiBleHBhbmVkIGFuZFxuICAgICAgICAgICAgLy8gaXMgb24gdGhlIHRvcCwgaXQgc2hvdWxkIGJlIGV4cGFuZGVkIGluc3RlYWQgb2YgdGhlIG5leHQgb25lXG4gICAgICAgICAgICBpZiAoKGl0ZW0ucG9zaXRpb24oKS50b3AgPT09IDAgJiYgZXhwYW5kSXRlbUluQ29tcGFjdCAmJlxuICAgICAgICAgICAgICAgICAhaXRlbS5oYXNDbGFzcygnb3BlbicpKSB8fFxuICAgICAgICAgICAgICAgIGl0ZW0ucG9zaXRpb24oKS50b3AgPiAxMCkge1xuICAgICAgICAgICAgICAgIHNjcm9sbFRvSXRlbShzY3JvbGxBcmVhLCBpdGVtLCBleHBhbmRJdGVtSW5Db21wYWN0KTtcblxuICAgICAgICAgICAgICAgIGp1bXBlZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGluIGNhc2UgdGhpcyBpcyB0aGUgbGFzdCBpdGVtIGl0IHNob3VsZCBzdGlsbCBzY3JvbGwgYmVsb3cgdGhlIHRvcFxuICAgICAgICBpZiAoIWp1bXBlZCkge1xuICAgICAgICAgICAgc2Nyb2xsQXJlYS5zY3JvbGxUb3Aoc2Nyb2xsQXJlYS5wcm9wKCdzY3JvbGxIZWlnaHQnKSk7XG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICB2YXIgc2Nyb2xsVG9QcmV2aW91c0l0ZW0gPSBmdW5jdGlvbiAobmF2aWdhdGlvbkFyZWEsIHNjcm9sbEFyZWEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGFuZEl0ZW1JbkNvbXBhY3QpIHtcbiAgICAgICAgdmFyIGl0ZW1zID0gc2Nyb2xsQXJlYS5maW5kKCcuaXRlbScpO1xuICAgICAgICB2YXIganVtcGVkID0gZmFsc2U7XG5cbiAgICAgICAgaXRlbXMuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW0gPSAkKGl0ZW0pO1xuXG4gICAgICAgICAgICBpZiAoKGl0ZW0ucG9zaXRpb24oKS50b3AgKyAxMCkgPj0gMCkge1xuICAgICAgICAgICAgICAgIHZhciBwcmV2aW91cyA9IGl0ZW0ucHJldigpO1xuXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgYXJlIG5vIGl0ZW1zIGJlZm9yZSB0aGUgY3VycmVudCBvbmVcbiAgICAgICAgICAgICAgICBpZiAocHJldmlvdXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb0l0ZW0oc2Nyb2xsQXJlYSwgcHJldmlvdXMsIGV4cGFuZEl0ZW1JbkNvbXBhY3QpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeVJlbG9hZChuYXZpZ2F0aW9uQXJlYSwgc2Nyb2xsQXJlYSk7XG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbEFyZWEuc2Nyb2xsVG9wKDApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGp1bXBlZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGlmIHRoZXJlIHdhcyBubyBqdW1wIGp1bXAgdG8gdGhlIGxhc3QgZWxlbWVudFxuICAgICAgICBpZiAoIWp1bXBlZCAmJiBpdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBzY3JvbGxUb0l0ZW0oc2Nyb2xsQXJlYSwgaXRlbXMubGFzdCgpKTtcbiAgICAgICAgfVxuICAgIH07XG5cblxuICAgICQoZG9jdW1lbnQpLmtleXVwKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIga2V5Q29kZSA9IGV2ZW50LmtleUNvZGU7XG4gICAgICAgIHZhciBzY3JvbGxBcmVhID0gJCgnI2FwcC1jb250ZW50Jyk7XG4gICAgICAgIHZhciBuYXZpZ2F0aW9uQXJlYSA9ICQoJyNhcHAtbmF2aWdhdGlvbicpO1xuICAgICAgICB2YXIgaXNDb21wYWN0VmlldyA9ICQoJyNhcnRpY2xlcy5jb21wYWN0JykubGVuZ3RoID4gMDtcbiAgICAgICAgdmFyIGlzRXhwYW5kSXRlbSA9ICQoJyNhcnRpY2xlcycpXG4gICAgICAgICAgICAuYXR0cignbmV3cy1jb21wYWN0LWV4cGFuZCcpID09PSAndHJ1ZSc7XG4gICAgICAgIHZhciBleHBhbmRJdGVtSW5Db21wYWN0ID0gaXNDb21wYWN0VmlldyAmJiBpc0V4cGFuZEl0ZW07XG5cbiAgICAgICAgaWYgKG5vSW5wdXRGb2N1c2VkKCQoJzpmb2N1cycpKSAmJiBub01vZGlmaWVyS2V5KGV2ZW50KSkge1xuICAgICAgICAgICAgLy8gaiwgbiwgcmlnaHQgYXJyb3dcbiAgICAgICAgICAgIGlmIChbNzQsIDc4LCAzOV0uaW5kZXhPZihrZXlDb2RlKSA+PSAwKSB7XG5cbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHNjcm9sbFRvTmV4dEl0ZW0oc2Nyb2xsQXJlYSwgZXhwYW5kSXRlbUluQ29tcGFjdCk7XG5cbiAgICAgICAgICAgIC8vIGssIHAsIGxlZnQgYXJyb3dcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoWzc1LCA4MCwgMzddLmluZGV4T2Yoa2V5Q29kZSkgPj0gMCkge1xuXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBzY3JvbGxUb1ByZXZpb3VzSXRlbShuYXZpZ2F0aW9uQXJlYSwgc2Nyb2xsQXJlYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBhbmRJdGVtSW5Db21wYWN0KTtcblxuICAgICAgICAgICAgLy8gdVxuICAgICAgICAgICAgfSBlbHNlIGlmIChbODVdLmluZGV4T2Yoa2V5Q29kZSkgPj0gMCkge1xuXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0b2dnbGVVbnJlYWQoc2Nyb2xsQXJlYSk7XG5cbiAgICAgICAgICAgIC8vIGVcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoWzY5XS5pbmRleE9mKGtleUNvZGUpID49IDApIHtcblxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgZXhwYW5kSXRlbShzY3JvbGxBcmVhKTtcblxuICAgICAgICAgICAgLy8gcywgaSwgbFxuICAgICAgICAgICAgfSBlbHNlIGlmIChbNzMsIDgzLCA3Nl0uaW5kZXhPZihrZXlDb2RlKSA+PSAwKSB7XG5cbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRvZ2dsZVN0YXIoc2Nyb2xsQXJlYSk7XG5cbiAgICAgICAgICAgIC8vIGhcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoWzcyXS5pbmRleE9mKGtleUNvZGUpID49IDApIHtcblxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdG9nZ2xlU3RhcihzY3JvbGxBcmVhKTtcbiAgICAgICAgICAgICAgICBzY3JvbGxUb05leHRJdGVtKHNjcm9sbEFyZWEpO1xuXG4gICAgICAgICAgICAvLyBvXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFs3OV0uaW5kZXhPZihrZXlDb2RlKSA+PSAwKSB7XG5cbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIG9wZW5MaW5rKHNjcm9sbEFyZWEpO1xuXG4gICAgICAgICAgICAvLyByXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFs4Ml0uaW5kZXhPZihrZXlDb2RlKSA+PSAwKSB7XG5cbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHJlbG9hZEZlZWQobmF2aWdhdGlvbkFyZWEpO1xuXG4gICAgICAgICAgICAvLyBmXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFs3MF0uaW5kZXhPZihrZXlDb2RlKSA+PSAwKSB7XG5cbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIG5leHRGZWVkKG5hdmlnYXRpb25BcmVhKTtcblxuICAgICAgICAgICAgLy8gZFxuICAgICAgICAgICAgfSBlbHNlIGlmIChbNjhdLmluZGV4T2Yoa2V5Q29kZSkgPj0gMCkge1xuXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBwcmV2aW91c0ZlZWQobmF2aWdhdGlvbkFyZWEpO1xuXG4gICAgICAgICAgICAvLyBjXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFs2N10uaW5kZXhPZihrZXlDb2RlKSA+PSAwKSB7XG5cbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHByZXZpb3VzRm9sZGVyKG5hdmlnYXRpb25BcmVhKTtcblxuICAgICAgICAgICAgLy8gYVxuICAgICAgICAgICAgfSBlbHNlIGlmIChbNjVdLmluZGV4T2Yoa2V5Q29kZSkgPj0gMCkge1xuXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBzY3JvbGxUb0FjdGl2ZU5hdmlnYXRpb25FbnRyeShuYXZpZ2F0aW9uQXJlYSk7XG5cbiAgICAgICAgICAgIC8vIHZcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoWzg2XS5pbmRleE9mKGtleUNvZGUpID49IDApIHtcblxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgbmV4dEZvbGRlcihuYXZpZ2F0aW9uQXJlYSk7XG5cbiAgICAgICAgICAgIC8vIHFcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoWzgxXS5pbmRleE9mKGtleUNvZGUpID49IDApIHtcblxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgJCgnI3NlYXJjaGJveCcpLmZvY3VzKCk7XG5cbiAgICAgICAgICAgIC8vIHBhZ2UgdXBcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoWzMzXS5pbmRleE9mKGtleUNvZGUpID49IDApIHtcblxuICAgICAgICAgICAgICAgIHRyeVJlbG9hZChuYXZpZ2F0aW9uQXJlYSwgc2Nyb2xsQXJlYSk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAvLyBldmVyeXRoaW5nIHdpdGggc2hpZnRcbiAgICAgICAgfSBlbHNlIGlmIChub0lucHV0Rm9jdXNlZCgkKCc6Zm9jdXMnKSkgJiYgZXZlbnQuc2hpZnRLZXkpIHtcblxuICAgICAgICAgICAgLy8gc2hpZnQgKyBhXG4gICAgICAgICAgICBpZiAoWzY1XS5pbmRleE9mKGtleUNvZGUpID49IDApIHtcblxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgbWFya0FsbFJlYWQobmF2aWdhdGlvbkFyZWEpO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxufSh3aW5kb3csIGRvY3VtZW50LCAkKSk7XG4iLCJ3aW5kb3cuTmV3cyA9IHdpbmRvdy5OZXdzIHx8IHt9O1xuXG5cbihmdW5jdGlvbiAod2luZG93LCBkb2N1bWVudCwgJCwgZXhwb3J0cywgdW5kZWZpbmVkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGFydGljbGVBY3Rpb25QbHVnaW5zID0gW107XG5cbiAgICBleHBvcnRzLmFkZEFydGljbGVBY3Rpb24gPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgIGFydGljbGVBY3Rpb25QbHVnaW5zLnB1c2goYWN0aW9uKTtcbiAgICB9O1xuXG4gICAgZXhwb3J0cy5nZXRBcnRpY2xlQWN0aW9uUGx1Z2lucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGFydGljbGVBY3Rpb25QbHVnaW5zO1xuICAgIH07XG5cbn0pKHdpbmRvdywgZG9jdW1lbnQsIGpRdWVyeSwgd2luZG93Lk5ld3MpO1xuXG4iLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAucnVuKFtcIiRkb2N1bWVudFwiLCBcIiRyb290U2NvcGVcIiwgZnVuY3Rpb24gKCRkb2N1bWVudCwgJHJvb3RTY29wZSkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICAkZG9jdW1lbnQuY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnZG9jdW1lbnRDbGlja2VkJywgZXZlbnQpO1xuICAgIH0pO1xufV0pO1xuXG5hcHAuZGlyZWN0aXZlKCdhcHBOYXZpZ2F0aW9uRW50cnlVdGlscycsIGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdDJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbG0pIHtcbiAgICAgICAgICAgIHZhciBtZW51ID0gZWxtLnNpYmxpbmdzKCcuYXBwLW5hdmlnYXRpb24tZW50cnktbWVudScpO1xuICAgICAgICAgICAgdmFyIGJ1dHRvbiA9ICQoZWxtKVxuICAgICAgICAgICAgICAgIC5maW5kKCcuYXBwLW5hdmlnYXRpb24tZW50cnktdXRpbHMtbWVudS1idXR0b24gYnV0dG9uJyk7XG5cbiAgICAgICAgICAgIGJ1dHRvbi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgbWVudS50b2dnbGVDbGFzcygnb3BlbicpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHNjb3BlLiRvbignZG9jdW1lbnRDbGlja2VkJywgZnVuY3Rpb24gKHNjb3BlLCBldmVudCkge1xuICAgICAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQgIT09IGJ1dHRvblswXSkge1xuICAgICAgICAgICAgICAgICAgICBtZW51LnJlbW92ZUNsYXNzKCdvcGVuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmRpcmVjdGl2ZSgnbmV3c0FkZEZlZWQnLCBbXCIkcm9vdFNjb3BlXCIsIFwiJHRpbWVvdXRcIiwgZnVuY3Rpb24gKCRyb290U2NvcGUsICR0aW1lb3V0KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRvbignYWRkRmVlZCcsIGZ1bmN0aW9uIChfLCB1cmwpIHtcblxuICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW0uaXMoJzphbmltYXRlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnN0b3AodHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghZWxlbS5pcygnOnZpc2libGUnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5zbGlkZURvd24oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbGVtLmZpbmQoJ1tuZy1tb2RlbD1cIk5hdmlnYXRpb24uZmVlZC51cmxcIl0nKS5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgc2NvcGUuTmF2aWdhdGlvbi5mZWVkLnVybCA9IHVybDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn1dKTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuZGlyZWN0aXZlKCduZXdzQXJ0aWNsZUFjdGlvbnMnLCBmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBuZXdzQXJ0aWNsZUFjdGlvbnM6ICc9JyxcbiAgICAgICAgICAgIG5vUGx1Z2luczogJz0nXG4gICAgICAgIH0sXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbSkge1xuICAgICAgICAgICAgdmFyIHBsdWdpbnMgPSBOZXdzLmdldEFydGljbGVBY3Rpb25QbHVnaW5zKCk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxwbHVnaW5zLmxlbmd0aDsgaSs9MSkge1xuICAgICAgICAgICAgICAgIHBsdWdpbnNbaV0oZWxlbSwgc2NvcGUubmV3c0FydGljbGVBY3Rpb25zKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2NvcGUubm9QbHVnaW5zID0gcGx1Z2lucy5sZW5ndGggPT09IDA7XG4gICAgICAgIH1cbiAgICB9O1xufSk7XG4iLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuZGlyZWN0aXZlKCduZXdzQXV0b0ZvY3VzJywgW1wiJHRpbWVvdXRcIiwgZnVuY3Rpb24gKCR0aW1lb3V0KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHJldHVybiBmdW5jdGlvbiAoc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG4gICAgICAgIHZhciB0b0ZvY3VzID0gZWxlbTtcblxuICAgICAgICBpZiAoYXR0cnMubmV3c0F1dG9Gb2N1cykge1xuICAgICAgICAgICAgdG9Gb2N1cyA9ICQoYXR0cnMubmV3c0F1dG9Gb2N1cyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0byBjb21iYXQgJGRpZ2VzdCBhbHJlYWR5IGluIHByb2Nlc3MgZXJyb3Igd2hlbiByb3V0ZSBjaGFuZ2VzXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRvRm9jdXMuZm9jdXMoKTtcbiAgICAgICAgfSwgMCk7XG4gICAgfTtcbn1dKTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuZGlyZWN0aXZlKCduZXdzQmluZEh0bWxVbnNhZmUnLCBmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzY29wZSwgZWxlbSwgYXR0cikge1xuICAgICAgICBzY29wZS4kd2F0Y2goYXR0ci5uZXdzQmluZEh0bWxVbnNhZmUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVsZW0uaHRtbChzY29wZS4kZXZhbChhdHRyLm5ld3NCaW5kSHRtbFVuc2FmZSkpO1xuICAgICAgICB9KTtcbiAgICB9O1xufSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmRpcmVjdGl2ZSgnbmV3c0RyYWdnYWJsZScsIGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCBlbGVtLCBhdHRyKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gc2NvcGUuJGV2YWwoYXR0ci5uZXdzRHJhZ2dhYmxlKTtcblxuICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQob3B0aW9ucykpIHtcbiAgICAgICAgICAgIGVsZW0uZHJhZ2dhYmxlKG9wdGlvbnMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWxlbS5kcmFnZ2FibGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF0dHIuJG9ic2VydmUoJ25ld3NEcmFnZ2FibGVEaXNhYmxlJywgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09ICd0cnVlJykge1xuICAgICAgICAgICAgICAgIGVsZW0uZHJhZ2dhYmxlKCdkaXNhYmxlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZW0uZHJhZ2dhYmxlKCdlbmFibGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbn0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5kaXJlY3RpdmUoJ25ld3NEcm9wcGFibGUnLCBbXCIkcm9vdFNjb3BlXCIsIGZ1bmN0aW9uICgkcm9vdFNjb3BlKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzY29wZSwgZWxlbSwgYXR0cikge1xuICAgICAgICB2YXIgZGV0YWlscyA9IHtcbiAgICAgICAgICAgIGFjY2VwdDogJy5mZWVkJyxcbiAgICAgICAgICAgIGhvdmVyQ2xhc3M6ICdkcmFnLWFuZC1kcm9wJyxcbiAgICAgICAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgICAgICAgIGRyb3A6IGZ1bmN0aW9uIChldmVudCwgdWkpIHtcblxuICAgICAgICAgICAgICAgICQoJy5kcmFnLWFuZC1kcm9wJykucmVtb3ZlQ2xhc3MoJ2RyYWctYW5kLWRyb3AnKTtcblxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBmb2xkZXJJZDogcGFyc2VJbnQoZWxlbS5kYXRhKCdpZCcpLCAxMCksXG4gICAgICAgICAgICAgICAgICAgIGZlZWRJZDogcGFyc2VJbnQoJCh1aS5kcmFnZ2FibGUpLmRhdGEoJ2lkJyksIDEwKVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ21vdmVGZWVkVG9Gb2xkZXInLCBkYXRhKTtcbiAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoYXR0ci5kcm9wcGFibGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGVsZW0uZHJvcHBhYmxlKGRldGFpbHMpO1xuICAgIH07XG59XSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuXG5hcHAuZGlyZWN0aXZlKCduZXdzRmluaXNoZWRUcmFuc2l0aW9uJywgZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHJldHVybiBmdW5jdGlvbiAoc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG4gICAgICAgIGVsZW0ub24oJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlbGVtLmFkZENsYXNzKGF0dHJzLm5ld3NGaW5pc2hlZFRyYW5zaXRpb24pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG59KTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuZGlyZWN0aXZlKCduZXdzRm9jdXMnLCBbXCIkdGltZW91dFwiLCBcIiRpbnRlcnBvbGF0ZVwiLCBmdW5jdGlvbiAoJHRpbWVvdXQsICRpbnRlcnBvbGF0ZSkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHJldHVybiBmdW5jdGlvbiAoc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG4gICAgICAgIGVsZW0uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRvUmVhZGQgPSAkKCRpbnRlcnBvbGF0ZShhdHRycy5uZXdzRm9jdXMpKHNjb3BlKSk7XG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdG9SZWFkZC5mb2N1cygpO1xuICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxufV0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cblxuYXBwLmRpcmVjdGl2ZSgnbmV3c0luc3RhbnROb3RpZmljYXRpb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtKSB7XG4gICAgICAgICAgICBlbGVtLmhpZGUoKTtcblxuICAgICAgICAgICAgdmFyIG5vdGlmaWNhdGlvbiA9IGVsZW0uaHRtbCgpO1xuICAgICAgICAgICAgT0MuTm90aWZpY2F0aW9uLnNob3dIdG1sKG5vdGlmaWNhdGlvbik7XG4gICAgICAgIH1cbiAgICB9O1xuXG59KTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5cbi8qKlxuICogUGF1c2UgcGxheWJhY2sgb24gZWxlbWVudHMgb3RoZXIgdGhhbiB0aGUgY3VycmVudCBvbmVcbiAqL1xuYXBwLmRpcmVjdGl2ZSgnbmV3c1BsYXlPbmUnLCBbXCIkcm9vdFNjb3BlXCIsIGZ1bmN0aW9uICgkcm9vdFNjb3BlKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbSkge1xuICAgICAgICAgICAgZWxlbS5vbigncGxheScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3BsYXlpbmcnLCBlbGVtKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRvbigncGxheWluZycsIGZ1bmN0aW9uIChzY29wZSwgYXJncykge1xuICAgICAgICAgICAgICAgIGlmIChhcmdzWzBdICE9PSBlbGVtWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1bMF0ucGF1c2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59XSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmRpcmVjdGl2ZSgnbmV3c1B1bGxUb1JlZnJlc2gnLCBbXCIkcm9vdFNjb3BlXCIsIGZ1bmN0aW9uICgkcm9vdFNjb3BlKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIHNjcm9sbGVkID0gZmFsc2U7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgbmV3c1B1bGxUb1JlZnJlc2g6ICc9J1xuICAgICAgICB9LFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQpIHtcblxuICAgICAgICAgICAgLy8gY2hhbmdlIGluIHRoZSByb3V0ZSBtZWFucyB0aGUgY29udGVudCBpcyByZWZyZXNoZWRcbiAgICAgICAgICAgIC8vIHNvIHJlc2V0IHRoZSB2YXJcbiAgICAgICAgICAgICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHNjb3BlLm5ld3NQdWxsVG9SZWZyZXNoID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZWxlbWVudC5vbignc2Nyb2xsJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnNjcm9sbFRvcCgpID09PSAwICYmIHNjcm9sbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLm5ld3NQdWxsVG9SZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2Nyb2xsZWQgPSB0cnVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufV0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5kaXJlY3RpdmUoJ25ld3NSZWFkRmlsZScsIGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCBlbGVtLCBhdHRyKSB7XG5cbiAgICAgICAgZWxlbS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICB2YXIgZmlsZSA9IGVsZW1bMF0uZmlsZXNbMF07XG4gICAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcblxuICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIC8vIEZJWE1FOiBpcyB0aGVyZSBhIG1vcmUgZmxleGlibGUgc29sdXRpb24gd2hlcmUgd2UgZG9udCBoYXZlXG4gICAgICAgICAgICAgICAgLy8gdG8gYmluZCB0aGUgZmlsZSB0byBzY29wZT9cbiAgICAgICAgICAgICAgICBzY29wZS4kZmlsZUNvbnRlbnQgPSBldmVudC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShhdHRyLm5ld3NSZWFkRmlsZSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5kaXJlY3RpdmUoJ25ld3NSZWZyZXNoTWFzb25yeScsIFtcIiR0aW1lb3V0XCIsIGZ1bmN0aW9uICgkdGltZW91dCkge1xuXHQndXNlIHN0cmljdCc7XG5cdHZhciByZWZyZXNoID0gZnVuY3Rpb24gKGVsZW0pIHtcblx0XHQkdGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHQkdGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGVsZW0ucGFyZW50KCkubWFzb25yeSh7XG5cdFx0XHRcdFx0aXRlbVNlbGVjdG9yOiAnLmdyaWQtaXRlbScsXG5cdFx0XHRcdFx0Z3V0dGVyOiAyNSxcblx0XHRcdFx0XHRjb2x1bW5XaWR0aDogMzAwXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH07XG5cblx0cmV0dXJuIGZ1bmN0aW9uIChzY29wZSwgZWxlbSkge1xuXHRcdGlmIChzY29wZS4kbGFzdCkge1xuXHRcdFx0cmVmcmVzaChlbGVtKTtcblx0XHR9XG5cdH07XG59XSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmRpcmVjdGl2ZSgnbmV3c1Njcm9sbCcsIFtcIiR0aW1lb3V0XCIsIFwiSVRFTV9BVVRPX1BBR0VfU0laRVwiLCBcIk1BUktfUkVBRF9USU1FT1VUXCIsIFwiU0NST0xMX1RJTUVPVVRcIiwgZnVuY3Rpb24gKCR0aW1lb3V0LCBJVEVNX0FVVE9fUEFHRV9TSVpFLFxuICAgIE1BUktfUkVBRF9USU1FT1VULCBTQ1JPTExfVElNRU9VVCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgdGltZXI7XG5cbiAgICAvLyBhdXRvcGFnaW5nXG4gICAgdmFyIGF1dG9QYWdlID0gZnVuY3Rpb24gKGxpbWl0LCBlbGVtLCBzY29wZSkge1xuICAgICAgICB2YXIgY291bnRlciA9IDA7XG4gICAgICAgIHZhciBhcnRpY2xlcyA9IGVsZW0uZmluZCgnLml0ZW0nKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gYXJ0aWNsZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpIC09IDEpIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gJChhcnRpY2xlc1tpXSk7XG5cblxuICAgICAgICAgICAgLy8gaWYgdGhlIGNvdW50ZXIgaXMgaGlnaGVyIHRoYW4gdGhlIHNpemUgaXQgbWVhbnNcbiAgICAgICAgICAgIC8vIHRoYXQgaXQgZGlkbnQgYnJlYWsgdG8gYXV0byBwYWdlIHlldCBhbmQgdGhhdFxuICAgICAgICAgICAgLy8gdGhlcmUgYXJlIG1vcmUgaXRlbXMsIHNvIGJyZWFrXG4gICAgICAgICAgICBpZiAoY291bnRlciA+PSBsaW1pdCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyB0aGlzIGlzIG9ubHkgcmVhY2hlZCB3aGVuIHRoZSBpdGVtIGlzIG5vdCBpc1xuICAgICAgICAgICAgLy8gYmVsb3cgdGhlIHRvcCBhbmQgd2UgZGlkbnQgaGl0IHRoZSBmYWN0b3IgeWV0IHNvXG4gICAgICAgICAgICAvLyBhdXRvcGFnZSBhbmQgYnJlYWtcbiAgICAgICAgICAgIGlmIChpdGVtLnBvc2l0aW9uKCkudG9wIDwgMCkge1xuICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShzY29wZS5uZXdzU2Nyb2xsQXV0b1BhZ2UpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb3VudGVyICs9IDE7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gbWFyayByZWFkXG4gICAgdmFyIG1hcmtSZWFkID0gZnVuY3Rpb24gKGVuYWJsZWQsIGVsZW0sIHNjb3BlKSB7XG4gICAgICAgIGlmIChlbmFibGVkKSB7XG4gICAgICAgICAgICB2YXIgaWRzID0gW107XG4gICAgICAgICAgICB2YXIgYXJ0aWNsZXMgPSBlbGVtLmZpbmQoJy5pdGVtOm5vdCgucmVhZCknKTtcblxuICAgICAgICAgICAgYXJ0aWNsZXMuZWFjaChmdW5jdGlvbihpbmRleCwgYXJ0aWNsZSkge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gJChhcnRpY2xlKTtcblxuICAgICAgICAgICAgICAgIGlmIChpdGVtLnBvc2l0aW9uKCkudG9wIDw9IC0xMCkge1xuICAgICAgICAgICAgICAgICAgICBpZHMucHVzaChwYXJzZUludChpdGVtLmRhdGEoJ2lkJyksIDEwKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBzY29wZS5pdGVtSWRzID0gaWRzO1xuICAgICAgICAgICAgc2NvcGUuJGFwcGx5KHNjb3BlLm5ld3NTY3JvbGxNYXJrUmVhZCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICduZXdzU2Nyb2xsJzogJ0AnLFxuICAgICAgICAgICAgJ25ld3NTY3JvbGxBdXRvUGFnZSc6ICcmJyxcbiAgICAgICAgICAgICduZXdzU2Nyb2xsTWFya1JlYWQnOiAnJicsXG4gICAgICAgICAgICAnbmV3c1Njcm9sbEVuYWJsZWRNYXJrUmVhZCc6ICc9JyxcbiAgICAgICAgfSxcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtKSB7XG4gICAgICAgICAgICB2YXIgYWxsb3dTY3JvbGwgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIHNjcm9sbEFyZWEgPSBlbGVtO1xuXG4gICAgICAgICAgICBpZiAoc2NvcGUubmV3c1Njcm9sbCkge1xuICAgICAgICAgICAgICAgIHNjcm9sbEFyZWEgPSAkKHNjb3BlLm5ld3NTY3JvbGwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgc2Nyb2xsSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvLyBhbGxvdyBvbmx5IG9uZSBzY3JvbGwgZXZlbnQgdG8gdHJpZ2dlciBldmVyeSAzMDBtc1xuICAgICAgICAgICAgICAgIGlmIChhbGxvd1Njcm9sbCkge1xuICAgICAgICAgICAgICAgICAgICBhbGxvd1Njcm9sbCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93U2Nyb2xsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSwgU0NST0xMX1RJTUVPVVQqMTAwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgYXV0b1BhZ2UoSVRFTV9BVVRPX1BBR0VfU0laRSwgZWxlbSwgc2NvcGUpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvbnQgc3RhY2sgbWFyayByZWFkIHJlcXVlc3RzXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aW1lcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQuY2FuY2VsKHRpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIGFsbG93IHVzZXIgdG8gdW5kbyBhY2NpZGVudGFsIHNjcm9sbFxuICAgICAgICAgICAgICAgICAgICB0aW1lciA9ICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtSZWFkKHNjb3BlLm5ld3NTY3JvbGxFbmFibGVkTWFya1JlYWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGltZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIH0sIE1BUktfUkVBRF9USU1FT1VUKjEwMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHNjcm9sbEFyZWEub24oJ3Njcm9sbCcsIHNjcm9sbEhhbmRsZXIpO1xuXG4gICAgICAgICAgICAvLyByZW1vdmUgc2Nyb2xsIGhhbmRsZXIgaWYgZWxlbWVudCBpcyBkZXN0cm95ZWRcbiAgICAgICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsQXJlYS5vZmYoJ3Njcm9sbCcsIHNjcm9sbEhhbmRsZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufV0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5kaXJlY3RpdmUoJ25ld3NTZWFyY2gnLCBbXCIkZG9jdW1lbnRcIiwgXCIkbG9jYXRpb25cIiwgZnVuY3Rpb24gKCRkb2N1bWVudCwgJGxvY2F0aW9uKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICdvblNlYXJjaCc6ICc9J1xuICAgICAgICB9LFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUpIHtcbiAgICAgICAgICAgIHZhciBib3ggPSAkKCcjc2VhcmNoYm94Jyk7XG4gICAgICAgICAgICBib3gudmFsKCRsb2NhdGlvbi5zZWFyY2goKS5zZWFyY2gpO1xuXG4gICAgICAgICAgICB2YXIgZG9TZWFyY2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gYm94LnZhbCgpO1xuICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLm9uU2VhcmNoKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGJveC5vbignc2VhcmNoIGtleXVwJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdzZWFyY2gnIHx8IGV2ZW50LmtleUNvZGUgPT09IDEzKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvU2VhcmNoKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGNhcnJ5IG92ZXIgc2VhcmNoIG9uIHJvdXRlIGNoYW5nZVxuICAgICAgICAgICAgc2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJGxvY2F0aW9uLnNlYXJjaCgpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHNlYXJjaCkge1xuICAgICAgICAgICAgICAgIGlmIChzZWFyY2ggJiYgc2VhcmNoLnNlYXJjaCkge1xuICAgICAgICAgICAgICAgICAgICBib3gudmFsKHNlYXJjaC5zZWFyY2gpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJveC52YWwoJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn1dKTtcbiIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5kaXJlY3RpdmUoJ25ld3NTdGlja3lNZW51JywgZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHJldHVybiBmdW5jdGlvbiAoc2NvcGUsIGVsZW0sIGF0dHIpIHtcbiAgICAgICAgdmFyIGhlaWdodCA9IDQwO1xuXG4gICAgICAgICQoYXR0ci5uZXdzU3RpY2t5TWVudSkuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzY3JvbGxIZWlnaHQgPSAkKHRoaXMpLnNjcm9sbFRvcCgpO1xuXG4gICAgICAgICAgICBpZiAoc2Nyb2xsSGVpZ2h0ID4gaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgZWxlbS5hZGRDbGFzcygnZml4ZWQnKTtcbiAgICAgICAgICAgICAgICBlbGVtLmNzcygndG9wJywgc2Nyb2xsSGVpZ2h0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxlbS5yZW1vdmVDbGFzcygnZml4ZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbn0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5kaXJlY3RpdmUoJ25ld3NTdG9wUHJvcGFnYXRpb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCkge1xuICAgICAgICAgICAgZWxlbWVudC5iaW5kKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmRpcmVjdGl2ZSgnbmV3c1RpbWVvdXQnLCBbXCIkdGltZW91dFwiLCBcIiRyb290U2NvcGVcIiwgZnVuY3Rpb24gKCR0aW1lb3V0LCAkcm9vdFNjb3BlKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICduZXdzVGltZW91dCc6ICcmJ1xuICAgICAgICB9LFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBkZXN0cm95ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBzZWNvbmRzID0gNztcbiAgICAgICAgICAgIHZhciB0aW1lciA9ICR0aW1lb3V0KHNjb3BlLm5ld3NUaW1lb3V0LCBzZWNvbmRzICogMTAwMCk7XG5cbiAgICAgICAgICAgIC8vIHJlbW92ZSB0aW1lb3V0IGlmIGVsZW1lbnQgaXMgYmVpbmcgcmVtb3ZlZCBieVxuICAgICAgICAgICAgLy8gZm9yIGluc3RhbmNlIGNsaWNraW5nIG9uIHRoZSB4IGJ1dHRvblxuICAgICAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBkZXN0cm95ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICR0aW1lb3V0LmNhbmNlbCh0aW1lcik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gYWxzbyBkZWxldGUgdGhlIGVudHJ5IGlmIHVuZG8gaXMgaWdub3JlZCBhbmQgdGhlIHVybFxuICAgICAgICAgICAgLy8gaXMgY2hhbmdlZFxuICAgICAgICAgICAgJHJvb3RTY29wZS4kb24oJyRsb2NhdGlvbkNoYW5nZVN0YXJ0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vICRsb2NhdGlvbkNoYW5nZVN0YXJ0IHRyaWdnZXJzIHR3aWNlIGJlY2F1c2Ugb2YgdGhlIHRyYWlsaW5nXG4gICAgICAgICAgICAgICAgLy8gc2xhc2ggb24gdGhlIGxpbmsgd2hpY2ggaXMga2luZGEgYSBoYWNrIHRvIHJlbG9hZCB0aGUgcm91dGVcbiAgICAgICAgICAgICAgICAvLyBpZiB5b3UgY2xpY2sgb24gdGhlIGxpbmsgd2hlbiB0aGUgcm91dGUgaXMgdGhlIHNhbWVcbiAgICAgICAgICAgICAgICAkdGltZW91dC5jYW5jZWwodGltZXIpO1xuICAgICAgICAgICAgICAgIGlmICghZGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlc3Ryb3llZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLm5ld3NUaW1lb3V0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufV0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5kaXJlY3RpdmUoJ25ld3NUaXRsZVVucmVhZENvdW50JywgW1wiJHdpbmRvd1wiLCBmdW5jdGlvbiAoJHdpbmRvdykge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBiYXNlVGl0bGUgPSAkd2luZG93LmRvY3VtZW50LnRpdGxlO1xuICAgIHZhciB0aXRsZXMgPSBiYXNlVGl0bGUuc3BsaXQoJy0nKTtcbiAgICB2YXIgYXBwTmFtZSA9IHRpdGxlc1swXSB8fCAnTmV3cyc7XG4gICAgdmFyIG93bkNsb3VkTmFtZSA9IHRpdGxlc1sxXSB8fCAnb3duQ2xvdWQnO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIHVucmVhZENvdW50OiAnQCdcbiAgICAgICAgfSxcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtLCBhdHRycykge1xuICAgICAgICAgICAgYXR0cnMuJG9ic2VydmUoJ3VucmVhZENvdW50JywgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSAnMCcpIHtcbiAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5kb2N1bWVudC50aXRsZSA9IGFwcE5hbWUgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJygnICsgdmFsdWUgKyAnKSAtICcgKyBvd25DbG91ZE5hbWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5kb2N1bWVudC50aXRsZSA9IGFwcE5hbWUgKyAnIC0gJyArIG93bkNsb3VkTmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbn1dKTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuZGlyZWN0aXZlKCduZXdzVG9nZ2xlU2hvdycsIGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICduZXdzVG9nZ2xlU2hvdyc6ICdAJ1xuICAgICAgICB9LFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW0pIHtcbiAgICAgICAgICAgIGVsZW0uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkKHNjb3BlLm5ld3NUb2dnbGVTaG93KTtcbiAgICAgICAgICAgICAgICB0YXJnZXQudG9nZ2xlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59KTtcbiIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5kaXJlY3RpdmUoJ25ld3NUcmlnZ2VyQ2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzY29wZSwgZWxtLCBhdHRyKSB7XG4gICAgICAgIGVsbS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKGF0dHIubmV3c1RyaWdnZXJDbGljaykudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxufSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
