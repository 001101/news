var app=angular.module("News",["ngRoute","ngSanitize","ngAnimate"]);app.config(["$routeProvider","$provide","$httpProvider",function(e,n,r){"use strict";var i={FEED:0,FOLDER:1,STARRED:2,SUBSCRIPTIONS:3,SHARED:4,EXPLORE:5};n.constant("REFRESH_RATE",60),n.constant("ITEM_BATCH_SIZE",40),n.constant("ITEM_AUTO_PAGE_SIZE",20),n.constant("BASE_URL",OC.generateUrl("/apps/news")),n.constant("FEED_TYPE",i),n.constant("MARK_READ_TIMEOUT",.5),n.constant("SCROLL_TIMEOUT",.1),n.factory("CSRFInterceptor",["$q","BASE_URL","$window",function(e,t,n){return{request:function(r){var i=n.location.href.split(n.location.pathname)[0];return(0===r.url.indexOf(t)||0===r.url.indexOf(i))&&(r.headers.requesttoken=oc_requesttoken),r||e.when(r)}}}]);var o={0:t("news","Request failed, network connection unavailable!"),401:t("news","Request unauthorized. Are you logged in?"),403:t("news","Request forbidden. Are you an admin?"),412:t("news","Token expired or app not enabled! Reload the page!"),500:t("news","Internal server error! Please check your data/owncloud.log file for additional information!"),503:t("news","Request failed, ownCloud is in currently in maintenance mode!")};n.factory("ConnectionErrorInterceptor",["$q","$timeout",function(e,t){var n;return{responseError:function(r){return r.status in o&&(n&&t.cancel(n),OC.Notification.hide(),OC.Notification.showHtml(o[r.status]),n=t(function(){OC.Notification.hide()},5e3)),e.reject(r)}}}]),r.interceptors.push("CSRFInterceptor"),r.interceptors.push("ConnectionErrorInterceptor");var s=function(e){return{data:["$http","$route","$q","$location","BASE_URL","ITEM_BATCH_SIZE","FEED_TYPE","SettingsResource","FeedResource",function(t,n,r,i,o,s,a,u,d){var c=u.get("showAll"),l=u.get("oldestFirst"),f=i.search().search||"",h=r.defer();if(null===c||null===l)h.resolve({});else{var p={type:e,limit:s,showAll:c,oldestFirst:l,search:f};if(void 0!==n.current&&void 0!==n.current.params&&void 0!==n.current.params.id&&(p.id=n.current.params.id),e===a.FEED){var g=d.getById(p.id);void 0===g||2===g.ordering?p.oldestFirst=!1:1===g.ordering&&(p.oldestFirst=!0)}t({url:o+"/items",method:"GET",params:p}).success(function(e){h.resolve(e)})}return h.promise}]}},a=function(){return{sites:["$http","$q","BASE_URL","$location","Publisher","SettingsResource",function(e,t,n,r,i,o){var s=t.defer(),a=r.search().lang;return a||(a=o.get("language")),e.get(n+"/settings").then(function(t){i.publishAll(t);var n=o.get("exploreUrl").replace(/\/+$/,""),r=n+"/feeds."+a+".json",s=n+"/feeds.en.json";return e.get(r)["catch"](function(){return e.get(s)})}).then(function(e){s.resolve(e.data)})["catch"](function(){s.reject()}),s.promise}]}};e.when("/items",{controller:"ContentController as Content",templateUrl:"content.html",resolve:s(i.SUBSCRIPTIONS),type:i.SUBSCRIPTIONS}).when("/items/starred",{controller:"ContentController as Content",templateUrl:"content.html",resolve:s(i.STARRED),type:i.STARRED}).when("/items/feeds/:id",{controller:"ContentController as Content",templateUrl:"content.html",resolve:s(i.FEED),type:i.FEED}).when("/items/folders/:id",{controller:"ContentController as Content",templateUrl:"content.html",resolve:s(i.FOLDER),type:i.FOLDER}).when("/explore",{controller:"ExploreController as Explore",templateUrl:"explore.html",resolve:a(),type:i.EXPLORE}).when("/shortcuts",{templateUrl:"shortcuts.html",type:-1})}]),app.run(["$rootScope","$location","$http","$q","$interval","$route","Loading","ItemResource","FeedResource","FolderResource","SettingsResource","Publisher","BASE_URL","FEED_TYPE","REFRESH_RATE",function(e,t,n,r,i,o,s,a,u,d,c,l,f,h,p){"use strict";s.setLoading("global",!0),l.subscribe(a).toChannels(["items","newestItemId","starred"]),l.subscribe(d).toChannels(["folders"]),l.subscribe(u).toChannels(["feeds"]),l.subscribe(c).toChannels(["settings"]);var g=r.defer();n.get(f+"/settings").success(function(e){l.publishAll(e),g.resolve()});var v=r.defer(),m=t.path();n.get(f+"/feeds/active").success(function(e){var n;switch(e.activeFeed.type){case h.FEED:n="/items/feeds/"+e.activeFeed.id;break;case h.FOLDER:n="/items/folders/"+e.activeFeed.id;break;case h.STARRED:n="/items/starred";break;case h.EXPLORE:n="/explore";break;default:n="/items"}/^\/items(\/(starred|explore|feeds\/\d+|folders\/\d+))?\/?$/.test(m)||t.path(n),v.resolve()});var y,E=r.defer();n.get(f+"/feeds").success(function(e){y=e,E.resolve()});var C,F=r.defer();n.get(f+"/folders").success(function(e){C=e,F.resolve()}),r.all([E.promise,F.promise]).then(function(){l.publishAll(y),l.publishAll(C),0===y.feeds.length&&0===C.folders.length&&t.path("/explore")}),r.all([g.promise,v.promise,E.promise,F.promise]).then(function(){o.reload(),s.setLoading("global",!1)}),i(function(){n.get(f+"/feeds").success(function(e){l.publishAll(e)}),n.get(f+"/folders").success(function(e){l.publishAll(e)})},1e3*p),e.$on("$routeChangeStart",function(){s.setLoading("content",!0)}),e.$on("$routeChangeSuccess",function(){s.setLoading("content",!1)}),e.$on("$routeChangeError",function(){t.path("/items")})}]),app.controller("AppController",["Loading","FeedResource","FolderResource",function(e,t,n){"use strict";this.loading=e,this.isFirstRun=function(){return 0===t.size()&&0===n.size()},this.play=function(e){this.playingItem=e}}]),app.controller("ContentController",["Publisher","FeedResource","ItemResource","SettingsResource","data","$route","$routeParams","$location","FEED_TYPE","ITEM_AUTO_PAGE_SIZE","Loading",function(e,t,n,r,i,o,s,a,u,d,c){"use strict";n.clear(),e.publishAll(i),this.isAutoPagingEnabled=!0,n.size()>=d?this.isNothingMoreToAutoPage=!1:this.isNothingMoreToAutoPage=!0,this.getItems=function(){return n.getAll()},this.toggleStar=function(e){n.toggleStar(e)},this.toggleItem=function(e){this.isCompactView()&&(e.show=!e.show)},this.isShowAll=function(){return r.get("showAll")},this.markRead=function(e){var r=n.get(e);r.keepUnread||r.unread!==!0||(n.markItemRead(e),t.markItemOfFeedRead(r.feedId))},this.getFeed=function(e){return t.getById(e)},this.toggleKeepUnread=function(e){var r=n.get(e);r.unread||(t.markItemOfFeedUnread(r.feedId),n.markItemRead(e,!1)),r.keepUnread=!r.keepUnread};var l=this,f=function(){var e=r.get("oldestFirst");if(l.isFeed()){var n=t.getById(s.id);n&&1===n.ordering?e=!0:n&&2===n.ordering&&(e=!1)}return e};this.orderBy=function(){return f()?"id":"-id"},this.isCompactView=function(){return r.get("compact")},this.isCompactExpand=function(){return r.get("compactExpand")},this.autoPagingEnabled=function(){return this.isAutoPagingEnabled},this.markReadEnabled=function(){return!r.get("preventReadOnScroll")},this.scrollRead=function(e){var r=[],i=[];e.forEach(function(e){var t=n.get(e);t.keepUnread||(r.push(e),i.push(t.feedId))}),r.length>0&&(t.markItemsOfFeedsRead(i),n.markItemsRead(r))},this.isFeed=function(){return o.current.$$route.type===u.FEED},this.autoPage=function(){if(!this.isNothingMoreToAutoPage){if(!this.isAutoPagingEnabled)return void(this.autoPageAgain=!0);this.isAutoPagingEnabled=!1,this.autoPageAgain=!1;var t=o.current.$$route.type,i=s.id,u=f(),l=r.get("showAll"),h=this,p=a.search().search;c.setLoading("autopaging",!0),n.autoPage(t,i,u,l,p).success(function(t){e.publishAll(t),t.items.length>=d?h.isAutoPagingEnabled=!0:h.isNothingMoreToAutoPage=!0,h.isAutoPagingEnabled&&h.autoPageAgain&&h.autoPage()}).error(function(){h.isAutoPagingEnabled=!0})["finally"](function(){c.setLoading("autopaging",!1)})}},this.getRelativeDate=function(e){if(void 0!==e&&""!==e){var t=r.get("language"),n=moment.unix(e).locale(t).fromNow()+"";return n}return""},this.refresh=function(){o.reload()},this.getMediaType=function(e){return e&&0===e.indexOf("audio")?"audio":e&&0===e.indexOf("video")?"video":void 0}}]),app.controller("ExploreController",["sites","$rootScope","FeedResource","SettingsResource","$location",function(e,t,n,r,i){"use strict";this.sites=e,this.feeds=Object.keys(e).map(function(t){return[t,e[t]]}).reduce(function(e,t){var n=t[0],r=t[1];return r.forEach(function(e){e.category=n}),e.concat(r)},[]),this.feedExists=function(e){return void 0!==n.getByLocation(e)},this.subscribeTo=function(e){t.$broadcast("addFeed",e)},this.isCategoryShown=function(e){return e.filter(function(e){return void 0===n.getByLocation(e.feed)}).length>0},this.getSupportedLanguageCodes=function(){return r.getSupportedLanguageCodes()},this.getCurrentLanguageCode=function(){var e=i.search().lang;return e||(e=r.get("language")),e},this.showLanguage=function(e){i.url("/explore/?lang="+e)},this.selectedLanguageCode=this.getCurrentLanguageCode()}]),app.controller("NavigationController",["$route","FEED_TYPE","FeedResource","FolderResource","ItemResource","SettingsResource","Publisher","$rootScope","$location","$q",function(e,t,n,r,i,o,s,a,u,d){"use strict";this.feedError="",this.showNewFolder=!1,this.renamingFolder=!1,this.addingFeed=!1,this.addingFolder=!1,this.folderError="",this.renameError="",this.feed={};var c=function(){return parseInt(e.current.params.id,10)};this.getLanguageCode=function(){return o.get("language")},this.getFeeds=function(){return n.getAll()},this.getFolders=function(){return r.getAll()},this.markFolderRead=function(e){n.markFolderRead(e),n.getByFolderId(e).forEach(function(e){i.markFeedRead(e.id)})},this.markFeedRead=function(e){i.markFeedRead(e),n.markFeedRead(e)},this.markRead=function(){i.markRead(),n.markRead()},this.isShowAll=function(){return o.get("showAll")},this.getFeedsOfFolder=function(e){return n.getByFolderId(e)},this.getUnreadCount=function(){return n.getUnreadCount()},this.isUnread=function(){return this.getUnreadCount()>0},this.getFeedUnreadCount=function(e){var t=n.getById(e);return void 0!==t?t.unreadCount:0},this.isFeedUnread=function(e){return this.getFeedUnreadCount(e)>0},this.getFolderUnreadCount=function(e){return n.getFolderUnreadCount(e)},this.isFolderUnread=function(e){return this.getFolderUnreadCount(e)>0},this.getStarredCount=function(){return i.getStarredCount()},this.isStarredUnread=function(){return this.getStarredCount()>0},this.toggleFolder=function(e){r.toggleOpen(e)},this.hasFeeds=function(e){return void 0!==n.getFolderUnreadCount(e)},this.subFeedActive=function(r){var i=e.current.$$route.type;if(i===t.FEED){var o=n.getById(c());if(void 0!==o&&o.folderId===r)return!0}return!1},this.isSubscriptionsActive=function(){return e.current&&e.current.$$route.type===t.SUBSCRIPTIONS},this.isStarredActive=function(){return e.current&&e.current.$$route.type===t.STARRED},this.isExploreActive=function(){return e.current&&e.current.$$route.type===t.EXPLORE},this.isFolderActive=function(n){return e.current&&e.current.$$route.type===t.FOLDER&&c()===n},this.isFeedActive=function(n){return e.current&&e.current.$$route.type===t.FEED&&c()===n},this.folderNameExists=function(e){return e=e||"",void 0!==r.get(e.trim())},this.feedUrlExists=function(e){return e=e||"",e=e.trim(),void 0!==n.get(e)||void 0!==n.get("http://"+e)},this.createFeed=function(e){var t=this;this.showNewFolder=!1,this.addingFeed=!0;var i=e.newFolder,o=e.existingFolder||{id:0};void 0===i||""===i?(o.getsFeed=!0,n.create(e.url,o.id,void 0,e.user,e.password).then(function(e){s.publishAll(e),u.path("/items/feeds/"+e.feeds[0].id+"/")})["finally"](function(){o.getsFeed=void 0,e.url="",e.user="",e.password="",t.addingFeed=!1})):r.create(i).then(function(n){s.publishAll(n),e.existingFolder=r.get(n.folders[0].name),e.newFolder=void 0,t.createFeed(e)})},this.createFolder=function(e){var t=this;this.addingFolder=!0,r.create(e.name).then(function(e){s.publishAll(e)})["finally"](function(){t.addingFolder=!1,e.name=""})},this.moveFeed=function(t,r){var i=!1,o=n.getById(t);o.folderId!==r&&((this.isFolderActive(o.folderId)||this.isFolderActive(r))&&(i=!0),n.move(t,r),i&&e.reload())},this.renameFeed=function(e){n.patch(e.id,{title:e.title}),e.editing=!1},this.renameFolder=function(e,t){e.renameError="",this.renamingFolder=!0;var n=this;e.name===t?(e.renameError="",e.editing=!1,this.renamingFolder=!1):r.rename(e.name,t).then(function(){e.renameError="",e.editing=!1},function(t){e.renameError=t})["finally"](function(){n.renamingFolder=!1})},this.reversiblyDeleteFeed=function(t){n.reversiblyDelete(t.id)["finally"](function(){e.reload()})},this.undoDeleteFeed=function(t){n.undoDelete(t.id)["finally"](function(){e.reload()})},this.deleteFeed=function(e){n["delete"](e.url)},this.reversiblyDeleteFolder=function(t){d.all(n.reversiblyDeleteFolder(t.id),r.reversiblyDelete(t.name))["finally"](function(){e.reload()})},this.undoDeleteFolder=function(t){d.all(n.undoDeleteFolder(t.id),r.undoDelete(t.name))["finally"](function(){e.reload()})},this.deleteFolder=function(e){n.deleteFolder(e.id),r["delete"](e.name)},this.setOrdering=function(t,r){n.patch(t.id,{ordering:r}),e.reload()},this.togglePinned=function(e){var t=n.getById(e);return t?n.patch(e,{pinned:!t.pinned}):void 0},this.setUpdateMode=function(e,t){return n.patch(e,{updateMode:t})},this.toggleFullText=function(t){a.$broadcast("$routeChangeStart"),n.toggleFullText(t.id)["finally"](function(){a.$broadcast("$routeChangeSuccess"),e.reload()})},this.search=function(e){""===e?u.search("search",null):u.search("search",e)};var l=this;a.$on("moveFeedToFolder",function(e,t){l.moveFeed(t.feedId,t.folderId)});var f=function(){var i;e.current&&(i=e.current.$$route.type);var o=0;if(i===t.FOLDER)o=c();else if(i===t.FEED){var s=n.getById(c());s&&(o=s.folderId)}var a;0!==o&&(a=r.getById(o)),l.feed.existingFolder=a};a.$on("$routeChangeSuccess",function(){f()})}]),app.controller("SettingsController",["$route","$q","SettingsResource","ItemResource","OPMLParser","OPMLImporter","Publisher",function(e,t,n,r,i,o,s){"use strict";this.isOPMLImporting=!1,this.isArticlesImporting=!1,this.opmlImportError=!1,this.articleImportError=!1;var a=function(t,r){n.set(t,r),["showAll","oldestFirst","compact"].indexOf(t)>=0&&e.reload()};this.toggleSetting=function(e){a(e,!this.getSetting(e))},this.getSetting=function(e){return n.get(e)},this.importOPML=function(e){this.opmlImportError=!1,this.articleImportError=!1;try{this.isOPMLImporting=!1;var t=i.parse(e),n=this,r=5;o.importFolders(t).then(function(e){return o.importFeedQueue(e,r)})["finally"](function(){n.isOPMLImporting=!1})}catch(s){console.error(s),this.isOPMLImporting=!1,this.opmlImportError=!0}},this.importArticles=function(e){this.opmlImportError=!1,this.articleImportError=!1;try{this.isArticlesImporting=!0;var t=JSON.parse(e),n=this;r.importArticles(t).success(function(e){s.publishAll(e)})["finally"](function(){n.isArticlesImporting=!1})}catch(i){console.error(i),this.articleImportError=!0,this.isArticlesImporting=!1}}}]),app.filter("trustUrl",["$sce",function(e){"use strict";return function(t){return e.trustAsResourceUrl(t)}}]),app.filter("unreadCountFormatter",function(){"use strict";return function(e){return e>999?"999+":e}}),app.factory("FeedResource",["Resource","$http","BASE_URL","$q",function(e,t,n,r){"use strict";var i=function(t,n,r){e.call(this,t,n,"url"),this.ids={},this.locations={},this.unreadCount=0,this.folderUnreadCount={},this.folderIds={},this.$q=r};return i.prototype=Object.create(e.prototype),i.prototype.receive=function(t){e.prototype.receive.call(this,t),this.updateUnreadCache(),this.updateFolderCache()},i.prototype.clear=function(){e.prototype.clear.call(this),this.unreadCount=0,this.folderUnreadCount={},this.folderIds={},this.ids={},this.locations={}},i.prototype.updateUnreadCache=function(){this.unreadCount=0,this.folderUnreadCount={};var e=this;this.values.forEach(function(t){t.unreadCount&&(e.unreadCount+=t.unreadCount),void 0!==t.folderId&&(e.folderUnreadCount[t.folderId]=e.folderUnreadCount[t.folderId]||0,e.folderUnreadCount[t.folderId]+=t.unreadCount)})},i.prototype.updateFolderCache=function(){this.folderIds={};var e=this;this.values.forEach(function(t){e.folderIds[t.folderId]=e.folderIds[t.folderId]||[],e.folderIds[t.folderId].push(t)})},i.prototype.add=function(t){e.prototype.add.call(this,t),void 0!==t.id&&(this.ids[t.id]=this.hashMap[t.url]),void 0!==t.location&&(this.locations[t.location]=this.hashMap[t.url])},i.prototype.markRead=function(){this.values.forEach(function(e){e.unreadCount=0}),this.updateUnreadCache()},i.prototype.markFeedRead=function(e){this.ids[e].unreadCount=0,this.updateUnreadCache()},i.prototype.markFolderRead=function(e){this.values.forEach(function(t){t.folderId===e&&(t.unreadCount=0)}),this.updateUnreadCache()},i.prototype.markItemOfFeedRead=function(e){this.ids[e].unreadCount-=1,this.updateUnreadCache()},i.prototype.markItemsOfFeedsRead=function(e){var t=this;e.forEach(function(e){t.ids[e].unreadCount-=1}),this.updateUnreadCache()},i.prototype.markItemOfFeedUnread=function(e){this.ids[e].unreadCount+=1,this.updateUnreadCache()},i.prototype.getUnreadCount=function(){return this.unreadCount},i.prototype.getFolderUnreadCount=function(e){return this.folderUnreadCount[e]},i.prototype.getByFolderId=function(e){return this.folderIds[e]||[]},i.prototype.getById=function(e){return this.ids[e]},i.prototype.getByLocation=function(e){return this.locations[e]},i.prototype.move=function(e,t){var n=this.getById(e);return n.folderId=t,this.updateFolderCache(),this.updateUnreadCache(),this.patch(e,{folderId:t})},i.prototype.create=function(e,t,n,r,i){e=e.trim(),e.startsWith("http")||(e="https://"+e),void 0!==n&&(n=n.trim());var o={url:e,folderId:t||0,title:n||e,unreadCount:0};this.add(o),this.updateFolderCache();var s=this.$q.defer();return this.http({method:"POST",url:this.BASE_URL+"/feeds",data:{url:e,parentFolderId:t||0,title:n,user:r||null,password:i||null}}).success(function(e){s.resolve(e)}).error(function(e){o.faviconLink="",o.error=e.message,s.reject()}),s.promise},i.prototype.reversiblyDelete=function(e,t,n){var r=this.getById(e);return r&&n!==!0&&(r.deleted=!0),t!==!1&&this.updateUnreadCache(),this.http["delete"](this.BASE_URL+"/feeds/"+e)},i.prototype.reversiblyDeleteFolder=function(e){var t=this,n=[];this.getByFolderId(e).forEach(function(e){n.push(t.reversiblyDelete(e.id,!1,!0))}),this.updateUnreadCache();var r=this.$q.all(n);return r.promise},i.prototype["delete"]=function(t,n){var r=this.get(t);return void 0!==r&&r.id&&delete this.ids[r.id],void 0!==r&&r.location&&delete this.locations[r.location],e.prototype["delete"].call(this,t),n!==!1&&(this.updateUnreadCache(),this.updateFolderCache()),r},i.prototype.deleteFolder=function(e){var t=this;this.getByFolderId(e).forEach(function(e){t["delete"](e.url,!1)}),this.updateUnreadCache(),this.updateFolderCache()},i.prototype.undoDelete=function(e,t){var n=this.getById(e);return n&&(n.deleted=!1),t!==!1&&this.updateUnreadCache(),this.http.post(this.BASE_URL+"/feeds/"+e+"/restore")},i.prototype.undoDeleteFolder=function(e){var t=this,n=[];this.getByFolderId(e).forEach(function(e){n.push(t.undoDelete(e.id,!1))}),this.updateUnreadCache();var r=this.$q.all(n);return r.promise},i.prototype.setOrdering=function(e,t){var n=this.getById(e);if(n){n.ordering=t;var r=this.BASE_URL+"/feeds/"+e;return this.http.patch(r,{ordering:t})}},i.prototype.setPinned=function(e,t){var n=this.getById(e);if(n){n.pinned=t;var r=this.BASE_URL+"/feeds/"+e;return this.http.patch(r,{pinned:t})}},i.prototype.patch=function(e,t){var n=this.getById(e);if(n){Object.keys(t).forEach(function(e){n[e]=t[e]});var r=this.BASE_URL+"/feeds/"+e;return this.http.patch(r,t)}},i.prototype.toggleFullText=function(e){var t=this.getById(e);return this.patch(e,{fullTextEnabled:!t.fullTextEnabled})},new i(t,n,r)}]),app.factory("FolderResource",["Resource","$http","BASE_URL","$q",function(e,t,n,r){"use strict";var i=function(t,n,r){e.call(this,t,n,"name"),this.deleted=null,this.$q=r,this.ids={}};return i.prototype=Object.create(e.prototype),i.prototype.add=function(t){e.prototype.add.call(this,t),void 0!==t.id&&(this.ids[t.id]=this.hashMap[t.name])},i.prototype.clear=function(){e.prototype.clear.call(this),this.ids={}},i.prototype["delete"]=function(t){var n=this.get(t);return void 0!==n&&n.id&&delete this.ids[n.id],e.prototype["delete"].call(this,t),n},i.prototype.toggleOpen=function(e){var t=this.get(e);return t.opened=!t.opened,this.http({url:this.BASE_URL+"/folders/"+t.id+"/open",method:"POST",data:{folderId:t.id,open:t.opened}})},i.prototype.rename=function(e,t){var n=this.get(e),r=this.$q.defer(),i=this;return this.http({url:this.BASE_URL+"/folders/"+n.id+"/rename",method:"POST",data:{folderName:t}}).success(function(){n.name=t,delete i.hashMap[e],i.hashMap[t]=n,r.resolve()}).error(function(e){r.reject(e.message)}),r.promise},i.prototype.getById=function(e){return this.ids[e]},i.prototype.create=function(e){e=e.trim();var t={name:e};this.add(t);var n=this.$q.defer();return this.http({url:this.BASE_URL+"/folders",method:"POST",data:{folderName:e}}).success(function(e){n.resolve(e)}).error(function(e){t.error=e.message}),n.promise},i.prototype.reversiblyDelete=function(e){var t=this.get(e),n=t.id;return t.deleted=!0,this.http["delete"](this.BASE_URL+"/folders/"+n)},i.prototype.undoDelete=function(e){var t=this.get(e),n=t.id;return t.deleted=!1,this.http.post(this.BASE_URL+"/folders/"+n+"/restore")},new i(t,n,r)}]),app.factory("ItemResource",["Resource","$http","BASE_URL","ITEM_BATCH_SIZE",function(e,t,n,r){"use strict";var i=function(t,n,r){e.call(this,t,n),this.batchSize=r,this.clear()};return i.prototype=Object.create(e.prototype),i.prototype.clear=function(){this.starredCount=0,this.lowestId=0,this.highestId=0,e.prototype.clear.call(this)},i.prototype.receive=function(t,n){switch(n){case"newestItemId":this.newestItemId=t;break;case"starred":this.starredCount=t;break;default:var r=this;t.forEach(function(e){0===r.lowestId&&(r.lowestId=e.id),0===r.highestId&&(r.highestId=e.id),e.id>r.highestId&&(r.highestId=e.id),e.id<r.lowestId&&(r.lowestId=e.id)}),e.prototype.receive.call(this,t,n)}},i.prototype.getNewestItemId=function(){return this.newestItemId},i.prototype.getStarredCount=function(){return this.starredCount},i.prototype.star=function(e,t){void 0===t&&(t=!0);var n=this.get(e),r=this.BASE_URL+"/items/"+n.feedId+"/"+n.guidHash+"/star";return n.starred=t,t?this.starredCount+=1:this.starredCount-=1,this.http({url:r,method:"POST",data:{isStarred:t}})},i.prototype.toggleStar=function(e){this.get(e).starred?this.star(e,!1):this.star(e,!0)},i.prototype.markItemRead=function(e,t){return void 0===t&&(t=!0),this.get(e).unread=!t,this.http({url:this.BASE_URL+"/items/"+e+"/read",method:"POST",data:{isRead:t}})},i.prototype.markItemsRead=function(e){var t=this;return e.forEach(function(e){t.get(e).unread=!1}),this.http({url:this.BASE_URL+"/items/read/multiple",method:"POST",data:{itemIds:e}})},i.prototype.markFeedRead=function(e,t){void 0===t&&(t=!0);var n=this.values.filter(function(t){return t.feedId===e});return n.forEach(function(e){e.unread=!t}),this.http.post(this.BASE_URL+"/feeds/"+e+"/read",{highestItemId:this.getNewestItemId()})},i.prototype.markRead=function(){return this.values.forEach(function(e){e.unread=!1}),this.http({url:this.BASE_URL+"/items/read",method:"POST",data:{highestItemId:this.getNewestItemId()}})},i.prototype.autoPage=function(e,t,n,r,i){var o;return o=n?this.highestId:this.lowestId,this.http({url:this.BASE_URL+"/items",method:"GET",params:{type:e,id:t,offset:o,limit:this.batchSize,oldestFirst:n,showAll:r,search:i}})},i.prototype.importArticles=function(e){return this.http({url:this.BASE_URL+"/feeds/import/articles",method:"POST",data:{json:e}})},new i(t,n,r)}]),app.service("Loading",function(){"use strict";this.loading={global:!1,content:!1,autopaging:!1},this.setLoading=function(e,t){this.loading[e]=t},this.isLoading=function(e){return this.loading[e]}}),app.service("OPMLImporter",["FeedResource","FolderResource","Publisher","$q",function(e,t,n,r){"use strict";var i=function(o){var s=r.defer();if(o.length>0){var a=o.pop(),u=a.url,d=a.title,c=0,l=a.folderName;if(void 0!==l&&void 0!==t.get(l)){var f=t.get(l);f.opened=!0,c=f.id,f.getsFeed=!0,f.getsFeedCounter=f.getsFeedCounter||0,f.getsFeedCounter+=1}void 0!==u&&void 0===e.get(u)&&e.create(u,c,d).then(function(e){n.publishAll(e)})["finally"](function(){0!==c&&(f.getsFeedCounter-=1,0===f.getsFeedCounter&&(f.getsFeed=!1)),i(o)})}else s.resolve();return s.promise};this.importFolders=function(e){var i=[],o=[];e.folders.forEach(function(e){if(void 0!==e.name){if(void 0===t.get(e.name)){var r=t.create(e.name).then(function(e){n.publishAll(e)});o.push(r)}e.feeds.forEach(function(t){t.folderName=e.name,i.push(t)})}}),i=i.concat(e.feeds);var s=r.defer();return r.all(o)["finally"](function(){s.resolve(i)}),s.promise},this.importFeedQueue=function(e,t){for(var n=r.defer(),o=[],s=0;t>s;s+=1)o.push(i(e));return r.all(o).then(function(){n.resolve()}),n.promise}}]),app.service("OPMLParser",function(){"use strict";var e=function(e){var t=e.attr("xmlUrl")||e.attr("htmlUrl"),n=e.attr("title")||e.attr("text")||t;return void 0===t?{type:"folder",name:n,feeds:[]}:{type:"feed",name:n,url:t}},t=function(n,r,i){for(var o=0;o<n.length;o+=1){var s=$(n[o]),a=e(s);"feed"===a.type?r.feeds.push(a):i?(t(s.children("outline"),a,!1),r.folders.push(a)):t(s.children("outline"),r,!1)}return r};this.parse=function(e){e=$.parseXML(e);var n=$(e).find("body > outline"),r={feeds:[],folders:[]};return t(n,r,!0)}}),app.service("Publisher",function(){"use strict";this.channels={},this.subscribe=function(e){var t=this;return{toChannels:function(n){n.forEach(function(n){t.channels[n]=t.channels[n]||[],t.channels[n].push(e)})}}},this.publishAll=function(e){var t=this;Object.keys(e).forEach(function(n){var r=t.channels[n];void 0!==r&&r.forEach(function(t){t.receive(e[n],n)})})}}),app.factory("Resource",function(){"use strict";var e=function(e,t,n){this.id=n||"id",this.values=[],this.hashMap={},this.http=e,this.BASE_URL=t};return e.prototype.receive=function(e){var t=this;e.forEach(function(e){t.add(e)})},e.prototype.add=function(e){var t=this.hashMap[e[this.id]];void 0===t?(this.values.push(e),this.hashMap[e[this.id]]=e):Object.keys(e).forEach(function(n){t[n]=e[n]})},e.prototype.size=function(){return this.values.length},e.prototype.get=function(e){return this.hashMap[e]},e.prototype["delete"]=function(e){var t=this,n=this.values.findIndex(function(n){return n[t.id]===e});void 0!==n&&this.values.splice(n,1),void 0!==this.hashMap[e]&&delete this.hashMap[e]},e.prototype.clear=function(){for(this.hashMap={};this.values.length>0;)this.values.pop()},e.prototype.getAll=function(){return this.values},e}),app.service("SettingsResource",["$http","BASE_URL",function(e,t){"use strict";this.settings={language:"en",showAll:null,compact:!1,oldestFirst:null,preventReadOnScroll:!1,compactExpand:!1,exploreUrl:""},this.defaultLanguageCode="en",this.supportedLanguageCodes=["ar-ma","ar","bg","ca","cs","cv","da","de","el","en","en-ca","en-gb","eo","es","et","eu","fi","fr-ca","fr","gl","he","hi","hu","id","is","it","ja","ka","ko","lv","ms-my","nb","ne","nl","pl","pt-br","pt","ro","ru","sk","sl","sv","th","tr","tzm-la","tzm","uk","zh-cn","zh-tw"],this.getSupportedLanguageCodes=function(){return this.supportedLanguageCodes},this.receive=function(e){var t=this;Object.keys(e).forEach(function(n){var r=e[n];"language"===n&&(r=t.processLanguageCode(r)),t.settings[n]=r})},this.get=function(e){return this.settings[e]},this.set=function(n,r){return this.settings[n]=r,e({url:t+"/settings",method:"PUT",data:{language:this.settings.language,showAll:this.settings.showAll,compact:this.settings.compact,oldestFirst:this.settings.oldestFirst,compactExpand:this.settings.compactExpand,preventReadOnScroll:this.settings.preventReadOnScroll}})},this.processLanguageCode=function(e){return e=e.replace("_","-").toLowerCase(),this.supportedLanguageCodes.indexOf(e)<0&&(e=e.split("-")[0]),this.supportedLanguageCodes.indexOf(e)<0&&(e=this.defaultLanguageCode),e}}]),function(e,t,n,r,i,o){"use strict";var s=e.location,a=e.localStorage,u=function(e,t,r){var i=n.isContentHandlerRegistered,o=function(e,t){return i?"new"!==i(e,t):a.getItem("registeredHandler")===t};n.registerContentHandler&&!o(e,t)&&(n.registerContentHandler(e,t,r),i||a.setItem("registeredHandler",t))},d=s.protocol+"//"+s.host+s.pathname,c=d+"?subscribe_to=%s",l="application/vnd.mozilla.maybe.feed",f="ownCloud News @ "+d;u(l,c,f),i(t).ready(function(){var e=r("?subscribe_to");if(e&&"undefined"!==e){i("#new-feed").show();var t=i('input[ng-model="Navigation.feed.url"]');t.val(e),t.trigger("input"),setTimeout(function(){t.focus()},1e3)}})}(window,document,navigator,url,$),function(e,t){"use strict";e.addEventListener("beforeunload",function(){var e=t.querySelector("#app-content");e.scrollTo(0,0)})}(window,document),function(e,t,n){"use strict";var r=function(e){return!(e.is("input")||e.is("select")||e.is("textarea")||e.is("checkbox"))},i=function(e){return!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)},o=function(e){var t=".active > .app-navigation-entry-menu .mark-read button",n=e.find(t);n.length>0&&n.trigger("click")},s=function(e,t){var n=e.offset().top-t.offset().top,r=n+e.height(),i=t.height();return n>=0&&i>r},a=function(e,t,n){0===e.length||!n&&s(e,t)||t.scrollTop(e.offset().top-t.offset().top+t.scrollTop())},u=function(e){var t=e.find(".active");a(t,e.children("ul"),!0)},d=function(e){e.find(".active > a:visible").trigger("click")},c=function(e,t){if(0===t.scrollTop()){var n=t.find(".pull-to-refresh");n.hasClass("show-pull-to-refresh")?n.hasClass("done")&&d(e):n.addClass("show-pull-to-refresh")}},l=function(e,t){e.children("a:visible").trigger("click"),a(e,t.children("ul"))},f=function(e){var t=e.find(".active"),r=e.find(".explore-feed,.subscriptions-feed:visible,.starred-feed:visible,.feed:visible");if(t.hasClass("folder"))for(;t.length>0;){var i=t.find(".feed:visible");if(i.length>0)return void l(n(i[0]),e);t=t.next(".folder")}else for(var o=0;o<r.length-1;o+=1){var s=r[o];if(s===t[0]){var a=r[o+1];l(n(a),e);break}}},h=function(e){return e.parent().parent(".folder")},p=function(e,t){var r,i=e.find(".folder:visible");r=t?i.length-1:0,i.length>0&&l(n(i[r]),e)},g=function(e){var t=e.find(".active");if(t.hasClass("folder"))l(t.prevAll(".folder:visible").first(),e);else if(t.hasClass("feed")){var n=h(t);n.length>0?l(n,e):p(e,!0)}else p(e,!0)},v=function(e){var t=e.find(".active");if(t.hasClass("folder"))l(t.nextAll(".folder:visible").first(),e);else if(t.hasClass("feed")){var n=h(t);n.length>0?l(n.nextAll(".folder:visible").first(),e):p(e)}else p(e)},m=function(e){var t=e.find(".active"),r=e.find(".explore-feed,.subscriptions-feed:visible,.starred-feed:visible,.feed:visible");if(t.hasClass("folder")){for(var i=t.prev(".folder");i.length>0;){var o=i.find(".feed:visible");if(o.length>0)return void l(n(o[o.length-1]),e);i=i.prev(".folder")}var s=t.siblings(".feed");if(s.length>0)return void l(n(s[s.length-1]),e);var a=n(".starred-feed:visible");return void(a.length>0&&l(a,e))}for(var u=r.length-1;u>0;u-=1){var d=r[u];if(d===t[0]){var c=r[u-1];l(n(c),e);break}}},y=function(e,t){var r=e.find(".item");r.each(function(e,r){return r=n(r),r.height()+r.position().top>30?(t(r),!1):void 0})},E=function(e){y(e,function(e){e.find(".toggle-keep-unread").trigger("click")})},C=function(e){y(e,function(e){e.find(".star").trigger("click")})},F=function(e){y(e,function(e){e.find(".utils").trigger("click")})},I=function(t){y(t,function(t){t.trigger("click"),e.open(t.find(".external:visible").attr("href"),"_blank")})},w=function(e,t,n){e.scrollTop(t.offset().top-e.offset().top+e.scrollTop()),n&&y(e,function(e){e.hasClass("open")||e.find(".utils").trigger("click")})},R=function(e,t){var r=e.find(".item"),i=!1;r.each(function(r,o){return o=n(o),0===o.position().top&&t&&!o.hasClass("open")||o.position().top>10?(w(e,o,t),i=!0,!1):void 0}),i||e.scrollTop(e.prop("scrollHeight"))},b=function(e,t,r){var i=t.find(".item"),o=!1;i.each(function(i,s){if(s=n(s),s.position().top+10>=0){var a=s.prev();return a.length>0?w(t,a,r):(c(e,t),t.scrollTop(0)),o=!0,!1}}),!o&&i.length>0&&w(t,i.last())};n(t).keyup(function(e){var t=e.keyCode,s=n("#app-content"),a=n("#app-navigation"),l=n("#articles.compact").length>0,h="true"===n("#articles").attr("news-compact-expand"),p=l&&h;r(n(":focus"))&&i(e)?[74,78,39].indexOf(t)>=0?(e.preventDefault(),
R(s,p)):[75,80,37].indexOf(t)>=0?(e.preventDefault(),b(a,s,p)):[85].indexOf(t)>=0?(e.preventDefault(),E(s)):[69].indexOf(t)>=0?(e.preventDefault(),F(s)):[73,83,76].indexOf(t)>=0?(e.preventDefault(),C(s)):[72].indexOf(t)>=0?(e.preventDefault(),C(s),R(s)):[79].indexOf(t)>=0?(e.preventDefault(),I(s)):[82].indexOf(t)>=0?(e.preventDefault(),d(a)):[70].indexOf(t)>=0?(e.preventDefault(),f(a)):[68].indexOf(t)>=0?(e.preventDefault(),m(a)):[67].indexOf(t)>=0?(e.preventDefault(),g(a)):[65].indexOf(t)>=0?(e.preventDefault(),u(a)):[86].indexOf(t)>=0?(e.preventDefault(),v(a)):[81].indexOf(t)>=0?(e.preventDefault(),n("#searchbox").focus()):[33].indexOf(t)>=0&&c(a,s):r(n(":focus"))&&e.shiftKey&&[65].indexOf(t)>=0&&(e.preventDefault(),o(a))})}(window,document,$),window.News=window.News||{},function(e,t,n,r,i){"use strict";var o=[];r.addArticleAction=function(e){o.push(e)},r.getArticleActionPlugins=function(){return o}}(window,document,jQuery,window.News),app.run(["$document","$rootScope",function(e,t){"use strict";e.click(function(e){t.$broadcast("documentClicked",e)})}]),app.directive("appNavigationEntryUtils",function(){"use strict";return{restrict:"C",link:function(e,t){var n=t.siblings(".app-navigation-entry-menu"),r=$(t).find(".app-navigation-entry-utils-menu-button button");r.click(function(){n.toggleClass("open")}),e.$on("documentClicked",function(e,t){t.target!==r[0]&&n.removeClass("open")})}}}),app.directive("newsAddFeed",["$rootScope","$timeout",function(e,t){"use strict";return{restrict:"A",link:function(n,r){e.$on("addFeed",function(e,i){t(function(){r.is(":animated")?(r.stop(!0,!0),r.show()):r.is(":visible")||r.slideDown(),r.find('[ng-model="Navigation.feed.url"]').focus()}),n.Navigation.feed.url=i})}}}]),app.directive("newsArticleActions",function(){"use strict";return{restrict:"A",scope:{newsArticleActions:"=",noPlugins:"="},link:function(e,t){for(var n=News.getArticleActionPlugins(),r=0;r<n.length;r+=1)n[r](t,e.newsArticleActions);e.noPlugins=0===n.length}}}),app.directive("newsAutoFocus",["$timeout",function(e){"use strict";return function(t,n,r){var i=n;r.newsAutoFocus&&(i=$(r.newsAutoFocus)),e(function(){i.focus()},0)}}]),app.directive("newsBindHtmlUnsafe",function(){"use strict";return function(e,t,n){e.$watch(n.newsBindHtmlUnsafe,function(){t.html(e.$eval(n.newsBindHtmlUnsafe))})}}),app.directive("newsDraggable",function(){"use strict";return function(e,t,n){var r=e.$eval(n.newsDraggable);angular.isDefined(r)?t.draggable(r):t.draggable(),n.$observe("newsDraggableDisable",function(e){"true"===e?t.draggable("disable"):t.draggable("enable")})}}),app.directive("newsDroppable",["$rootScope",function(e){"use strict";return function(t,n,r){var i={accept:".feed",hoverClass:"drag-and-drop",greedy:!0,drop:function(i,o){$(".drag-and-drop").removeClass("drag-and-drop");var s={folderId:parseInt(n.data("id"),10),feedId:parseInt($(o.draggable).data("id"),10)};e.$broadcast("moveFeedToFolder",s),t.$apply(r.droppable)}};n.droppable(i)}}]),app.directive("newsFinishedTransition",function(){"use strict";return function(e,t,n){t.on("transitionend",function(){t.addClass(n.newsFinishedTransition)})}}),app.directive("newsFocus",["$timeout","$interpolate",function(e,t){"use strict";return function(n,r,i){r.click(function(){var r=$(t(i.newsFocus)(n));e(function(){r.focus()},500)})}}]),app.directive("newsInstantNotification",function(){"use strict";return{restrict:"E",link:function(e,t){t.hide();var n=t.html();OC.Notification.showHtml(n)}}}),app.directive("newsPlayOne",["$rootScope",function(e){"use strict";return{restrict:"A",link:function(t,n){n.on("play",function(){e.$broadcast("playing",n)}),e.$on("playing",function(e,t){t[0]!==n[0]&&n[0].pause()})}}}]),app.directive("newsPullToRefresh",["$rootScope",function(e){"use strict";var t=!1;return{restrict:"A",scope:{newsPullToRefresh:"="},link:function(n,r){e.$on("$routeChangeStart",function(){t=!1,n.newsPullToRefresh=!1}),r.on("scroll",function(){0===r.scrollTop()&&t&&(n.newsPullToRefresh=!0),t=!0})}}}]),app.directive("newsReadFile",function(){"use strict";return function(e,t,n){t.change(function(){var r=t[0].files[0],i=new FileReader;i.onload=function(t){e.$fileContent=t.target.result,e.$apply(n.newsReadFile)},i.readAsText(r)})}}),app.directive("newsRefreshMasonry",["$timeout",function(e){"use strict";var t=function(t){e(function(){e(function(){t.parent().masonry({itemSelector:".grid-item",gutter:25,columnWidth:300})},100)})};return function(e,n){e.$last&&t(n)}}]),app.directive("newsScroll",["$timeout","ITEM_AUTO_PAGE_SIZE","MARK_READ_TIMEOUT","SCROLL_TIMEOUT",function(e,t,n,r){"use strict";var i,o=function(e,t,n){for(var r=0,i=t.find(".item"),o=i.length-1;o>=0;o-=1){var s=$(i[o]);if(r>=e)break;if(s.position().top<0){n.$apply(n.newsScrollAutoPage);break}r+=1}},s=function(e,t,n){if(e){var r=[],i=t.find(".item:not(.read)");i.each(function(e,t){var n=$(t);return n.position().top<=-10?void r.push(parseInt(n.data("id"),10)):!1}),n.itemIds=r,n.$apply(n.newsScrollMarkRead)}};return{restrict:"A",scope:{newsScroll:"@",newsScrollAutoPage:"&",newsScrollMarkRead:"&",newsScrollEnabledMarkRead:"="},link:function(a,u){var d=!0,c=u;a.newsScroll&&(c=$(a.newsScroll));var l=function(){d&&(d=!1,e(function(){d=!0},1e3*r),o(t,u,a),i&&e.cancel(i),i=e(function(){s(a.newsScrollEnabledMarkRead,u,a),i=void 0},1e3*n))};c.on("scroll",l),a.$on("$destroy",function(){c.off("scroll",l)})}}}]),app.directive("newsSearch",["$document","$location",function(e,t){"use strict";return{restrict:"E",scope:{onSearch:"="},link:function(e){var n=$("#searchbox");n.val(t.search().search);var r=function(){var t=n.val();e.$apply(function(){e.onSearch(t)})};n.on("search keyup",function(e){("search"===e.type||13===e.keyCode)&&r()}),e.$watch(function(){return t.search()},function(e){e&&e.search?n.val(e.search):n.val("")})}}}]),app.directive("newsStickyMenu",function(){"use strict";return function(e,t,n){var r=40;$(n.newsStickyMenu).scroll(function(){var e=$(this).scrollTop();e>r?(t.addClass("fixed"),t.css("top",e)):t.removeClass("fixed")})}}),app.directive("newsStopPropagation",function(){"use strict";return{restrict:"A",link:function(e,t){t.bind("click",function(e){e.stopPropagation()})}}}),app.directive("newsTimeout",["$timeout","$rootScope",function(e,t){"use strict";return{restrict:"A",scope:{newsTimeout:"&"},link:function(n,r){var i=!1,o=7,s=e(n.newsTimeout,1e3*o);n.$on("$destroy",function(){i=!0,e.cancel(s)}),t.$on("$locationChangeStart",function(){e.cancel(s),i||(i=!0,r.remove(),n.newsTimeout())})}}}]),app.directive("newsTitleUnreadCount",["$window",function(e){"use strict";var t=e.document.title,n=t.split("-"),r=n[0]||"News",i=n[1]||"ownCloud";return{restrict:"E",scope:{unreadCount:"@"},link:function(t,n,o){o.$observe("unreadCount",function(t){"0"!==t?e.document.title=r+"("+t+") - "+i:e.document.title=r+" - "+i})}}}]),app.directive("newsToggleShow",function(){"use strict";return{restrict:"A",scope:{newsToggleShow:"@"},link:function(e,t){t.click(function(){var t=$(e.newsToggleShow);t.toggle()})}}}),app.directive("newsTriggerClick",function(){"use strict";return function(e,t,n){t.click(function(){$(n.newsTriggerClick).trigger("click")})}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFwcC5qcyIsIkNvbmZpZy5qcyIsIlJ1bi5qcyIsIkFwcENvbnRyb2xsZXIuanMiLCJDb250ZW50Q29udHJvbGxlci5qcyIsIkV4cGxvcmVDb250cm9sbGVyLmpzIiwiTmF2aWdhdGlvbkNvbnRyb2xsZXIuanMiLCJTZXR0aW5nc0NvbnRyb2xsZXIuanMiLCJUcnVzdFVybC5qcyIsIlVucmVhZENvdW50Rm9ybWF0dGVyLmpzIiwiRmVlZFJlc291cmNlLmpzIiwiRm9sZGVyUmVzb3VyY2UuanMiLCJJdGVtUmVzb3VyY2UuanMiLCJMb2FkaW5nLmpzIiwiT1BNTEltcG9ydGVyLmpzIiwiT1BNTFBhcnNlci5qcyIsIlB1Ymxpc2hlci5qcyIsIlJlc291cmNlLmpzIiwiU2V0dGluZ3NSZXNvdXJjZS5qcyIsIkV4dGVyblN1YnNjcmlwdGlvbi5qcyIsIkZpeGVzLmpzIiwiS2V5Ym9hcmRTaG9ydGN1dHMuanMiLCJBcnRpY2xlQWN0aW9uUGx1Z2luLmpzIiwiQXBwTmF2aWdhdGlvbkVudHJ5VXRpbHMuanMiLCJOZXdzQWRkRmVlZC5qcyIsIk5ld3NBcnRpY2xlQWN0aW9ucy5qcyIsIk5ld3NBdXRvRm9jdXMuanMiLCJOZXdzQmluZFVuc2FmZUh0bWwuanMiLCJOZXdzRHJhZ2dhYmxlLmpzIiwiTmV3c0Ryb3BwYWJsZS5qcyIsIk5ld3NGaW5pc2hlZFRyYW5zaXRpb24uanMiLCJOZXdzRm9jdXMuanMiLCJOZXdzSW5zdGFudE5vdGlmaWNhdGlvbi5qcyIsIk5ld3NQbGF5T25lLmpzIiwiTmV3c1B1bGxUb1JlZnJlc2guanMiLCJOZXdzUmVhZEZpbGUuanMiLCJOZXdzUmVmcmVzaE1hc29ucnkuanMiLCJOZXdzU2Nyb2xsLmpzIiwiTmV3c1NlYXJjaC5qcyIsIk5ld3NTdGlja3lNZW51LmpzIiwiTmV3c1N0b3BQcm9wYWdhdGlvbi5qcyIsIk5ld3NUaW1lb3V0LmpzIiwiTmV3c1RpdGxlVW5yZWFkQ291bnQuanMiLCJOZXdzVG9nZ2xlU2hvdy5qcyIsIk5ld3NUcmlnZ2VyQ2xpY2suanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJHByb3ZpZGUiLCIkaHR0cFByb3ZpZGVyIiwiZmVlZFR5cGUiLCJGRUVEIiwiRk9MREVSIiwiU1RBUlJFRCIsIlNVQlNDUklQVElPTlMiLCJTSEFSRUQiLCJFWFBMT1JFIiwiY29uc3RhbnQiLCJPQyIsImdlbmVyYXRlVXJsIiwiZmFjdG9yeSIsIiRxIiwiQkFTRV9VUkwiLCIkd2luZG93IiwicmVxdWVzdCIsImRvbWFpbiIsImxvY2F0aW9uIiwiaHJlZiIsInNwbGl0IiwicGF0aG5hbWUiLCJ1cmwiLCJpbmRleE9mIiwiaGVhZGVycyIsInJlcXVlc3R0b2tlbiIsIm9jX3JlcXVlc3R0b2tlbiIsIndoZW4iLCJlcnJvck1lc3NhZ2VzIiwwLCJ0Iiw0MDEsNDAzLDQxMiw1MDAsNTAzLCIkdGltZW91dCIsInRpbWVyIiwicmVzcG9uc2VFcnJvciIsInJlc3BvbnNlIiwic3RhdHVzIiwiY2FuY2VsIiwiTm90aWZpY2F0aW9uIiwiaGlkZSIsInNob3dIdG1sIiwicmVqZWN0IiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsImdldEl0ZW1SZXNvbHZlIiwidHlwZSIsImRhdGEiLCIkaHR0cCIsIiRyb3V0ZSIsIiRsb2NhdGlvbiIsIklURU1fQkFUQ0hfU0laRSIsIkZFRURfVFlQRSIsIlNldHRpbmdzUmVzb3VyY2UiLCJGZWVkUmVzb3VyY2UiLCJzaG93QWxsIiwiZ2V0Iiwib2xkZXN0Rmlyc3QiLCJzZWFyY2giLCJkZWZlcnJlZCIsImRlZmVyIiwicmVzb2x2ZSIsInBhcmFtZXRlcnMiLCJsaW1pdCIsInVuZGVmaW5lZCIsImN1cnJlbnQiLCJwYXJhbXMiLCJpZCIsImZlZWQiLCJnZXRCeUlkIiwib3JkZXJpbmciLCJtZXRob2QiLCJzdWNjZXNzIiwicHJvbWlzZSIsImdldEV4cGxvcmVSZXNvbHZlIiwic2l0ZXMiLCJQdWJsaXNoZXIiLCJsYW5ndWFnZSIsImxhbmciLCJ0aGVuIiwicHVibGlzaEFsbCIsInJlcGxhY2UiLCJleHBsb3JlVXJsIiwiZGVmYXVsdEV4cGxvcmVVcmwiLCJjb250cm9sbGVyIiwidGVtcGxhdGVVcmwiLCJydW4iLCIkcm9vdFNjb3BlIiwiJGludGVydmFsIiwiTG9hZGluZyIsIkl0ZW1SZXNvdXJjZSIsIkZvbGRlclJlc291cmNlIiwiUkVGUkVTSF9SQVRFIiwic2V0TG9hZGluZyIsInN1YnNjcmliZSIsInRvQ2hhbm5lbHMiLCJzZXR0aW5nc0RlZmVycmVkIiwiYWN0aXZlRmVlZERlZmVycmVkIiwicGF0aCIsImFjdGl2ZUZlZWQiLCJ0ZXN0IiwiZmVlZHMiLCJmZWVkRGVmZXJyZWQiLCJmb2xkZXJzIiwiZm9sZGVyRGVmZXJyZWQiLCJhbGwiLCJsZW5ndGgiLCJyZWxvYWQiLCIkb24iLCJ0aGlzIiwibG9hZGluZyIsImlzRmlyc3RSdW4iLCJzaXplIiwicGxheSIsIml0ZW0iLCJwbGF5aW5nSXRlbSIsIiRyb3V0ZVBhcmFtcyIsIklURU1fQVVUT19QQUdFX1NJWkUiLCJjbGVhciIsImlzQXV0b1BhZ2luZ0VuYWJsZWQiLCJpc05vdGhpbmdNb3JlVG9BdXRvUGFnZSIsImdldEl0ZW1zIiwiZ2V0QWxsIiwidG9nZ2xlU3RhciIsIml0ZW1JZCIsInRvZ2dsZUl0ZW0iLCJpc0NvbXBhY3RWaWV3Iiwic2hvdyIsImlzU2hvd0FsbCIsIm1hcmtSZWFkIiwia2VlcFVucmVhZCIsInVucmVhZCIsIm1hcmtJdGVtUmVhZCIsIm1hcmtJdGVtT2ZGZWVkUmVhZCIsImZlZWRJZCIsImdldEZlZWQiLCJ0b2dnbGVLZWVwVW5yZWFkIiwibWFya0l0ZW1PZkZlZWRVbnJlYWQiLCJzZWxmIiwiZ2V0T3JkZXJpbmciLCJpc0ZlZWQiLCJvcmRlckJ5IiwiaXNDb21wYWN0RXhwYW5kIiwiYXV0b1BhZ2luZ0VuYWJsZWQiLCJtYXJrUmVhZEVuYWJsZWQiLCJzY3JvbGxSZWFkIiwiaXRlbUlkcyIsImlkcyIsImZlZWRJZHMiLCJmb3JFYWNoIiwibWFya0l0ZW1zT2ZGZWVkc1JlYWQiLCJtYXJrSXRlbXNSZWFkIiwiJCRyb3V0ZSIsImF1dG9QYWdlIiwiYXV0b1BhZ2VBZ2FpbiIsIml0ZW1zIiwiZXJyb3IiLCJnZXRSZWxhdGl2ZURhdGUiLCJ0aW1lc3RhbXAiLCJsYW5ndWFnZUNvZGUiLCJkYXRlIiwibW9tZW50IiwidW5peCIsImxvY2FsZSIsImZyb21Ob3ciLCJyZWZyZXNoIiwiZ2V0TWVkaWFUeXBlIiwiT2JqZWN0Iiwia2V5cyIsIm1hcCIsImtleSIsInJlZHVjZSIsInhzIiwieCIsImNhdGVnb3J5IiwiZmVlZExpc3QiLCJjb25jYXQiLCJmZWVkRXhpc3RzIiwiZ2V0QnlMb2NhdGlvbiIsInN1YnNjcmliZVRvIiwiJGJyb2FkY2FzdCIsImlzQ2F0ZWdvcnlTaG93biIsImZpbHRlciIsImVsZW1lbnQiLCJnZXRTdXBwb3J0ZWRMYW5ndWFnZUNvZGVzIiwiZ2V0Q3VycmVudExhbmd1YWdlQ29kZSIsInNob3dMYW5ndWFnZSIsInNlbGVjdGVkTGFuZ3VhZ2VDb2RlIiwiZmVlZEVycm9yIiwic2hvd05ld0ZvbGRlciIsInJlbmFtaW5nRm9sZGVyIiwiYWRkaW5nRmVlZCIsImFkZGluZ0ZvbGRlciIsImZvbGRlckVycm9yIiwicmVuYW1lRXJyb3IiLCJnZXRSb3V0ZUlkIiwicGFyc2VJbnQiLCJnZXRMYW5ndWFnZUNvZGUiLCJnZXRGZWVkcyIsImdldEZvbGRlcnMiLCJtYXJrRm9sZGVyUmVhZCIsImZvbGRlcklkIiwiZ2V0QnlGb2xkZXJJZCIsIm1hcmtGZWVkUmVhZCIsImdldEZlZWRzT2ZGb2xkZXIiLCJnZXRVbnJlYWRDb3VudCIsImlzVW5yZWFkIiwiZ2V0RmVlZFVucmVhZENvdW50IiwidW5yZWFkQ291bnQiLCJpc0ZlZWRVbnJlYWQiLCJnZXRGb2xkZXJVbnJlYWRDb3VudCIsImlzRm9sZGVyVW5yZWFkIiwiZ2V0U3RhcnJlZENvdW50IiwiaXNTdGFycmVkVW5yZWFkIiwidG9nZ2xlRm9sZGVyIiwiZm9sZGVyTmFtZSIsInRvZ2dsZU9wZW4iLCJoYXNGZWVkcyIsInN1YkZlZWRBY3RpdmUiLCJpc1N1YnNjcmlwdGlvbnNBY3RpdmUiLCJpc1N0YXJyZWRBY3RpdmUiLCJpc0V4cGxvcmVBY3RpdmUiLCJpc0ZvbGRlckFjdGl2ZSIsImlzRmVlZEFjdGl2ZSIsImZvbGRlck5hbWVFeGlzdHMiLCJ0cmltIiwiZmVlZFVybEV4aXN0cyIsImNyZWF0ZUZlZWQiLCJuZXdGb2xkZXIiLCJleGlzdGluZ0ZvbGRlciIsImdldHNGZWVkIiwiY3JlYXRlIiwidXNlciIsInBhc3N3b3JkIiwibmFtZSIsImNyZWF0ZUZvbGRlciIsImZvbGRlciIsIm1vdmVGZWVkIiwibW92ZSIsInJlbmFtZUZlZWQiLCJwYXRjaCIsInRpdGxlIiwiZWRpdGluZyIsInJlbmFtZUZvbGRlciIsInJlbmFtZSIsIm1lc3NhZ2UiLCJyZXZlcnNpYmx5RGVsZXRlRmVlZCIsInJldmVyc2libHlEZWxldGUiLCJ1bmRvRGVsZXRlRmVlZCIsInVuZG9EZWxldGUiLCJkZWxldGVGZWVkIiwicmV2ZXJzaWJseURlbGV0ZUZvbGRlciIsInVuZG9EZWxldGVGb2xkZXIiLCJkZWxldGVGb2xkZXIiLCJzZXRPcmRlcmluZyIsInRvZ2dsZVBpbm5lZCIsInBpbm5lZCIsInNldFVwZGF0ZU1vZGUiLCJ1cGRhdGVNb2RlIiwidG9nZ2xlRnVsbFRleHQiLCJ2YWx1ZSIsInNjb3BlIiwic2V0U2VsZWN0ZWRGb2xkZXJGb3JSb3V0ZSIsIk9QTUxQYXJzZXIiLCJPUE1MSW1wb3J0ZXIiLCJpc09QTUxJbXBvcnRpbmciLCJpc0FydGljbGVzSW1wb3J0aW5nIiwib3BtbEltcG9ydEVycm9yIiwiYXJ0aWNsZUltcG9ydEVycm9yIiwic2V0IiwidG9nZ2xlU2V0dGluZyIsImdldFNldHRpbmciLCJpbXBvcnRPUE1MIiwiY29udGVudCIsInBhcnNlZENvbnRlbnQiLCJwYXJzZSIsImpvYlNpemUiLCJpbXBvcnRGb2xkZXJzIiwiZmVlZFF1ZXVlIiwiaW1wb3J0RmVlZFF1ZXVlIiwiY29uc29sZSIsImltcG9ydEFydGljbGVzIiwiYXJ0aWNsZXMiLCJKU09OIiwiJHNjZSIsInRydXN0QXNSZXNvdXJjZVVybCIsIlJlc291cmNlIiwiY2FsbCIsImxvY2F0aW9ucyIsImZvbGRlclVucmVhZENvdW50IiwiZm9sZGVySWRzIiwicHJvdG90eXBlIiwicmVjZWl2ZSIsInVwZGF0ZVVucmVhZENhY2hlIiwidXBkYXRlRm9sZGVyQ2FjaGUiLCJ2YWx1ZXMiLCJhZGQiLCJoYXNoTWFwIiwic3RhcnRzV2l0aCIsImh0dHAiLCJwYXJlbnRGb2xkZXJJZCIsImZhdmljb25MaW5rIiwidXBkYXRlQ2FjaGUiLCJpc0ZvbGRlciIsImRlbGV0ZWQiLCJwcm9taXNlcyIsInBvc3QiLCJzZXRQaW5uZWQiLCJpc1Bpbm5lZCIsImRpZmYiLCJmdWxsVGV4dEVuYWJsZWQiLCJvcGVuZWQiLCJvcGVuIiwidG9Gb2xkZXJOYW1lIiwiYmF0Y2hTaXplIiwic3RhcnJlZENvdW50IiwibG93ZXN0SWQiLCJoaWdoZXN0SWQiLCJjaGFubmVsIiwibmV3ZXN0SXRlbUlkIiwiZ2V0TmV3ZXN0SXRlbUlkIiwic3RhciIsImlzU3RhcnJlZCIsIml0IiwiZ3VpZEhhc2giLCJzdGFycmVkIiwiaXNSZWFkIiwicmVhZCIsImhpZ2hlc3RJdGVtSWQiLCJvZmZzZXQiLCJqc29uIiwic2VydmljZSIsImdsb2JhbCIsImF1dG9wYWdpbmciLCJhcmVhIiwiaXNMb2FkaW5nIiwic3RhcnRGZWVkSm9iIiwicXVldWUiLCJwb3AiLCJnZXRzRmVlZENvdW50ZXIiLCJmb2xkZXJQcm9taXNlcyIsImpvYlByb21pc2VzIiwiaSIsInBhcnNlT3V0bGluZSIsIm91dGxpbmUiLCJhdHRyIiwicmVjdXJzaXZlbHlQYXJzZSIsImxldmVsIiwicm9vdCIsImZpcnN0TGV2ZWwiLCIkIiwiZW50cnkiLCJjaGlsZHJlbiIsInhtbCIsInBhcnNlWE1MIiwiZmluZCIsImNoYW5uZWxzIiwib2JqIiwibGlzdGVuZXJzIiwibGlzdGVuZXIiLCJvYmpzIiwiZXhpc3RpbmciLCJkZWxldGVBdEluZGV4IiwiZmluZEluZGV4Iiwic3BsaWNlIiwic2V0dGluZ3MiLCJjb21wYWN0IiwicHJldmVudFJlYWRPblNjcm9sbCIsImNvbXBhY3RFeHBhbmQiLCJkZWZhdWx0TGFuZ3VhZ2VDb2RlIiwic3VwcG9ydGVkTGFuZ3VhZ2VDb2RlcyIsInByb2Nlc3NMYW5ndWFnZUNvZGUiLCJ0b0xvd2VyQ2FzZSIsIndpbmRvdyIsImRvY3VtZW50IiwibmF2aWdhdG9yIiwic3RvcmFnZSIsImxvY2FsU3RvcmFnZSIsInJlZ2lzdGVySGFuZGxlciIsIm1pbWUiLCJyZWdpc3RlcmVkIiwiaXNDb250ZW50SGFuZGxlclJlZ2lzdGVyZWQiLCJpc1JlZ2lzdGVyZWQiLCJnZXRJdGVtIiwicmVnaXN0ZXJDb250ZW50SGFuZGxlciIsInNldEl0ZW0iLCJjbGVhblVybCIsInByb3RvY29sIiwiaG9zdCIsInN1YnNjcmliZVVybCIsIm1pbWVUeXBlIiwicmVhZHkiLCJzdWJzY3JpcHRpb24iLCJpbnB1dCIsInZhbCIsInRyaWdnZXIiLCJzZXRUaW1lb3V0IiwiZm9jdXMiLCJhZGRFdmVudExpc3RlbmVyIiwicXVlcnlTZWxlY3RvciIsInNjcm9sbFRvIiwibm9JbnB1dEZvY3VzZWQiLCJpcyIsIm5vTW9kaWZpZXJLZXkiLCJldmVudCIsInNoaWZ0S2V5IiwiYWx0S2V5IiwiY3RybEtleSIsIm1ldGFLZXkiLCJtYXJrQWxsUmVhZCIsIm5hdmlnYXRpb25BcmVhIiwic2VsZWN0b3IiLCJidXR0b24iLCJpc0luU2Nyb2xsVmlldyIsImVsZW0iLCJzY3JvbGxBcmVhIiwiZWxlbVRvcCIsInRvcCIsImVsZW1Cb3R0b20iLCJoZWlnaHQiLCJhcmVhQm90dG9tIiwic2Nyb2xsVG9OYXZpZ2F0aW9uRWxlbWVudCIsInRvVG9wIiwic2Nyb2xsVG9wIiwic2Nyb2xsVG9BY3RpdmVOYXZpZ2F0aW9uRW50cnkiLCJyZWxvYWRGZWVkIiwidHJ5UmVsb2FkIiwicHVsbFRvUmVmcmVzaCIsImhhc0NsYXNzIiwiYWRkQ2xhc3MiLCJhY3RpdmF0ZU5hdmlnYXRpb25FbnRyeSIsIm5leHRGZWVkIiwiZWxlbWVudHMiLCJzdWJmZWVkcyIsIm5leHQiLCJnZXRQYXJlbnRGb2xkZXIiLCJwYXJlbnQiLCJzZWxlY3RGaXJzdE9yTGFzdEZvbGRlciIsImlzTGFzdCIsImluZGV4IiwicHJldmlvdXNGb2xkZXIiLCJwcmV2QWxsIiwiZmlyc3QiLCJwYXJlbnRGb2xkZXIiLCJuZXh0Rm9sZGVyIiwibmV4dEFsbCIsInByZXZpb3VzRmVlZCIsInByZXYiLCJzaWJsaW5ncyIsInByZXZpb3VzIiwib25BY3RpdmVJdGVtIiwiY2FsbGJhY2siLCJlYWNoIiwicG9zaXRpb24iLCJ0b2dnbGVVbnJlYWQiLCJleHBhbmRJdGVtIiwib3BlbkxpbmsiLCJzY3JvbGxUb0l0ZW0iLCJleHBhbmRJdGVtSW5Db21wYWN0Iiwic2Nyb2xsVG9OZXh0SXRlbSIsImp1bXBlZCIsInByb3AiLCJzY3JvbGxUb1ByZXZpb3VzSXRlbSIsImxhc3QiLCJrZXl1cCIsImtleUNvZGUiLCJpc0V4cGFuZEl0ZW0iLCJwcmV2ZW50RGVmYXVsdCIsIk5ld3MiLCJleHBvcnRzIiwiYXJ0aWNsZUFjdGlvblBsdWdpbnMiLCJhZGRBcnRpY2xlQWN0aW9uIiwiYWN0aW9uIiwiZ2V0QXJ0aWNsZUFjdGlvblBsdWdpbnMiLCJqUXVlcnkiLCIkZG9jdW1lbnQiLCJjbGljayIsImRpcmVjdGl2ZSIsInJlc3RyaWN0IiwibGluayIsImVsbSIsIm1lbnUiLCJ0b2dnbGVDbGFzcyIsInRhcmdldCIsInJlbW92ZUNsYXNzIiwiXyIsInN0b3AiLCJzbGlkZURvd24iLCJOYXZpZ2F0aW9uIiwibmV3c0FydGljbGVBY3Rpb25zIiwibm9QbHVnaW5zIiwicGx1Z2lucyIsImF0dHJzIiwidG9Gb2N1cyIsIm5ld3NBdXRvRm9jdXMiLCIkd2F0Y2giLCJuZXdzQmluZEh0bWxVbnNhZmUiLCJodG1sIiwiJGV2YWwiLCJvcHRpb25zIiwibmV3c0RyYWdnYWJsZSIsImlzRGVmaW5lZCIsImRyYWdnYWJsZSIsIiRvYnNlcnZlIiwiZGV0YWlscyIsImFjY2VwdCIsImhvdmVyQ2xhc3MiLCJncmVlZHkiLCJkcm9wIiwidWkiLCIkYXBwbHkiLCJkcm9wcGFibGUiLCJvbiIsIm5ld3NGaW5pc2hlZFRyYW5zaXRpb24iLCIkaW50ZXJwb2xhdGUiLCJ0b1JlYWRkIiwibmV3c0ZvY3VzIiwibm90aWZpY2F0aW9uIiwiYXJncyIsInBhdXNlIiwic2Nyb2xsZWQiLCJuZXdzUHVsbFRvUmVmcmVzaCIsImNoYW5nZSIsImZpbGUiLCJmaWxlcyIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJvbmxvYWQiLCIkZmlsZUNvbnRlbnQiLCJyZXN1bHQiLCJuZXdzUmVhZEZpbGUiLCJyZWFkQXNUZXh0IiwibWFzb25yeSIsIml0ZW1TZWxlY3RvciIsImd1dHRlciIsImNvbHVtbldpZHRoIiwiJGxhc3QiLCJNQVJLX1JFQURfVElNRU9VVCIsIlNDUk9MTF9USU1FT1VUIiwiY291bnRlciIsIm5ld3NTY3JvbGxBdXRvUGFnZSIsImVuYWJsZWQiLCJhcnRpY2xlIiwibmV3c1Njcm9sbE1hcmtSZWFkIiwibmV3c1Njcm9sbCIsIm5ld3NTY3JvbGxFbmFibGVkTWFya1JlYWQiLCJhbGxvd1Njcm9sbCIsInNjcm9sbEhhbmRsZXIiLCJvZmYiLCJvblNlYXJjaCIsImJveCIsImRvU2VhcmNoIiwibmV3c1N0aWNreU1lbnUiLCJzY3JvbGwiLCJzY3JvbGxIZWlnaHQiLCJjc3MiLCJiaW5kIiwic3RvcFByb3BhZ2F0aW9uIiwibmV3c1RpbWVvdXQiLCJkZXN0cm95ZWQiLCJzZWNvbmRzIiwicmVtb3ZlIiwiYmFzZVRpdGxlIiwidGl0bGVzIiwiYXBwTmFtZSIsIm93bkNsb3VkTmFtZSIsIm5ld3NUb2dnbGVTaG93IiwidG9nZ2xlIiwibmV3c1RyaWdnZXJDbGljayJdLCJtYXBwaW5ncyI6IkFBV0EsR0FBQUEsS0FBQUMsUUFBQUMsT0FBQSxRQUFBLFVBQUEsYUFBQSxhQ0ZBRixLQUFBRyxRQUFBLGlCQUFBLFdBQUEsZ0JBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FDQSxZQUVBLElBQUFDLElBQ0FD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QUEsbUJBQUEsV0FDQSxZQUVBLE9BQUEsVUFBQXhOLEVBQUEyTixFQUFBdkksR0FDQXVJLEVBQUFKLE1BQUEsV0FDQTlILEVBQUFMLEVBQUErTixrQkFBQTdLLFFBQUEiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cblxuLyoganNoaW50IHVudXNlZDogZmFsc2UgKi9cbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnTmV3cycsIFsnbmdSb3V0ZScsICduZ1Nhbml0aXplJywgJ25nQW5pbWF0ZSddKTtcbiIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5jb25maWcoW1wiJHJvdXRlUHJvdmlkZXJcIiwgXCIkcHJvdmlkZVwiLCBcIiRodHRwUHJvdmlkZXJcIiwgZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyLCAkcHJvdmlkZSwgJGh0dHBQcm92aWRlcikge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBmZWVkVHlwZSA9IHtcbiAgICAgICAgRkVFRDogMCxcbiAgICAgICAgRk9MREVSOiAxLFxuICAgICAgICBTVEFSUkVEOiAyLFxuICAgICAgICBTVUJTQ1JJUFRJT05TOiAzLFxuICAgICAgICBTSEFSRUQ6IDQsXG4gICAgICAgIEVYUExPUkU6IDVcbiAgICB9O1xuXG4gICAgLy8gY29uc3RhbnRzXG4gICAgJHByb3ZpZGUuY29uc3RhbnQoJ1JFRlJFU0hfUkFURScsIDYwKTsgIC8vIHNlY29uZHNcbiAgICAkcHJvdmlkZS5jb25zdGFudCgnSVRFTV9CQVRDSF9TSVpFJywgNDApOyAgLy8gaG93IG1hbnkgaXRlbXMgc2hvdWxkIGJlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZldGNoZWQgaW5pdGlhbGx5XG4gICAgJHByb3ZpZGUuY29uc3RhbnQoJ0lURU1fQVVUT19QQUdFX1NJWkUnLCAyMCk7XG4gICAgJHByb3ZpZGUuY29uc3RhbnQoJ0JBU0VfVVJMJywgT0MuZ2VuZXJhdGVVcmwoJy9hcHBzL25ld3MnKSk7XG4gICAgJHByb3ZpZGUuY29uc3RhbnQoJ0ZFRURfVFlQRScsIGZlZWRUeXBlKTtcbiAgICAkcHJvdmlkZS5jb25zdGFudCgnTUFSS19SRUFEX1RJTUVPVVQnLCAwLjUpO1xuICAgICRwcm92aWRlLmNvbnN0YW50KCdTQ1JPTExfVElNRU9VVCcsIDAuMSk7XG5cbiAgICAvLyBtYWtlIHN1cmUgdGhhdCB0aGUgQ1NSRiBoZWFkZXIgaXMgb25seSBzZW50IHRvIHRoZSBvd25DbG91ZCBkb21haW5cbiAgICAkcHJvdmlkZS5mYWN0b3J5KCdDU1JGSW50ZXJjZXB0b3InLCBbXCIkcVwiLCBcIkJBU0VfVVJMXCIsIFwiJHdpbmRvd1wiLCBmdW5jdGlvbiAoJHEsIEJBU0VfVVJMLCAkd2luZG93KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXF1ZXN0OiBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRvbWFpbiA9XG4gICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgkd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKVswXTtcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlnLnVybC5pbmRleE9mKEJBU0VfVVJMKSA9PT0gMCB8fFxuICAgICAgICAgICAgICAgICAgICBjb25maWcudXJsLmluZGV4T2YoZG9tYWluKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAvKmpzaGludCBjYW1lbGNhc2U6IGZhbHNlICovXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzLnJlcXVlc3R0b2tlbiA9IG9jX3JlcXVlc3R0b2tlbjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlnIHx8ICRxLndoZW4oY29uZmlnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XSk7XG4gICAgdmFyIGVycm9yTWVzc2FnZXMgPSB7XG4gICAgICAgIDA6IHQoJ25ld3MnLCAnUmVxdWVzdCBmYWlsZWQsIG5ldHdvcmsgY29ubmVjdGlvbiB1bmF2YWlsYWJsZSEnKSxcbiAgICAgICAgNDAxOiB0KCduZXdzJywgJ1JlcXVlc3QgdW5hdXRob3JpemVkLiBBcmUgeW91IGxvZ2dlZCBpbj8nKSxcbiAgICAgICAgNDAzOiB0KCduZXdzJywgJ1JlcXVlc3QgZm9yYmlkZGVuLiBBcmUgeW91IGFuIGFkbWluPycpLFxuICAgICAgICA0MTI6IHQoJ25ld3MnLCAnVG9rZW4gZXhwaXJlZCBvciBhcHAgbm90IGVuYWJsZWQhIFJlbG9hZCB0aGUgcGFnZSEnKSxcbiAgICAgICAgNTAwOiB0KCduZXdzJywgJ0ludGVybmFsIHNlcnZlciBlcnJvciEgUGxlYXNlIGNoZWNrIHlvdXIgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICdkYXRhL293bmNsb3VkLmxvZyBmaWxlIGZvciBhZGRpdGlvbmFsICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAnaW5mb3JtYXRpb24hJyksXG4gICAgICAgIDUwMzogdCgnbmV3cycsICdSZXF1ZXN0IGZhaWxlZCwgb3duQ2xvdWQgaXMgaW4gY3VycmVudGx5ICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAnaW4gbWFpbnRlbmFuY2UgbW9kZSEnKSxcbiAgICB9O1xuICAgICRwcm92aWRlLmZhY3RvcnkoJ0Nvbm5lY3Rpb25FcnJvckludGVyY2VwdG9yJywgW1wiJHFcIiwgXCIkdGltZW91dFwiLCBmdW5jdGlvbiAoJHEsICR0aW1lb3V0KSB7XG4gICAgICAgIHZhciB0aW1lcjtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3BvbnNlRXJyb3I6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIC8vIHN0YXR1cyAwIGlzIGEgbmV0d29yayBlcnJvclxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgaW4gZXJyb3JNZXNzYWdlcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGltZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aW1lb3V0LmNhbmNlbCh0aW1lcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgT0MuTm90aWZpY2F0aW9uLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgT0MuTm90aWZpY2F0aW9uLnNob3dIdG1sKGVycm9yTWVzc2FnZXNbcmVzcG9uc2Uuc3RhdHVzXSk7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVyID0gJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgT0MuTm90aWZpY2F0aW9uLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgNTAwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1dKTtcbiAgICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKCdDU1JGSW50ZXJjZXB0b3InKTtcbiAgICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKCdDb25uZWN0aW9uRXJyb3JJbnRlcmNlcHRvcicpO1xuXG4gICAgLy8gcm91dGluZ1xuICAgIHZhciBnZXRJdGVtUmVzb2x2ZSA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAvLyByZXF1ZXN0IHRvIGl0ZW1zIGFsc28gcmV0dXJucyBmZWVkc1xuICAgICAgICAgICAgZGF0YTogLyogQG5nSW5qZWN0ICovIFtcIiRodHRwXCIsIFwiJHJvdXRlXCIsIFwiJHFcIiwgXCIkbG9jYXRpb25cIiwgXCJCQVNFX1VSTFwiLCBcIklURU1fQkFUQ0hfU0laRVwiLCBcIkZFRURfVFlQRVwiLCBcIlNldHRpbmdzUmVzb3VyY2VcIiwgXCJGZWVkUmVzb3VyY2VcIiwgZnVuY3Rpb24gKFxuICAgICAgICAgICAgJGh0dHAsICRyb3V0ZSwgJHEsICRsb2NhdGlvbiwgQkFTRV9VUkwsIElURU1fQkFUQ0hfU0laRSwgRkVFRF9UWVBFLFxuICAgICAgICAgICAgU2V0dGluZ3NSZXNvdXJjZSwgRmVlZFJlc291cmNlKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgc2hvd0FsbCA9IFNldHRpbmdzUmVzb3VyY2UuZ2V0KCdzaG93QWxsJyk7XG4gICAgICAgICAgICAgICAgdmFyIG9sZGVzdEZpcnN0ID0gU2V0dGluZ3NSZXNvdXJjZS5nZXQoJ29sZGVzdEZpcnN0Jyk7XG4gICAgICAgICAgICAgICAgdmFyIHNlYXJjaCA9ICRsb2NhdGlvbi5zZWFyY2goKS5zZWFyY2ggfHwgJyc7XG5cbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhvc2UgdHdvIHZhbHVlcyBhcmUgbnVsbCBpdCBtZWFucyB3ZSBkaWQgbm90IHJlY2VpdmVcbiAgICAgICAgICAgICAgICAvLyB0aGUgc2V0dGluZ3MgcmVxdWVzdCBmcm9tIHRoZSBzZXJ2ZXIgc28gZG9udCBxdWVyeSB0aGUgc2VydmVyXG4gICAgICAgICAgICAgICAgaWYgKHNob3dBbGwgPT09IG51bGwgfHwgb2xkZXN0Rmlyc3QgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSh7fSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtZXRlcnMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGltaXQ6IElURU1fQkFUQ0hfU0laRSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dBbGw6IHNob3dBbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRlc3RGaXJzdDogb2xkZXN0Rmlyc3QsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2g6IHNlYXJjaFxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICgkcm91dGUuY3VycmVudCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm91dGUuY3VycmVudC5wYXJhbXMgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvdXRlLmN1cnJlbnQucGFyYW1zLmlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMuaWQgPSAkcm91dGUuY3VycmVudC5wYXJhbXMuaWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiBhIGN1c3RvbSBvcmRlcmluZyBpcyBzZXRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09IEZFRURfVFlQRS5GRUVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmVlZCA9IEZlZWRSZXNvdXJjZS5nZXRCeUlkKHBhcmFtZXRlcnMuaWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBvbiBpbnRpYWwgbG9hZCwgdGhlIGZlZWQgb3JkZXJpbmcgaXMgdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmVlZCA9PT0gdW5kZWZpbmVkIHx8IGZlZWQub3JkZXJpbmcgPT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLm9sZGVzdEZpcnN0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZlZWQub3JkZXJpbmcgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLm9sZGVzdEZpcnN0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICRodHRwKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogIEJBU0VfVVJMICsgJy9pdGVtcycsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiBwYXJhbWV0ZXJzXG4gICAgICAgICAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICAgICAgfV1cbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgdmFyIGdldEV4cGxvcmVSZXNvbHZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2l0ZXM6IC8qIEBuZ0luamVjdCAqLyBbXCIkaHR0cFwiLCBcIiRxXCIsIFwiQkFTRV9VUkxcIiwgXCIkbG9jYXRpb25cIiwgXCJQdWJsaXNoZXJcIiwgXCJTZXR0aW5nc1Jlc291cmNlXCIsIGZ1bmN0aW9uIChcbiAgICAgICAgICAgICRodHRwLCAkcSwgQkFTRV9VUkwsICRsb2NhdGlvbiwgUHVibGlzaGVyLCBTZXR0aW5nc1Jlc291cmNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICAgICAgICAgIC8vIGFsd2F5cyB1c2UgdGhlIGNvZGUgZnJvbSB0aGUgdXJsXG4gICAgICAgICAgICAgICAgdmFyIGxhbmd1YWdlID0gJGxvY2F0aW9uLnNlYXJjaCgpLmxhbmc7XG4gICAgICAgICAgICAgICAgaWYgKCFsYW5ndWFnZSkge1xuICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZSA9IFNldHRpbmdzUmVzb3VyY2UuZ2V0KCdsYW5ndWFnZScpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRodHRwLmdldChCQVNFX1VSTCArICcvc2V0dGluZ3MnKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIFB1Ymxpc2hlci5wdWJsaXNoQWxsKGRhdGEpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGdldCB1cmwgYW5kIHN0cmlwIHRyYWlsaW5nIHNsYXNoZXNcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IFNldHRpbmdzUmVzb3VyY2UuZ2V0KCdleHBsb3JlVXJsJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXC8rJC8sICcnKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgZXhwbG9yZVVybCA9IHVybCArICcvZmVlZHMuJyArIGxhbmd1YWdlICsgJy5qc29uJztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlZmF1bHRFeHBsb3JlVXJsID0gdXJsICsgJy9mZWVkcy5lbi5qc29uJztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRodHRwXG4gICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KGV4cGxvcmVVcmwpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoZGVmYXVsdEV4cGxvcmVVcmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZGF0YS5kYXRhKTtcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgICAgICB9XVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICAkcm91dGVQcm92aWRlclxuICAgICAgICAud2hlbignL2l0ZW1zJywge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0NvbnRlbnRDb250cm9sbGVyIGFzIENvbnRlbnQnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb250ZW50Lmh0bWwnLFxuICAgICAgICAgICAgcmVzb2x2ZTogZ2V0SXRlbVJlc29sdmUoZmVlZFR5cGUuU1VCU0NSSVBUSU9OUyksXG4gICAgICAgICAgICB0eXBlOiBmZWVkVHlwZS5TVUJTQ1JJUFRJT05TXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvaXRlbXMvc3RhcnJlZCcsIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdDb250ZW50Q29udHJvbGxlciBhcyBDb250ZW50JyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29udGVudC5odG1sJyxcbiAgICAgICAgICAgIHJlc29sdmU6IGdldEl0ZW1SZXNvbHZlKGZlZWRUeXBlLlNUQVJSRUQpLFxuICAgICAgICAgICAgdHlwZTogZmVlZFR5cGUuU1RBUlJFRFxuICAgICAgICB9KVxuICAgICAgICAud2hlbignL2l0ZW1zL2ZlZWRzLzppZCcsIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdDb250ZW50Q29udHJvbGxlciBhcyBDb250ZW50JyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29udGVudC5odG1sJyxcbiAgICAgICAgICAgIHJlc29sdmU6IGdldEl0ZW1SZXNvbHZlKGZlZWRUeXBlLkZFRUQpLFxuICAgICAgICAgICAgdHlwZTogZmVlZFR5cGUuRkVFRFxuICAgICAgICB9KVxuICAgICAgICAud2hlbignL2l0ZW1zL2ZvbGRlcnMvOmlkJywge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0NvbnRlbnRDb250cm9sbGVyIGFzIENvbnRlbnQnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb250ZW50Lmh0bWwnLFxuICAgICAgICAgICAgcmVzb2x2ZTogZ2V0SXRlbVJlc29sdmUoZmVlZFR5cGUuRk9MREVSKSxcbiAgICAgICAgICAgIHR5cGU6IGZlZWRUeXBlLkZPTERFUlxuICAgICAgICB9KS53aGVuKCcvZXhwbG9yZScsIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdFeHBsb3JlQ29udHJvbGxlciBhcyBFeHBsb3JlJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnZXhwbG9yZS5odG1sJyxcbiAgICAgICAgICAgIHJlc29sdmU6IGdldEV4cGxvcmVSZXNvbHZlKCksXG4gICAgICAgICAgICB0eXBlOiBmZWVkVHlwZS5FWFBMT1JFXG4gICAgICAgIH0pLndoZW4oJy9zaG9ydGN1dHMnLCB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3Nob3J0Y3V0cy5odG1sJyxcbiAgICAgICAgICAgIHR5cGU6IC0xXG4gICAgICAgIH0pO1xuXG59XSk7XG4iLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAucnVuKFtcIiRyb290U2NvcGVcIiwgXCIkbG9jYXRpb25cIiwgXCIkaHR0cFwiLCBcIiRxXCIsIFwiJGludGVydmFsXCIsIFwiJHJvdXRlXCIsIFwiTG9hZGluZ1wiLCBcIkl0ZW1SZXNvdXJjZVwiLCBcIkZlZWRSZXNvdXJjZVwiLCBcIkZvbGRlclJlc291cmNlXCIsIFwiU2V0dGluZ3NSZXNvdXJjZVwiLCBcIlB1Ymxpc2hlclwiLCBcIkJBU0VfVVJMXCIsIFwiRkVFRF9UWVBFXCIsIFwiUkVGUkVTSF9SQVRFXCIsIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkbG9jYXRpb24sICRodHRwLCAkcSwgJGludGVydmFsLCAkcm91dGUsIExvYWRpbmcsXG4gICAgICAgICBJdGVtUmVzb3VyY2UsIEZlZWRSZXNvdXJjZSwgRm9sZGVyUmVzb3VyY2UsIFNldHRpbmdzUmVzb3VyY2UsXG4gICAgICAgICAgUHVibGlzaGVyLCBCQVNFX1VSTCwgRkVFRF9UWVBFLCBSRUZSRVNIX1JBVEUpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICAvLyBzaG93IExvYWRpbmcgc2NyZWVuXG4gICAgTG9hZGluZy5zZXRMb2FkaW5nKCdnbG9iYWwnLCB0cnVlKTtcblxuICAgIC8vIGxpc3RlbiB0byBrZXlzIGluIHJldHVybmVkIHF1ZXJpZXMgdG8gYXV0b21hdGljYWxseSBkaXN0cmlidXRlIHRoZVxuICAgIC8vIGluY29taW5nIHZhbHVlcyB0byBtb2RlbHNcbiAgICBQdWJsaXNoZXIuc3Vic2NyaWJlKEl0ZW1SZXNvdXJjZSkudG9DaGFubmVscyhbJ2l0ZW1zJywgJ25ld2VzdEl0ZW1JZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzdGFycmVkJ10pO1xuICAgIFB1Ymxpc2hlci5zdWJzY3JpYmUoRm9sZGVyUmVzb3VyY2UpLnRvQ2hhbm5lbHMoWydmb2xkZXJzJ10pO1xuICAgIFB1Ymxpc2hlci5zdWJzY3JpYmUoRmVlZFJlc291cmNlKS50b0NoYW5uZWxzKFsnZmVlZHMnXSk7XG4gICAgUHVibGlzaGVyLnN1YnNjcmliZShTZXR0aW5nc1Jlc291cmNlKS50b0NoYW5uZWxzKFsnc2V0dGluZ3MnXSk7XG5cbiAgICAvLyBsb2FkIGZlZWRzLCBzZXR0aW5ncyBhbmQgbGFzdCByZWFkIGZlZWRcbiAgICB2YXIgc2V0dGluZ3NEZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgJGh0dHAuZ2V0KEJBU0VfVVJMICsgJy9zZXR0aW5ncycpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgUHVibGlzaGVyLnB1Ymxpc2hBbGwoZGF0YSk7XG4gICAgICAgIHNldHRpbmdzRGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgIH0pO1xuXG4gICAgdmFyIGFjdGl2ZUZlZWREZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgdmFyIHBhdGggPSAkbG9jYXRpb24ucGF0aCgpO1xuICAgICRodHRwLmdldChCQVNFX1VSTCArICcvZmVlZHMvYWN0aXZlJykuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICB2YXIgdXJsO1xuXG4gICAgICAgIHN3aXRjaCAoZGF0YS5hY3RpdmVGZWVkLnR5cGUpIHtcblxuICAgICAgICBjYXNlIEZFRURfVFlQRS5GRUVEOlxuICAgICAgICAgICAgdXJsID0gJy9pdGVtcy9mZWVkcy8nICsgZGF0YS5hY3RpdmVGZWVkLmlkO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBGRUVEX1RZUEUuRk9MREVSOlxuICAgICAgICAgICAgdXJsID0gJy9pdGVtcy9mb2xkZXJzLycgKyBkYXRhLmFjdGl2ZUZlZWQuaWQ7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIEZFRURfVFlQRS5TVEFSUkVEOlxuICAgICAgICAgICAgdXJsID0gJy9pdGVtcy9zdGFycmVkJztcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgRkVFRF9UWVBFLkVYUExPUkU6XG4gICAgICAgICAgICB1cmwgPSAnL2V4cGxvcmUnO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHVybCA9ICcvaXRlbXMnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gb25seSByZWRpcmVjdCBpZiB1cmwgaXMgZW1wdHkgb3IgZmF1bHR5XG4gICAgICAgIGlmICghL15cXC9pdGVtcyhcXC8oc3RhcnJlZHxleHBsb3JlfGZlZWRzXFwvXFxkK3xmb2xkZXJzXFwvXFxkKykpP1xcLz8kL1xuICAgICAgICAgICAgLnRlc3QocGF0aCkpIHtcbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKHVybCk7XG4gICAgICAgIH1cblxuICAgICAgICBhY3RpdmVGZWVkRGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgIH0pO1xuXG4gICAgdmFyIGZlZWREZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgdmFyIGZlZWRzO1xuICAgICRodHRwLmdldChCQVNFX1VSTCArICcvZmVlZHMnKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGZlZWRzID0gZGF0YTtcbiAgICAgICAgZmVlZERlZmVycmVkLnJlc29sdmUoKTtcbiAgICB9KTtcblxuICAgIHZhciBmb2xkZXJEZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgdmFyIGZvbGRlcnM7XG4gICAgJGh0dHAuZ2V0KEJBU0VfVVJMICsgJy9mb2xkZXJzJykuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBmb2xkZXJzID0gZGF0YTtcbiAgICAgICAgZm9sZGVyRGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgIH0pO1xuXG4gICAgJHEuYWxsKFtcbiAgICAgICAgZmVlZERlZmVycmVkLnByb21pc2UsXG4gICAgICAgIGZvbGRlckRlZmVycmVkLnByb21pc2VcbiAgICBdKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gZmlyc3QgcHVibGlzaCBmZWVkcyB0byBjb3JyZWN0bHkgdXBkYXRlIHRoZSBmb2xkZXIgcmVzb3VyY2UgdW5yZWFkXG4gICAgICAgIC8vIGNhY2hlXG4gICAgICAgIFB1Ymxpc2hlci5wdWJsaXNoQWxsKGZlZWRzKTtcbiAgICAgICAgUHVibGlzaGVyLnB1Ymxpc2hBbGwoZm9sZGVycyk7XG4gICAgICAgIGlmIChmZWVkcy5mZWVkcy5sZW5ndGggPT09IDAgJiYgZm9sZGVycy5mb2xkZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9leHBsb3JlJyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIGRpc2FibGUgbG9hZGluZyBpZiBhbGwgaW5pdGlhbCByZXF1ZXN0cyBmaW5pc2hlZFxuICAgICRxLmFsbChcbiAgICAgICAgW1xuICAgICAgICAgICAgc2V0dGluZ3NEZWZlcnJlZC5wcm9taXNlLFxuICAgICAgICAgICAgYWN0aXZlRmVlZERlZmVycmVkLnByb21pc2UsXG4gICAgICAgICAgICBmZWVkRGVmZXJyZWQucHJvbWlzZSxcbiAgICAgICAgICAgIGZvbGRlckRlZmVycmVkLnByb21pc2VcbiAgICAgICAgXVxuICAgIClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHJvdXRlLnJlbG9hZCgpO1xuICAgICAgICAgICAgTG9hZGluZy5zZXRMb2FkaW5nKCdnbG9iYWwnLCBmYWxzZSk7XG4gICAgICAgIH0pO1xuXG4gICAgLy8gcmVmcmVzaCBmZWVkcyBhbmQgZm9sZGVyc1xuICAgICRpbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICRodHRwLmdldChCQVNFX1VSTCArICcvZmVlZHMnKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBQdWJsaXNoZXIucHVibGlzaEFsbChkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICAgICRodHRwLmdldChCQVNFX1VSTCArICcvZm9sZGVycycpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIFB1Ymxpc2hlci5wdWJsaXNoQWxsKGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9LCBSRUZSRVNIX1JBVEUgKiAxMDAwKTtcblxuXG4gICAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN0YXJ0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICBMb2FkaW5nLnNldExvYWRpbmcoJ2NvbnRlbnQnLCB0cnVlKTtcbiAgICB9KTtcblxuICAgICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBMb2FkaW5nLnNldExvYWRpbmcoJ2NvbnRlbnQnLCBmYWxzZSk7XG4gICAgfSk7XG5cbiAgICAvLyBpbiBjYXNlIG9mIHdyb25nIGlkIGV0YyBzaG93IGFsbCBpdGVtc1xuICAgICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VFcnJvcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9pdGVtcycpO1xuICAgIH0pO1xuXG59XSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmNvbnRyb2xsZXIoJ0FwcENvbnRyb2xsZXInLFxuW1wiTG9hZGluZ1wiLCBcIkZlZWRSZXNvdXJjZVwiLCBcIkZvbGRlclJlc291cmNlXCIsIGZ1bmN0aW9uIChMb2FkaW5nLCBGZWVkUmVzb3VyY2UsIEZvbGRlclJlc291cmNlKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdGhpcy5sb2FkaW5nID0gTG9hZGluZztcblxuICAgIHRoaXMuaXNGaXJzdFJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIEZlZWRSZXNvdXJjZS5zaXplKCkgPT09IDAgJiYgRm9sZGVyUmVzb3VyY2Uuc2l6ZSgpID09PSAwO1xuICAgIH07XG5cbiAgICB0aGlzLnBsYXkgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICB0aGlzLnBsYXlpbmdJdGVtID0gaXRlbTtcbiAgICB9O1xufV0pO1xuIiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmNvbnRyb2xsZXIoJ0NvbnRlbnRDb250cm9sbGVyJyxcbltcIlB1Ymxpc2hlclwiLCBcIkZlZWRSZXNvdXJjZVwiLCBcIkl0ZW1SZXNvdXJjZVwiLCBcIlNldHRpbmdzUmVzb3VyY2VcIiwgXCJkYXRhXCIsIFwiJHJvdXRlXCIsIFwiJHJvdXRlUGFyYW1zXCIsIFwiJGxvY2F0aW9uXCIsIFwiRkVFRF9UWVBFXCIsIFwiSVRFTV9BVVRPX1BBR0VfU0laRVwiLCBcIkxvYWRpbmdcIiwgZnVuY3Rpb24gKFB1Ymxpc2hlciwgRmVlZFJlc291cmNlLCBJdGVtUmVzb3VyY2UsIFNldHRpbmdzUmVzb3VyY2UsIGRhdGEsXG4gICAgJHJvdXRlLCAkcm91dGVQYXJhbXMsICRsb2NhdGlvbiwgRkVFRF9UWVBFLCBJVEVNX0FVVE9fUEFHRV9TSVpFLCBMb2FkaW5nKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgSXRlbVJlc291cmNlLmNsZWFyKCk7XG5cbiAgICAvLyBkaXN0cmlidXRlIGRhdGEgdG8gbW9kZWxzIGJhc2VkIG9uIGtleVxuICAgIFB1Ymxpc2hlci5wdWJsaXNoQWxsKGRhdGEpO1xuXG5cbiAgICB0aGlzLmlzQXV0b1BhZ2luZ0VuYWJsZWQgPSB0cnVlO1xuXG4gICAgLy8gdGhlIGludGVyZmFjZSBzaG91bGQgc2hvdyBhIGhpbnQgaWYgdGhlcmUgYXJlIG5vdCBlbm91Z2ggaXRlbXMgc2VudCBzb1xuICAgIC8vIGl0J3MgYXNzdW1lZCB0aGF0IHRoZXJlcyBub3RoaW5nIHRvIGF1dHBhZ2VcbiAgICBpZiAoSXRlbVJlc291cmNlLnNpemUoKSA+PSBJVEVNX0FVVE9fUEFHRV9TSVpFKSB7XG4gICAgICAgIHRoaXMuaXNOb3RoaW5nTW9yZVRvQXV0b1BhZ2UgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmlzTm90aGluZ01vcmVUb0F1dG9QYWdlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB0aGlzLmdldEl0ZW1zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gSXRlbVJlc291cmNlLmdldEFsbCgpO1xuICAgIH07XG5cbiAgICB0aGlzLnRvZ2dsZVN0YXIgPSBmdW5jdGlvbiAoaXRlbUlkKSB7XG4gICAgICAgIEl0ZW1SZXNvdXJjZS50b2dnbGVTdGFyKGl0ZW1JZCk7XG4gICAgfTtcblxuICAgIHRoaXMudG9nZ2xlSXRlbSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIC8vIFRPRE86IHVuaXR0ZXN0XG4gICAgICAgIGlmICh0aGlzLmlzQ29tcGFjdFZpZXcoKSkge1xuICAgICAgICAgICAgaXRlbS5zaG93ID0gIWl0ZW0uc2hvdztcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmlzU2hvd0FsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFNldHRpbmdzUmVzb3VyY2UuZ2V0KCdzaG93QWxsJyk7XG4gICAgfTtcblxuICAgIHRoaXMubWFya1JlYWQgPSBmdW5jdGlvbiAoaXRlbUlkKSB7XG4gICAgICAgIHZhciBpdGVtID0gSXRlbVJlc291cmNlLmdldChpdGVtSWQpO1xuXG4gICAgICAgIGlmICghaXRlbS5rZWVwVW5yZWFkICYmIGl0ZW0udW5yZWFkID09PSB0cnVlKSB7XG4gICAgICAgICAgICBJdGVtUmVzb3VyY2UubWFya0l0ZW1SZWFkKGl0ZW1JZCk7XG4gICAgICAgICAgICBGZWVkUmVzb3VyY2UubWFya0l0ZW1PZkZlZWRSZWFkKGl0ZW0uZmVlZElkKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmdldEZlZWQgPSBmdW5jdGlvbiAoZmVlZElkKSB7XG4gICAgICAgIHJldHVybiBGZWVkUmVzb3VyY2UuZ2V0QnlJZChmZWVkSWQpO1xuICAgIH07XG5cbiAgICB0aGlzLnRvZ2dsZUtlZXBVbnJlYWQgPSBmdW5jdGlvbiAoaXRlbUlkKSB7XG4gICAgICAgIHZhciBpdGVtID0gSXRlbVJlc291cmNlLmdldChpdGVtSWQpO1xuICAgICAgICBpZiAoIWl0ZW0udW5yZWFkKSB7XG4gICAgICAgICAgICBGZWVkUmVzb3VyY2UubWFya0l0ZW1PZkZlZWRVbnJlYWQoaXRlbS5mZWVkSWQpO1xuICAgICAgICAgICAgSXRlbVJlc291cmNlLm1hcmtJdGVtUmVhZChpdGVtSWQsIGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGl0ZW0ua2VlcFVucmVhZCA9ICFpdGVtLmtlZXBVbnJlYWQ7XG4gICAgfTtcblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZ2V0T3JkZXJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvcmRlcmluZyA9IFNldHRpbmdzUmVzb3VyY2UuZ2V0KCdvbGRlc3RGaXJzdCcpO1xuXG4gICAgICAgIGlmIChzZWxmLmlzRmVlZCgpKSB7XG4gICAgICAgICAgICB2YXIgZmVlZCA9IEZlZWRSZXNvdXJjZS5nZXRCeUlkKCRyb3V0ZVBhcmFtcy5pZCk7XG4gICAgICAgICAgICBpZiAoZmVlZCAmJiBmZWVkLm9yZGVyaW5nID09PSAxKSB7XG4gICAgICAgICAgICAgICAgb3JkZXJpbmcgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChmZWVkICYmIGZlZWQub3JkZXJpbmcgPT09IDIpIHtcbiAgICAgICAgICAgICAgICBvcmRlcmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG9yZGVyaW5nO1xuICAgIH07XG5cbiAgICB0aGlzLm9yZGVyQnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChnZXRPcmRlcmluZygpKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2lkJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAnLWlkJztcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmlzQ29tcGFjdFZpZXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBTZXR0aW5nc1Jlc291cmNlLmdldCgnY29tcGFjdCcpO1xuICAgIH07XG5cbiAgICB0aGlzLmlzQ29tcGFjdEV4cGFuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFNldHRpbmdzUmVzb3VyY2UuZ2V0KCdjb21wYWN0RXhwYW5kJyk7XG4gICAgfTtcblxuICAgIHRoaXMuYXV0b1BhZ2luZ0VuYWJsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzQXV0b1BhZ2luZ0VuYWJsZWQ7XG4gICAgfTtcblxuICAgIHRoaXMubWFya1JlYWRFbmFibGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gIVNldHRpbmdzUmVzb3VyY2UuZ2V0KCdwcmV2ZW50UmVhZE9uU2Nyb2xsJyk7XG4gICAgfTtcblxuICAgIHRoaXMuc2Nyb2xsUmVhZCA9IGZ1bmN0aW9uIChpdGVtSWRzKSB7XG4gICAgICAgIHZhciBpZHMgPSBbXTtcbiAgICAgICAgdmFyIGZlZWRJZHMgPSBbXTtcblxuICAgICAgICBpdGVtSWRzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW1JZCkge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSBJdGVtUmVzb3VyY2UuZ2V0KGl0ZW1JZCk7XG4gICAgICAgICAgICBpZiAoIWl0ZW0ua2VlcFVucmVhZCkge1xuICAgICAgICAgICAgICAgIGlkcy5wdXNoKGl0ZW1JZCk7XG4gICAgICAgICAgICAgICAgZmVlZElkcy5wdXNoKGl0ZW0uZmVlZElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGlkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBGZWVkUmVzb3VyY2UubWFya0l0ZW1zT2ZGZWVkc1JlYWQoZmVlZElkcyk7XG4gICAgICAgICAgICBJdGVtUmVzb3VyY2UubWFya0l0ZW1zUmVhZChpZHMpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuaXNGZWVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJHJvdXRlLmN1cnJlbnQuJCRyb3V0ZS50eXBlID09PSBGRUVEX1RZUEUuRkVFRDtcbiAgICB9O1xuXG4gICAgdGhpcy5hdXRvUGFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNOb3RoaW5nTW9yZVRvQXV0b1BhZ2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGluIGNhc2UgYSBzdWJzZXF1ZW50IGF1dG9wYWdlIHJlcXVlc3QgY29tZXMgaW4gd2FpdCB1bnRpbFxuICAgICAgICAvLyB0aGUgY3VycmVudCBvbmUgZmluaXNoZWQgYW5kIGV4ZWN1dGUgYSByZXF1ZXN0IGltbWVkaWF0ZWx5IGFmdGVyd2FyZHNcbiAgICAgICAgaWYgKCF0aGlzLmlzQXV0b1BhZ2luZ0VuYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYXV0b1BhZ2VBZ2FpbiA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlzQXV0b1BhZ2luZ0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5hdXRvUGFnZUFnYWluID0gZmFsc2U7XG5cbiAgICAgICAgdmFyIHR5cGUgPSAkcm91dGUuY3VycmVudC4kJHJvdXRlLnR5cGU7XG4gICAgICAgIHZhciBpZCA9ICRyb3V0ZVBhcmFtcy5pZDtcbiAgICAgICAgdmFyIG9sZGVzdEZpcnN0ID0gZ2V0T3JkZXJpbmcoKTtcbiAgICAgICAgdmFyIHNob3dBbGwgPSBTZXR0aW5nc1Jlc291cmNlLmdldCgnc2hvd0FsbCcpO1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBzZWFyY2ggPSAkbG9jYXRpb24uc2VhcmNoKCkuc2VhcmNoO1xuXG4gICAgICAgIExvYWRpbmcuc2V0TG9hZGluZygnYXV0b3BhZ2luZycsIHRydWUpO1xuXG4gICAgICAgIEl0ZW1SZXNvdXJjZS5hdXRvUGFnZSh0eXBlLCBpZCwgb2xkZXN0Rmlyc3QsIHNob3dBbGwsIHNlYXJjaClcbiAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIFB1Ymxpc2hlci5wdWJsaXNoQWxsKGRhdGEpO1xuXG4gICAgICAgICAgICBpZiAoZGF0YS5pdGVtcy5sZW5ndGggPj0gSVRFTV9BVVRPX1BBR0VfU0laRSkge1xuICAgICAgICAgICAgICAgIHNlbGYuaXNBdXRvUGFnaW5nRW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGYuaXNOb3RoaW5nTW9yZVRvQXV0b1BhZ2UgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc2VsZi5pc0F1dG9QYWdpbmdFbmFibGVkICYmIHNlbGYuYXV0b1BhZ2VBZ2Fpbikge1xuICAgICAgICAgICAgICAgIHNlbGYuYXV0b1BhZ2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5pc0F1dG9QYWdpbmdFbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBMb2FkaW5nLnNldExvYWRpbmcoJ2F1dG9wYWdpbmcnLCBmYWxzZSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0aGlzLmdldFJlbGF0aXZlRGF0ZSA9IGZ1bmN0aW9uICh0aW1lc3RhbXApIHtcbiAgICAgICAgaWYgKHRpbWVzdGFtcCAhPT0gdW5kZWZpbmVkICYmIHRpbWVzdGFtcCAhPT0gJycpIHtcbiAgICAgICAgICAgIHZhciBsYW5ndWFnZUNvZGUgPSBTZXR0aW5nc1Jlc291cmNlLmdldCgnbGFuZ3VhZ2UnKTtcbiAgICAgICAgICAgIHZhciBkYXRlID1cbiAgICAgICAgICAgICAgICBtb21lbnQudW5peCh0aW1lc3RhbXApLmxvY2FsZShsYW5ndWFnZUNvZGUpLmZyb21Ob3coKSArICcnO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkcm91dGUucmVsb2FkKCk7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0TWVkaWFUeXBlID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgaWYgKHR5cGUgJiYgdHlwZS5pbmRleE9mKCdhdWRpbycpID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2F1ZGlvJztcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlICYmIHR5cGUuaW5kZXhPZigndmlkZW8nKSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuICd2aWRlbyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfTtcblxufV0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5jb250cm9sbGVyKCdFeHBsb3JlQ29udHJvbGxlcicsXG5bXCJzaXRlc1wiLCBcIiRyb290U2NvcGVcIiwgXCJGZWVkUmVzb3VyY2VcIiwgXCJTZXR0aW5nc1Jlc291cmNlXCIsIFwiJGxvY2F0aW9uXCIsIGZ1bmN0aW9uIChzaXRlcywgJHJvb3RTY29wZSwgRmVlZFJlc291cmNlLCBTZXR0aW5nc1Jlc291cmNlLCAkbG9jYXRpb24pIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHRoaXMuc2l0ZXMgPSBzaXRlcztcblx0Ly8gam9pbiBhbGwgc2l0ZXNcblx0dGhpcy5mZWVkcyA9IE9iamVjdC5rZXlzKHNpdGVzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHRcdHJldHVybiBba2V5LCBzaXRlc1trZXldXTtcblx0fSkucmVkdWNlKGZ1bmN0aW9uICh4cywgeCkge1xuXHRcdHZhciBjYXRlZ29yeSA9IHhbMF07XG5cdFx0dmFyIGZlZWRMaXN0ID0geFsxXTtcblx0XHRmZWVkTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChmZWVkKSB7XG5cdFx0XHRmZWVkLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHhzLmNvbmNhdChmZWVkTGlzdCk7XG5cdH0sIFtdKTtcblxuXHR0aGlzLmZlZWRFeGlzdHMgPSBmdW5jdGlvbiAobG9jYXRpb24pIHtcblx0XHRyZXR1cm4gRmVlZFJlc291cmNlLmdldEJ5TG9jYXRpb24obG9jYXRpb24pICE9PSB1bmRlZmluZWQ7XG5cdH07XG5cblx0dGhpcy5zdWJzY3JpYmVUbyA9IGZ1bmN0aW9uIChsb2NhdGlvbikge1xuXHRcdCRyb290U2NvcGUuJGJyb2FkY2FzdCgnYWRkRmVlZCcsIGxvY2F0aW9uKTtcblx0fTtcblxuXHR0aGlzLmlzQ2F0ZWdvcnlTaG93biA9IGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0cmV0dXJuIGRhdGEuZmlsdGVyKGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cdFx0XHRcdHJldHVybiBGZWVkUmVzb3VyY2UuZ2V0QnlMb2NhdGlvbihlbGVtZW50LmZlZWQpID09PSB1bmRlZmluZWQ7XG5cdFx0XHR9KS5sZW5ndGggPiAwO1xuXHR9O1xuXG5cdHRoaXMuZ2V0U3VwcG9ydGVkTGFuZ3VhZ2VDb2RlcyA9IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gU2V0dGluZ3NSZXNvdXJjZS5nZXRTdXBwb3J0ZWRMYW5ndWFnZUNvZGVzKCk7XG5cdH07XG5cblx0dGhpcy5nZXRDdXJyZW50TGFuZ3VhZ2VDb2RlID0gZnVuY3Rpb24gKCkge1xuXHRcdHZhciBsYW5ndWFnZSA9ICRsb2NhdGlvbi5zZWFyY2goKS5sYW5nO1xuXHRcdGlmICghbGFuZ3VhZ2UpIHtcblx0XHRcdGxhbmd1YWdlID0gU2V0dGluZ3NSZXNvdXJjZS5nZXQoJ2xhbmd1YWdlJyk7XG5cdFx0fVxuXHRcdHJldHVybiBsYW5ndWFnZTtcblx0fTtcblxuXHR0aGlzLnNob3dMYW5ndWFnZSA9IGZ1bmN0aW9uIChsYW5ndWFnZUNvZGUpIHtcblx0XHQkbG9jYXRpb24udXJsKCcvZXhwbG9yZS8/bGFuZz0nICsgbGFuZ3VhZ2VDb2RlKTtcblx0fTtcblxuXHR0aGlzLnNlbGVjdGVkTGFuZ3VhZ2VDb2RlID0gdGhpcy5nZXRDdXJyZW50TGFuZ3VhZ2VDb2RlKCk7XG59XSk7XG4iLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuY29udHJvbGxlcignTmF2aWdhdGlvbkNvbnRyb2xsZXInLFxuW1wiJHJvdXRlXCIsIFwiRkVFRF9UWVBFXCIsIFwiRmVlZFJlc291cmNlXCIsIFwiRm9sZGVyUmVzb3VyY2VcIiwgXCJJdGVtUmVzb3VyY2VcIiwgXCJTZXR0aW5nc1Jlc291cmNlXCIsIFwiUHVibGlzaGVyXCIsIFwiJHJvb3RTY29wZVwiLCBcIiRsb2NhdGlvblwiLCBcIiRxXCIsIGZ1bmN0aW9uICgkcm91dGUsIEZFRURfVFlQRSwgRmVlZFJlc291cmNlLCBGb2xkZXJSZXNvdXJjZSwgSXRlbVJlc291cmNlLFxuICAgIFNldHRpbmdzUmVzb3VyY2UsIFB1Ymxpc2hlciwgJHJvb3RTY29wZSwgJGxvY2F0aW9uLCAkcSkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHRoaXMuZmVlZEVycm9yID0gJyc7XG4gICAgdGhpcy5zaG93TmV3Rm9sZGVyID0gZmFsc2U7XG4gICAgdGhpcy5yZW5hbWluZ0ZvbGRlciA9IGZhbHNlO1xuICAgIHRoaXMuYWRkaW5nRmVlZCA9IGZhbHNlO1xuICAgIHRoaXMuYWRkaW5nRm9sZGVyID0gZmFsc2U7XG4gICAgdGhpcy5mb2xkZXJFcnJvciA9ICcnO1xuICAgIHRoaXMucmVuYW1lRXJyb3IgPSAnJztcbiAgICB0aGlzLmZlZWQgPSB7fTtcblxuICAgIHZhciBnZXRSb3V0ZUlkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gcGFyc2VJbnQoJHJvdXRlLmN1cnJlbnQucGFyYW1zLmlkLCAxMCk7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0TGFuZ3VhZ2VDb2RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gU2V0dGluZ3NSZXNvdXJjZS5nZXQoJ2xhbmd1YWdlJyk7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0RmVlZHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBGZWVkUmVzb3VyY2UuZ2V0QWxsKCk7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0Rm9sZGVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIEZvbGRlclJlc291cmNlLmdldEFsbCgpO1xuICAgIH07XG5cbiAgICB0aGlzLm1hcmtGb2xkZXJSZWFkID0gZnVuY3Rpb24gKGZvbGRlcklkKSB7XG4gICAgICAgIEZlZWRSZXNvdXJjZS5tYXJrRm9sZGVyUmVhZChmb2xkZXJJZCk7XG5cbiAgICAgICAgRmVlZFJlc291cmNlLmdldEJ5Rm9sZGVySWQoZm9sZGVySWQpLmZvckVhY2goZnVuY3Rpb24gKGZlZWQpIHtcbiAgICAgICAgICAgIEl0ZW1SZXNvdXJjZS5tYXJrRmVlZFJlYWQoZmVlZC5pZCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0aGlzLm1hcmtGZWVkUmVhZCA9IGZ1bmN0aW9uIChmZWVkSWQpIHtcbiAgICAgICAgSXRlbVJlc291cmNlLm1hcmtGZWVkUmVhZChmZWVkSWQpO1xuICAgICAgICBGZWVkUmVzb3VyY2UubWFya0ZlZWRSZWFkKGZlZWRJZCk7XG4gICAgfTtcblxuICAgIHRoaXMubWFya1JlYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIEl0ZW1SZXNvdXJjZS5tYXJrUmVhZCgpO1xuICAgICAgICBGZWVkUmVzb3VyY2UubWFya1JlYWQoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5pc1Nob3dBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBTZXR0aW5nc1Jlc291cmNlLmdldCgnc2hvd0FsbCcpO1xuICAgIH07XG5cbiAgICB0aGlzLmdldEZlZWRzT2ZGb2xkZXIgPSBmdW5jdGlvbiAoZm9sZGVySWQpIHtcbiAgICAgICAgcmV0dXJuIEZlZWRSZXNvdXJjZS5nZXRCeUZvbGRlcklkKGZvbGRlcklkKTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRVbnJlYWRDb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIEZlZWRSZXNvdXJjZS5nZXRVbnJlYWRDb3VudCgpO1xuICAgIH07XG5cbiAgICB0aGlzLmlzVW5yZWFkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRVbnJlYWRDb3VudCgpID4gMDtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRGZWVkVW5yZWFkQ291bnQgPSBmdW5jdGlvbiAoZmVlZElkKSB7XG4gICAgICAgIHZhciBmZWVkID0gRmVlZFJlc291cmNlLmdldEJ5SWQoZmVlZElkKTtcbiAgICAgICAgaWYgKGZlZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZlZWQudW5yZWFkQ291bnQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmlzRmVlZFVucmVhZCA9IGZ1bmN0aW9uIChmZWVkSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RmVlZFVucmVhZENvdW50KGZlZWRJZCkgPiAwO1xuICAgIH07XG5cbiAgICB0aGlzLmdldEZvbGRlclVucmVhZENvdW50PSBmdW5jdGlvbiAoZm9sZGVySWQpIHtcbiAgICAgICAgcmV0dXJuIEZlZWRSZXNvdXJjZS5nZXRGb2xkZXJVbnJlYWRDb3VudChmb2xkZXJJZCk7XG4gICAgfTtcblxuICAgIHRoaXMuaXNGb2xkZXJVbnJlYWQgPSBmdW5jdGlvbiAoZm9sZGVySWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rm9sZGVyVW5yZWFkQ291bnQoZm9sZGVySWQpID4gMDtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRTdGFycmVkQ291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBJdGVtUmVzb3VyY2UuZ2V0U3RhcnJlZENvdW50KCk7XG4gICAgfTtcblxuICAgIHRoaXMuaXNTdGFycmVkVW5yZWFkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTdGFycmVkQ291bnQoKSA+IDA7XG4gICAgfTtcblxuICAgIHRoaXMudG9nZ2xlRm9sZGVyID0gZnVuY3Rpb24gKGZvbGRlck5hbWUpIHtcbiAgICAgICAgRm9sZGVyUmVzb3VyY2UudG9nZ2xlT3Blbihmb2xkZXJOYW1lKTtcbiAgICB9O1xuXG4gICAgdGhpcy5oYXNGZWVkcyA9IGZ1bmN0aW9uIChmb2xkZXJJZCkge1xuICAgICAgICByZXR1cm4gRmVlZFJlc291cmNlLmdldEZvbGRlclVucmVhZENvdW50KGZvbGRlcklkKSAhPT0gdW5kZWZpbmVkO1xuICAgIH07XG5cbiAgICB0aGlzLnN1YkZlZWRBY3RpdmUgPSBmdW5jdGlvbiAoZm9sZGVySWQpIHtcbiAgICAgICAgdmFyIHR5cGUgPSAkcm91dGUuY3VycmVudC4kJHJvdXRlLnR5cGU7XG5cbiAgICAgICAgaWYgKHR5cGUgPT09IEZFRURfVFlQRS5GRUVEKSB7XG4gICAgICAgICAgICB2YXIgZmVlZCA9IEZlZWRSZXNvdXJjZS5nZXRCeUlkKGdldFJvdXRlSWQoKSk7XG5cbiAgICAgICAgICAgIGlmIChmZWVkICE9PSB1bmRlZmluZWQgJiYgZmVlZC5mb2xkZXJJZCA9PT0gZm9sZGVySWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgdGhpcy5pc1N1YnNjcmlwdGlvbnNBY3RpdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAkcm91dGUuY3VycmVudCAmJlxuICAgICAgICAgICAgJHJvdXRlLmN1cnJlbnQuJCRyb3V0ZS50eXBlID09PSBGRUVEX1RZUEUuU1VCU0NSSVBUSU9OUztcbiAgICB9O1xuXG4gICAgdGhpcy5pc1N0YXJyZWRBY3RpdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAkcm91dGUuY3VycmVudCAmJlxuICAgICAgICAgICAgJHJvdXRlLmN1cnJlbnQuJCRyb3V0ZS50eXBlID09PSBGRUVEX1RZUEUuU1RBUlJFRDtcbiAgICB9O1xuXG4gICAgdGhpcy5pc0V4cGxvcmVBY3RpdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAkcm91dGUuY3VycmVudCAmJlxuICAgICAgICAgICAgJHJvdXRlLmN1cnJlbnQuJCRyb3V0ZS50eXBlID09PSBGRUVEX1RZUEUuRVhQTE9SRTtcbiAgICB9O1xuXG4gICAgdGhpcy5pc0ZvbGRlckFjdGl2ZSA9IGZ1bmN0aW9uIChmb2xkZXJJZCkge1xuICAgICAgICByZXR1cm4gJHJvdXRlLmN1cnJlbnQgJiZcbiAgICAgICAgICAgICRyb3V0ZS5jdXJyZW50LiQkcm91dGUudHlwZSA9PT0gRkVFRF9UWVBFLkZPTERFUiAmJlxuICAgICAgICAgICAgZ2V0Um91dGVJZCgpID09PSBmb2xkZXJJZDtcbiAgICB9O1xuXG4gICAgdGhpcy5pc0ZlZWRBY3RpdmUgPSBmdW5jdGlvbiAoZmVlZElkKSB7XG4gICAgICAgIHJldHVybiAkcm91dGUuY3VycmVudCAmJlxuICAgICAgICAgICAgJHJvdXRlLmN1cnJlbnQuJCRyb3V0ZS50eXBlID09PSBGRUVEX1RZUEUuRkVFRCAmJlxuICAgICAgICAgICAgZ2V0Um91dGVJZCgpID09PSBmZWVkSWQ7XG4gICAgfTtcblxuICAgIHRoaXMuZm9sZGVyTmFtZUV4aXN0cyA9IGZ1bmN0aW9uIChmb2xkZXJOYW1lKSB7XG4gICAgICAgIGZvbGRlck5hbWUgPSBmb2xkZXJOYW1lIHx8ICcnO1xuICAgICAgICByZXR1cm4gRm9sZGVyUmVzb3VyY2UuZ2V0KGZvbGRlck5hbWUudHJpbSgpKSAhPT0gdW5kZWZpbmVkO1xuICAgIH07XG5cbiAgICB0aGlzLmZlZWRVcmxFeGlzdHMgPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgIHVybCA9IHVybCB8fCAnJztcbiAgICAgICAgdXJsID0gdXJsLnRyaW0oKTtcbiAgICAgICAgcmV0dXJuIEZlZWRSZXNvdXJjZS5nZXQodXJsKSAhPT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBGZWVkUmVzb3VyY2UuZ2V0KCdodHRwOi8vJyArIHVybCkgIT09IHVuZGVmaW5lZDtcbiAgICB9O1xuXG4gICAgdGhpcy5jcmVhdGVGZWVkID0gZnVuY3Rpb24gKGZlZWQpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB0aGlzLnNob3dOZXdGb2xkZXIgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5hZGRpbmdGZWVkID0gdHJ1ZTtcblxuICAgICAgICB2YXIgbmV3Rm9sZGVyID0gZmVlZC5uZXdGb2xkZXI7XG4gICAgICAgIHZhciBleGlzdGluZ0ZvbGRlciA9IGZlZWQuZXhpc3RpbmdGb2xkZXIgfHwge2lkOiAwfTtcblxuICAgICAgICAvLyB3ZSBkb250IG5lZWQgdG8gY3JlYXRlIGEgbmV3IGZvbGRlclxuICAgICAgICBpZiAobmV3Rm9sZGVyID09PSB1bmRlZmluZWQgfHwgbmV3Rm9sZGVyID09PSAnJykge1xuICAgICAgICAgICAgLy8gdGhpcyBpcyBzZXQgdG8gZGlzcGxheSB0aGUgZmVlZCBpbiBhbnkgZm9sZGVyLCBldmVuIGlmIHRoZSBmb2xkZXJcbiAgICAgICAgICAgIC8vIGlzIGNsb3NlZCBvciBoYXMgbm8gdW5yZWFkIGFydGljbGVzXG4gICAgICAgICAgICBleGlzdGluZ0ZvbGRlci5nZXRzRmVlZCA9IHRydWU7XG5cbiAgICAgICAgICAgIEZlZWRSZXNvdXJjZS5jcmVhdGUoZmVlZC51cmwsIGV4aXN0aW5nRm9sZGVyLmlkLCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlZWQudXNlciwgZmVlZC5wYXNzd29yZClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG5cbiAgICAgICAgICAgICAgICBQdWJsaXNoZXIucHVibGlzaEFsbChkYXRhKTtcblxuICAgICAgICAgICAgICAgIC8vIHNldCBmb2xkZXIgYXMgZGVmYXVsdFxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvaXRlbXMvZmVlZHMvJyArIGRhdGEuZmVlZHNbMF0uaWQgKyAnLycpO1xuXG4gICAgICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBleGlzdGluZ0ZvbGRlci5nZXRzRmVlZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBmZWVkLnVybCA9ICcnO1xuICAgICAgICAgICAgICAgIGZlZWQudXNlciA9ICcnO1xuICAgICAgICAgICAgICAgIGZlZWQucGFzc3dvcmQgPSAnJztcbiAgICAgICAgICAgICAgICBzZWxmLmFkZGluZ0ZlZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBjcmVhdGUgZm9sZGVyIGZpcnN0IGFuZCB0aGVuIHRoZSBmZWVkXG4gICAgICAgICAgICBGb2xkZXJSZXNvdXJjZS5jcmVhdGUobmV3Rm9sZGVyKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG5cbiAgICAgICAgICAgICAgICBQdWJsaXNoZXIucHVibGlzaEFsbChkYXRhKTtcblxuICAgICAgICAgICAgICAgIC8vIHNldCB0aGUgY3JlYXRlZCBmb2xkZXIgb24gc2NvcGUgc28gaXRzIHByZXNlbGVjdGVkIGZvciB0aGVcbiAgICAgICAgICAgICAgICAvLyBuZXh0IGFkZGl0aW9uXG4gICAgICAgICAgICAgICAgZmVlZC5leGlzdGluZ0ZvbGRlciA9IEZvbGRlclJlc291cmNlLmdldChkYXRhLmZvbGRlcnNbMF0ubmFtZSk7XG4gICAgICAgICAgICAgICAgZmVlZC5uZXdGb2xkZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgc2VsZi5jcmVhdGVGZWVkKGZlZWQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICB0aGlzLmNyZWF0ZUZvbGRlciA9IGZ1bmN0aW9uIChmb2xkZXIpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB0aGlzLmFkZGluZ0ZvbGRlciA9IHRydWU7XG4gICAgICAgIEZvbGRlclJlc291cmNlLmNyZWF0ZShmb2xkZXIubmFtZSkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgUHVibGlzaGVyLnB1Ymxpc2hBbGwoZGF0YSk7XG4gICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5hZGRpbmdGb2xkZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIGZvbGRlci5uYW1lID0gJyc7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0aGlzLm1vdmVGZWVkID0gZnVuY3Rpb24gKGZlZWRJZCwgZm9sZGVySWQpIHtcbiAgICAgICAgdmFyIHJlbG9hZCA9IGZhbHNlO1xuICAgICAgICB2YXIgZmVlZCA9IEZlZWRSZXNvdXJjZS5nZXRCeUlkKGZlZWRJZCk7XG5cbiAgICAgICAgaWYgKGZlZWQuZm9sZGVySWQgPT09IGZvbGRlcklkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5pc0ZvbGRlckFjdGl2ZShmZWVkLmZvbGRlcklkKSB8fFxuICAgICAgICAgICAgdGhpcy5pc0ZvbGRlckFjdGl2ZShmb2xkZXJJZCkpIHtcbiAgICAgICAgICAgIHJlbG9hZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBGZWVkUmVzb3VyY2UubW92ZShmZWVkSWQsIGZvbGRlcklkKTtcblxuICAgICAgICBpZiAocmVsb2FkKSB7XG4gICAgICAgICAgICAkcm91dGUucmVsb2FkKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5yZW5hbWVGZWVkID0gZnVuY3Rpb24gKGZlZWQpIHtcbiAgICAgICAgRmVlZFJlc291cmNlLnBhdGNoKGZlZWQuaWQsIHt0aXRsZTogZmVlZC50aXRsZX0pO1xuICAgICAgICBmZWVkLmVkaXRpbmcgPSBmYWxzZTtcbiAgICB9O1xuXG4gICAgdGhpcy5yZW5hbWVGb2xkZXIgPSBmdW5jdGlvbiAoZm9sZGVyLCBuYW1lKSB7XG4gICAgICAgIGZvbGRlci5yZW5hbWVFcnJvciA9ICcnO1xuICAgICAgICB0aGlzLnJlbmFtaW5nRm9sZGVyID0gdHJ1ZTtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIGlmIChmb2xkZXIubmFtZSA9PT0gbmFtZSkge1xuICAgICAgICAgICAgZm9sZGVyLnJlbmFtZUVycm9yID0gJyc7XG4gICAgICAgICAgICBmb2xkZXIuZWRpdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5yZW5hbWluZ0ZvbGRlciA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgRm9sZGVyUmVzb3VyY2UucmVuYW1lKGZvbGRlci5uYW1lLCBuYW1lKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBmb2xkZXIucmVuYW1lRXJyb3IgPSAnJztcbiAgICAgICAgICAgICAgICBmb2xkZXIuZWRpdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBmb2xkZXIucmVuYW1lRXJyb3IgPSBtZXNzYWdlO1xuICAgICAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5yZW5hbWluZ0ZvbGRlciA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5yZXZlcnNpYmx5RGVsZXRlRmVlZCA9IGZ1bmN0aW9uIChmZWVkKSB7XG4gICAgICAgIEZlZWRSZXNvdXJjZS5yZXZlcnNpYmx5RGVsZXRlKGZlZWQuaWQpLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHJvdXRlLnJlbG9hZCgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdGhpcy51bmRvRGVsZXRlRmVlZCA9IGZ1bmN0aW9uIChmZWVkKSB7XG4gICAgICAgIEZlZWRSZXNvdXJjZS51bmRvRGVsZXRlKGZlZWQuaWQpLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHJvdXRlLnJlbG9hZCgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdGhpcy5kZWxldGVGZWVkID0gZnVuY3Rpb24gKGZlZWQpIHtcbiAgICAgICAgRmVlZFJlc291cmNlLmRlbGV0ZShmZWVkLnVybCk7XG4gICAgfTtcblxuXG4gICAgdGhpcy5yZXZlcnNpYmx5RGVsZXRlRm9sZGVyID0gZnVuY3Rpb24gKGZvbGRlcikge1xuICAgICAgICAkcS5hbGwoXG4gICAgICAgICAgICBGZWVkUmVzb3VyY2UucmV2ZXJzaWJseURlbGV0ZUZvbGRlcihmb2xkZXIuaWQpLFxuICAgICAgICAgICAgRm9sZGVyUmVzb3VyY2UucmV2ZXJzaWJseURlbGV0ZShmb2xkZXIubmFtZSlcbiAgICAgICAgKS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRyb3V0ZS5yZWxvYWQoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRoaXMudW5kb0RlbGV0ZUZvbGRlciA9IGZ1bmN0aW9uIChmb2xkZXIpIHtcbiAgICAgICAgJHEuYWxsKFxuICAgICAgICAgICAgRmVlZFJlc291cmNlLnVuZG9EZWxldGVGb2xkZXIoZm9sZGVyLmlkKSxcbiAgICAgICAgICAgIEZvbGRlclJlc291cmNlLnVuZG9EZWxldGUoZm9sZGVyLm5hbWUpXG4gICAgICAgICkuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkcm91dGUucmVsb2FkKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0aGlzLmRlbGV0ZUZvbGRlciA9IGZ1bmN0aW9uIChmb2xkZXIpIHtcbiAgICAgICAgRmVlZFJlc291cmNlLmRlbGV0ZUZvbGRlcihmb2xkZXIuaWQpO1xuICAgICAgICBGb2xkZXJSZXNvdXJjZS5kZWxldGUoZm9sZGVyLm5hbWUpO1xuICAgIH07XG5cbiAgICB0aGlzLnNldE9yZGVyaW5nID0gZnVuY3Rpb24gKGZlZWQsIG9yZGVyaW5nKSB7XG4gICAgICAgIEZlZWRSZXNvdXJjZS5wYXRjaChmZWVkLmlkLCB7b3JkZXJpbmc6IG9yZGVyaW5nfSk7XG4gICAgICAgICRyb3V0ZS5yZWxvYWQoKTtcbiAgICB9O1xuXG4gICAgdGhpcy50b2dnbGVQaW5uZWQgPSBmdW5jdGlvbiAoZmVlZElkKSB7XG4gICAgICAgIHZhciBmZWVkID0gRmVlZFJlc291cmNlLmdldEJ5SWQoZmVlZElkKTtcbiAgICAgICAgaWYgKGZlZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBGZWVkUmVzb3VyY2UucGF0Y2goZmVlZElkLCB7cGlubmVkOiAhZmVlZC5waW5uZWR9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnNldFVwZGF0ZU1vZGUgPSBmdW5jdGlvbiAoZmVlZElkLCB1cGRhdGVNb2RlKSB7XG4gICAgICAgIHJldHVybiBGZWVkUmVzb3VyY2UucGF0Y2goZmVlZElkLCB7dXBkYXRlTW9kZTogdXBkYXRlTW9kZX0pO1xuICAgIH07XG5cbiAgICB0aGlzLnRvZ2dsZUZ1bGxUZXh0ID0gZnVuY3Rpb24gKGZlZWQpIHtcbiAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCckcm91dGVDaGFuZ2VTdGFydCcpO1xuICAgICAgICBGZWVkUmVzb3VyY2UudG9nZ2xlRnVsbFRleHQoZmVlZC5pZCkuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJyRyb3V0ZUNoYW5nZVN1Y2Nlc3MnKTtcbiAgICAgICAgICAgICRyb3V0ZS5yZWxvYWQoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRoaXMuc2VhcmNoID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgICAgICRsb2NhdGlvbi5zZWFyY2goJ3NlYXJjaCcsIG51bGwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJGxvY2F0aW9uLnNlYXJjaCgnc2VhcmNoJywgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICRyb290U2NvcGUuJG9uKCdtb3ZlRmVlZFRvRm9sZGVyJywgZnVuY3Rpb24gKHNjb3BlLCBkYXRhKSB7XG4gICAgICAgIHNlbGYubW92ZUZlZWQoZGF0YS5mZWVkSWQsIGRhdGEuZm9sZGVySWQpO1xuICAgIH0pO1xuXG4gICAgLy8gYmFzZWQgb24gdGhlIHJvdXRlIHdlIHdhbnQgdG8gcHJlc2VsZWN0IGEgZm9sZGVyIGluIHRoZSBhZGQgbmV3IGZlZWRcbiAgICAvLyBkcm9wIGRvd25cbiAgICB2YXIgc2V0U2VsZWN0ZWRGb2xkZXJGb3JSb3V0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHR5cGU7XG4gICAgICAgIGlmICgkcm91dGUuY3VycmVudCkge1xuICAgICAgICAgICAgdHlwZSA9ICRyb3V0ZS5jdXJyZW50LiQkcm91dGUudHlwZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBmb2xkZXJJZCA9IDA7XG5cbiAgICAgICAgaWYgKHR5cGUgPT09IEZFRURfVFlQRS5GT0xERVIpIHtcbiAgICAgICAgICAgIGZvbGRlcklkID0gZ2V0Um91dGVJZCgpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IEZFRURfVFlQRS5GRUVEKSB7XG4gICAgICAgICAgICB2YXIgZmVlZCA9IEZlZWRSZXNvdXJjZS5nZXRCeUlkKGdldFJvdXRlSWQoKSk7XG5cbiAgICAgICAgICAgIGlmIChmZWVkKSB7XG4gICAgICAgICAgICAgICAgZm9sZGVySWQgPSBmZWVkLmZvbGRlcklkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGZvbGRlcjtcbiAgICAgICAgaWYgKGZvbGRlcklkICE9PSAwKSB7XG4gICAgICAgICAgICBmb2xkZXIgPSBGb2xkZXJSZXNvdXJjZS5nZXRCeUlkKGZvbGRlcklkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYuZmVlZC5leGlzdGluZ0ZvbGRlciA9IGZvbGRlcjtcbiAgICB9O1xuXG4gICAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNldFNlbGVjdGVkRm9sZGVyRm9yUm91dGUoKTtcbiAgICB9KTtcblxufV0pO1xuIiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmNvbnRyb2xsZXIoJ1NldHRpbmdzQ29udHJvbGxlcicsXG5bXCIkcm91dGVcIiwgXCIkcVwiLCBcIlNldHRpbmdzUmVzb3VyY2VcIiwgXCJJdGVtUmVzb3VyY2VcIiwgXCJPUE1MUGFyc2VyXCIsIFwiT1BNTEltcG9ydGVyXCIsIFwiUHVibGlzaGVyXCIsIGZ1bmN0aW9uICgkcm91dGUsICRxLCBTZXR0aW5nc1Jlc291cmNlLCBJdGVtUmVzb3VyY2UsIE9QTUxQYXJzZXIsXG4gICAgICAgICAgT1BNTEltcG9ydGVyLCBQdWJsaXNoZXIpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB0aGlzLmlzT1BNTEltcG9ydGluZyA9IGZhbHNlO1xuICAgIHRoaXMuaXNBcnRpY2xlc0ltcG9ydGluZyA9IGZhbHNlO1xuICAgIHRoaXMub3BtbEltcG9ydEVycm9yID0gZmFsc2U7XG4gICAgdGhpcy5hcnRpY2xlSW1wb3J0RXJyb3IgPSBmYWxzZTtcblxuICAgIHZhciBzZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICBTZXR0aW5nc1Jlc291cmNlLnNldChrZXksIHZhbHVlKTtcblxuICAgICAgICBpZiAoWydzaG93QWxsJywgJ29sZGVzdEZpcnN0JywgJ2NvbXBhY3QnXS5pbmRleE9mKGtleSkgPj0gMCkge1xuICAgICAgICAgICAgJHJvdXRlLnJlbG9hZCgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMudG9nZ2xlU2V0dGluZyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgc2V0KGtleSwgIXRoaXMuZ2V0U2V0dGluZyhrZXkpKTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRTZXR0aW5nID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICByZXR1cm4gU2V0dGluZ3NSZXNvdXJjZS5nZXQoa2V5KTtcbiAgICB9O1xuXG4gICAgdGhpcy5pbXBvcnRPUE1MID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgdGhpcy5vcG1sSW1wb3J0RXJyb3IgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5hcnRpY2xlSW1wb3J0RXJyb3IgPSBmYWxzZTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5pc09QTUxJbXBvcnRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBwYXJzZWRDb250ZW50ID0gT1BNTFBhcnNlci5wYXJzZShjb250ZW50KTtcblxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGpvYlNpemUgPSA1O1xuXG4gICAgICAgICAgICBPUE1MSW1wb3J0ZXIuaW1wb3J0Rm9sZGVycyhwYXJzZWRDb250ZW50KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGZlZWRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBPUE1MSW1wb3J0ZXIuaW1wb3J0RmVlZFF1ZXVlKGZlZWRRdWV1ZSwgam9iU2l6ZSk7XG4gICAgICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmlzT1BNTEltcG9ydGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5pc09QTUxJbXBvcnRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMub3BtbEltcG9ydEVycm9yID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmltcG9ydEFydGljbGVzID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgdGhpcy5vcG1sSW1wb3J0RXJyb3IgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5hcnRpY2xlSW1wb3J0RXJyb3IgPSBmYWxzZTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5pc0FydGljbGVzSW1wb3J0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBhcnRpY2xlcyA9IEpTT04ucGFyc2UoY29udGVudCk7XG5cbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIEl0ZW1SZXNvdXJjZS5pbXBvcnRBcnRpY2xlcyhhcnRpY2xlcykuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIFB1Ymxpc2hlci5wdWJsaXNoQWxsKGRhdGEpO1xuICAgICAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5pc0FydGljbGVzSW1wb3J0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICB0aGlzLmFydGljbGVJbXBvcnRFcnJvciA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmlzQXJ0aWNsZXNJbXBvcnRpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG5cbn1dKTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuZmlsdGVyKCd0cnVzdFVybCcsIFtcIiRzY2VcIiwgZnVuY3Rpb24gKCRzY2UpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKHVybCkge1xuICAgICAgICByZXR1cm4gJHNjZS50cnVzdEFzUmVzb3VyY2VVcmwodXJsKTtcbiAgICB9O1xufV0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5maWx0ZXIoJ3VucmVhZENvdW50Rm9ybWF0dGVyJywgZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHJldHVybiBmdW5jdGlvbiAodW5yZWFkQ291bnQpIHtcbiAgICAgICAgaWYgKHVucmVhZENvdW50ID4gOTk5KSB7XG4gICAgICAgICAgICByZXR1cm4gJzk5OSsnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bnJlYWRDb3VudDtcbiAgICB9O1xufSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmZhY3RvcnkoJ0ZlZWRSZXNvdXJjZScsIFtcIlJlc291cmNlXCIsIFwiJGh0dHBcIiwgXCJCQVNFX1VSTFwiLCBcIiRxXCIsIGZ1bmN0aW9uIChSZXNvdXJjZSwgJGh0dHAsIEJBU0VfVVJMLCAkcSkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBGZWVkUmVzb3VyY2UgPSBmdW5jdGlvbiAoJGh0dHAsIEJBU0VfVVJMLCAkcSkge1xuICAgICAgICBSZXNvdXJjZS5jYWxsKHRoaXMsICRodHRwLCBCQVNFX1VSTCwgJ3VybCcpO1xuICAgICAgICB0aGlzLmlkcyA9IHt9O1xuICAgICAgICB0aGlzLmxvY2F0aW9ucyA9IHt9O1xuICAgICAgICB0aGlzLnVucmVhZENvdW50ID0gMDtcbiAgICAgICAgdGhpcy5mb2xkZXJVbnJlYWRDb3VudCA9IHt9O1xuICAgICAgICB0aGlzLmZvbGRlcklkcyA9IHt9O1xuICAgICAgICB0aGlzLiRxID0gJHE7XG4gICAgfTtcblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFJlc291cmNlLnByb3RvdHlwZSk7XG5cbiAgICBGZWVkUmVzb3VyY2UucHJvdG90eXBlLnJlY2VpdmUgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBSZXNvdXJjZS5wcm90b3R5cGUucmVjZWl2ZS5jYWxsKHRoaXMsIGRhdGEpO1xuICAgICAgICB0aGlzLnVwZGF0ZVVucmVhZENhY2hlKCk7XG4gICAgICAgIHRoaXMudXBkYXRlRm9sZGVyQ2FjaGUoKTtcbiAgICB9O1xuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgUmVzb3VyY2UucHJvdG90eXBlLmNsZWFyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMudW5yZWFkQ291bnQgPSAwO1xuICAgICAgICB0aGlzLmZvbGRlclVucmVhZENvdW50ID0ge307XG4gICAgICAgIHRoaXMuZm9sZGVySWRzID0ge307XG4gICAgICAgIHRoaXMuaWRzID0ge307XG4gICAgICAgIHRoaXMubG9jYXRpb25zID0ge307XG4gICAgfTtcblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUudXBkYXRlVW5yZWFkQ2FjaGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudW5yZWFkQ291bnQgPSAwO1xuICAgICAgICB0aGlzLmZvbGRlclVucmVhZENvdW50ID0ge307XG5cbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB0aGlzLnZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uIChmZWVkKSB7XG4gICAgICAgICAgICBpZiAoZmVlZC51bnJlYWRDb3VudCkge1xuICAgICAgICAgICAgICAgIHNlbGYudW5yZWFkQ291bnQgKz0gZmVlZC51bnJlYWRDb3VudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmZWVkLmZvbGRlcklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmZvbGRlclVucmVhZENvdW50W2ZlZWQuZm9sZGVySWRdID1cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5mb2xkZXJVbnJlYWRDb3VudFtmZWVkLmZvbGRlcklkXSB8fCAwO1xuICAgICAgICAgICAgICAgIHNlbGYuZm9sZGVyVW5yZWFkQ291bnRbZmVlZC5mb2xkZXJJZF0gKz0gZmVlZC51bnJlYWRDb3VudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS51cGRhdGVGb2xkZXJDYWNoZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5mb2xkZXJJZHMgPSB7fTtcblxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMudmFsdWVzLmZvckVhY2goZnVuY3Rpb24gKGZlZWQpIHtcbiAgICAgICAgICAgIHNlbGYuZm9sZGVySWRzW2ZlZWQuZm9sZGVySWRdID1cbiAgICAgICAgICAgICAgICBzZWxmLmZvbGRlcklkc1tmZWVkLmZvbGRlcklkXSB8fCBbXTtcbiAgICAgICAgICAgIHNlbGYuZm9sZGVySWRzW2ZlZWQuZm9sZGVySWRdLnB1c2goZmVlZCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIFJlc291cmNlLnByb3RvdHlwZS5hZGQuY2FsbCh0aGlzLCB2YWx1ZSk7XG4gICAgICAgIGlmICh2YWx1ZS5pZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmlkc1t2YWx1ZS5pZF0gPSB0aGlzLmhhc2hNYXBbdmFsdWUudXJsXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUubG9jYXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5sb2NhdGlvbnNbdmFsdWUubG9jYXRpb25dID0gdGhpcy5oYXNoTWFwW3ZhbHVlLnVybF07XG4gICAgICAgIH1cbiAgICB9O1xuXG5cbiAgICBGZWVkUmVzb3VyY2UucHJvdG90eXBlLm1hcmtSZWFkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uIChmZWVkKSB7XG4gICAgICAgICAgICBmZWVkLnVucmVhZENvdW50ID0gMDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy51cGRhdGVVbnJlYWRDYWNoZSgpO1xuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUubWFya0ZlZWRSZWFkID0gZnVuY3Rpb24gKGZlZWRJZCkge1xuICAgICAgICB0aGlzLmlkc1tmZWVkSWRdLnVucmVhZENvdW50ID0gMDtcbiAgICAgICAgdGhpcy51cGRhdGVVbnJlYWRDYWNoZSgpO1xuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUubWFya0ZvbGRlclJlYWQgPSBmdW5jdGlvbiAoZm9sZGVySWQpIHtcbiAgICAgICAgdGhpcy52YWx1ZXMuZm9yRWFjaChmdW5jdGlvbiAoZmVlZCkge1xuICAgICAgICAgICAgaWYgKGZlZWQuZm9sZGVySWQgPT09IGZvbGRlcklkKSB7XG4gICAgICAgICAgICAgICAgZmVlZC51bnJlYWRDb3VudCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMudXBkYXRlVW5yZWFkQ2FjaGUoKTtcbiAgICB9O1xuXG5cbiAgICBGZWVkUmVzb3VyY2UucHJvdG90eXBlLm1hcmtJdGVtT2ZGZWVkUmVhZCA9IGZ1bmN0aW9uIChmZWVkSWQpIHtcbiAgICAgICAgdGhpcy5pZHNbZmVlZElkXS51bnJlYWRDb3VudCAtPSAxO1xuICAgICAgICB0aGlzLnVwZGF0ZVVucmVhZENhY2hlKCk7XG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS5tYXJrSXRlbXNPZkZlZWRzUmVhZCA9IGZ1bmN0aW9uIChmZWVkSWRzKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgZmVlZElkcy5mb3JFYWNoKGZ1bmN0aW9uIChmZWVkSWQpIHtcbiAgICAgICAgICAgIHNlbGYuaWRzW2ZlZWRJZF0udW5yZWFkQ291bnQgLT0gMTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy51cGRhdGVVbnJlYWRDYWNoZSgpO1xuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUubWFya0l0ZW1PZkZlZWRVbnJlYWQgPSBmdW5jdGlvbiAoZmVlZElkKSB7XG4gICAgICAgIHRoaXMuaWRzW2ZlZWRJZF0udW5yZWFkQ291bnQgKz0gMTtcbiAgICAgICAgdGhpcy51cGRhdGVVbnJlYWRDYWNoZSgpO1xuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUuZ2V0VW5yZWFkQ291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVucmVhZENvdW50O1xuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUuZ2V0Rm9sZGVyVW5yZWFkQ291bnQgPSBmdW5jdGlvbiAoZm9sZGVySWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9sZGVyVW5yZWFkQ291bnRbZm9sZGVySWRdO1xuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUuZ2V0QnlGb2xkZXJJZCA9IGZ1bmN0aW9uIChmb2xkZXJJZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mb2xkZXJJZHNbZm9sZGVySWRdIHx8IFtdO1xuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUuZ2V0QnlJZCA9IGZ1bmN0aW9uIChmZWVkSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWRzW2ZlZWRJZF07XG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS5nZXRCeUxvY2F0aW9uID0gZnVuY3Rpb24gKGxvY2F0aW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2F0aW9uc1tsb2NhdGlvbl07XG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS5tb3ZlID0gZnVuY3Rpb24gKGZlZWRJZCwgZm9sZGVySWQpIHtcbiAgICAgICAgdmFyIGZlZWQgPSB0aGlzLmdldEJ5SWQoZmVlZElkKTtcbiAgICAgICAgZmVlZC5mb2xkZXJJZCA9IGZvbGRlcklkO1xuXG4gICAgICAgIHRoaXMudXBkYXRlRm9sZGVyQ2FjaGUoKTtcbiAgICAgICAgdGhpcy51cGRhdGVVbnJlYWRDYWNoZSgpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnBhdGNoKGZlZWRJZCwge2ZvbGRlcklkOiBmb2xkZXJJZH0pO1xuXG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAodXJsLCBmb2xkZXJJZCwgdGl0bGUsIHVzZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQpIHtcbiAgICAgICAgdXJsID0gdXJsLnRyaW0oKTtcbiAgICAgICAgaWYgKCF1cmwuc3RhcnRzV2l0aCgnaHR0cCcpKSB7XG4gICAgICAgICAgICB1cmwgPSAnaHR0cHM6Ly8nICsgdXJsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRpdGxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRpdGxlID0gdGl0bGUudHJpbSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGZlZWQgPSB7XG4gICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgIGZvbGRlcklkOiBmb2xkZXJJZCB8fCAwLFxuICAgICAgICAgICAgdGl0bGU6IHRpdGxlIHx8IHVybCxcbiAgICAgICAgICAgIHVucmVhZENvdW50OiAwXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5hZGQoZmVlZCk7XG4gICAgICAgIHRoaXMudXBkYXRlRm9sZGVyQ2FjaGUoKTtcblxuICAgICAgICB2YXIgZGVmZXJyZWQgPSB0aGlzLiRxLmRlZmVyKCk7XG5cbiAgICAgICAgdGhpcy5odHRwKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgdXJsOiB0aGlzLkJBU0VfVVJMICsgJy9mZWVkcycsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgcGFyZW50Rm9sZGVySWQ6IGZvbGRlcklkIHx8IDAsXG4gICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICAgICAgICAgIHVzZXI6IHVzZXIgfHwgbnVsbCxcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQgfHwgbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgZmVlZC5mYXZpY29uTGluayA9ICcnO1xuICAgICAgICAgICAgZmVlZC5lcnJvciA9IGRhdGEubWVzc2FnZTtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9O1xuXG5cbiAgICBGZWVkUmVzb3VyY2UucHJvdG90eXBlLnJldmVyc2libHlEZWxldGUgPSBmdW5jdGlvbiAoaWQsIHVwZGF0ZUNhY2hlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0ZvbGRlcikge1xuICAgICAgICB2YXIgZmVlZCA9IHRoaXMuZ2V0QnlJZChpZCk7XG5cbiAgICAgICAgLy8gaWYgYSBmb2xkZXIgaXMgZGVsZXRlZCBpdCBkb2VzIG5vdCBoYXZlIHRvIHRyaWdnZXIgdGhlIGRlbGV0ZVxuICAgICAgICAvLyBhdHRyaWJ1dGUgZm9yIHRoZSBmZWVkIGJlY2F1c2UgdGhlIGZlZWQgaXMgbm90IGRlbGV0ZWQsIGl0cyBqdXN0IG5vdFxuICAgICAgICAvLyBkaXNwbGF5ZWQuIE90aGVyd2lzZSB0aGlzIGNhdXNlcyB0aGUgZmVlZCB0byBhbHNvIGJlIGRlbGV0ZWQgYWdhaW5cbiAgICAgICAgLy8gYmVjYXVzZSB0aGUgZm9sZGVyIGRlc3Ryb3lzIHRoZSBmZWVkJ3Mgc2NvcGVcbiAgICAgICAgaWYgKGZlZWQgJiYgaXNGb2xkZXIgIT09IHRydWUpIHtcbiAgICAgICAgICAgIGZlZWQuZGVsZXRlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXBkYXRlQ2FjaGUgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVVucmVhZENhY2hlKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLmRlbGV0ZSh0aGlzLkJBU0VfVVJMICsgJy9mZWVkcy8nICsgaWQpO1xuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUucmV2ZXJzaWJseURlbGV0ZUZvbGRlciA9IGZ1bmN0aW9uIChmb2xkZXJJZCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xuICAgICAgICB0aGlzLmdldEJ5Rm9sZGVySWQoZm9sZGVySWQpLmZvckVhY2goZnVuY3Rpb24gKGZlZWQpIHtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2goc2VsZi5yZXZlcnNpYmx5RGVsZXRlKGZlZWQuaWQsIGZhbHNlLCB0cnVlKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMudXBkYXRlVW5yZWFkQ2FjaGUoKTtcblxuICAgICAgICB2YXIgZGVmZXJyZWQgPSB0aGlzLiRxLmFsbChwcm9taXNlcyk7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKHVybCwgdXBkYXRlQ2FjaGUpIHtcbiAgICAgICAgdmFyIGZlZWQgPSB0aGlzLmdldCh1cmwpO1xuICAgICAgICBpZiAoZmVlZCAhPT0gdW5kZWZpbmVkICYmIGZlZWQuaWQpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmlkc1tmZWVkLmlkXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmZWVkICE9PSB1bmRlZmluZWQgJiYgZmVlZC5sb2NhdGlvbikge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMubG9jYXRpb25zW2ZlZWQubG9jYXRpb25dO1xuICAgICAgICB9XG5cbiAgICAgICAgUmVzb3VyY2UucHJvdG90eXBlLmRlbGV0ZS5jYWxsKHRoaXMsIHVybCk7XG5cbiAgICAgICAgaWYgKHVwZGF0ZUNhY2hlICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVVbnJlYWRDYWNoZSgpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVGb2xkZXJDYWNoZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZlZWQ7XG4gICAgfTtcblxuXG4gICAgRmVlZFJlc291cmNlLnByb3RvdHlwZS5kZWxldGVGb2xkZXIgPSBmdW5jdGlvbiAoZm9sZGVySWQpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB0aGlzLmdldEJ5Rm9sZGVySWQoZm9sZGVySWQpLmZvckVhY2goZnVuY3Rpb24gKGZlZWQpIHtcbiAgICAgICAgICAgIHNlbGYuZGVsZXRlKGZlZWQudXJsLCBmYWxzZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMudXBkYXRlVW5yZWFkQ2FjaGUoKTtcbiAgICAgICAgdGhpcy51cGRhdGVGb2xkZXJDYWNoZSgpO1xuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUudW5kb0RlbGV0ZSA9IGZ1bmN0aW9uIChpZCwgdXBkYXRlQ2FjaGUpIHtcbiAgICAgICAgdmFyIGZlZWQgPSB0aGlzLmdldEJ5SWQoaWQpO1xuXG4gICAgICAgIGlmIChmZWVkKSB7XG4gICAgICAgICAgICBmZWVkLmRlbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1cGRhdGVDYWNoZSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVW5yZWFkQ2FjaGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh0aGlzLkJBU0VfVVJMICsgJy9mZWVkcy8nICsgaWQgKyAnL3Jlc3RvcmUnKTtcbiAgICB9O1xuXG5cbiAgICBGZWVkUmVzb3VyY2UucHJvdG90eXBlLnVuZG9EZWxldGVGb2xkZXIgPSBmdW5jdGlvbiAoZm9sZGVySWQpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcblxuICAgICAgICB0aGlzLmdldEJ5Rm9sZGVySWQoZm9sZGVySWQpLmZvckVhY2goZnVuY3Rpb24gKGZlZWQpIHtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2goc2VsZi51bmRvRGVsZXRlKGZlZWQuaWQsIGZhbHNlKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMudXBkYXRlVW5yZWFkQ2FjaGUoKTtcblxuICAgICAgICB2YXIgZGVmZXJyZWQgPSB0aGlzLiRxLmFsbChwcm9taXNlcyk7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUuc2V0T3JkZXJpbmcgPSBmdW5jdGlvbiAoZmVlZElkLCBvcmRlcmluZykge1xuICAgICAgICB2YXIgZmVlZCA9IHRoaXMuZ2V0QnlJZChmZWVkSWQpO1xuXG4gICAgICAgIGlmIChmZWVkKSB7XG4gICAgICAgICAgICBmZWVkLm9yZGVyaW5nID0gb3JkZXJpbmc7XG4gICAgICAgICAgICB2YXIgdXJsID0gdGhpcy5CQVNFX1VSTCArICcvZmVlZHMvJyArIGZlZWRJZDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHAucGF0Y2godXJsLCB7XG4gICAgICAgICAgICAgICAgb3JkZXJpbmc6IG9yZGVyaW5nXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUuc2V0UGlubmVkID0gZnVuY3Rpb24gKGZlZWRJZCwgaXNQaW5uZWQpIHtcbiAgICAgICAgdmFyIGZlZWQgPSB0aGlzLmdldEJ5SWQoZmVlZElkKTtcblxuICAgICAgICBpZiAoZmVlZCkge1xuICAgICAgICAgICAgZmVlZC5waW5uZWQgPSBpc1Bpbm5lZDtcbiAgICAgICAgICAgIHZhciB1cmwgPSB0aGlzLkJBU0VfVVJMICsgJy9mZWVkcy8nICsgZmVlZElkO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wYXRjaCh1cmwsIHtcbiAgICAgICAgICAgICAgICBwaW5uZWQ6IGlzUGlubmVkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUucGF0Y2ggPSBmdW5jdGlvbiAoZmVlZElkLCBkaWZmKSB7XG4gICAgICAgIHZhciBmZWVkID0gdGhpcy5nZXRCeUlkKGZlZWRJZCk7XG5cbiAgICAgICAgaWYgKGZlZWQpIHtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGRpZmYpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgICAgICAgZmVlZFtrZXldID0gZGlmZltrZXldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgdXJsID0gdGhpcy5CQVNFX1VSTCArICcvZmVlZHMvJyArIGZlZWRJZDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHAucGF0Y2godXJsLCBkaWZmKTtcbiAgICAgICAgfVxuICAgIH07XG5cblxuICAgIEZlZWRSZXNvdXJjZS5wcm90b3R5cGUudG9nZ2xlRnVsbFRleHQgPSBmdW5jdGlvbiAoZmVlZElkKSB7XG4gICAgICAgIHZhciBmZWVkID0gdGhpcy5nZXRCeUlkKGZlZWRJZCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucGF0Y2goZmVlZElkLCB7ZnVsbFRleHRFbmFibGVkOiAhZmVlZC5mdWxsVGV4dEVuYWJsZWR9KTtcbiAgICB9O1xuXG5cbiAgICByZXR1cm4gbmV3IEZlZWRSZXNvdXJjZSgkaHR0cCwgQkFTRV9VUkwsICRxKTtcbn1dKTtcbiIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5mYWN0b3J5KCdGb2xkZXJSZXNvdXJjZScsIFtcIlJlc291cmNlXCIsIFwiJGh0dHBcIiwgXCJCQVNFX1VSTFwiLCBcIiRxXCIsIGZ1bmN0aW9uIChSZXNvdXJjZSwgJGh0dHAsIEJBU0VfVVJMLCAkcSkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBGb2xkZXJSZXNvdXJjZSA9IGZ1bmN0aW9uICgkaHR0cCwgQkFTRV9VUkwsICRxKSB7XG4gICAgICAgIFJlc291cmNlLmNhbGwodGhpcywgJGh0dHAsIEJBU0VfVVJMLCAnbmFtZScpO1xuICAgICAgICB0aGlzLmRlbGV0ZWQgPSBudWxsO1xuICAgICAgICB0aGlzLiRxID0gJHE7XG4gICAgICAgIHRoaXMuaWRzID0ge307XG4gICAgfTtcblxuICAgIEZvbGRlclJlc291cmNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUmVzb3VyY2UucHJvdG90eXBlKTtcblxuXG4gICAgRm9sZGVyUmVzb3VyY2UucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBSZXNvdXJjZS5wcm90b3R5cGUuYWRkLmNhbGwodGhpcywgdmFsdWUpO1xuICAgICAgICBpZiAodmFsdWUuaWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5pZHNbdmFsdWUuaWRdID0gdGhpcy5oYXNoTWFwW3ZhbHVlLm5hbWVdO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIEZvbGRlclJlc291cmNlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgUmVzb3VyY2UucHJvdG90eXBlLmNsZWFyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuaWRzID0ge307XG4gICAgfTtcblxuICAgIEZvbGRlclJlc291cmNlLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB2YXIgZm9sZGVyID0gdGhpcy5nZXQobmFtZSk7XG4gICAgICAgIGlmIChmb2xkZXIgIT09IHVuZGVmaW5lZCAmJiBmb2xkZXIuaWQpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmlkc1tmb2xkZXIuaWRdO1xuICAgICAgICB9XG5cbiAgICAgICAgUmVzb3VyY2UucHJvdG90eXBlLmRlbGV0ZS5jYWxsKHRoaXMsIG5hbWUpO1xuXG4gICAgICAgIHJldHVybiBmb2xkZXI7XG4gICAgfTtcblxuICAgIEZvbGRlclJlc291cmNlLnByb3RvdHlwZS50b2dnbGVPcGVuID0gZnVuY3Rpb24gKGZvbGRlck5hbWUpIHtcbiAgICAgICAgdmFyIGZvbGRlciA9IHRoaXMuZ2V0KGZvbGRlck5hbWUpO1xuICAgICAgICBmb2xkZXIub3BlbmVkID0gIWZvbGRlci5vcGVuZWQ7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cCh7XG4gICAgICAgICAgICB1cmw6IHRoaXMuQkFTRV9VUkwgKyAnL2ZvbGRlcnMvJyArIGZvbGRlci5pZCArICcvb3BlbicsXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBmb2xkZXJJZDogZm9sZGVyLmlkLFxuICAgICAgICAgICAgICAgIG9wZW46IGZvbGRlci5vcGVuZWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG4gICAgRm9sZGVyUmVzb3VyY2UucHJvdG90eXBlLnJlbmFtZSA9IGZ1bmN0aW9uIChmb2xkZXJOYW1lLCB0b0ZvbGRlck5hbWUpIHtcbiAgICAgICAgdmFyIGZvbGRlciA9IHRoaXMuZ2V0KGZvbGRlck5hbWUpO1xuICAgICAgICB2YXIgZGVmZXJyZWQgPSB0aGlzLiRxLmRlZmVyKCk7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICB0aGlzLmh0dHAoe1xuICAgICAgICAgICAgdXJsOiB0aGlzLkJBU0VfVVJMICsgJy9mb2xkZXJzLycgKyBmb2xkZXIuaWQgKyAnL3JlbmFtZScsXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBmb2xkZXJOYW1lOiB0b0ZvbGRlck5hbWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmb2xkZXIubmFtZSA9IHRvRm9sZGVyTmFtZTtcbiAgICAgICAgICAgIGRlbGV0ZSBzZWxmLmhhc2hNYXBbZm9sZGVyTmFtZV07XG4gICAgICAgICAgICBzZWxmLmhhc2hNYXBbdG9Gb2xkZXJOYW1lXSA9IGZvbGRlcjtcblxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICB9KS5lcnJvcihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGRhdGEubWVzc2FnZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH07XG5cbiAgICBGb2xkZXJSZXNvdXJjZS5wcm90b3R5cGUuZ2V0QnlJZCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pZHNbaWRdO1xuICAgIH07XG5cbiAgICBGb2xkZXJSZXNvdXJjZS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGZvbGRlck5hbWUpIHtcbiAgICAgICAgZm9sZGVyTmFtZSA9IGZvbGRlck5hbWUudHJpbSgpO1xuICAgICAgICB2YXIgZm9sZGVyID0ge1xuICAgICAgICAgICAgbmFtZTogZm9sZGVyTmFtZVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuYWRkKGZvbGRlcik7XG5cbiAgICAgICAgdmFyIGRlZmVycmVkID0gdGhpcy4kcS5kZWZlcigpO1xuXG4gICAgICAgIHRoaXMuaHR0cCh7XG4gICAgICAgICAgICB1cmw6IHRoaXMuQkFTRV9VUkwgKyAnL2ZvbGRlcnMnLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgZm9sZGVyTmFtZTogZm9sZGVyTmFtZVxuICAgICAgICAgICAgfVxuICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEpO1xuICAgICAgICB9KS5lcnJvcihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgZm9sZGVyLmVycm9yID0gZGF0YS5tZXNzYWdlO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9O1xuXG5cbiAgICBGb2xkZXJSZXNvdXJjZS5wcm90b3R5cGUucmV2ZXJzaWJseURlbGV0ZSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHZhciBmb2xkZXIgPSB0aGlzLmdldChuYW1lKTtcbiAgICAgICAgdmFyIGlkID0gZm9sZGVyLmlkO1xuICAgICAgICBmb2xkZXIuZGVsZXRlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAuZGVsZXRlKHRoaXMuQkFTRV9VUkwgKyAnL2ZvbGRlcnMvJyArIGlkKTtcbiAgICB9O1xuXG5cbiAgICBGb2xkZXJSZXNvdXJjZS5wcm90b3R5cGUudW5kb0RlbGV0ZSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHZhciBmb2xkZXIgPSB0aGlzLmdldChuYW1lKTtcbiAgICAgICAgdmFyIGlkID0gZm9sZGVyLmlkO1xuICAgICAgICBmb2xkZXIuZGVsZXRlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodGhpcy5CQVNFX1VSTCArICcvZm9sZGVycy8nICsgaWQgKyAnL3Jlc3RvcmUnKTtcbiAgICB9O1xuXG5cbiAgICByZXR1cm4gbmV3IEZvbGRlclJlc291cmNlKCRodHRwLCBCQVNFX1VSTCwgJHEpO1xufV0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5mYWN0b3J5KCdJdGVtUmVzb3VyY2UnLCBbXCJSZXNvdXJjZVwiLCBcIiRodHRwXCIsIFwiQkFTRV9VUkxcIiwgXCJJVEVNX0JBVENIX1NJWkVcIiwgZnVuY3Rpb24gKFJlc291cmNlLCAkaHR0cCwgQkFTRV9VUkwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElURU1fQkFUQ0hfU0laRSkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBJdGVtUmVzb3VyY2UgPSBmdW5jdGlvbiAoJGh0dHAsIEJBU0VfVVJMLCBJVEVNX0JBVENIX1NJWkUpIHtcbiAgICAgICAgUmVzb3VyY2UuY2FsbCh0aGlzLCAkaHR0cCwgQkFTRV9VUkwpO1xuICAgICAgICB0aGlzLmJhdGNoU2l6ZSA9IElURU1fQkFUQ0hfU0laRTtcbiAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgIH07XG5cbiAgICBJdGVtUmVzb3VyY2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShSZXNvdXJjZS5wcm90b3R5cGUpO1xuXG4gICAgSXRlbVJlc291cmNlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdGFycmVkQ291bnQgPSAwO1xuICAgICAgICB0aGlzLmxvd2VzdElkID0gMDtcbiAgICAgICAgdGhpcy5oaWdoZXN0SWQgPSAwO1xuICAgICAgICBSZXNvdXJjZS5wcm90b3R5cGUuY2xlYXIuY2FsbCh0aGlzKTtcbiAgICB9O1xuXG4gICAgSXRlbVJlc291cmNlLnByb3RvdHlwZS5yZWNlaXZlID0gZnVuY3Rpb24gKHZhbHVlLCBjaGFubmVsKSB7XG4gICAgICAgIHN3aXRjaCAoY2hhbm5lbCkge1xuXG4gICAgICAgIGNhc2UgJ25ld2VzdEl0ZW1JZCc6XG4gICAgICAgICAgICB0aGlzLm5ld2VzdEl0ZW1JZCA9IHZhbHVlO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnc3RhcnJlZCc6XG4gICAgICAgICAgICB0aGlzLnN0YXJyZWRDb3VudCA9IHZhbHVlO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIHZhbHVlLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXplIGxvd2VzdCBhbmQgaGlnaGVzdCBpZFxuICAgICAgICAgICAgICAgIGlmIChzZWxmLmxvd2VzdElkID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYubG93ZXN0SWQgPSBpdGVtLmlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5oaWdoZXN0SWQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5oaWdoZXN0SWQgPSBpdGVtLmlkO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChpdGVtLmlkID4gc2VsZi5oaWdoZXN0SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5oaWdoZXN0SWQgPSBpdGVtLmlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5pZCA8IHNlbGYubG93ZXN0SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5sb3dlc3RJZCA9IGl0ZW0uaWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIFJlc291cmNlLnByb3RvdHlwZS5yZWNlaXZlLmNhbGwodGhpcywgdmFsdWUsIGNoYW5uZWwpO1xuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgSXRlbVJlc291cmNlLnByb3RvdHlwZS5nZXROZXdlc3RJdGVtSWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5ld2VzdEl0ZW1JZDtcbiAgICB9O1xuXG5cbiAgICBJdGVtUmVzb3VyY2UucHJvdG90eXBlLmdldFN0YXJyZWRDb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnJlZENvdW50O1xuICAgIH07XG5cblxuICAgIEl0ZW1SZXNvdXJjZS5wcm90b3R5cGUuc3RhciA9IGZ1bmN0aW9uIChpdGVtSWQsIGlzU3RhcnJlZCkge1xuICAgICAgICBpZiAoaXNTdGFycmVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlzU3RhcnJlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaXQgPSB0aGlzLmdldChpdGVtSWQpO1xuICAgICAgICB2YXIgdXJsID0gdGhpcy5CQVNFX1VSTCArXG4gICAgICAgICAgICAnL2l0ZW1zLycgKyBpdC5mZWVkSWQgKyAnLycgKyBpdC5ndWlkSGFzaCArICcvc3Rhcic7XG5cbiAgICAgICAgaXQuc3RhcnJlZCA9IGlzU3RhcnJlZDtcblxuICAgICAgICBpZiAoaXNTdGFycmVkKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJyZWRDb3VudCArPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGFycmVkQ291bnQgLT0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAoe1xuICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBpc1N0YXJyZWQ6IGlzU3RhcnJlZFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG5cbiAgICBJdGVtUmVzb3VyY2UucHJvdG90eXBlLnRvZ2dsZVN0YXIgPSBmdW5jdGlvbiAoaXRlbUlkKSB7XG4gICAgICAgIGlmICh0aGlzLmdldChpdGVtSWQpLnN0YXJyZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcihpdGVtSWQsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcihpdGVtSWQsIHRydWUpO1xuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgSXRlbVJlc291cmNlLnByb3RvdHlwZS5tYXJrSXRlbVJlYWQgPSBmdW5jdGlvbiAoaXRlbUlkLCBpc1JlYWQpIHtcbiAgICAgICAgaWYgKGlzUmVhZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpc1JlYWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5nZXQoaXRlbUlkKS51bnJlYWQgPSAhaXNSZWFkO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAoe1xuICAgICAgICAgICAgdXJsOiB0aGlzLkJBU0VfVVJMICsgJy9pdGVtcy8nICsgaXRlbUlkICsgJy9yZWFkJyxcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGlzUmVhZDogaXNSZWFkXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cblxuICAgIEl0ZW1SZXNvdXJjZS5wcm90b3R5cGUubWFya0l0ZW1zUmVhZCA9IGZ1bmN0aW9uIChpdGVtSWRzKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICBpdGVtSWRzLmZvckVhY2goZnVuY3Rpb24oaXRlbUlkKSB7XG4gICAgICAgICAgICBzZWxmLmdldChpdGVtSWQpLnVucmVhZCA9IGZhbHNlO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwKHtcbiAgICAgICAgICAgIHVybDogdGhpcy5CQVNFX1VSTCArICcvaXRlbXMvcmVhZC9tdWx0aXBsZScsXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBpdGVtSWRzOiBpdGVtSWRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cblxuICAgIEl0ZW1SZXNvdXJjZS5wcm90b3R5cGUubWFya0ZlZWRSZWFkID0gZnVuY3Rpb24gKGZlZWRJZCwgcmVhZCkge1xuICAgICAgICBpZiAocmVhZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZWFkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpdGVtcyA9IHRoaXMudmFsdWVzLmZpbHRlcihmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuZmVlZElkID09PSBmZWVkSWQ7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW0udW5yZWFkID0gIXJlYWQ7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh0aGlzLkJBU0VfVVJMICsgJy9mZWVkcy8nICsgZmVlZElkICsgJy9yZWFkJywge1xuICAgICAgICAgICAgaGlnaGVzdEl0ZW1JZDogdGhpcy5nZXROZXdlc3RJdGVtSWQoKVxuICAgICAgICB9KTtcbiAgICB9O1xuXG5cbiAgICBJdGVtUmVzb3VyY2UucHJvdG90eXBlLm1hcmtSZWFkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBpdGVtLnVucmVhZCA9IGZhbHNlO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwKHtcbiAgICAgICAgICAgIHVybDogdGhpcy5CQVNFX1VSTCArICcvaXRlbXMvcmVhZCcsXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBoaWdoZXN0SXRlbUlkOiB0aGlzLmdldE5ld2VzdEl0ZW1JZCgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cblxuICAgIEl0ZW1SZXNvdXJjZS5wcm90b3R5cGUuYXV0b1BhZ2UgPSBmdW5jdGlvbiAodHlwZSwgaWQsIG9sZGVzdEZpcnN0LFxuICAgIHNob3dBbGwsIHNlYXJjaCkge1xuICAgICAgICB2YXIgb2Zmc2V0O1xuXG4gICAgICAgIGlmIChvbGRlc3RGaXJzdCkge1xuICAgICAgICAgICAgb2Zmc2V0ID0gdGhpcy5oaWdoZXN0SWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvZmZzZXQgPSB0aGlzLmxvd2VzdElkO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cCh7XG4gICAgICAgICAgICB1cmw6IHRoaXMuQkFTRV9VUkwgKyAnL2l0ZW1zJyxcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IG9mZnNldCxcbiAgICAgICAgICAgICAgICBsaW1pdDogdGhpcy5iYXRjaFNpemUsXG4gICAgICAgICAgICAgICAgb2xkZXN0Rmlyc3Q6IG9sZGVzdEZpcnN0LFxuICAgICAgICAgICAgICAgIHNob3dBbGw6IHNob3dBbGwsXG4gICAgICAgICAgICAgICAgc2VhcmNoOiBzZWFyY2hcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG4gICAgSXRlbVJlc291cmNlLnByb3RvdHlwZS5pbXBvcnRBcnRpY2xlcyA9IGZ1bmN0aW9uIChqc29uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAoe1xuICAgICAgICAgICAgdXJsOiB0aGlzLkJBU0VfVVJMICsgJy9mZWVkcy9pbXBvcnQvYXJ0aWNsZXMnLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAganNvbjoganNvblxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG5cbiAgICByZXR1cm4gbmV3IEl0ZW1SZXNvdXJjZSgkaHR0cCwgQkFTRV9VUkwsIElURU1fQkFUQ0hfU0laRSk7XG59XSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLnNlcnZpY2UoJ0xvYWRpbmcnLCBmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdGhpcy5sb2FkaW5nID0ge1xuICAgICAgICBnbG9iYWw6IGZhbHNlLFxuICAgICAgICBjb250ZW50OiBmYWxzZSxcbiAgICAgICAgYXV0b3BhZ2luZzogZmFsc2VcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRMb2FkaW5nID0gZnVuY3Rpb24gKGFyZWEsIGlzTG9hZGluZykge1xuICAgICAgICB0aGlzLmxvYWRpbmdbYXJlYV0gPSBpc0xvYWRpbmc7XG4gICAgfTtcblxuICAgIHRoaXMuaXNMb2FkaW5nID0gZnVuY3Rpb24gKGFyZWEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9hZGluZ1thcmVhXTtcbiAgICB9O1xuXG59KTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuc2VydmljZSgnT1BNTEltcG9ydGVyJywgW1wiRmVlZFJlc291cmNlXCIsIFwiRm9sZGVyUmVzb3VyY2VcIiwgXCJQdWJsaXNoZXJcIiwgXCIkcVwiLCBmdW5jdGlvbiAoRmVlZFJlc291cmNlLCBGb2xkZXJSZXNvdXJjZSwgUHVibGlzaGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcSkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgc3RhcnRGZWVkSm9iID0gZnVuY3Rpb24gKHF1ZXVlKSB7XG4gICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgaWYgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBmZWVkID0gcXVldWUucG9wKCk7XG4gICAgICAgICAgICB2YXIgdXJsID0gZmVlZC51cmw7XG4gICAgICAgICAgICB2YXIgdGl0bGUgPSBmZWVkLnRpdGxlO1xuICAgICAgICAgICAgdmFyIGZvbGRlcklkID0gMDtcbiAgICAgICAgICAgIHZhciBmb2xkZXJOYW1lID0gZmVlZC5mb2xkZXJOYW1lO1xuXG4gICAgICAgICAgICBpZiAoZm9sZGVyTmFtZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgRm9sZGVyUmVzb3VyY2UuZ2V0KGZvbGRlck5hbWUpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZm9sZGVyID0gRm9sZGVyUmVzb3VyY2UuZ2V0KGZvbGRlck5hbWUpO1xuICAgICAgICAgICAgICAgIGZvbGRlci5vcGVuZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGZvbGRlcklkID0gZm9sZGVyLmlkO1xuXG4gICAgICAgICAgICAgICAgLy8gZGlzcGxheSBmb2xkZXIgd2hpbGUgYWRkaW5nIHRoZSBmZWVkXG4gICAgICAgICAgICAgICAgZm9sZGVyLmdldHNGZWVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBmb2xkZXIuZ2V0c0ZlZWRDb3VudGVyID0gZm9sZGVyLmdldHNGZWVkQ291bnRlciB8fCAwO1xuICAgICAgICAgICAgICAgIGZvbGRlci5nZXRzRmVlZENvdW50ZXIgKz0gMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRvIG5vdCBhZGQgYWxyZWFkeSBleGlzdGluZyBmZWVkc1xuICAgICAgICAgICAgaWYgKHVybCAhPT0gdW5kZWZpbmVkICYmIEZlZWRSZXNvdXJjZS5nZXQodXJsKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgRmVlZFJlc291cmNlLmNyZWF0ZSh1cmwsIGZvbGRlcklkLCB0aXRsZSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBQdWJsaXNoZXIucHVibGlzaEFsbChkYXRhKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvbGRlcklkICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb2xkZXIuZ2V0c0ZlZWRDb3VudGVyIC09IDE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb2xkZXIuZ2V0c0ZlZWRDb3VudGVyID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9sZGVyLmdldHNGZWVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3RhcnRGZWVkSm9iKHF1ZXVlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH07XG5cbiAgICB0aGlzLmltcG9ydEZvbGRlcnMgPSBmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgICAvLyBhc3N1bXB0aW9uOiBmb2xkZXJzIGFyZSBmYXN0IHRvIGNyZWF0ZSBhbmQgd2UgZG9udCBuZWVkIGEgcXVldWUgZm9yXG4gICAgICAgIC8vIHRoZW1cbiAgICAgICAgdmFyIGZlZWRRdWV1ZSA9IFtdO1xuICAgICAgICB2YXIgZm9sZGVyUHJvbWlzZXMgPSBbXTtcbiAgICAgICAgY29udGVudC5mb2xkZXJzLmZvckVhY2goZnVuY3Rpb24gKGZvbGRlcikge1xuICAgICAgICAgICAgaWYgKGZvbGRlci5uYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBza2lwIGFscmVhZHkgY3JlYXRlZCBmb2xkZXJzXG4gICAgICAgICAgICAgICAgaWYgKEZvbGRlclJlc291cmNlLmdldChmb2xkZXIubmFtZSkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IEZvbGRlclJlc291cmNlLmNyZWF0ZShmb2xkZXIubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFB1Ymxpc2hlci5wdWJsaXNoQWxsKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgZm9sZGVyUHJvbWlzZXMucHVzaChwcm9taXNlKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb2xkZXIuZmVlZHMuZm9yRWFjaChmdW5jdGlvbiAoZmVlZCkge1xuICAgICAgICAgICAgICAgICAgICBmZWVkLmZvbGRlck5hbWUgPSBmb2xkZXIubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgZmVlZFF1ZXVlLnB1c2goZmVlZCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBmZWVkUXVldWUgPSBmZWVkUXVldWUuY29uY2F0KGNvbnRlbnQuZmVlZHMpO1xuXG4gICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgJHEuYWxsKGZvbGRlclByb21pc2VzKS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZmVlZFF1ZXVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfTtcblxuICAgIHRoaXMuaW1wb3J0RmVlZFF1ZXVlID0gZnVuY3Rpb24gKGZlZWRRdWV1ZSwgam9iU2l6ZSkge1xuICAgICAgICAvLyBxdWV1ZSBmZWVkcyB0byBwcmV2ZW50IHNlcnZlciBzbG93ZG93blxuICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgIHZhciBqb2JQcm9taXNlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpPTA7IGk8am9iU2l6ZTsgaSs9MSkge1xuICAgICAgICAgICAgam9iUHJvbWlzZXMucHVzaChzdGFydEZlZWRKb2IoZmVlZFF1ZXVlKSk7XG4gICAgICAgIH1cblxuICAgICAgICAkcS5hbGwoam9iUHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9O1xuXG59XSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLnNlcnZpY2UoJ09QTUxQYXJzZXInLCBmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIHBhcnNlT3V0bGluZSA9IGZ1bmN0aW9uIChvdXRsaW5lKSB7XG4gICAgICAgIHZhciB1cmwgPSBvdXRsaW5lLmF0dHIoJ3htbFVybCcpIHx8IG91dGxpbmUuYXR0cignaHRtbFVybCcpO1xuICAgICAgICB2YXIgbmFtZSA9IG91dGxpbmUuYXR0cigndGl0bGUnKSB8fCBvdXRsaW5lLmF0dHIoJ3RleHQnKSB8fCB1cmw7XG5cbiAgICAgICAgLy8gZm9sZGVyXG4gICAgICAgIGlmICh1cmwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZm9sZGVyJyxcbiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICAgIGZlZWRzOiBbXVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAvLyBmZWVkXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdmZWVkJyxcbiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICAgIHVybDogdXJsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIHRoZXJlIGlzIG9ubHkgb25lIGxldmVsLCBzbyBmZWVkcyBpbiBhIGZvbGRlciBpbiBhIGZvbGRlciBzaG91bGQgYmVcbiAgICAvLyBhdHRhY2hlZCB0byB0aGUgcm9vdCBmb2xkZXJcbiAgICB2YXIgcmVjdXJzaXZlbHlQYXJzZSA9IGZ1bmN0aW9uIChsZXZlbCwgcm9vdCwgZmlyc3RMZXZlbCkge1xuICAgICAgICBmb3IgKHZhciBpPTA7IGk8bGV2ZWwubGVuZ3RoOyBpKz0xKSB7XG4gICAgICAgICAgICB2YXIgb3V0bGluZSA9ICQobGV2ZWxbaV0pO1xuXG4gICAgICAgICAgICB2YXIgZW50cnkgPSBwYXJzZU91dGxpbmUob3V0bGluZSk7XG5cbiAgICAgICAgICAgIGlmIChlbnRyeS50eXBlID09PSAnZmVlZCcpIHtcbiAgICAgICAgICAgICAgICByb290LmZlZWRzLnB1c2goZW50cnkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIC8vIG9ubHkgZmlyc3QgbGV2ZWwgc2hvdWxkIGFwcGVuZCBmb2xkZXJzXG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0TGV2ZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlbHlQYXJzZShvdXRsaW5lLmNoaWxkcmVuKCdvdXRsaW5lJyksIGVudHJ5LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHJvb3QuZm9sZGVycy5wdXNoKGVudHJ5KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZWN1cnNpdmVseVBhcnNlKG91dGxpbmUuY2hpbGRyZW4oJ291dGxpbmUnKSwgcm9vdCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByb290O1xuICAgIH07XG5cbiAgICB0aGlzLnBhcnNlID0gZnVuY3Rpb24gKHhtbCkge1xuICAgICAgICB4bWwgPSAkLnBhcnNlWE1MKHhtbCk7XG4gICAgICAgIHZhciBmaXJzdExldmVsID0gJCh4bWwpLmZpbmQoJ2JvZHkgPiBvdXRsaW5lJyk7XG5cbiAgICAgICAgdmFyIHJvb3QgPSB7XG4gICAgICAgICAgICAnZmVlZHMnOiBbXSxcbiAgICAgICAgICAgICdmb2xkZXJzJzogW11cbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gcmVjdXJzaXZlbHlQYXJzZShmaXJzdExldmVsLCByb290LCB0cnVlKTtcbiAgICB9O1xuXG59KTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5cbi8qanNoaW50IHVuZGVmOmZhbHNlKi9cbmFwcC5zZXJ2aWNlKCdQdWJsaXNoZXInLCBmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdGhpcy5jaGFubmVscyA9IHt9O1xuXG4gICAgdGhpcy5zdWJzY3JpYmUgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdG9DaGFubmVsczogZnVuY3Rpb24gKGNoYW5uZWxzKSB7XG4gICAgICAgICAgICAgICAgY2hhbm5lbHMuZm9yRWFjaChmdW5jdGlvbiAoY2hhbm5lbCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNoYW5uZWxzW2NoYW5uZWxdID0gc2VsZi5jaGFubmVsc1tjaGFubmVsXSB8fCBbXTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jaGFubmVsc1tjaGFubmVsXS5wdXNoKG9iaik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICB9O1xuXG4gICAgdGhpcy5wdWJsaXNoQWxsID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIE9iamVjdC5rZXlzKGRhdGEpLmZvckVhY2goZnVuY3Rpb24gKGNoYW5uZWwpIHtcbiAgICAgICAgICAgIHZhciBsaXN0ZW5lcnMgPSBzZWxmLmNoYW5uZWxzW2NoYW5uZWxdO1xuICAgICAgICAgICAgaWYgKGxpc3RlbmVycyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGxpc3RlbmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyLnJlY2VpdmUoZGF0YVtjaGFubmVsXSwgY2hhbm5lbCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbn0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5mYWN0b3J5KCdSZXNvdXJjZScsIGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgUmVzb3VyY2UgPSBmdW5jdGlvbiAoaHR0cCwgQkFTRV9VUkwsIGlkKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZCB8fCAnaWQnO1xuICAgICAgICB0aGlzLnZhbHVlcyA9IFtdO1xuICAgICAgICB0aGlzLmhhc2hNYXAgPSB7fTtcbiAgICAgICAgdGhpcy5odHRwID0gaHR0cDtcbiAgICAgICAgdGhpcy5CQVNFX1VSTCA9IEJBU0VfVVJMO1xuICAgIH07XG5cblxuICAgIFJlc291cmNlLnByb3RvdHlwZS5yZWNlaXZlID0gZnVuY3Rpb24gKG9ianMpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBvYmpzLmZvckVhY2goZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgc2VsZi5hZGQob2JqKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG4gICAgUmVzb3VyY2UucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgdmFyIGV4aXN0aW5nID0gdGhpcy5oYXNoTWFwW29ialt0aGlzLmlkXV07XG5cbiAgICAgICAgaWYgKGV4aXN0aW5nID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWVzLnB1c2gob2JqKTtcbiAgICAgICAgICAgIHRoaXMuaGFzaE1hcFtvYmpbdGhpcy5pZF1dID0gb2JqO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gY29weSB2YWx1ZXMgZnJvbSBuZXcgdG8gb2xkIG9iamVjdCBpZiBpdCBleGlzdHMgYWxyZWFkeVxuICAgICAgICAgICAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICBleGlzdGluZ1trZXldID0gb2JqW2tleV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cblxuICAgIFJlc291cmNlLnByb3RvdHlwZS5zaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXMubGVuZ3RoO1xuICAgIH07XG5cblxuICAgIFJlc291cmNlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzaE1hcFtpZF07XG4gICAgfTtcblxuXG4gICAgUmVzb3VyY2UucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAvLyBmaW5kIGluZGV4IG9mIG9iamVjdCB0aGF0IHNob3VsZCBiZSBkZWxldGVkXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIGRlbGV0ZUF0SW5kZXggPSB0aGlzLnZhbHVlcy5maW5kSW5kZXgoZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRbc2VsZi5pZF0gPT09IGlkO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoZGVsZXRlQXRJbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlcy5zcGxpY2UoZGVsZXRlQXRJbmRleCwgMSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5oYXNoTWFwW2lkXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5oYXNoTWFwW2lkXTtcbiAgICAgICAgfVxuICAgIH07XG5cblxuICAgIFJlc291cmNlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5oYXNoTWFwID0ge307XG5cbiAgICAgICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMjMyMDQwXG4gICAgICAgIC8vIHRoaXMgaXMgdGhlIGZhc3RlcyB3YXkgdG8gZW1wdHkgYW4gYXJyYXkgd2hlbiB5b3Ugd2FudCB0byBrZWVwXG4gICAgICAgIC8vIHRoZSByZWZlcmVuY2UgYXJvdW5kXG4gICAgICAgIHdoaWxlICh0aGlzLnZhbHVlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlcy5wb3AoKTtcbiAgICAgICAgfVxuICAgIH07XG5cblxuICAgIFJlc291cmNlLnByb3RvdHlwZS5nZXRBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlcztcbiAgICB9O1xuXG5cbiAgICByZXR1cm4gUmVzb3VyY2U7XG59KTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5cbiAvKmpzaGludCB1bnVzZWQ6ZmFsc2UqL1xuYXBwLnNlcnZpY2UoJ1NldHRpbmdzUmVzb3VyY2UnLCBbXCIkaHR0cFwiLCBcIkJBU0VfVVJMXCIsIGZ1bmN0aW9uICgkaHR0cCwgQkFTRV9VUkwpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB0aGlzLnNldHRpbmdzID0ge1xuICAgICAgICBsYW5ndWFnZTogJ2VuJyxcbiAgICAgICAgc2hvd0FsbDogbnVsbCxcbiAgICAgICAgY29tcGFjdDogZmFsc2UsXG4gICAgICAgIG9sZGVzdEZpcnN0OiBudWxsLFxuICAgICAgICBwcmV2ZW50UmVhZE9uU2Nyb2xsOiBmYWxzZSxcbiAgICAgICAgY29tcGFjdEV4cGFuZDogZmFsc2UsXG4gICAgICAgIGV4cGxvcmVVcmw6ICcnXG4gICAgfTtcbiAgICB0aGlzLmRlZmF1bHRMYW5ndWFnZUNvZGUgPSAnZW4nO1xuICAgIHRoaXMuc3VwcG9ydGVkTGFuZ3VhZ2VDb2RlcyA9IFtcbiAgICAgICAgJ2FyLW1hJywgJ2FyJywgJ2JnJywgJ2NhJywgJ2NzJywgJ2N2JywgJ2RhJywgJ2RlJywgJ2VsJywgJ2VuJywgJ2VuLWNhJyxcbiAgICAgICAgJ2VuLWdiJywgJ2VvJywgJ2VzJywgJ2V0JywgJ2V1JywgJ2ZpJywgJ2ZyLWNhJywgJ2ZyJywgJ2dsJywgJ2hlJywgJ2hpJyxcbiAgICAgICAgJ2h1JywgJ2lkJywgJ2lzJywgJ2l0JywgJ2phJywgJ2thJywgJ2tvJywgJ2x2JywgJ21zLW15JywgJ25iJywgJ25lJyxcbiAgICAgICAgJ25sJywgJ3BsJywgJ3B0LWJyJywgJ3B0JywgJ3JvJywgJ3J1JywgJ3NrJywgJ3NsJywgJ3N2JywgJ3RoJywgJ3RyJyxcbiAgICAgICAgJ3R6bS1sYScsICd0em0nLCAndWsnLCAnemgtY24nLCAnemgtdHcnXG4gICAgXTtcblxuICAgIHRoaXMuZ2V0U3VwcG9ydGVkTGFuZ3VhZ2VDb2RlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3VwcG9ydGVkTGFuZ3VhZ2VDb2RlcztcbiAgICB9O1xuXG4gICAgdGhpcy5yZWNlaXZlID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBPYmplY3Qua2V5cyhkYXRhKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGRhdGFba2V5XTtcblxuICAgICAgICAgICAgaWYgKGtleSA9PT0gJ2xhbmd1YWdlJykge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gc2VsZi5wcm9jZXNzTGFuZ3VhZ2VDb2RlKHZhbHVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZi5zZXR0aW5nc1trZXldID0gdmFsdWU7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0aGlzLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3Nba2V5XTtcbiAgICB9O1xuXG4gICAgdGhpcy5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICB0aGlzLnNldHRpbmdzW2tleV0gPSB2YWx1ZTtcblxuICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgdXJsOiBCQVNFX1VSTCArICcvc2V0dGluZ3MnLFxuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBsYW5ndWFnZTogdGhpcy5zZXR0aW5ncy5sYW5ndWFnZSxcbiAgICAgICAgICAgICAgICBzaG93QWxsOiB0aGlzLnNldHRpbmdzLnNob3dBbGwsXG4gICAgICAgICAgICAgICAgY29tcGFjdDogdGhpcy5zZXR0aW5ncy5jb21wYWN0LFxuICAgICAgICAgICAgICAgIG9sZGVzdEZpcnN0OiB0aGlzLnNldHRpbmdzLm9sZGVzdEZpcnN0LFxuICAgICAgICAgICAgICAgIGNvbXBhY3RFeHBhbmQ6IHRoaXMuc2V0dGluZ3MuY29tcGFjdEV4cGFuZCxcbiAgICAgICAgICAgICAgICBwcmV2ZW50UmVhZE9uU2Nyb2xsOiB0aGlzLnNldHRpbmdzLnByZXZlbnRSZWFkT25TY3JvbGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRoaXMucHJvY2Vzc0xhbmd1YWdlQ29kZSA9IGZ1bmN0aW9uIChsYW5ndWFnZUNvZGUpIHtcbiAgICAgICAgbGFuZ3VhZ2VDb2RlID0gbGFuZ3VhZ2VDb2RlLnJlcGxhY2UoJ18nLCAnLScpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuc3VwcG9ydGVkTGFuZ3VhZ2VDb2Rlcy5pbmRleE9mKGxhbmd1YWdlQ29kZSkgPCAwKSB7XG4gICAgICAgICAgICBsYW5ndWFnZUNvZGUgPSBsYW5ndWFnZUNvZGUuc3BsaXQoJy0nKVswXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN1cHBvcnRlZExhbmd1YWdlQ29kZXMuaW5kZXhPZihsYW5ndWFnZUNvZGUpIDwgMCkge1xuICAgICAgICAgICAgbGFuZ3VhZ2VDb2RlID0gdGhpcy5kZWZhdWx0TGFuZ3VhZ2VDb2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGxhbmd1YWdlQ29kZTtcbiAgICB9O1xuXG59XSk7XG4iLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5cbi8qKlxuICogVGhpcyBwcmVmaWxscyB0aGUgYWRkIGZlZWQgc2VjdGlvbiBpZiBhbiBleHRlcm5hbCBsaW5rIGhhcyA/c3Vic3JpYmVfdG9cbiAqIGZpbGxlZCBvdXRcbiAqL1xuKGZ1bmN0aW9uICh3aW5kb3csIGRvY3VtZW50LCBuYXZpZ2F0b3IsIHVybCwgJCwgdW5kZWZpbmVkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8gcmVnaXN0ZXIgcmVhZGVyIGFzIGZlZWQgcmVhZGVyIGluIGZpcmVmb3hcbiAgICB2YXIgbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XG4gICAgdmFyIHN0b3JhZ2UgPSB3aW5kb3cubG9jYWxTdG9yYWdlO1xuXG4gICAgLy8gaWYgaXNDb250ZW50SGFuZGxlclJlZ2lzdGVyZWQgaXMgbm90IGltcGxlbWVudGVkIChGaXJlZm94IEknbSBsb29raW5nXG4gICAgLy8gYXQgeW91KSB3ZSB1c2UgbG9jYWxzdG9yYWdlIHRvIHByZXZlbnQgcmVnaXN0ZXJpbmcgdGhlIGZlZWQgcmVhZGVyIHR3aWNlXG4gICAgdmFyIHJlZ2lzdGVySGFuZGxlciA9IGZ1bmN0aW9uIChtaW1lLCB1cmwsIHRpdGxlKSB7XG4gICAgICAgIHZhciByZWdpc3RlcmVkID0gbmF2aWdhdG9yLmlzQ29udGVudEhhbmRsZXJSZWdpc3RlcmVkO1xuXG4gICAgICAgIHZhciBpc1JlZ2lzdGVyZWQgPSBmdW5jdGlvbiAobWltZSwgdXJsKSB7XG4gICAgICAgICAgICBpZiAocmVnaXN0ZXJlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWdpc3RlcmVkKG1pbWUsIHVybCkgIT09ICduZXcnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmFnZS5nZXRJdGVtKCdyZWdpc3RlcmVkSGFuZGxlcicpID09PSB1cmw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG5hdmlnYXRvci5yZWdpc3RlckNvbnRlbnRIYW5kbGVyICYmICFpc1JlZ2lzdGVyZWQobWltZSwgdXJsKSkge1xuICAgICAgICAgICAgbmF2aWdhdG9yLnJlZ2lzdGVyQ29udGVudEhhbmRsZXIobWltZSwgdXJsLCB0aXRsZSk7XG4gICAgICAgICAgICBpZiAoIXJlZ2lzdGVyZWQpIHtcbiAgICAgICAgICAgICAgICBzdG9yYWdlLnNldEl0ZW0oJ3JlZ2lzdGVyZWRIYW5kbGVyJywgdXJsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgY2xlYW5VcmwgPSBsb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyBsb2NhdGlvbi5ob3N0ICsgbG9jYXRpb24ucGF0aG5hbWU7XG5cbiAgICB2YXIgc3Vic2NyaWJlVXJsID0gY2xlYW5VcmwgKyAnP3N1YnNjcmliZV90bz0lcyc7XG4gICAgdmFyIG1pbWVUeXBlID0gJ2FwcGxpY2F0aW9uL3ZuZC5tb3ppbGxhLm1heWJlLmZlZWQnO1xuICAgIHZhciB0aXRsZSA9ICdvd25DbG91ZCBOZXdzIEAgJyArIGNsZWFuVXJsO1xuXG4gICAgcmVnaXN0ZXJIYW5kbGVyKG1pbWVUeXBlLCBzdWJzY3JpYmVVcmwsIHRpdGxlKTtcblxuXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdXJsKCc/c3Vic2NyaWJlX3RvJyk7XG4gICAgICAgIGlmIChzdWJzY3JpcHRpb24gJiYgc3Vic2NyaXB0aW9uICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgJCgnI25ldy1mZWVkJykuc2hvdygpO1xuXG4gICAgICAgICAgICB2YXIgaW5wdXQgPSAkKCdpbnB1dFtuZy1tb2RlbD1cIk5hdmlnYXRpb24uZmVlZC51cmxcIl0nKTtcbiAgICAgICAgICAgIGlucHV0LnZhbChzdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgaW5wdXQudHJpZ2dlcignaW5wdXQnKTtcblxuICAgICAgICAgICAgLy8gaGFja3kgd2F5IHRvIGZvY3VzIGJlY2F1c2UgaW5pdGlhbCBsb2FkaW5nIG9mIGEgZmVlZFxuICAgICAgICAgICAgLy8gc3RlYWxzIHRoZSBmb2N1c1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxufSkod2luZG93LCBkb2N1bWVudCwgbmF2aWdhdG9yLCB1cmwsICQpO1xuIiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuXG4vKipcbiAqIFZhcmlvdXMgZml4ZXNcbiAqL1xuKGZ1bmN0aW9uICh3aW5kb3csIGRvY3VtZW50KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8gSWYgRjUgaXMgdXNlZCB0byByZWxvYWQgdGhlIHBhZ2UgaW4gRmlyZWZveCwgdGhlIGNvbnRlbnQgd2lsbCBzb21ldGltZXNcbiAgICAvLyBiZSBzY3JvbGxlZCBiYWNrIHRvIHRoZSBwb3NpdGlvbiB3aGVyZSBpdCB3YXMgYmVmb3JlIHRoZSByZWxvYWQgd2hpY2hcbiAgICAvLyB3aWxsIGNhdXNlIG5ldyBhcnRpY2xlcyBiZWluZyBtYXJrZWQgYXMgcmVhZFxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FwcC1jb250ZW50Jyk7XG4gICAgICAgIGNvbnRlbnQuc2Nyb2xsVG8oMCwgMCk7XG4gICAgfSk7XG5cbn0pKHdpbmRvdywgZG9jdW1lbnQpOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cblxuLyoqXG4gKiBDb2RlIGluIGhlcmUgYWN0cyBvbmx5IGFzIGEgY2xpY2sgc2hvcnRjdXQgbWVjaGFuaXNtLiBUaGF0J3Mgd2h5IGl0cyBub3RcbiAqIGJlaW5nIHB1dCBpbnRvIGEgZGlyZWN0aXZlIHNpbmNlIGl0IGhhcyB0byBiZSB0ZXN0ZWQgd2l0aCBwcm90cmFjdG9yXG4gKiBhbnl3YXlzIGFuZCB0aGVyZXMgbm8gYmVuZWZpdCBmcm9tIHdpcmluZyBpdCBpbnRvIHRoZSBhbmd1bGFyIGFwcFxuICovXG4oZnVuY3Rpb24gKHdpbmRvdywgZG9jdW1lbnQsICQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgbm9JbnB1dEZvY3VzZWQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gIShcbiAgICAgICAgICAgIGVsZW1lbnQuaXMoJ2lucHV0JykgfHxcbiAgICAgICAgICAgIGVsZW1lbnQuaXMoJ3NlbGVjdCcpIHx8XG4gICAgICAgICAgICBlbGVtZW50LmlzKCd0ZXh0YXJlYScpIHx8XG4gICAgICAgICAgICBlbGVtZW50LmlzKCdjaGVja2JveCcpXG4gICAgICAgICk7XG4gICAgfTtcblxuICAgIHZhciBub01vZGlmaWVyS2V5ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHJldHVybiAhKFxuICAgICAgICAgICAgZXZlbnQuc2hpZnRLZXkgfHxcbiAgICAgICAgICAgIGV2ZW50LmFsdEtleSB8fFxuICAgICAgICAgICAgZXZlbnQuY3RybEtleSB8fFxuICAgICAgICAgICAgZXZlbnQubWV0YUtleVxuICAgICAgICApO1xuICAgIH07XG5cbiAgICB2YXIgbWFya0FsbFJlYWQgPSBmdW5jdGlvbiAobmF2aWdhdGlvbkFyZWEpIHtcbiAgICAgICAgdmFyIHNlbGVjdG9yID0gJy5hY3RpdmUgPiAuYXBwLW5hdmlnYXRpb24tZW50cnktbWVudSAubWFyay1yZWFkIGJ1dHRvbic7XG4gICAgICAgIHZhciBidXR0b24gPSBuYXZpZ2F0aW9uQXJlYS5maW5kKHNlbGVjdG9yKTtcbiAgICAgICAgaWYgKGJ1dHRvbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBidXR0b24udHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgaXNJblNjcm9sbFZpZXcgPSBmdW5jdGlvbiAoZWxlbSwgc2Nyb2xsQXJlYSkge1xuICAgICAgICAvLyBvZmZzZXQoKS50b3AgYWRkcyB0aGUgbmF2aWdhdGlvbiBiYXIgdG9vIHNvIHdlIGhhdmUgdG8gc3VicmFjdCBpdFxuICAgICAgICB2YXIgZWxlbVRvcCA9IGVsZW0ub2Zmc2V0KCkudG9wIC0gc2Nyb2xsQXJlYS5vZmZzZXQoKS50b3A7XG4gICAgICAgIHZhciBlbGVtQm90dG9tID0gZWxlbVRvcCArIGVsZW0uaGVpZ2h0KCk7XG5cbiAgICAgICAgdmFyIGFyZWFCb3R0b20gPSBzY3JvbGxBcmVhLmhlaWdodCgpO1xuXG4gICAgICAgIHJldHVybiBlbGVtVG9wID49IDAgJiYgZWxlbUJvdHRvbSA8IGFyZWFCb3R0b207XG4gICAgfTtcblxuICAgIHZhciBzY3JvbGxUb05hdmlnYXRpb25FbGVtZW50ID0gZnVuY3Rpb24gKGVsZW0sIHNjcm9sbEFyZWEsIHRvVG9wKSB7XG4gICAgICAgIGlmIChlbGVtLmxlbmd0aCA9PT0gMCB8fCAoIXRvVG9wICYmIGlzSW5TY3JvbGxWaWV3KGVsZW0sIHNjcm9sbEFyZWEpKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNjcm9sbEFyZWEuc2Nyb2xsVG9wKFxuICAgICAgICAgICAgZWxlbS5vZmZzZXQoKS50b3AgLSBzY3JvbGxBcmVhLm9mZnNldCgpLnRvcCArIHNjcm9sbEFyZWEuc2Nyb2xsVG9wKClcbiAgICAgICAgKTtcbiAgICB9O1xuXG4gICAgdmFyIHNjcm9sbFRvQWN0aXZlTmF2aWdhdGlvbkVudHJ5ID0gZnVuY3Rpb24gKG5hdmlnYXRpb25BcmVhKSB7XG4gICAgICAgIHZhciBlbGVtZW50ID0gbmF2aWdhdGlvbkFyZWEuZmluZCgnLmFjdGl2ZScpO1xuICAgICAgICBzY3JvbGxUb05hdmlnYXRpb25FbGVtZW50KGVsZW1lbnQsIG5hdmlnYXRpb25BcmVhLmNoaWxkcmVuKCd1bCcpLCB0cnVlKTtcbiAgICB9O1xuXG4gICAgdmFyIHJlbG9hZEZlZWQgPSBmdW5jdGlvbiAobmF2aWdhdGlvbkFyZWEpIHtcbiAgICAgICAgbmF2aWdhdGlvbkFyZWEuZmluZCgnLmFjdGl2ZSA+IGE6dmlzaWJsZScpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgfTtcblxuICAgIHZhciB0cnlSZWxvYWQgPSBmdW5jdGlvbiAobmF2aWdhdGlvbkFyZWEsIHNjcm9sbEFyZWEpIHtcbiAgICAgICAgaWYgKHNjcm9sbEFyZWEuc2Nyb2xsVG9wKCkgPT09IDApIHtcbiAgICAgICAgICAgIHZhciBwdWxsVG9SZWZyZXNoID0gc2Nyb2xsQXJlYS5maW5kKCcucHVsbC10by1yZWZyZXNoJyk7XG4gICAgICAgICAgICBpZiAoIXB1bGxUb1JlZnJlc2guaGFzQ2xhc3MoJ3Nob3ctcHVsbC10by1yZWZyZXNoJykpIHtcbiAgICAgICAgICAgICAgICBwdWxsVG9SZWZyZXNoLmFkZENsYXNzKCdzaG93LXB1bGwtdG8tcmVmcmVzaCcpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChwdWxsVG9SZWZyZXNoLmhhc0NsYXNzKCdkb25lJykpIHtcbiAgICAgICAgICAgICAgICByZWxvYWRGZWVkKG5hdmlnYXRpb25BcmVhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgYWN0aXZhdGVOYXZpZ2F0aW9uRW50cnkgPSBmdW5jdGlvbiAoZWxlbWVudCwgbmF2aWdhdGlvbkFyZWEpIHtcbiAgICAgICAgZWxlbWVudC5jaGlsZHJlbignYTp2aXNpYmxlJykudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgc2Nyb2xsVG9OYXZpZ2F0aW9uRWxlbWVudChlbGVtZW50LCBuYXZpZ2F0aW9uQXJlYS5jaGlsZHJlbigndWwnKSk7XG4gICAgfTtcblxuICAgIHZhciBuZXh0RmVlZCA9IGZ1bmN0aW9uIChuYXZpZ2F0aW9uQXJlYSkge1xuICAgICAgICB2YXIgY3VycmVudCA9IG5hdmlnYXRpb25BcmVhLmZpbmQoJy5hY3RpdmUnKTtcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gbmF2aWdhdGlvbkFyZWEuZmluZCgnLmV4cGxvcmUtZmVlZCwnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLnN1YnNjcmlwdGlvbnMtZmVlZDp2aXNpYmxlLCcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcuc3RhcnJlZC1mZWVkOnZpc2libGUsJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJy5mZWVkOnZpc2libGUnKTtcblxuICAgICAgICBpZiAoY3VycmVudC5oYXNDbGFzcygnZm9sZGVyJykpIHtcbiAgICAgICAgICAgIHdoaWxlIChjdXJyZW50Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgc3ViZmVlZHMgPSBjdXJyZW50LmZpbmQoJy5mZWVkOnZpc2libGUnKTtcbiAgICAgICAgICAgICAgICBpZiAoc3ViZmVlZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZU5hdmlnYXRpb25FbnRyeSgkKHN1YmZlZWRzWzBdKSwgbmF2aWdhdGlvbkFyZWEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50Lm5leHQoJy5mb2xkZXInKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gbm8gc3ViZmVlZCBmb3VuZFxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRklYTUU6IE8obikgcnVudGltZS4gSWYgc29tZW9uZSBjcmVhdGVzIGEgbmljZSBhbmQgbm90IGZ1Z2x5IHNvbHV0aW9uXG4gICAgICAgIC8vIHBsZWFzZSBjcmVhdGUgYSBQUlxuICAgICAgICBmb3IgKHZhciBpPTA7IGk8ZWxlbWVudHMubGVuZ3RoLTE7IGkrPTEpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZWxlbWVudHNbaV07XG5cbiAgICAgICAgICAgIGlmIChlbGVtZW50ID09PSBjdXJyZW50WzBdKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5leHQgPSBlbGVtZW50c1tpKzFdO1xuICAgICAgICAgICAgICAgIGFjdGl2YXRlTmF2aWdhdGlvbkVudHJ5KCQobmV4dCksIG5hdmlnYXRpb25BcmVhKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0UGFyZW50Rm9sZGVyID0gZnVuY3Rpb24gKGN1cnJlbnQpIHtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnQucGFyZW50KCkucGFyZW50KCcuZm9sZGVyJyk7XG4gICAgfTtcblxuICAgIHZhciBzZWxlY3RGaXJzdE9yTGFzdEZvbGRlciA9IGZ1bmN0aW9uIChuYXZpZ2F0aW9uQXJlYSwgaXNMYXN0KSB7XG4gICAgICAgIHZhciBmb2xkZXJzID0gbmF2aWdhdGlvbkFyZWEuZmluZCgnLmZvbGRlcjp2aXNpYmxlJyk7XG5cbiAgICAgICAgdmFyIGluZGV4O1xuICAgICAgICBpZiAoaXNMYXN0KSB7XG4gICAgICAgICAgICBpbmRleCA9IGZvbGRlcnMubGVuZ3RoIC0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGluZGV4ID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmb2xkZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGFjdGl2YXRlTmF2aWdhdGlvbkVudHJ5KCQoZm9sZGVyc1tpbmRleF0pLCBuYXZpZ2F0aW9uQXJlYSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIHByZXZpb3VzRm9sZGVyID0gZnVuY3Rpb24gKG5hdmlnYXRpb25BcmVhKSB7XG4gICAgICAgIHZhciBjdXJyZW50ID0gbmF2aWdhdGlvbkFyZWEuZmluZCgnLmFjdGl2ZScpO1xuXG4gICAgICAgIC8vIGNhc2VzOiBmb2xkZXIgYWN0aXZlLCBzdWJmZWVkIGFjdGl2ZSwgZmVlZCBhY3RpdmUsIG5vbmUgYWN0aXZlXG4gICAgICAgIGlmIChjdXJyZW50Lmhhc0NsYXNzKCdmb2xkZXInKSkge1xuICAgICAgICAgICAgYWN0aXZhdGVOYXZpZ2F0aW9uRW50cnkoY3VycmVudC5wcmV2QWxsKCcuZm9sZGVyOnZpc2libGUnKS5maXJzdCgpLFxuICAgICAgICAgICAgICAgIG5hdmlnYXRpb25BcmVhKTtcbiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50Lmhhc0NsYXNzKCdmZWVkJykpIHtcbiAgICAgICAgICAgIHZhciBwYXJlbnRGb2xkZXIgPSBnZXRQYXJlbnRGb2xkZXIoY3VycmVudCk7XG4gICAgICAgICAgICBpZiAocGFyZW50Rm9sZGVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAvLyBmaXJzdCBnbyB0byBwcmV2aW91cyBmb2xkZXIgc2hvdWxkIHNlbGVjdCB0aGUgcGFyZW50IGZvbGRlclxuICAgICAgICAgICAgICAgIGFjdGl2YXRlTmF2aWdhdGlvbkVudHJ5KHBhcmVudEZvbGRlciwgbmF2aWdhdGlvbkFyZWEpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RGaXJzdE9yTGFzdEZvbGRlcihuYXZpZ2F0aW9uQXJlYSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxlY3RGaXJzdE9yTGFzdEZvbGRlcihuYXZpZ2F0aW9uQXJlYSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIG5leHRGb2xkZXIgPSBmdW5jdGlvbiAobmF2aWdhdGlvbkFyZWEpIHtcbiAgICAgICAgdmFyIGN1cnJlbnQgPSBuYXZpZ2F0aW9uQXJlYS5maW5kKCcuYWN0aXZlJyk7XG5cbiAgICAgICAgLy8gY2FzZXM6IGZvbGRlciBhY3RpdmUsIHN1YmZlZWQgYWN0aXZlLCBmZWVkIGFjdGl2ZSwgbm9uZSBhY3RpdmVcbiAgICAgICAgaWYgKGN1cnJlbnQuaGFzQ2xhc3MoJ2ZvbGRlcicpKSB7XG4gICAgICAgICAgICBhY3RpdmF0ZU5hdmlnYXRpb25FbnRyeShjdXJyZW50Lm5leHRBbGwoJy5mb2xkZXI6dmlzaWJsZScpLmZpcnN0KCksXG4gICAgICAgICAgICAgICAgbmF2aWdhdGlvbkFyZWEpO1xuICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnQuaGFzQ2xhc3MoJ2ZlZWQnKSkge1xuICAgICAgICAgICAgdmFyIHBhcmVudEZvbGRlciA9IGdldFBhcmVudEZvbGRlcihjdXJyZW50KTtcbiAgICAgICAgICAgIGlmIChwYXJlbnRGb2xkZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGFjdGl2YXRlTmF2aWdhdGlvbkVudHJ5KFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRGb2xkZXIubmV4dEFsbCgnLmZvbGRlcjp2aXNpYmxlJykuZmlyc3QoKSxcbiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGlvbkFyZWFcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RGaXJzdE9yTGFzdEZvbGRlcihuYXZpZ2F0aW9uQXJlYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxlY3RGaXJzdE9yTGFzdEZvbGRlcihuYXZpZ2F0aW9uQXJlYSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIHByZXZpb3VzRmVlZCA9IGZ1bmN0aW9uIChuYXZpZ2F0aW9uQXJlYSkge1xuICAgICAgICB2YXIgY3VycmVudCA9IG5hdmlnYXRpb25BcmVhLmZpbmQoJy5hY3RpdmUnKTtcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gbmF2aWdhdGlvbkFyZWEuZmluZCgnLmV4cGxvcmUtZmVlZCwnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLnN1YnNjcmlwdGlvbnMtZmVlZDp2aXNpYmxlLCcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcuc3RhcnJlZC1mZWVkOnZpc2libGUsJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJy5mZWVkOnZpc2libGUnKTtcblxuICAgICAgICAvLyBzcGVjaWFsIGNhc2U6IGZvbGRlciBzZWxlY3RlZFxuICAgICAgICBpZiAoY3VycmVudC5oYXNDbGFzcygnZm9sZGVyJykpIHtcbiAgICAgICAgICAgIHZhciBwcmV2aW91c0ZvbGRlciA9IGN1cnJlbnQucHJldignLmZvbGRlcicpO1xuXG4gICAgICAgICAgICB3aGlsZSAocHJldmlvdXNGb2xkZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBzdWJmZWVkcyA9IHByZXZpb3VzRm9sZGVyLmZpbmQoJy5mZWVkOnZpc2libGUnKTtcbiAgICAgICAgICAgICAgICBpZiAoc3ViZmVlZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZU5hdmlnYXRpb25FbnRyeSgkKHN1YmZlZWRzW3N1YmZlZWRzLmxlbmd0aC0xXSksXG4gICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uQXJlYSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHJldmlvdXNGb2xkZXIgPSBwcmV2aW91c0ZvbGRlci5wcmV2KCcuZm9sZGVyJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIG5vIHN1YmZlZWQgZm91bmQgdHJ5IHZpc2libGUgZmVlZHNcbiAgICAgICAgICAgIHZhciBmZWVkcyA9IGN1cnJlbnQuc2libGluZ3MoJy5mZWVkJyk7XG5cbiAgICAgICAgICAgIGlmIChmZWVkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgYWN0aXZhdGVOYXZpZ2F0aW9uRW50cnkoJChmZWVkc1tmZWVkcy5sZW5ndGgtMV0pLFxuICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uQXJlYSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIC8vIG5vIGZlZWQgZm91bmQsIGdvIHRvIHN0YXJyZWRcbiAgICAgICAgICAgIHZhciBzdGFycmVkID0gJCgnLnN0YXJyZWQtZmVlZDp2aXNpYmxlJyk7XG4gICAgICAgICAgICBpZiAoc3RhcnJlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgYWN0aXZhdGVOYXZpZ2F0aW9uRW50cnkoc3RhcnJlZCwgbmF2aWdhdGlvbkFyZWEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGSVhNRTogTyhuKSBydW50aW1lLiBJZiBzb21lb25lIGNyZWF0ZXMgYSBuaWNlIGFuZCBub3QgZnVnbHkgc29sdXRpb25cbiAgICAgICAgLy8gcGxlYXNlIGNyZWF0ZSBhIFBSXG4gICAgICAgIGZvciAodmFyIGk9ZWxlbWVudHMubGVuZ3RoLTE7IGk+MDsgaS09MSkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBlbGVtZW50c1tpXTtcblxuICAgICAgICAgICAgaWYgKGVsZW1lbnQgPT09IGN1cnJlbnRbMF0pIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJldmlvdXMgPSBlbGVtZW50c1tpLTFdO1xuICAgICAgICAgICAgICAgIGFjdGl2YXRlTmF2aWdhdGlvbkVudHJ5KCQocHJldmlvdXMpLCBuYXZpZ2F0aW9uQXJlYSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIG9uQWN0aXZlSXRlbSA9IGZ1bmN0aW9uIChzY3JvbGxBcmVhLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgaXRlbXMgPSBzY3JvbGxBcmVhLmZpbmQoJy5pdGVtJyk7XG5cbiAgICAgICAgaXRlbXMuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW0gPSAkKGl0ZW0pO1xuXG4gICAgICAgICAgICAvLyAxMzBweCBvZiB0aGUgaXRlbSBzaG91bGQgYmUgdmlzaWJsZVxuICAgICAgICAgICAgaWYgKChpdGVtLmhlaWdodCgpICsgaXRlbS5wb3NpdGlvbigpLnRvcCkgPiAzMCkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGl0ZW0pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH07XG5cbiAgICB2YXIgdG9nZ2xlVW5yZWFkID0gZnVuY3Rpb24gKHNjcm9sbEFyZWEpIHtcbiAgICAgICAgb25BY3RpdmVJdGVtKHNjcm9sbEFyZWEsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBpdGVtLmZpbmQoJy50b2dnbGUta2VlcC11bnJlYWQnKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIHRvZ2dsZVN0YXIgPSBmdW5jdGlvbiAoc2Nyb2xsQXJlYSkge1xuICAgICAgICBvbkFjdGl2ZUl0ZW0oc2Nyb2xsQXJlYSwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW0uZmluZCgnLnN0YXInKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIGV4cGFuZEl0ZW0gPSBmdW5jdGlvbiAoc2Nyb2xsQXJlYSkge1xuICAgICAgICBvbkFjdGl2ZUl0ZW0oc2Nyb2xsQXJlYSwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW0uZmluZCgnLnV0aWxzJykudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBvcGVuTGluayA9IGZ1bmN0aW9uIChzY3JvbGxBcmVhKSB7XG4gICAgICAgIG9uQWN0aXZlSXRlbShzY3JvbGxBcmVhLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgaXRlbS50cmlnZ2VyKCdjbGljaycpOyAgLy8gbWFyayByZWFkXG4gICAgICAgICAgICB3aW5kb3cub3BlbihpdGVtLmZpbmQoJy5leHRlcm5hbDp2aXNpYmxlJykuYXR0cignaHJlZicpLCAnX2JsYW5rJyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgc2Nyb2xsVG9JdGVtID0gZnVuY3Rpb24gKHNjcm9sbEFyZWEsIGl0ZW0sIGV4cGFuZEl0ZW1JbkNvbXBhY3QpIHtcbiAgICAgICAgLy8gaWYgeW91IGdvIHRvIHRoZSBuZXh0IGFydGljbGUgaW4gY29tcGFjdCB2aWV3LCBpdCBzaG91bGRcbiAgICAgICAgLy8gZXhwYW5kIHRoZSBjdXJyZW50IG9uZVxuICAgICAgICBzY3JvbGxBcmVhLnNjcm9sbFRvcChcbiAgICAgICAgICAgIGl0ZW0ub2Zmc2V0KCkudG9wIC0gc2Nyb2xsQXJlYS5vZmZzZXQoKS50b3AgKyBzY3JvbGxBcmVhLnNjcm9sbFRvcCgpXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKGV4cGFuZEl0ZW1JbkNvbXBhY3QpIHtcbiAgICAgICAgICAgIG9uQWN0aXZlSXRlbShzY3JvbGxBcmVhLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgIGlmICghaXRlbS5oYXNDbGFzcygnb3BlbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uZmluZCgnLnV0aWxzJykudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgc2Nyb2xsVG9OZXh0SXRlbSA9IGZ1bmN0aW9uIChzY3JvbGxBcmVhLCBleHBhbmRJdGVtSW5Db21wYWN0KSB7XG4gICAgICAgIHZhciBpdGVtcyA9IHNjcm9sbEFyZWEuZmluZCgnLml0ZW0nKTtcbiAgICAgICAgdmFyIGp1bXBlZCA9IGZhbHNlO1xuXG4gICAgICAgIGl0ZW1zLmVhY2goZnVuY3Rpb24gKGluZGV4LCBpdGVtKSB7XG4gICAgICAgICAgICBpdGVtID0gJChpdGVtKTtcblxuICAgICAgICAgICAgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGl0ZW1zIHRoYXQgaGF2ZSBleHBhbmQgZW5hYmxlZDpcbiAgICAgICAgICAgIC8vIGlmIHlvdSBjbGljayBuZXh0IGFuZCB0aGUgZmlyc3QgaXRlbSBoYXMgbm90IGJlZW4gZXhwYW5lZCBhbmRcbiAgICAgICAgICAgIC8vIGlzIG9uIHRoZSB0b3AsIGl0IHNob3VsZCBiZSBleHBhbmRlZCBpbnN0ZWFkIG9mIHRoZSBuZXh0IG9uZVxuICAgICAgICAgICAgaWYgKChpdGVtLnBvc2l0aW9uKCkudG9wID09PSAwICYmIGV4cGFuZEl0ZW1JbkNvbXBhY3QgJiZcbiAgICAgICAgICAgICAgICAgIWl0ZW0uaGFzQ2xhc3MoJ29wZW4nKSkgfHxcbiAgICAgICAgICAgICAgICBpdGVtLnBvc2l0aW9uKCkudG9wID4gMTApIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxUb0l0ZW0oc2Nyb2xsQXJlYSwgaXRlbSwgZXhwYW5kSXRlbUluQ29tcGFjdCk7XG5cbiAgICAgICAgICAgICAgICBqdW1wZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBpbiBjYXNlIHRoaXMgaXMgdGhlIGxhc3QgaXRlbSBpdCBzaG91bGQgc3RpbGwgc2Nyb2xsIGJlbG93IHRoZSB0b3BcbiAgICAgICAgaWYgKCFqdW1wZWQpIHtcbiAgICAgICAgICAgIHNjcm9sbEFyZWEuc2Nyb2xsVG9wKHNjcm9sbEFyZWEucHJvcCgnc2Nyb2xsSGVpZ2h0JykpO1xuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgdmFyIHNjcm9sbFRvUHJldmlvdXNJdGVtID0gZnVuY3Rpb24gKG5hdmlnYXRpb25BcmVhLCBzY3JvbGxBcmVhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBhbmRJdGVtSW5Db21wYWN0KSB7XG4gICAgICAgIHZhciBpdGVtcyA9IHNjcm9sbEFyZWEuZmluZCgnLml0ZW0nKTtcbiAgICAgICAgdmFyIGp1bXBlZCA9IGZhbHNlO1xuXG4gICAgICAgIGl0ZW1zLmVhY2goZnVuY3Rpb24gKGluZGV4LCBpdGVtKSB7XG4gICAgICAgICAgICBpdGVtID0gJChpdGVtKTtcblxuICAgICAgICAgICAgaWYgKChpdGVtLnBvc2l0aW9uKCkudG9wICsgMTApID49IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJldmlvdXMgPSBpdGVtLnByZXYoKTtcblxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGFyZSBubyBpdGVtcyBiZWZvcmUgdGhlIGN1cnJlbnQgb25lXG4gICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9JdGVtKHNjcm9sbEFyZWEsIHByZXZpb3VzLCBleHBhbmRJdGVtSW5Db21wYWN0KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0cnlSZWxvYWQobmF2aWdhdGlvbkFyZWEsIHNjcm9sbEFyZWEpO1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGxBcmVhLnNjcm9sbFRvcCgwKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBqdW1wZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBpZiB0aGVyZSB3YXMgbm8ganVtcCBqdW1wIHRvIHRoZSBsYXN0IGVsZW1lbnRcbiAgICAgICAgaWYgKCFqdW1wZWQgJiYgaXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgc2Nyb2xsVG9JdGVtKHNjcm9sbEFyZWEsIGl0ZW1zLmxhc3QoKSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cbiAgICAkKGRvY3VtZW50KS5rZXl1cChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIGtleUNvZGUgPSBldmVudC5rZXlDb2RlO1xuICAgICAgICB2YXIgc2Nyb2xsQXJlYSA9ICQoJyNhcHAtY29udGVudCcpO1xuICAgICAgICB2YXIgbmF2aWdhdGlvbkFyZWEgPSAkKCcjYXBwLW5hdmlnYXRpb24nKTtcbiAgICAgICAgdmFyIGlzQ29tcGFjdFZpZXcgPSAkKCcjYXJ0aWNsZXMuY29tcGFjdCcpLmxlbmd0aCA+IDA7XG4gICAgICAgIHZhciBpc0V4cGFuZEl0ZW0gPSAkKCcjYXJ0aWNsZXMnKVxuICAgICAgICAgICAgLmF0dHIoJ25ld3MtY29tcGFjdC1leHBhbmQnKSA9PT0gJ3RydWUnO1xuICAgICAgICB2YXIgZXhwYW5kSXRlbUluQ29tcGFjdCA9IGlzQ29tcGFjdFZpZXcgJiYgaXNFeHBhbmRJdGVtO1xuXG4gICAgICAgIGlmIChub0lucHV0Rm9jdXNlZCgkKCc6Zm9jdXMnKSkgJiYgbm9Nb2RpZmllcktleShldmVudCkpIHtcbiAgICAgICAgICAgIC8vIGosIG4sIHJpZ2h0IGFycm93XG4gICAgICAgICAgICBpZiAoWzc0LCA3OCwgMzldLmluZGV4T2Yoa2V5Q29kZSkgPj0gMCkge1xuXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBzY3JvbGxUb05leHRJdGVtKHNjcm9sbEFyZWEsIGV4cGFuZEl0ZW1JbkNvbXBhY3QpO1xuXG4gICAgICAgICAgICAvLyBrLCBwLCBsZWZ0IGFycm93XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFs3NSwgODAsIDM3XS5pbmRleE9mKGtleUNvZGUpID49IDApIHtcblxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9QcmV2aW91c0l0ZW0obmF2aWdhdGlvbkFyZWEsIHNjcm9sbEFyZWEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwYW5kSXRlbUluQ29tcGFjdCk7XG5cbiAgICAgICAgICAgIC8vIHVcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoWzg1XS5pbmRleE9mKGtleUNvZGUpID49IDApIHtcblxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdG9nZ2xlVW5yZWFkKHNjcm9sbEFyZWEpO1xuXG4gICAgICAgICAgICAvLyBlXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFs2OV0uaW5kZXhPZihrZXlDb2RlKSA+PSAwKSB7XG5cbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGV4cGFuZEl0ZW0oc2Nyb2xsQXJlYSk7XG5cbiAgICAgICAgICAgIC8vIHMsIGksIGxcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoWzczLCA4MywgNzZdLmluZGV4T2Yoa2V5Q29kZSkgPj0gMCkge1xuXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0b2dnbGVTdGFyKHNjcm9sbEFyZWEpO1xuXG4gICAgICAgICAgICAvLyBoXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFs3Ml0uaW5kZXhPZihrZXlDb2RlKSA+PSAwKSB7XG5cbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRvZ2dsZVN0YXIoc2Nyb2xsQXJlYSk7XG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9OZXh0SXRlbShzY3JvbGxBcmVhKTtcblxuICAgICAgICAgICAgLy8gb1xuICAgICAgICAgICAgfSBlbHNlIGlmIChbNzldLmluZGV4T2Yoa2V5Q29kZSkgPj0gMCkge1xuXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBvcGVuTGluayhzY3JvbGxBcmVhKTtcblxuICAgICAgICAgICAgLy8gclxuICAgICAgICAgICAgfSBlbHNlIGlmIChbODJdLmluZGV4T2Yoa2V5Q29kZSkgPj0gMCkge1xuXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICByZWxvYWRGZWVkKG5hdmlnYXRpb25BcmVhKTtcblxuICAgICAgICAgICAgLy8gZlxuICAgICAgICAgICAgfSBlbHNlIGlmIChbNzBdLmluZGV4T2Yoa2V5Q29kZSkgPj0gMCkge1xuXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBuZXh0RmVlZChuYXZpZ2F0aW9uQXJlYSk7XG5cbiAgICAgICAgICAgIC8vIGRcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoWzY4XS5pbmRleE9mKGtleUNvZGUpID49IDApIHtcblxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgcHJldmlvdXNGZWVkKG5hdmlnYXRpb25BcmVhKTtcblxuICAgICAgICAgICAgLy8gY1xuICAgICAgICAgICAgfSBlbHNlIGlmIChbNjddLmluZGV4T2Yoa2V5Q29kZSkgPj0gMCkge1xuXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBwcmV2aW91c0ZvbGRlcihuYXZpZ2F0aW9uQXJlYSk7XG5cbiAgICAgICAgICAgIC8vIGFcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoWzY1XS5pbmRleE9mKGtleUNvZGUpID49IDApIHtcblxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9BY3RpdmVOYXZpZ2F0aW9uRW50cnkobmF2aWdhdGlvbkFyZWEpO1xuXG4gICAgICAgICAgICAvLyB2XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFs4Nl0uaW5kZXhPZihrZXlDb2RlKSA+PSAwKSB7XG5cbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIG5leHRGb2xkZXIobmF2aWdhdGlvbkFyZWEpO1xuXG4gICAgICAgICAgICAvLyBxXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFs4MV0uaW5kZXhPZihrZXlDb2RlKSA+PSAwKSB7XG5cbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICQoJyNzZWFyY2hib3gnKS5mb2N1cygpO1xuXG4gICAgICAgICAgICAvLyBwYWdlIHVwXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFszM10uaW5kZXhPZihrZXlDb2RlKSA+PSAwKSB7XG5cbiAgICAgICAgICAgICAgICB0cnlSZWxvYWQobmF2aWdhdGlvbkFyZWEsIHNjcm9sbEFyZWEpO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgLy8gZXZlcnl0aGluZyB3aXRoIHNoaWZ0XG4gICAgICAgIH0gZWxzZSBpZiAobm9JbnB1dEZvY3VzZWQoJCgnOmZvY3VzJykpICYmIGV2ZW50LnNoaWZ0S2V5KSB7XG5cbiAgICAgICAgICAgIC8vIHNoaWZ0ICsgYVxuICAgICAgICAgICAgaWYgKFs2NV0uaW5kZXhPZihrZXlDb2RlKSA+PSAwKSB7XG5cbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIG1hcmtBbGxSZWFkKG5hdmlnYXRpb25BcmVhKTtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbn0od2luZG93LCBkb2N1bWVudCwgJCkpO1xuIiwid2luZG93Lk5ld3MgPSB3aW5kb3cuTmV3cyB8fCB7fTtcblxuXG4oZnVuY3Rpb24gKHdpbmRvdywgZG9jdW1lbnQsICQsIGV4cG9ydHMsIHVuZGVmaW5lZCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBhcnRpY2xlQWN0aW9uUGx1Z2lucyA9IFtdO1xuXG4gICAgZXhwb3J0cy5hZGRBcnRpY2xlQWN0aW9uID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICBhcnRpY2xlQWN0aW9uUGx1Z2lucy5wdXNoKGFjdGlvbik7XG4gICAgfTtcblxuICAgIGV4cG9ydHMuZ2V0QXJ0aWNsZUFjdGlvblBsdWdpbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhcnRpY2xlQWN0aW9uUGx1Z2lucztcbiAgICB9O1xuXG59KSh3aW5kb3csIGRvY3VtZW50LCBqUXVlcnksIHdpbmRvdy5OZXdzKTtcblxuIiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLnJ1bihbXCIkZG9jdW1lbnRcIiwgXCIkcm9vdFNjb3BlXCIsIGZ1bmN0aW9uICgkZG9jdW1lbnQsICRyb290U2NvcGUpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgJGRvY3VtZW50LmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ2RvY3VtZW50Q2xpY2tlZCcsIGV2ZW50KTtcbiAgICB9KTtcbn1dKTtcblxuYXBwLmRpcmVjdGl2ZSgnYXBwTmF2aWdhdGlvbkVudHJ5VXRpbHMnLCBmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQycsXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxtKSB7XG4gICAgICAgICAgICB2YXIgbWVudSA9IGVsbS5zaWJsaW5ncygnLmFwcC1uYXZpZ2F0aW9uLWVudHJ5LW1lbnUnKTtcbiAgICAgICAgICAgIHZhciBidXR0b24gPSAkKGVsbSlcbiAgICAgICAgICAgICAgICAuZmluZCgnLmFwcC1uYXZpZ2F0aW9uLWVudHJ5LXV0aWxzLW1lbnUtYnV0dG9uIGJ1dHRvbicpO1xuXG4gICAgICAgICAgICBidXR0b24uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIG1lbnUudG9nZ2xlQ2xhc3MoJ29wZW4nKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBzY29wZS4kb24oJ2RvY3VtZW50Q2xpY2tlZCcsIGZ1bmN0aW9uIChzY29wZSwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ICE9PSBidXR0b25bMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgbWVudS5yZW1vdmVDbGFzcygnb3BlbicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5kaXJlY3RpdmUoJ25ld3NBZGRGZWVkJywgW1wiJHJvb3RTY29wZVwiLCBcIiR0aW1lb3V0XCIsIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkdGltZW91dCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbSkge1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kb24oJ2FkZEZlZWQnLCBmdW5jdGlvbiAoXywgdXJsKSB7XG5cbiAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtLmlzKCc6YW5pbWF0ZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5zdG9wKHRydWUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWVsZW0uaXMoJzp2aXNpYmxlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0uc2xpZGVEb3duKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxlbS5maW5kKCdbbmctbW9kZWw9XCJOYXZpZ2F0aW9uLmZlZWQudXJsXCJdJykuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHNjb3BlLk5hdmlnYXRpb24uZmVlZC51cmwgPSB1cmw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59XSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmRpcmVjdGl2ZSgnbmV3c0FydGljbGVBY3Rpb25zJywgZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgbmV3c0FydGljbGVBY3Rpb25zOiAnPScsXG4gICAgICAgICAgICBub1BsdWdpbnM6ICc9J1xuICAgICAgICB9LFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW0pIHtcbiAgICAgICAgICAgIHZhciBwbHVnaW5zID0gTmV3cy5nZXRBcnRpY2xlQWN0aW9uUGx1Z2lucygpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8cGx1Z2lucy5sZW5ndGg7IGkrPTEpIHtcbiAgICAgICAgICAgICAgICBwbHVnaW5zW2ldKGVsZW0sIHNjb3BlLm5ld3NBcnRpY2xlQWN0aW9ucyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNjb3BlLm5vUGx1Z2lucyA9IHBsdWdpbnMubGVuZ3RoID09PSAwO1xuICAgICAgICB9XG4gICAgfTtcbn0pO1xuIiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmRpcmVjdGl2ZSgnbmV3c0F1dG9Gb2N1cycsIFtcIiR0aW1lb3V0XCIsIGZ1bmN0aW9uICgkdGltZW91dCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCBlbGVtLCBhdHRycykge1xuICAgICAgICB2YXIgdG9Gb2N1cyA9IGVsZW07XG5cbiAgICAgICAgaWYgKGF0dHJzLm5ld3NBdXRvRm9jdXMpIHtcbiAgICAgICAgICAgIHRvRm9jdXMgPSAkKGF0dHJzLm5ld3NBdXRvRm9jdXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdG8gY29tYmF0ICRkaWdlc3QgYWxyZWFkeSBpbiBwcm9jZXNzIGVycm9yIHdoZW4gcm91dGUgY2hhbmdlc1xuICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0b0ZvY3VzLmZvY3VzKCk7XG4gICAgICAgIH0sIDApO1xuICAgIH07XG59XSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmRpcmVjdGl2ZSgnbmV3c0JpbmRIdG1sVW5zYWZlJywgZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHJldHVybiBmdW5jdGlvbiAoc2NvcGUsIGVsZW0sIGF0dHIpIHtcbiAgICAgICAgc2NvcGUuJHdhdGNoKGF0dHIubmV3c0JpbmRIdG1sVW5zYWZlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlbGVtLmh0bWwoc2NvcGUuJGV2YWwoYXR0ci5uZXdzQmluZEh0bWxVbnNhZmUpKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5kaXJlY3RpdmUoJ25ld3NEcmFnZ2FibGUnLCBmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzY29wZSwgZWxlbSwgYXR0cikge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHNjb3BlLiRldmFsKGF0dHIubmV3c0RyYWdnYWJsZSk7XG5cbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKG9wdGlvbnMpKSB7XG4gICAgICAgICAgICBlbGVtLmRyYWdnYWJsZShvcHRpb25zKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW0uZHJhZ2dhYmxlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBhdHRyLiRvYnNlcnZlKCduZXdzRHJhZ2dhYmxlRGlzYWJsZScsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICBlbGVtLmRyYWdnYWJsZSgnZGlzYWJsZScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGVtLmRyYWdnYWJsZSgnZW5hYmxlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG59KTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuZGlyZWN0aXZlKCduZXdzRHJvcHBhYmxlJywgW1wiJHJvb3RTY29wZVwiLCBmdW5jdGlvbiAoJHJvb3RTY29wZSkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHJldHVybiBmdW5jdGlvbiAoc2NvcGUsIGVsZW0sIGF0dHIpIHtcbiAgICAgICAgdmFyIGRldGFpbHMgPSB7XG4gICAgICAgICAgICBhY2NlcHQ6ICcuZmVlZCcsXG4gICAgICAgICAgICBob3ZlckNsYXNzOiAnZHJhZy1hbmQtZHJvcCcsXG4gICAgICAgICAgICBncmVlZHk6IHRydWUsXG4gICAgICAgICAgICBkcm9wOiBmdW5jdGlvbiAoZXZlbnQsIHVpKSB7XG5cbiAgICAgICAgICAgICAgICAkKCcuZHJhZy1hbmQtZHJvcCcpLnJlbW92ZUNsYXNzKCdkcmFnLWFuZC1kcm9wJyk7XG5cbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgZm9sZGVySWQ6IHBhcnNlSW50KGVsZW0uZGF0YSgnaWQnKSwgMTApLFxuICAgICAgICAgICAgICAgICAgICBmZWVkSWQ6IHBhcnNlSW50KCQodWkuZHJhZ2dhYmxlKS5kYXRhKCdpZCcpLCAxMClcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdtb3ZlRmVlZFRvRm9sZGVyJywgZGF0YSk7XG4gICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGF0dHIuZHJvcHBhYmxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBlbGVtLmRyb3BwYWJsZShkZXRhaWxzKTtcbiAgICB9O1xufV0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cblxuYXBwLmRpcmVjdGl2ZSgnbmV3c0ZpbmlzaGVkVHJhbnNpdGlvbicsIGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCBlbGVtLCBhdHRycykge1xuICAgICAgICBlbGVtLm9uKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWxlbS5hZGRDbGFzcyhhdHRycy5uZXdzRmluaXNoZWRUcmFuc2l0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxufSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmRpcmVjdGl2ZSgnbmV3c0ZvY3VzJywgW1wiJHRpbWVvdXRcIiwgXCIkaW50ZXJwb2xhdGVcIiwgZnVuY3Rpb24gKCR0aW1lb3V0LCAkaW50ZXJwb2xhdGUpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCBlbGVtLCBhdHRycykge1xuICAgICAgICBlbGVtLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0b1JlYWRkID0gJCgkaW50ZXJwb2xhdGUoYXR0cnMubmV3c0ZvY3VzKShzY29wZSkpO1xuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRvUmVhZGQuZm9jdXMoKTtcbiAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbn1dKTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5cbmFwcC5kaXJlY3RpdmUoJ25ld3NJbnN0YW50Tm90aWZpY2F0aW9uJywgZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbSkge1xuICAgICAgICAgICAgZWxlbS5oaWRlKCk7XG5cbiAgICAgICAgICAgIHZhciBub3RpZmljYXRpb24gPSBlbGVtLmh0bWwoKTtcbiAgICAgICAgICAgIE9DLk5vdGlmaWNhdGlvbi5zaG93SHRtbChub3RpZmljYXRpb24pO1xuICAgICAgICB9XG4gICAgfTtcblxufSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuXG4vKipcbiAqIFBhdXNlIHBsYXliYWNrIG9uIGVsZW1lbnRzIG90aGVyIHRoYW4gdGhlIGN1cnJlbnQgb25lXG4gKi9cbmFwcC5kaXJlY3RpdmUoJ25ld3NQbGF5T25lJywgW1wiJHJvb3RTY29wZVwiLCBmdW5jdGlvbiAoJHJvb3RTY29wZSkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW0pIHtcbiAgICAgICAgICAgIGVsZW0ub24oJ3BsYXknLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdwbGF5aW5nJywgZWxlbSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJHJvb3RTY29wZS4kb24oJ3BsYXlpbmcnLCBmdW5jdGlvbiAoc2NvcGUsIGFyZ3MpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJnc1swXSAhPT0gZWxlbVswXSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtWzBdLnBhdXNlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufV0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5kaXJlY3RpdmUoJ25ld3NQdWxsVG9SZWZyZXNoJywgW1wiJHJvb3RTY29wZVwiLCBmdW5jdGlvbiAoJHJvb3RTY29wZSkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBzY3JvbGxlZCA9IGZhbHNlO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIG5ld3NQdWxsVG9SZWZyZXNoOiAnPSdcbiAgICAgICAgfSxcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50KSB7XG5cbiAgICAgICAgICAgIC8vIGNoYW5nZSBpbiB0aGUgcm91dGUgbWVhbnMgdGhlIGNvbnRlbnQgaXMgcmVmcmVzaGVkXG4gICAgICAgICAgICAvLyBzbyByZXNldCB0aGUgdmFyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBzY29wZS5uZXdzUHVsbFRvUmVmcmVzaCA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGVsZW1lbnQub24oJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zY3JvbGxUb3AoKSA9PT0gMCAmJiBzY3JvbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICBzY29wZS5uZXdzUHVsbFRvUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNjcm9sbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn1dKTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuZGlyZWN0aXZlKCduZXdzUmVhZEZpbGUnLCBmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzY29wZSwgZWxlbSwgYXR0cikge1xuXG4gICAgICAgIGVsZW0uY2hhbmdlKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgdmFyIGZpbGUgPSBlbGVtWzBdLmZpbGVzWzBdO1xuICAgICAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cbiAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBGSVhNRTogaXMgdGhlcmUgYSBtb3JlIGZsZXhpYmxlIHNvbHV0aW9uIHdoZXJlIHdlIGRvbnQgaGF2ZVxuICAgICAgICAgICAgICAgIC8vIHRvIGJpbmQgdGhlIGZpbGUgdG8gc2NvcGU/XG4gICAgICAgICAgICAgICAgc2NvcGUuJGZpbGVDb250ZW50ID0gZXZlbnQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoYXR0ci5uZXdzUmVhZEZpbGUpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSk7XG4gICAgICAgIH0pO1xuICAgIH07XG59KTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuZGlyZWN0aXZlKCduZXdzUmVmcmVzaE1hc29ucnknLCBbXCIkdGltZW91dFwiLCBmdW5jdGlvbiAoJHRpbWVvdXQpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgcmVmcmVzaCA9IGZ1bmN0aW9uIChlbGVtKSB7XG5cdFx0JHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRlbGVtLnBhcmVudCgpLm1hc29ucnkoe1xuXHRcdFx0XHRcdGl0ZW1TZWxlY3RvcjogJy5ncmlkLWl0ZW0nLFxuXHRcdFx0XHRcdGd1dHRlcjogMjUsXG5cdFx0XHRcdFx0Y29sdW1uV2lkdGg6IDMwMFxuXHRcdFx0XHR9KTtcblx0XHRcdH0sIDEwMCk7XG5cdFx0fSk7XG5cdH07XG5cblx0cmV0dXJuIGZ1bmN0aW9uIChzY29wZSwgZWxlbSkge1xuXHRcdGlmIChzY29wZS4kbGFzdCkge1xuXHRcdFx0cmVmcmVzaChlbGVtKTtcblx0XHR9XG5cdH07XG59XSk7XG4iLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuZGlyZWN0aXZlKCduZXdzU2Nyb2xsJywgW1wiJHRpbWVvdXRcIiwgXCJJVEVNX0FVVE9fUEFHRV9TSVpFXCIsIFwiTUFSS19SRUFEX1RJTUVPVVRcIiwgXCJTQ1JPTExfVElNRU9VVFwiLCBmdW5jdGlvbiAoJHRpbWVvdXQsIElURU1fQVVUT19QQUdFX1NJWkUsXG4gICAgTUFSS19SRUFEX1RJTUVPVVQsIFNDUk9MTF9USU1FT1VUKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciB0aW1lcjtcblxuICAgIC8vIGF1dG9wYWdpbmdcbiAgICB2YXIgYXV0b1BhZ2UgPSBmdW5jdGlvbiAobGltaXQsIGVsZW0sIHNjb3BlKSB7XG4gICAgICAgIHZhciBjb3VudGVyID0gMDtcbiAgICAgICAgdmFyIGFydGljbGVzID0gZWxlbS5maW5kKCcuaXRlbScpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSBhcnRpY2xlcy5sZW5ndGggLSAxOyBpID49IDA7IGkgLT0gMSkge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSAkKGFydGljbGVzW2ldKTtcblxuXG4gICAgICAgICAgICAvLyBpZiB0aGUgY291bnRlciBpcyBoaWdoZXIgdGhhbiB0aGUgc2l6ZSBpdCBtZWFuc1xuICAgICAgICAgICAgLy8gdGhhdCBpdCBkaWRudCBicmVhayB0byBhdXRvIHBhZ2UgeWV0IGFuZCB0aGF0XG4gICAgICAgICAgICAvLyB0aGVyZSBhcmUgbW9yZSBpdGVtcywgc28gYnJlYWtcbiAgICAgICAgICAgIGlmIChjb3VudGVyID49IGxpbWl0KSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHRoaXMgaXMgb25seSByZWFjaGVkIHdoZW4gdGhlIGl0ZW0gaXMgbm90IGlzXG4gICAgICAgICAgICAvLyBiZWxvdyB0aGUgdG9wIGFuZCB3ZSBkaWRudCBoaXQgdGhlIGZhY3RvciB5ZXQgc29cbiAgICAgICAgICAgIC8vIGF1dG9wYWdlIGFuZCBicmVha1xuICAgICAgICAgICAgaWYgKGl0ZW0ucG9zaXRpb24oKS50b3AgPCAwKSB7XG4gICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KHNjb3BlLm5ld3NTY3JvbGxBdXRvUGFnZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvdW50ZXIgKz0gMTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBtYXJrIHJlYWRcbiAgICB2YXIgbWFya1JlYWQgPSBmdW5jdGlvbiAoZW5hYmxlZCwgZWxlbSwgc2NvcGUpIHtcbiAgICAgICAgaWYgKGVuYWJsZWQpIHtcbiAgICAgICAgICAgIHZhciBpZHMgPSBbXTtcbiAgICAgICAgICAgIHZhciBhcnRpY2xlcyA9IGVsZW0uZmluZCgnLml0ZW06bm90KC5yZWFkKScpO1xuXG4gICAgICAgICAgICBhcnRpY2xlcy5lYWNoKGZ1bmN0aW9uKGluZGV4LCBhcnRpY2xlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSAkKGFydGljbGUpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0ucG9zaXRpb24oKS50b3AgPD0gLTEwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlkcy5wdXNoKHBhcnNlSW50KGl0ZW0uZGF0YSgnaWQnKSwgMTApKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHNjb3BlLml0ZW1JZHMgPSBpZHM7XG4gICAgICAgICAgICBzY29wZS4kYXBwbHkoc2NvcGUubmV3c1Njcm9sbE1hcmtSZWFkKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgJ25ld3NTY3JvbGwnOiAnQCcsXG4gICAgICAgICAgICAnbmV3c1Njcm9sbEF1dG9QYWdlJzogJyYnLFxuICAgICAgICAgICAgJ25ld3NTY3JvbGxNYXJrUmVhZCc6ICcmJyxcbiAgICAgICAgICAgICduZXdzU2Nyb2xsRW5hYmxlZE1hcmtSZWFkJzogJz0nLFxuICAgICAgICB9LFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW0pIHtcbiAgICAgICAgICAgIHZhciBhbGxvd1Njcm9sbCA9IHRydWU7XG4gICAgICAgICAgICB2YXIgc2Nyb2xsQXJlYSA9IGVsZW07XG5cbiAgICAgICAgICAgIGlmIChzY29wZS5uZXdzU2Nyb2xsKSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsQXJlYSA9ICQoc2NvcGUubmV3c1Njcm9sbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBzY3JvbGxIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vIGFsbG93IG9ubHkgb25lIHNjcm9sbCBldmVudCB0byB0cmlnZ2VyIGV2ZXJ5IDMwMG1zXG4gICAgICAgICAgICAgICAgaWYgKGFsbG93U2Nyb2xsKSB7XG4gICAgICAgICAgICAgICAgICAgIGFsbG93U2Nyb2xsID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dTY3JvbGwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9LCBTQ1JPTExfVElNRU9VVCoxMDAwKTtcblxuICAgICAgICAgICAgICAgICAgICBhdXRvUGFnZShJVEVNX0FVVE9fUEFHRV9TSVpFLCBlbGVtLCBzY29wZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gZG9udCBzdGFjayBtYXJrIHJlYWQgcmVxdWVzdHNcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dC5jYW5jZWwodGltZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gYWxsb3cgdXNlciB0byB1bmRvIGFjY2lkZW50YWwgc2Nyb2xsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVyID0gJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFya1JlYWQoc2NvcGUubmV3c1Njcm9sbEVuYWJsZWRNYXJrUmVhZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgfSwgTUFSS19SRUFEX1RJTUVPVVQqMTAwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgc2Nyb2xsQXJlYS5vbignc2Nyb2xsJywgc2Nyb2xsSGFuZGxlcik7XG5cbiAgICAgICAgICAgIC8vIHJlbW92ZSBzY3JvbGwgaGFuZGxlciBpZiBlbGVtZW50IGlzIGRlc3Ryb3llZFxuICAgICAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxBcmVhLm9mZignc2Nyb2xsJywgc2Nyb2xsSGFuZGxlcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59XSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmRpcmVjdGl2ZSgnbmV3c1NlYXJjaCcsIFtcIiRkb2N1bWVudFwiLCBcIiRsb2NhdGlvblwiLCBmdW5jdGlvbiAoJGRvY3VtZW50LCAkbG9jYXRpb24pIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgJ29uU2VhcmNoJzogJz0nXG4gICAgICAgIH0sXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSkge1xuICAgICAgICAgICAgdmFyIGJveCA9ICQoJyNzZWFyY2hib3gnKTtcbiAgICAgICAgICAgIGJveC52YWwoJGxvY2F0aW9uLnNlYXJjaCgpLnNlYXJjaCk7XG5cbiAgICAgICAgICAgIHZhciBkb1NlYXJjaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBib3gudmFsKCk7XG4gICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUub25TZWFyY2godmFsdWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYm94Lm9uKCdzZWFyY2gga2V5dXAnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3NlYXJjaCcgfHwgZXZlbnQua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9TZWFyY2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gY2Fycnkgb3ZlciBzZWFyY2ggb24gcm91dGUgY2hhbmdlXG4gICAgICAgICAgICBzY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAkbG9jYXRpb24uc2VhcmNoKCk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoc2VhcmNoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlYXJjaCAmJiBzZWFyY2guc2VhcmNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGJveC52YWwoc2VhcmNoLnNlYXJjaCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYm94LnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufV0pO1xuIiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmRpcmVjdGl2ZSgnbmV3c1N0aWNreU1lbnUnLCBmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzY29wZSwgZWxlbSwgYXR0cikge1xuICAgICAgICB2YXIgaGVpZ2h0ID0gNDA7XG5cbiAgICAgICAgJChhdHRyLm5ld3NTdGlja3lNZW51KS5zY3JvbGwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNjcm9sbEhlaWdodCA9ICQodGhpcykuc2Nyb2xsVG9wKCk7XG5cbiAgICAgICAgICAgIGlmIChzY3JvbGxIZWlnaHQgPiBoZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBlbGVtLmFkZENsYXNzKCdmaXhlZCcpO1xuICAgICAgICAgICAgICAgIGVsZW0uY3NzKCd0b3AnLCBzY3JvbGxIZWlnaHQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGVtLnJlbW92ZUNsYXNzKCdmaXhlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xufSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmRpcmVjdGl2ZSgnbmV3c1N0b3BQcm9wYWdhdGlvbicsIGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50KSB7XG4gICAgICAgICAgICBlbGVtZW50LmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59KTsiLCIvKipcbiAqIG93bkNsb3VkIC0gTmV3c1xuICpcbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIG9yXG4gKiBsYXRlci4gU2VlIHRoZSBDT1BZSU5HIGZpbGUuXG4gKlxuICogQGF1dGhvciBCZXJuaGFyZCBQb3NzZWx0IDxkZXZAYmVybmhhcmQtcG9zc2VsdC5jb20+XG4gKiBAY29weXJpZ2h0IEJlcm5oYXJkIFBvc3NlbHQgMjAxNFxuICovXG5hcHAuZGlyZWN0aXZlKCduZXdzVGltZW91dCcsIFtcIiR0aW1lb3V0XCIsIFwiJHJvb3RTY29wZVwiLCBmdW5jdGlvbiAoJHRpbWVvdXQsICRyb290U2NvcGUpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgJ25ld3NUaW1lb3V0JzogJyYnXG4gICAgICAgIH0sXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIGRlc3Ryb3llZCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIHNlY29uZHMgPSA3O1xuICAgICAgICAgICAgdmFyIHRpbWVyID0gJHRpbWVvdXQoc2NvcGUubmV3c1RpbWVvdXQsIHNlY29uZHMgKiAxMDAwKTtcblxuICAgICAgICAgICAgLy8gcmVtb3ZlIHRpbWVvdXQgaWYgZWxlbWVudCBpcyBiZWluZyByZW1vdmVkIGJ5XG4gICAgICAgICAgICAvLyBmb3IgaW5zdGFuY2UgY2xpY2tpbmcgb24gdGhlIHggYnV0dG9uXG4gICAgICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGRlc3Ryb3llZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgJHRpbWVvdXQuY2FuY2VsKHRpbWVyKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBhbHNvIGRlbGV0ZSB0aGUgZW50cnkgaWYgdW5kbyBpcyBpZ25vcmVkIGFuZCB0aGUgdXJsXG4gICAgICAgICAgICAvLyBpcyBjaGFuZ2VkXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRvbignJGxvY2F0aW9uQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy8gJGxvY2F0aW9uQ2hhbmdlU3RhcnQgdHJpZ2dlcnMgdHdpY2UgYmVjYXVzZSBvZiB0aGUgdHJhaWxpbmdcbiAgICAgICAgICAgICAgICAvLyBzbGFzaCBvbiB0aGUgbGluayB3aGljaCBpcyBraW5kYSBhIGhhY2sgdG8gcmVsb2FkIHRoZSByb3V0ZVxuICAgICAgICAgICAgICAgIC8vIGlmIHlvdSBjbGljayBvbiB0aGUgbGluayB3aGVuIHRoZSByb3V0ZSBpcyB0aGUgc2FtZVxuICAgICAgICAgICAgICAgICR0aW1lb3V0LmNhbmNlbCh0aW1lcik7XG4gICAgICAgICAgICAgICAgaWYgKCFkZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVzdHJveWVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUubmV3c1RpbWVvdXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59XSk7IiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmRpcmVjdGl2ZSgnbmV3c1RpdGxlVW5yZWFkQ291bnQnLCBbXCIkd2luZG93XCIsIGZ1bmN0aW9uICgkd2luZG93KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGJhc2VUaXRsZSA9ICR3aW5kb3cuZG9jdW1lbnQudGl0bGU7XG4gICAgdmFyIHRpdGxlcyA9IGJhc2VUaXRsZS5zcGxpdCgnLScpO1xuICAgIHZhciBhcHBOYW1lID0gdGl0bGVzWzBdIHx8ICdOZXdzJztcbiAgICB2YXIgb3duQ2xvdWROYW1lID0gdGl0bGVzWzFdIHx8ICdvd25DbG91ZCc7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgdW5yZWFkQ291bnQ6ICdAJ1xuICAgICAgICB9LFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG4gICAgICAgICAgICBhdHRycy4kb2JzZXJ2ZSgndW5yZWFkQ291bnQnLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT09ICcwJykge1xuICAgICAgICAgICAgICAgICAgICAkd2luZG93LmRvY3VtZW50LnRpdGxlID0gYXBwTmFtZSArXG4gICAgICAgICAgICAgICAgICAgICAgICAnKCcgKyB2YWx1ZSArICcpIC0gJyArIG93bkNsb3VkTmFtZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkd2luZG93LmRvY3VtZW50LnRpdGxlID0gYXBwTmFtZSArICcgLSAnICsgb3duQ2xvdWROYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxufV0pOyIsIi8qKlxuICogb3duQ2xvdWQgLSBOZXdzXG4gKlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgb3JcbiAqIGxhdGVyLiBTZWUgdGhlIENPUFlJTkcgZmlsZS5cbiAqXG4gKiBAYXV0aG9yIEJlcm5oYXJkIFBvc3NlbHQgPGRldkBiZXJuaGFyZC1wb3NzZWx0LmNvbT5cbiAqIEBjb3B5cmlnaHQgQmVybmhhcmQgUG9zc2VsdCAyMDE0XG4gKi9cbmFwcC5kaXJlY3RpdmUoJ25ld3NUb2dnbGVTaG93JywgZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgJ25ld3NUb2dnbGVTaG93JzogJ0AnXG4gICAgICAgIH0sXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbSkge1xuICAgICAgICAgICAgZWxlbS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9ICQoc2NvcGUubmV3c1RvZ2dsZVNob3cpO1xuICAgICAgICAgICAgICAgIHRhcmdldC50b2dnbGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn0pO1xuIiwiLyoqXG4gKiBvd25DbG91ZCAtIE5ld3NcbiAqXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBvclxuICogbGF0ZXIuIFNlZSB0aGUgQ09QWUlORyBmaWxlLlxuICpcbiAqIEBhdXRob3IgQmVybmhhcmQgUG9zc2VsdCA8ZGV2QGJlcm5oYXJkLXBvc3NlbHQuY29tPlxuICogQGNvcHlyaWdodCBCZXJuaGFyZCBQb3NzZWx0IDIwMTRcbiAqL1xuYXBwLmRpcmVjdGl2ZSgnbmV3c1RyaWdnZXJDbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCBlbG0sIGF0dHIpIHtcbiAgICAgICAgZWxtLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoYXR0ci5uZXdzVHJpZ2dlckNsaWNrKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG59KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
